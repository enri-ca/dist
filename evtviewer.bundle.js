!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}([function(e,t,n){var i;
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var r=[],a=Object.getPrototypeOf,s=r.slice,l=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},c=r.push,u=r.indexOf,d={},p=d.toString,h=d.hasOwnProperty,f=h.toString,g=f.call(Object),m={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},y=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var i,o,r=(n=n||y).createElement("script");if(r.text=e,t)for(i in x)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&r.setAttribute(i,o);n.head.appendChild(r).parentNode.removeChild(r)}function A(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[p.call(e)]||"object":typeof e}var _=function(e,t){return new _.fn.init(e,t)};function E(e){var t=!!e&&"length"in e&&e.length,n=A(e);return!v(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:"3.5.1",constructor:_,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(_.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},_.extend=_.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(c&&i&&(_.isPlainObject(i)||(o=Array.isArray(i)))?(n=a[t],r=o&&!Array.isArray(n)?[]:o||_.isPlainObject(n)?n:{},o=!1,a[t]=_.extend(c,r,i)):void 0!==i&&(a[t]=i));return a},_.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e))&&(!(t=a(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&f.call(n)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(E(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?_.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,a=!n;o<r;o++)!t(e[o],o)!==a&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,a=[];if(E(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&a.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&a.push(o);return l(a)},guid:1,support:m}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=r[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var S=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(e){var t,n,i,o,r,a,s,l,c,u,d,p,h,f,g,m,v,b,y,x="sizzle"+1*new Date,w=e.document,A=0,_=0,E=le(),S=le(),T=le(),C=le(),k=function(e,t){return e===t&&(d=!0),0},L={}.hasOwnProperty,I=[],D=I.pop,P=I.push,O=I.push,M=I.slice,N=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$="\\["+B+"*("+z+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+B+"*\\]",H=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",V=new RegExp(B+"+","g"),j=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),F=new RegExp("^"+B+"*,"+B+"*"),U=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp(B+"|>"),q=new RegExp(H),Q=new RegExp("^"+z+"$"),G={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ae=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(I=M.call(w.childNodes),w.childNodes),I[w.childNodes.length].nodeType}catch(e){O={apply:I.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,o){var r,s,c,u,d,f,v,b=t&&t.ownerDocument,w=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return i;if(!o&&(p(t),t=t||h,g)){if(11!==w&&(d=J.exec(e)))if(r=d[1]){if(9===w){if(!(c=t.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(b&&(c=b.getElementById(r))&&y(t,c)&&c.id===r)return i.push(c),i}else{if(d[2])return O.apply(i,t.getElementsByTagName(e)),i;if((r=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!C[e+" "]&&(!m||!m.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,b=t,1===w&&(W.test(e)||U.test(e))){for((b=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ie,oe):t.setAttribute("id",u=x)),s=(f=a(e)).length;s--;)f[s]=(u?"#"+u:":scope")+" "+ye(f[s]);v=f.join(",")}try{return O.apply(i,b.querySelectorAll(v)),i}catch(t){C(e,!0)}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(j,"$1"),t,i,o)}function le(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function ce(e){return e[x]=!0,e}function ue(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function pe(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},r=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:w;return a!=h&&9===a.nodeType&&a.documentElement?(f=(h=a).documentElement,g=!r(h),w!=h&&(o=h.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.scope=ue((function(e){return f.appendChild(e).appendChild(h.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(h.getElementsByClassName),n.getById=ue((function(e){return f.appendChild(e).id=x,!h.getElementsByName||!h.getElementsByName(x).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=K.test(h.querySelectorAll))&&(ue((function(e){var t;f.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+B+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+x+"-]").length||m.push("~="),(t=h.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+B+"*name"+B+"*="+B+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+B+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=K.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),v.push("!=",H)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(f.compareDocumentPosition),y=t||K.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==h||e.ownerDocument==w&&y(w,e)?-1:t==h||t.ownerDocument==w&&y(w,t)?1:u?N(u,e)-N(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(!o||!r)return e==h?-1:t==h?1:o?-1:r?1:u?N(u,e)-N(u,t):0;if(o===r)return pe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?pe(a[i],s[i]):a[i]==w?-1:s[i]==w?1:0},h):h},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&g&&!C[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=b.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){C(t,!0)}return se(t,h,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=h&&p(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=h&&p(e);var o=i.attrHandle[t.toLowerCase()],r=o&&L.call(i.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==r?r:n.attributes||!g?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(ie,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],o=0,r=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(k),d){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return u=null,e},o=se.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=se.selectors={cacheLength:50,createPseudo:ce,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=se.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,h,f,g=r!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(m){if(r){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&b){for(y=(h=(c=(u=(d=(p=m)[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===A&&c[1])&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[g]||(y=h=0)||f.pop();)if(1===p.nodeType&&++y&&p===t){u[e]=[A,h,y];break}}else if(b&&(y=h=(c=(u=(d=(p=t)[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===A&&c[1]),!1===y)for(;(p=++h&&p&&p[g]||(y=h=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++y||(b&&((u=(d=p[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[A,y]),p!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[x]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,r=o(e,t),a=r.length;a--;)e[i=N(e,r[a])]=!(n[i]=r[a])})):function(e){return o(e,0,n)}):o}},pseudos:{not:ce((function(e){var t=[],n=[],i=s(e.replace(j,"$1"));return i[x]?ce((function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))})):function(e,o,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return Q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:me((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=fe(t);function be(){}function ye(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function xe(e,t,n){var i=t.dir,o=t.next,r=o||i,a=n&&"parentNode"===r,s=_++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,l){var c,u,d,p=[A,s];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(u=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[r])&&c[0]===A&&c[1]===s)return p[2]=c[2];if(u[r]=p,p[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Ae(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),c&&t.push(s)));return a}function _e(e,t,n,i,o,r){return i&&!i[x]&&(i=_e(i)),o&&!o[x]&&(o=_e(o,r)),ce((function(r,a,s,l){var c,u,d,p=[],h=[],f=a.length,g=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)se(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!r&&t?g:Ae(g,p,e,s,l),v=n?o||(r?e:f||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(c=Ae(v,h),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[h[u]]=!(m[h[u]]=d));if(r){if(o||e){if(o){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);o(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=o?N(r,d):p[u])>-1&&(r[c]=!(a[c]=d))}}else v=Ae(v===a?v.splice(f,v.length):v),o?o(null,a,v,l):O.apply(a,v)}))}function Ee(e){for(var t,n,o,r=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,u=xe((function(e){return e===t}),s,!0),d=xe((function(e){return N(t,e)>-1}),s,!0),p=[function(e,n,i){var o=!a&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,o}];l<r;l++)if(n=i.relative[e[l].type])p=[xe(we(p),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[x]){for(o=++l;o<r&&!i.relative[e[o].type];o++);return _e(l>1&&we(p),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(j,"$1"),n,l<o&&Ee(e.slice(l,o)),o<r&&Ee(e=e.slice(o)),o<r&&ye(e))}p.push(n)}return we(p)}return be.prototype=i.filters=i.pseudos,i.setFilters=new be,a=se.tokenize=function(e,t){var n,o,r,a,s,l,c,u=S[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(a in n&&!(o=F.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),n=!1,(o=U.exec(s))&&(n=o.shift(),r.push({value:n,type:o[0].replace(j," ")}),s=s.slice(n.length)),i.filter)!(o=G[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),r.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):S(e,l).slice(0)},s=se.compile=function(e,t){var n,o=[],r=[],s=T[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ee(t[n]))[x]?o.push(s):r.push(s);(s=T(e,function(e,t){var n=t.length>0,o=e.length>0,r=function(r,a,s,l,u){var d,f,m,v=0,b="0",y=r&&[],x=[],w=c,_=r||o&&i.find.TAG("*",u),E=A+=null==w?1:Math.random()||.1,S=_.length;for(u&&(c=a==h||a||u);b!==S&&null!=(d=_[b]);b++){if(o&&d){for(f=0,a||d.ownerDocument==h||(p(d),s=!g);m=e[f++];)if(m(d,a||h,s)){l.push(d);break}u&&(A=E)}n&&((d=!m&&d)&&v--,r&&y.push(d))}if(v+=b,n&&b!==v){for(f=0;m=t[f++];)m(y,x,a,s);if(r){if(v>0)for(;b--;)y[b]||x[b]||(x[b]=D.call(l));x=Ae(x)}O.apply(l,x),u&&!r&&x.length>0&&v+t.length>1&&se.uniqueSort(l)}return u&&(A=E,c=w),y};return n?ce(r):r}(r,o))).selector=e}return s},l=se.select=function(e,t,n,o){var r,l,c,u,d,p="function"==typeof e&&e,h=!o&&a(e=p.selector||e);if(n=n||[],1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(r=G.needsContext.test(e)?0:l.length;r--&&(c=l[r],!i.relative[u=c.type]);)if((d=i.find[u])&&(o=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(r,1),!(e=o.length&&ye(l)))return O.apply(n,o),n;break}}return(p||s(e,h))(o,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=x.split("").sort(k).join("")===x,n.detectDuplicates=!!d,p(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(R,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(n);_.find=S,_.expr=S.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=S.uniqueSort,_.text=S.getText,_.isXMLDoc=S.isXML,_.contains=S.contains,_.escapeSelector=S.escape;var T=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&_(e).is(n))break;i.push(e)}return i},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=_.expr.match.needsContext;function L(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return v(t)?_.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?_.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?_.grep(e,(function(e){return u.call(t,e)>-1!==n})):_.filter(t,e,n)}_.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?_.find.matchesSelector(i,e)?[i]:[]:_.find.matches(e,_.grep(t,(function(e){return 1===e.nodeType})))},_.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(_(e).filter((function(){for(t=0;t<i;t++)if(_.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)_.find(e,o[t],n);return i>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?_(e):e||[],!1).length}});var P,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||P,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:O.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),I.test(i[1])&&_.isPlainObject(t))for(i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=y.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,P=_(y);var M=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,o=this.length,r=[],a="string"!=typeof e&&_(e);if(!k.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?_.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?u.call(_(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(L(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},(function(e,t){_.fn[e]=function(n,i){var o=_.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=_.filter(i,o)),this.length>1&&(N[e]||_.uniqueSort(o),M.test(e)&&o.reverse()),this.pushStack(o)}}));var B=/[^\x20\t\r\n\f]+/g;function z(e){return e}function $(e){throw e}function H(e,t,n,i){var o;try{e&&v(o=e.promise)?o.call(e).done(t).fail(n):e&&v(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(B)||[],(function(e,n){t[n]=!0})),t}(e):_.extend({},e);var t,n,i,o,r=[],a=[],s=-1,l=function(){for(o=o||e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<r.length;)!1===r[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!t&&(s=r.length-1,a.push(n)),function t(n){_.each(n,(function(n,i){v(i)?e.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==A(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return _.each(arguments,(function(e,t){for(var n;(n=_.inArray(t,r,n))>-1;)r.splice(n,1),n<=s&&s--})),this},has:function(e){return e?_.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=a=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},_.extend({Deferred:function(e){var t=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return _.Deferred((function(n){_.each(t,(function(t,i){var o=v(e[i[4]])&&e[i[4]];r[i[1]]((function(){var e=o&&o.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,o){var r=0;function a(e,t,i,o){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(e<r)){if((n=i.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,v(c)?o?c.call(n,a(r,t,z,o),a(r,t,$,o)):(r++,c.call(n,a(r,t,z,o),a(r,t,$,o),a(r,t,z,t.notifyWith))):(i!==z&&(s=void 0,l=[n]),(o||t.resolveWith)(s,l))}},u=o?c:function(){try{c()}catch(n){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(n,u.stackTrace),e+1>=r&&(i!==$&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?u():(_.Deferred.getStackHook&&(u.stackTrace=_.Deferred.getStackHook()),n.setTimeout(u))}}return _.Deferred((function(n){t[0][3].add(a(0,n,v(o)?o:z,n.notifyWith)),t[1][3].add(a(0,n,v(e)?e:z)),t[2][3].add(a(0,n,v(i)?i:$))})).promise()},promise:function(e){return null!=e?_.extend(e,o):o}},r={};return _.each(t,(function(e,n){var a=n[2],s=n[5];o[n[1]]=a.add,s&&a.add((function(){i=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),r[n[0]]=function(){return r[n[0]+"With"](this===r?void 0:this,arguments),this},r[n[0]+"With"]=a.fireWith})),o.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=s.call(arguments),r=_.Deferred(),a=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?s.call(arguments):n,--t||r.resolveWith(i,o)}};if(t<=1&&(H(e,r.done(a(n)).resolve,r.reject,!t),"pending"===r.state()||v(o[n]&&o[n].then)))return r.then();for(;n--;)H(o[n],a(n),r.reject);return r.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&V.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},_.readyException=function(e){n.setTimeout((function(){throw e}))};var j=_.Deferred();function F(){y.removeEventListener("DOMContentLoaded",F),n.removeEventListener("load",F),_.ready()}_.fn.ready=function(e){return j.then(e).catch((function(e){_.readyException(e)})),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||j.resolveWith(y,[_]))}}),_.ready.then=j.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(_.ready):(y.addEventListener("DOMContentLoaded",F),n.addEventListener("load",F));var U=function(e,t,n,i,o,r,a){var s=0,l=e.length,c=null==n;if("object"===A(n))for(s in o=!0,n)U(e,t,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,v(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(_(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):r},W=/^-ms-/,q=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function G(e){return e.replace(W,"ms-").replace(q,Q)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=_.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[G(t)]=n;else for(i in t)o[G(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in i?[t]:t.match(B)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||_.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var X=new Z,K=new Z,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return K.hasData(e)||X.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=K.get(r),1===r.nodeType&&!X.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=G(i.slice(5)),te(r,i,o[i]));X.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){K.set(this,e)})):U(this,(function(t){var n;if(r&&void 0===t)return void 0!==(n=K.get(r,e))||void 0!==(n=te(r,e))?n:void 0;this.each((function(){K.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){K.remove(this,e)}))}}),_.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=X.get(e,t),n&&(!i||Array.isArray(n)?i=X.access(e,t,_.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),i=n.length,o=n.shift(),r=_._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,(function(){_.dequeue(e,t)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:_.Callbacks("once memory").add((function(){X.remove(e,[t+"queue",n])}))})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each((function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){_.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=_.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=X.get(r[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],re=y.documentElement,ae=function(e){return _.contains(e.ownerDocument,e)},se={composed:!0};re.getRootNode&&(ae=function(e){return _.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===_.css(e,"display")};function ce(e,t,n,i){var o,r,a=20,s=i?function(){return i.cur()}:function(){return _.css(e,t,"")},l=s(),c=n&&n[3]||(_.cssNumber[t]?"":"px"),u=e.nodeType&&(_.cssNumber[t]||"px"!==c&&+l)&&ie.exec(_.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)_.style(e,t,u+c),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),u/=r;u*=2,_.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}var ue={};function de(e){var t,n=e.ownerDocument,i=e.nodeName,o=ue[i];return o||(t=n.body.appendChild(n.createElement(i)),o=_.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ue[i]=o,o)}function pe(e,t){for(var n,i,o=[],r=0,a=e.length;r<a;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=X.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&le(i)&&(o[r]=de(i))):"none"!==n&&(o[r]="none",X.set(i,"display",n)));for(r=0;r<a;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}_.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?_(this).show():_(this).hide()}))}});var he,fe,ge=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;he=y.createDocumentFragment().appendChild(y.createElement("div")),(fe=y.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),he.appendChild(fe),m.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",m.option=!!he.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&L(e,t)?_.merge([e],n):n}function xe(e,t){for(var n=0,i=e.length;n<i;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,m.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function Ae(e,t,n,i,o){for(var r,a,s,l,c,u,d=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((r=e[h])||0===r)if("object"===A(r))_.merge(p,r.nodeType?[r]:r);else if(we.test(r)){for(a=a||d.appendChild(t.createElement("div")),s=(me.exec(r)||["",""])[1].toLowerCase(),l=be[s]||be._default,a.innerHTML=l[1]+_.htmlPrefilter(r)+l[2],u=l[0];u--;)a=a.lastChild;_.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(t.createTextNode(r));for(d.textContent="",h=0;r=p[h++];)if(i&&_.inArray(r,i)>-1)o&&o.push(r);else if(c=ae(r),a=ye(d.appendChild(r),"script"),c&&xe(a),n)for(u=0;r=a[u++];)ve.test(r.type||"")&&n.push(r);return d}var _e=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Te(){return!0}function Ce(){return!1}function ke(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Le(e,t,n,i,o,r){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Le(e,s,n,i,t[s],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Ce;else if(!o)return e;return 1===r&&(a=o,(o=function(e){return _().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=_.guid++)),e.each((function(){_.event.add(this,t,o,i,n)}))}function Ie(e,t,n){n?(X.set(e,t,!1),_.event.add(e,t,{namespace:!1,handler:function(e){var i,o,r=X.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(_.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),X.set(this,t,r),i=n(this,t),this[t](),r!==(o=X.get(this,t))||i?X.set(this,t,!1):o={},r!==o)return e.stopImmediatePropagation(),e.preventDefault(),o.value}else r.length&&(X.set(this,t,{value:_.event.trigger(_.extend(r[0],_.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&_.event.add(e,t,Te)}_.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,c,u,d,p,h,f,g,m=X.get(e);if(Y(e))for(n.handler&&(n=(r=n).handler,o=r.selector),o&&_.find.matchesSelector(re,o),n.guid||(n.guid=_.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(B)||[""]).length;c--;)h=g=(s=Se.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),h&&(d=_.event.special[h]||{},h=(o?d.delegateType:d.bindType)||h,d=_.event.special[h]||{},u=_.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&_.expr.match.needsContext.test(o),namespace:f.join(".")},r),(p=l[h])||((p=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,a)||e.addEventListener&&e.addEventListener(h,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),_.event.global[h]=!0)},remove:function(e,t,n,i,o){var r,a,s,l,c,u,d,p,h,f,g,m=X.hasData(e)&&X.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(B)||[""]).length;c--;)if(h=g=(s=Se.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),h){for(d=_.event.special[h]||{},p=l[h=(i?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=p.length;r--;)u=p[r],!o&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(r,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||_.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)_.event.remove(e,h+t[c],n,i,!0);_.isEmptyObject(l)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,a,s=new Array(arguments.length),l=_.event.fix(e),c=(X.get(this,"events")||Object.create(null))[l.type]||[],u=_.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=_.event.handlers.call(this,l,c),t=0;(o=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(i=((_.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,o,r,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],a={},n=0;n<l;n++)void 0===a[o=(i=t[n]).selector+" "]&&(a[o]=i.needsContext?_(o,this).index(c)>-1:_.find(o,this,null,[c]).length),a[o]&&r.push(i);r.length&&s.push({elem:c,handlers:r})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&L(t,"input")&&Ie(t,"click",Te),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&L(t,"input")&&Ie(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&L(t,"input")&&X.get(t,"click")||L(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ee.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},(function(e,t){_.event.special[e]={setup:function(){return Ie(this,e,ke),!1},trigger:function(){return Ie(this,e),!0},delegateType:t}})),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||_.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),_.fn.extend({on:function(e,t,n,i){return Le(this,e,t,n,i)},one:function(e,t,n,i){return Le(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,_(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each((function(){_.event.remove(this,e,n,t)}))}});var De=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return L(e,"table")&&L(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var n,i,o,r,a,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(o in X.remove(t,"handle events"),s)for(n=0,i=s[o].length;n<i;n++)_.event.add(t,o,s[o][n]);K.hasData(e)&&(r=K.access(e),a=_.extend({},r),K.set(t,a))}}function ze(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function $e(e,t,n,i){t=l(t);var o,r,a,s,c,u,d=0,p=e.length,h=p-1,f=t[0],g=v(f);if(g||p>1&&"string"==typeof f&&!m.checkClone&&Pe.test(f))return e.each((function(o){var r=e.eq(o);g&&(t[0]=f.call(this,o,r.html())),$e(r,t,n,i)}));if(p&&(r=(o=Ae(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(s=(a=_.map(ye(o,"script"),Ne)).length;d<p;d++)c=o,d!==h&&(c=_.clone(c,!0,!0),s&&_.merge(a,ye(c,"script"))),n.call(e[d],c,d);if(s)for(u=a[a.length-1].ownerDocument,_.map(a,Re),d=0;d<s;d++)c=a[d],ve.test(c.type||"")&&!X.access(c,"globalEval")&&_.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?_._evalUrl&&!c.noModule&&_._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):w(c.textContent.replace(Oe,""),c,u))}return e}function He(e,t,n){for(var i,o=t?_.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||_.cleanData(ye(i)),i.parentNode&&(n&&ae(i)&&xe(ye(i,"script")),i.parentNode.removeChild(i));return e}_.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,r,a,s=e.cloneNode(!0),l=ae(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(a=ye(s),i=0,o=(r=ye(e)).length;i<o;i++)ze(r[i],a[i]);if(t)if(n)for(r=r||ye(e),a=a||ye(s),i=0,o=r.length;i<o;i++)Be(r[i],a[i]);else Be(e,s);return(a=ye(s,"script")).length>0&&xe(a,!l&&ye(e,"script")),s},cleanData:function(e){for(var t,n,i,o=_.event.special,r=0;void 0!==(n=e[r]);r++)if(Y(n)){if(t=n[X.expando]){if(t.events)for(i in t.events)o[i]?_.event.remove(n,i):_.removeEvent(n,i,t.handle);n[X.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),_.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return U(this,(function(e){return void 0===e?_.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return $e(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)}))},prepend:function(){return $e(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return _.clone(this,e,t)}))},html:function(e){return U(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!be[(me.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return $e(this,arguments,(function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ye(this)),n&&n.replaceChild(t,this))}),e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){_.fn[e]=function(e){for(var n,i=[],o=_(e),r=o.length-1,a=0;a<=r;a++)n=a===r?this:this.clone(!0),_(o[a])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var Ve=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Fe=function(e,t,n){var i,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=r[o];return i},Ue=new RegExp(oe.join("|"),"i");function We(e,t,n){var i,o,r,a,s=e.style;return(n=n||je(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ae(e)||(a=_.style(e,t)),!m.pixelBoxStyles()&&Ve.test(a)&&Ue.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);i="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),o=36===t(e.width),u.style.position="absolute",r=12===t(u.offsetWidth/3),re.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var i,o,r,a,s,l,c=y.createElement("div"),u=y.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,_.extend(m,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,i,o;return null==s&&(e=y.createElement("table"),t=y.createElement("tr"),i=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",i.style.height="9px",re.appendChild(e).appendChild(t).appendChild(i),o=n.getComputedStyle(t),s=parseInt(o.height)>3,re.removeChild(e)),s}}))}();var Qe=["Webkit","Moz","ms"],Ge=y.createElement("div").style,Ye={};function Ze(e){var t=_.cssProps[e]||Ye[e];return t||(e in Ge?e:Ye[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;n--;)if((e=Qe[n]+t)in Ge)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"};function tt(e,t,n){var i=ie.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function nt(e,t,n,i,o,r){var a="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=_.css(e,n+oe[a],!0,o)),i?("content"===n&&(l-=_.css(e,"padding"+oe[a],!0,o)),"margin"!==n&&(l-=_.css(e,"border"+oe[a]+"Width",!0,o))):(l+=_.css(e,"padding"+oe[a],!0,o),"padding"!==n?l+=_.css(e,"border"+oe[a]+"Width",!0,o):s+=_.css(e,"border"+oe[a]+"Width",!0,o));return!i&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-s-.5))||0),l}function it(e,t,n){var i=je(e),o=(!m.boxSizingReliable()||n)&&"border-box"===_.css(e,"boxSizing",!1,i),r=o,a=We(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ve.test(a)){if(!n)return a;a="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&L(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===_.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===_.css(e,"boxSizing",!1,i),(r=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+nt(e,t,n||(o?"border":"content"),r,i,a)+"px"}function ot(e,t,n,i,o){return new ot.prototype.init(e,t,n,i,o)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=G(t),l=Ke.test(t),c=e.style;if(l||(t=Ze(s)),a=_.cssHooks[t]||_.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:c[t];"string"===(r=typeof n)&&(o=ie.exec(n))&&o[1]&&(n=ce(e,t,o),r="number"),null!=n&&n==n&&("number"!==r||l||(n+=o&&o[3]||(_.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var o,r,a,s=G(t);return Ke.test(t)||(t=Ze(s)),(a=_.cssHooks[t]||_.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=We(e,t,i)),"normal"===o&&t in et&&(o=et[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),_.each(["height","width"],(function(e,t){_.cssHooks[t]={get:function(e,n,i){if(n)return!Xe.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?it(e,t,i):Fe(e,Je,(function(){return it(e,t,i)}))},set:function(e,n,i){var o,r=je(e),a=!m.scrollboxSize()&&"absolute"===r.position,s=(a||i)&&"border-box"===_.css(e,"boxSizing",!1,r),l=i?nt(e,t,i,s,r):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-nt(e,t,"border",!1,r)-.5)),l&&(o=ie.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),tt(0,n,l)}}})),_.cssHooks.marginLeft=qe(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),_.each({margin:"",padding:"",border:"Width"},(function(e,t){_.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+oe[i]+t]=r[i]||r[i-2]||r[0];return o}},"margin"!==e&&(_.cssHooks[e+t].set=tt)})),_.fn.extend({css:function(e,t){return U(this,(function(e,t,n){var i,o,r={},a=0;if(Array.isArray(t)){for(i=je(e),o=t.length;a<o;a++)r[t[a]]=_.css(e,t[a],!1,i);return r}return void 0!==n?_.style(e,t,n):_.css(e,t)}),e,t,arguments.length>1)}}),_.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(_.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||!_.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=ot.prototype.init,_.fx.step={};var rt,at,st=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function ct(){at&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ct):n.setTimeout(ct,_.fx.interval),_.fx.tick())}function ut(){return n.setTimeout((function(){rt=void 0})),rt=Date.now()}function dt(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=oe[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function pt(e,t,n){for(var i,o=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,t,e))return i}function ht(e,t,n){var i,o,r=0,a=ht.prefilters.length,s=_.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=rt||ut(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),r=0,a=c.tweens.length;r<a;r++)c.tweens[r].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var i=_.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,o,r,a;for(n in e)if(o=t[i=G(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(a=_.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(u,c.opts.specialEasing);r<a;r++)if(i=ht.prefilters[r].call(c,e,u,c.opts))return v(i.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return _.map(u,pt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(B);for(var n,i=0,o=e.length;i<o;i++)n=e[i],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,r,a,s,l,c,u,d="width"in t||"height"in t,p=this,h={},f=e.style,g=e.nodeType&&le(e),m=X.get(e,"fxshow");for(i in n.queue||(null==(a=_._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always((function(){p.always((function(){a.unqueued--,_.queue(e,"fx").length||a.empty.fire()}))}))),t)if(o=t[i],st.test(o)){if(delete t[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}h[i]=m&&m[i]||_.style(e,i)}if((l=!_.isEmptyObject(t))||!_.isEmptyObject(h))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=X.get(e,"display")),"none"===(u=_.css(e,"display"))&&(c?u=c:(pe([e],!0),c=e.style.display||c,u=_.css(e,"display"),pe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===_.css(e,"float")&&(l||(p.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,h)l||(m?"hidden"in m&&(g=m.hidden):m=X.access(e,"fxshow",{display:c}),r&&(m.hidden=!g),g&&pe([e],!0),p.done((function(){for(i in g||pe([e]),X.remove(e,"fxshow"),h)_.style(e,i,h[i])}))),l=pt(g?m[i]:0,i,p),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),_.speed=function(e,t,n){var i=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return _.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in _.fx.speeds?i.duration=_.fx.speeds[i.duration]:i.duration=_.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&_.dequeue(this,i.queue)},i},_.fn.extend({fadeTo:function(e,t,n,i){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=_.isEmptyObject(e),r=_.speed(t,n,i),a=function(){var t=ht(this,_.extend({},e),r);(o||X.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",r=_.timers,a=X.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&lt.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||_.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=X.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=_.timers,a=i?i.length:0;for(n.finish=!0,_.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),_.each(["toggle","show","hide"],(function(e,t){var n=_.fn[t];_.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(dt(t,!0),e,i,o)}})),_.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){_.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),rt=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){at||(at=!0,ct())},_.fx.stop=function(){at=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var o=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(o)}}))},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var ft,gt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return U(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){_.removeAttr(this,e)}))}}),_.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?_.prop(e,t,n):(1===r&&_.isXMLDoc(e)||(o=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=_.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&L(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(B);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=gt[t]||_.find.attr;gt[t]=function(e,t,i){var o,r,a=t.toLowerCase();return i||(r=gt[a],gt[a]=o,o=null!=n(e,t,i)?a:null,gt[a]=r),o}}));var mt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function bt(e){return(e.match(B)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}_.fn.extend({prop:function(e,t){return U(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[_.propFix[e]||e]}))}}),_.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&_.isXMLDoc(e)||(t=_.propFix[t]||t,o=_.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){_.propFix[this.toLowerCase()]=this})),_.fn.extend({addClass:function(e){var t,n,i,o,r,a,s,l=0;if(v(e))return this.each((function(t){_(this).addClass(e.call(this,t,yt(this)))}));if((t=xt(e)).length)for(;n=this[l++];)if(o=yt(n),i=1===n.nodeType&&" "+bt(o)+" "){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(s=bt(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,o,r,a,s,l=0;if(v(e))return this.each((function(t){_(this).removeClass(e.call(this,t,yt(this)))}));if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)for(;n=this[l++];)if(o=yt(n),i=1===n.nodeType&&" "+bt(o)+" "){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(s=bt(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):v(e)?this.each((function(n){_(this).toggleClass(e.call(this,n,yt(this),t),t)})):this.each((function(){var t,o,r,a;if(i)for(o=0,r=_(this),a=xt(e);t=a[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+bt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var wt=/\r/g;_.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=v(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,_(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=_.map(o,(function(e){return null==e?"":e+""}))),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=_.valHooks[o.type]||_.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(wt,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:bt(_.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?r+1:o.length;for(i=r<0?l:a?r:0;i<l;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!L(n.parentNode,"optgroup"))){if(t=_(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=_.makeArray(t),a=o.length;a--;)((i=o[a]).selected=_.inArray(_.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),_.each(["radio","checkbox"],(function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},m.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in n;var At=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(e,t,i,o){var r,a,s,l,c,u,d,p,f=[i||y],g=h.call(e,"type")?e.type:e,m=h.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=i=i||y,3!==i.nodeType&&8!==i.nodeType&&!At.test(g+_.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[_.expando]?e:new _.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:_.makeArray(t,[e]),d=_.event.special[g]||{},o||!d.trigger||!1!==d.trigger.apply(i,t))){if(!o&&!d.noBubble&&!b(i)){for(l=d.delegateType||g,At.test(l+g)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(i.ownerDocument||y)&&f.push(s.defaultView||s.parentWindow||n)}for(r=0;(a=f[r++])&&!e.isPropagationStopped();)p=a,e.type=r>1?l:d.bindType||g,(u=(X.get(a,"events")||Object.create(null))[e.type]&&X.get(a,"handle"))&&u.apply(a,t),(u=c&&a[c])&&u.apply&&Y(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Y(i)||c&&v(i[g])&&!b(i)&&((s=i[c])&&(i[c]=null),_.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,_t),i[g](),e.isPropagationStopped()&&p.removeEventListener(g,_t),_.event.triggered=void 0,s&&(i[c]=s)),e.result}},simulate:function(e,t,n){var i=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(i,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each((function(){_.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),m.focusin||_.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,o=X.access(i,t);o||i.addEventListener(e,n,!0),X.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=X.access(i,t)-1;o?X.access(i,t,o):(i.removeEventListener(e,n,!0),X.remove(i,t))}}}));var Et=n.location,St={guid:Date.now()},Tt=/\?/;_.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),t};var Ct=/\[\]$/,kt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,i){var o;if(Array.isArray(t))_.each(t,(function(t,o){n||Ct.test(e)?i(e,o):Dt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==A(t))i(e,t);else for(o in t)Dt(e+"["+o+"]",t[o],n,i)}_.param=function(e,t){var n,i=[],o=function(e,t){var n=v(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,(function(){o(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,o);return i.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&It.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,(function(e){return{name:t.name,value:e.replace(kt,"\r\n")}})):{name:t.name,value:n.replace(kt,"\r\n")}})).get()}});var Pt=/%20/g,Ot=/#.*$/,Mt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Bt=/^\/\//,zt={},$t={},Ht="*/".concat("*"),Vt=y.createElement("a");function jt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(B)||[];if(v(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Ft(e,t,n,i){var o={},r=e===$t;function a(s){var l;return o[s]=!0,_.each(e[s]||[],(function(e,s){var c=s(t,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Ut(e,t){var n,i,o=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&_.extend(!0,e,i),e}Vt.href=Et.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,_.ajaxSettings),t):Ut(_.ajaxSettings,e)},ajaxPrefilter:jt(zt),ajaxTransport:jt($t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,r,a,s,l,c,u,d,p,h=_.ajaxSetup({},t),f=h.context||h,g=h.context&&(f.nodeType||f.jquery)?_(f):_.event,m=_.Deferred(),v=_.Callbacks("once memory"),b=h.statusCode||{},x={},w={},A="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Nt.exec(r);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||A;return i&&i.abort(t),S(0,t),this}};if(m.promise(E),h.url=((e||h.url||Et.href)+"").replace(Bt,Et.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(B)||[""],null==h.crossDomain){l=y.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Vt.protocol+"//"+Vt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=_.param(h.data,h.traditional)),Ft(zt,h,t,E),c)return E;for(d in(u=_.event&&h.global)&&0==_.active++&&_.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Rt.test(h.type),o=h.url.replace(Ot,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Pt,"+")):(p=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(Tt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Mt,"$1"),p=(Tt.test(o)?"&":"?")+"_="+St.guid+++p),h.url=o+p),h.ifModified&&(_.lastModified[o]&&E.setRequestHeader("If-Modified-Since",_.lastModified[o]),_.etag[o]&&E.setRequestHeader("If-None-Match",_.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ht+"; q=0.01":""):h.accepts["*"]),h.headers)E.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(f,E,h)||c))return E.abort();if(A="abort",v.add(h.complete),E.done(h.success),E.fail(h.error),i=Ft($t,h,t,E)){if(E.readyState=1,u&&g.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(s=n.setTimeout((function(){E.abort("timeout")}),h.timeout));try{c=!1,i.send(x,S)}catch(e){if(c)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,a,l){var d,p,y,x,w,A=t;c||(c=!0,s&&n.clearTimeout(s),i=void 0,r=l||"",E.readyState=e>0?4:0,d=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var i,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),n[r]}(h,E,a)),!d&&_.inArray("script",h.dataTypes)>-1&&(h.converters["text script"]=function(){}),x=function(e,t,n,i){var o,r,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if((s=o.split(" "))[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(h,x,E,d),d?(h.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(_.lastModified[o]=w),(w=E.getResponseHeader("etag"))&&(_.etag[o]=w)),204===e||"HEAD"===h.type?A="nocontent":304===e?A="notmodified":(A=x.state,p=x.data,d=!(y=x.error))):(y=A,!e&&A||(A="error",e<0&&(e=0))),E.status=e,E.statusText=(t||A)+"",d?m.resolveWith(f,[p,A,E]):m.rejectWith(f,[E,A,y]),E.statusCode(b),b=void 0,u&&g.trigger(d?"ajaxSuccess":"ajaxError",[E,h,d?p:y]),v.fireWith(f,[E,A]),u&&(g.trigger("ajaxComplete",[E,h]),--_.active||_.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],(function(e,t){_[t]=function(e,n,i,o){return v(n)&&(o=o||i,i=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:o,data:n,success:i},_.isPlainObject(e)&&e))}})),_.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),_._evalUrl=function(e,t,n){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){_.globalEval(e,t,n)}})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){_(this).wrapInner(e.call(this,t))})):this.each((function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){_(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){_(this).replaceWith(this.childNodes)})),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},qt=_.ajaxSettings.xhr();m.cors=!!qt&&"withCredentials"in qt,m.ajax=qt=!!qt,_.ajaxTransport((function(e){var t,i;if(m.cors||qt&&!e.crossDomain)return{send:function(o,r){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Wt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),_.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),_.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=_("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Qt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||_.expando+"_"+St.guid++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",(function(e,t,i){var o,r,a,s=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Yt,"$1"+o):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||_.error(o+" was not called"),a[0]},e.dataTypes[0]="json",r=n[o],n[o]=function(){a=arguments},i.always((function(){void 0===r?_(n).removeProp(o):n[o]=r,e[o]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(o)),a&&v(r)&&r(a[0]),a=r=void 0})),"script"})),m.createHTMLDocument=((Qt=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),_.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((i=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(i)):t=y),r=!n&&[],(o=I.exec(e))?[t.createElement(o[1])]:(o=Ae([e],t,r),r&&r.length&&_(r).remove(),_.merge([],o.childNodes)));var i,o,r},_.fn.load=function(e,t,n){var i,o,r,a=this,s=e.indexOf(" ");return s>-1&&(i=bt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&_.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){r=arguments,a.html(i?_("<div>").append(_.parseHTML(e)).find(i):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,r||[e.responseText,t,e])}))}),this},_.expr.pseudos.animated=function(e){return _.grep(_.timers,(function(t){return e===t.elem})).length},_.offset={setOffset:function(e,t,n){var i,o,r,a,s,l,c=_.css(e,"position"),u=_(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),r=_.css(e,"top"),l=_.css(e,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(a=(i=u.position()).top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),v(t)&&(t=t.call(e,n,_.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),u.css(d))}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){_.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===_.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),o.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-_.css(i,"marginTop",!0),left:t.left-o.left-_.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||re}))}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;_.fn[e]=function(i){return U(this,(function(e,i,o){var r;if(b(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o}),e,i,arguments.length)}})),_.each(["top","left"],(function(e,t){_.cssHooks[t]=qe(m.pixelPosition,(function(e,n){if(n)return n=We(e,t),Ve.test(n)?_(e).position()[t]+"px":n}))})),_.each({Height:"height",Width:"width"},(function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){_.fn[i]=function(o,r){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===r?"margin":"border");return U(this,(function(t,n,o){var r;return b(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?_.css(t,n,s):_.style(t,n,o,s)}),t,a?o:void 0,a)}}))})),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){_.fn[t]=function(e){return this.on(t,e)}})),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return i=s.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||_.guid++,o},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=L,_.isFunction=v,_.isWindow=b,_.camelCase=G,_.type=A,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},_.trim=function(e){return null==e?"":(e+"").replace(Zt,"")},void 0===(i=function(){return _}.apply(t,[]))||(e.exports=i);var Xt=n.jQuery,Kt=n.$;return _.noConflict=function(e){return n.$===_&&(n.$=Kt),e&&n.jQuery===_&&(n.jQuery=Xt),_},void 0===o&&(n.jQuery=n.$=_),_}))},function(e,t,n){var i,o,r;o=[n(0)],void 0===(r="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(r).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=s.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),c=null,u=0,d=[],p=n(53);function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(y(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(y(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return b(t,e.attrs),g(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,o,r;if(t.transform&&e.css){if(!(r="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var a=u++;n=c||(c=v(t)),i=A.bind(null,n,a,!1),o=A.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),g(e,t),t}(t),i=E.bind(null,n,t),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),i=_.bind(null,n),o=function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return h(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&h(f(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var x,w=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function A(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function _(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function E(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=p(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{(i=e._data(o,"events"))&&i.remove&&e(o).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var o,r,a,s={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(i,(function(t,i){e.isFunction(i)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}():s[t]=i})),r.prototype=e.widget.extend(a,{widgetEventPrefix:o&&a.widgetEventPrefix||t},s,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,r,n._proto)})),delete o._childConstructors):n._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),a=0,s=r.length;a<s;a++)for(n in r[a])o=r[a][n],r[a].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var a="string"==typeof r,s=i.call(arguments,1),l=this;return a?this.length||"instance"!==r?this.each((function(){var n,i=e.data(this,o);return"instance"===r?(l=i,!1):i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):l=void 0:(s.length&&(r=e.widget.extend.apply(null,[r].concat(s))),this.each((function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(o=a[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function o(o,r){var a,s;for(s=0;s<o.length;s++)a=i.classesElementLookup[o[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),i.classesElementLookup[o[s]]=a,n.push(o[s]),r&&t.classes[o[s]]&&n.push(t.classes[o[s]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(i,o){-1!==e.inArray(t.target,o)&&(n.classesElementLookup[i]=e(o.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,r={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,(function(i,a){function s(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?r[a]:a).apply(r,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,s):n.on(c,s)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var o,r,a=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){var a;"string"==typeof o&&(o={effect:o});var s=o?!0===o||"number"==typeof o?n:o.effect||n:t;"number"==typeof(o=o||{})&&(o={duration:o}),a=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),a&&e.effects&&e.effects.effect[s]?i[t](o):s!==t&&i[s]?i[s](o.duration,o.easing,r):i.queue((function(n){e(this)[t](),r&&r.call(i[0]),n()}))}})),e.widget})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){var t,n=e;return e.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(e,t){var n,i=/^([\-+])=\s*(\d+\.?\d*)/,o=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],r=e.Color=function(t,n,i,o){return new e.Color.fn.parse(t,n,i,o)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=r.support={},c=e("<p>")[0],u=e.each;function d(e,t,n){var i=s[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function p(t){var i=r(),s=i._rgba=[];return t=t.toLowerCase(),u(o,(function(e,n){var o,r=n.re.exec(t),l=r&&n.parse(r),c=n.space||"rgba";if(l)return o=i[c](l),i[a[c].cache]=o[a[c].cache],s=i._rgba=o._rgba,!1})),s.length?("0,0,0,0"===s.join()&&e.extend(s,n.transparent),i):n[t]}function h(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}c.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=c.style.backgroundColor.indexOf("rgba")>-1,u(a,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),r.fn=e.extend(r.prototype,{parse:function(t,i,o,s){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(i),i=void 0);var l=this,c=e.type(t),h=this._rgba=[];return void 0!==i&&(t=[t,i,o,s],c="array"),"string"===c?this.parse(p(t)||n._default):"array"===c?(u(a.rgba.props,(function(e,n){h[n.idx]=d(t[n.idx],n)})),this):"object"===c?(u(a,t instanceof r?function(e,n){t[n.cache]&&(l[n.cache]=t[n.cache].slice())}:function(n,i){var o=i.cache;u(i.props,(function(e,n){if(!l[o]&&i.to){if("alpha"===e||null==t[e])return;l[o]=i.to(l._rgba)}l[o][n.idx]=d(t[e],n,!0)})),l[o]&&e.inArray(null,l[o].slice(0,3))<0&&(l[o][3]=1,i.from&&(l._rgba=i.from(l[o])))}),this):void 0},is:function(e){var t=r(e),n=!0,i=this;return u(a,(function(e,o){var r,a=t[o.cache];return a&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],u(o.props,(function(e,t){if(null!=a[t.idx])return n=a[t.idx]===r[t.idx]}))),n})),n},_space:function(){var e=[],t=this;return u(a,(function(n,i){t[i.cache]&&e.push(n)})),e.pop()},transition:function(e,t){var n=r(e),i=n._space(),o=a[i],l=0===this.alpha()?r("transparent"):this,c=l[o.cache]||o.to(l._rgba),p=c.slice();return n=n[o.cache],u(o.props,(function(e,i){var o=i.idx,r=c[o],a=n[o],l=s[i.type]||{};null!==a&&(null===r?p[o]=a:(l.mod&&(a-r>l.mod/2?r+=l.mod:r-a>l.mod/2&&(r-=l.mod)),p[o]=d((a-r)*t+r,i)))})),this[i](p)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=r(t)._rgba;return r(e.map(n,(function(e,t){return(1-i)*o[t]+i*e})))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),r.fn.parse.prototype=r.fn,a.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,o=e[1]/255,r=e[2]/255,a=e[3],s=Math.max(i,o,r),l=Math.min(i,o,r),c=s-l,u=s+l,d=.5*u;return t=l===s?0:i===s?60*(o-r)/c+360:o===s?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:d<=.5?c/u:c/(2-u),[Math.round(t)%360,n,d,null==a?1:a]},a.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],r=i<=.5?i*(1+n):i+n-i*n,a=2*i-r;return[Math.round(255*h(a,r,t+1/3)),Math.round(255*h(a,r,t)),Math.round(255*h(a,r,t-1/3)),o]},u(a,(function(t,n){var o=n.props,a=n.cache,s=n.to,l=n.from;r.fn[t]=function(t){if(s&&!this[a]&&(this[a]=s(this._rgba)),void 0===t)return this[a].slice();var n,i=e.type(t),c="array"===i||"object"===i?t:arguments,p=this[a].slice();return u(o,(function(e,t){var n=c["object"===i?e:t.idx];null==n&&(n=p[t.idx]),p[t.idx]=d(n,t)})),l?((n=r(l(p)))[a]=p,n):r(p)},u(o,(function(n,o){r.fn[n]||(r.fn[n]=function(r){var a,s=e.type(r),l="alpha"===n?this._hsla?"hsla":"rgba":t,c=this[l](),u=c[o.idx];return"undefined"===s?u:("function"===s&&(r=r.call(this,u),s=e.type(r)),null==r&&o.empty?this:("string"===s&&(a=i.exec(r))&&(r=u+parseFloat(a[2])*("+"===a[1]?1:-1)),c[o.idx]=r,this[l](c)))})}))})),r.hook=function(t){var n=t.split(" ");u(n,(function(t,n){e.cssHooks[n]={set:function(t,i){var o,a,s="";if("transparent"!==i&&("string"!==e.type(i)||(o=p(i)))){if(i=r(o||i),!l.rgba&&1!==i._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(e){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(e){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=r(t.elem,n),t.end=r(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}}))},r.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return u(["Top","Right","Bottom","Left"],(function(n,i){t["border"+i+"Color"]=e})),t}},n=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){var t,i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function r(t){var n,i,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)"string"==typeof o[n=o[i]]&&(r[e.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(n.style(e.elem,i,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,n,a,s){var l=e.speed(n,a,s);return this.queue((function(){var n,a=e(this),s=a.attr("class")||"",c=l.children?a.find("*").addBack():a;c=c.map((function(){return{el:e(this),start:r(this)}})),(n=function(){e.each(i,(function(e,n){t[n]&&a[n+"Class"](t[n])}))})(),c=c.map((function(){return this.end=r(this.el[0]),this.diff=function(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||!e.fx.step[i]&&isNaN(parseFloat(r))||(a[i]=r));return a}(this.start,this.end),this})),a.attr("class",s),c=c.map((function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()})),e.when.apply(e,c.get()).done((function(){n(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(a[0])}))}))},e.fn.extend({addClass:(t=e.fn.addClass,function(n,i,o,r){return i?e.effects.animateClass.call(this,{add:n},i,o,r):t.apply(this,arguments)}),removeClass:function(t){return function(n,i,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,o,r,a){return"boolean"==typeof i||void 0===i?o?e.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,o,r)}}(e.fn.toggleClass),switchClass:function(t,n,i,o,r){return e.effects.animateClass.call(this,{add:n,remove:t},i,o,r)}})}(),function(){var t;function n(t,n,i,o){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(o=i,i=n,n={}),e.isFunction(i)&&(o=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=o||n.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]||!!e.isFunction(t)||"object"==typeof t&&!t.effect}function o(e,t){var n=t.outerWidth(),i=t.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=(t=e.expr.filters.animated,function(n){return!!e(n).data("ui-effects-animated")||t(n)})),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var n=0,i=t.length;n<i;n++)null!==t[n]&&e.data("ui-effects-"+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n,i=0,o=t.length;i<o;i++)null!==t[i]&&(n=e.data("ui-effects-"+t[i]),e.css(t[i],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).trigger("focus"),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,n,i){return i||(i=n,n="effect"),e.effects.effect[t]=i,e.effects.effect[t].mode=n,i},scaledDimensions:function(e,t,n){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(t||100)/100:1,o="vertical"!==n?(t||100)/100:1;return{height:e.height()*o,width:e.width()*i,outerHeight:e.outerHeight()*o,outerWidth:e.outerWidth()*i}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var i=e.queue();t>1&&i.splice.apply(i,[1,0].concat(i.splice(t,n))),e.dequeue()},saveStyle:function(e){e.data("ui-effects-style",e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data("ui-effects-style")||"",e.removeData("ui-effects-style")},mode:function(e,t){var n=e.is(":hidden");return"toggle"===t&&(t=n?"show":"hide"),(n?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createPlaceholder:function(t){var n,i=t.css("position"),o=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data("ui-effects-placeholder",n)),t.css({position:i,left:o.left,top:o.top}),n},removePlaceholder:function(e){var t="ui-effects-placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,n,i,o){return o=o||{},e.each(n,(function(e,n){var r=t.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])})),o}}),e.fn.extend({effect:function(){var t=n.apply(this,arguments),i=e.effects.effect[t.effect],o=i.mode,r=t.queue,a=r||"fx",s=t.complete,l=t.mode,c=[],u=function(t){var n=e(this),i=e.effects.mode(n,l)||o;n.data("ui-effects-animated",!0),c.push(i),o&&("show"===i||i===o&&"hide"===i)&&n.show(),o&&"none"===i||e.effects.saveStyle(n),e.isFunction(t)&&t()};if(e.fx.off||!i)return l?this[l](t.duration,s):this.each((function(){s&&s.call(this)}));function d(n){var r=e(this);function a(){e.isFunction(s)&&s.call(r[0]),e.isFunction(n)&&n()}t.mode=c.shift(),!1===e.uiBackCompat||o?"none"===t.mode?(r[l](),a()):i.call(r[0],t,(function(){r.removeData("ui-effects-animated"),e.effects.cleanUp(r),"hide"===t.mode&&r.hide(),a()})):(r.is(":hidden")?"hide"===l:"show"===l)?(r[l](),a()):i.call(r[0],t,a)}return!1===r?this.each(u).each(d):this.queue(a,u).queue(a,d)},show:function(e){return function(t){if(i(t))return e.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(t){if(i(t))return e.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(t){if(i(t)||"boolean"==typeof t)return e.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],(function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])})),i},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):o(this.css("clip"),this)},transfer:function(t,n){var i=e(this),o=e(t.to),r="fixed"===o.css("position"),a=e("body"),s=r?a.scrollTop():0,l=r?a.scrollLeft():0,c=o.offset(),u={top:c.top-s,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=i.offset(),p=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:d.top-s,left:d.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,(function(){p.remove(),e.isFunction(n)&&n()}))}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=o(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),t={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,n){t[n]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(-2*e+2)/2}})),e.effects})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(27),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++t)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}});var t})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return function(){var t,n=Math.max,i=Math.abs,o=/left|center|right/,r=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function d(t,n){return parseInt(e.css(t,n),10)||0}function p(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),n=r.offsetWidth,o.css("overflow","scroll"),n===(i=r.offsetWidth)&&(i=o[0].clientWidth),o.remove(),t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:i||o?{left:0,top:0}:e(t).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,h,f,g,m,v,b=e(t.of),y=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(y),w=(t.collision||"flip").split(" "),A={};return v=p(b),b[0].preventDefault&&(t.at="left top"),h=v.width,f=v.height,g=v.offset,m=e.extend({},g),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=o.test(i[0])?i.concat(["center"]):r.test(i[0])?["center"].concat(i):["center","center"]),i[0]=o.test(i[0])?i[0]:"center",i[1]=r.test(i[1])?i[1]:"center",e=a.exec(i[0]),n=a.exec(i[1]),A[this]=[e?e[0]:0,n?n[0]:0],t[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?m.left+=h:"center"===t.at[0]&&(m.left+=h/2),"bottom"===t.at[1]?m.top+=f:"center"===t.at[1]&&(m.top+=f/2),l=u(A.at,h,f),m.left+=l[0],m.top+=l[1],this.each((function(){var o,r,a=e(this),s=a.outerWidth(),c=a.outerHeight(),p=d(this,"marginLeft"),v=d(this,"marginTop"),_=s+p+d(this,"marginRight")+x.width,E=c+v+d(this,"marginBottom")+x.height,S=e.extend({},m),T=u(A.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?S.left-=s:"center"===t.my[0]&&(S.left-=s/2),"bottom"===t.my[1]?S.top-=c:"center"===t.my[1]&&(S.top-=c/2),S.left+=T[0],S.top+=T[1],o={marginLeft:p,marginTop:v},e.each(["left","top"],(function(n,i){e.ui.position[w[n]]&&e.ui.position[w[n]][i](S,{targetWidth:h,targetHeight:f,elemWidth:s,elemHeight:c,collisionPosition:o,collisionWidth:_,collisionHeight:E,offset:[l[0]+T[0],l[1]+T[1]],my:t.my,at:t.at,within:y,elem:a})})),t.using&&(r=function(e){var o=g.left-S.left,r=o+h-s,l=g.top-S.top,u=l+f-c,d={target:{element:b,left:g.left,top:g.top,width:h,height:f},element:{element:a,left:S.left,top:S.top,width:s,height:c},horizontal:r<0?"left":o>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};h<s&&i(o+r)<h&&(d.horizontal="center"),f<c&&i(l+u)<f&&(d.vertical="middle"),n(i(o),i(r))>n(i(l),i(u))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),a.offset(e.extend(S,{using:r}))}))},e.ui.position={fit:{left:function(e,t){var i,o=t.within,r=o.isWindow?o.scrollLeft:o.offset.left,a=o.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,c=s+t.collisionWidth-a-r;t.collisionWidth>a?l>0&&c<=0?(i=e.left+l+t.collisionWidth-a-r,e.left+=l-i):e.left=c>0&&l<=0?r:l>c?r+a-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=n(e.left-s,e.left)},top:function(e,t){var i,o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,c=s+t.collisionHeight-a-r;t.collisionHeight>a?l>0&&c<=0?(i=e.top+l+t.collisionHeight-a-r,e.top+=l-i):e.top=c>0&&l<=0?r:l>c?r+a-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=n(e.top-s,e.top)}},flip:{left:function(e,t){var n,o,r=t.within,a=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((n=e.left+p+h+f+t.collisionWidth-s-a)<0||n<i(u))&&(e.left+=p+h+f):d>0&&((o=e.left-t.collisionPosition.marginLeft+p+h+f-l)>0||i(o)<d)&&(e.left+=p+h+f)},top:function(e,t){var n,o,r=t.within,a=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,p="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];u<0?((o=e.top+p+h+f+t.collisionHeight-s-a)<0||o<i(u))&&(e.top+=p+h+f):d>0&&((n=e.top-t.collisionPosition.marginTop+p+h+f-l)>0||i(n)<d)&&(e.top+=p+h+f)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){n(24),e.exports=angular},function(e,t,n){var i,o,r;o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){var i,o,r;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.focusable=function(t,n){var i,o,r,a,s,l=t.nodeName.toLowerCase();return"area"===l?(o=(i=t.parentNode).name,!(!t.href||!o||"map"!==i.nodeName.toLowerCase())&&(r=e("img[usemap='#"+o+"']")).length>0&&r.is(":visible")):(/^(input|select|textarea|button|object)$/.test(l)?(a=!t.disabled)&&(s=e(t).closest("fieldset")[0])&&(a=!s.disabled):a="a"===l&&t.href||n,a&&e(t).is(":visible")&&function(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}(e(t)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(83),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var n=t.data("ui-form-reset-instances");e.each(n,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(12)],void 0===(r="function"==typeof(i=function(e){return e.fn.labels=function(){var t,n,i,o,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),(i=this.attr("id"))&&(r=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",o=o.add(r.find(n).addBack(n))),this.pushStack(o))}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter((function(){var t=e(this);return(!i||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&r.length?r:e(this[0].ownerDocument||document)}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(7),n(14),n(28),n(10),n(29),n(18),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(t),!this.handle||(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",t)&&n._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),o=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,r=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(i=(n=e(o.containment))[0])&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=o.containment:this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,r,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-a.grid[1]:o+a.grid[1]:o,r=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-a.grid[0]:r+a.grid[0]:r),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each((function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,o))}))},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,(function(){this.isOver?(this.isOver=0,i.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(t),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",t,o))}))},drag:function(t,n,i){e.each(i.sortables,(function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o}))),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",t),i.dropped=r.element,e.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(t),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,r=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+a.offsetHeight-t.pageY<o.scrollSensitivity?a.scrollTop=r=a.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(a.scrollTop=r=a.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+a.offsetWidth-t.pageX<o.scrollSensitivity?a.scrollLeft=r=a.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(a.scrollLeft=r=a.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(s).scrollTop()<o.scrollSensitivity?r=e(s).scrollTop(e(s).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<o.scrollSensitivity&&(r=e(s).scrollTop(e(s).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(s).scrollLeft()<o.scrollSensitivity?r=e(s).scrollLeft(e(s).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<o.scrollSensitivity&&(r=e(s).scrollLeft(e(s).scrollLeft()+o.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})}))},drag:function(t,n,i){var o,r,a,s,l,c,u,d,p,h,f=i.options,g=f.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(p=i.snapElements.length-1;p>=0;p--)c=(l=i.snapElements[p].left-i.margins.left)+i.snapElements[p].width,d=(u=i.snapElements[p].top-i.margins.top)+i.snapElements[p].height,v<l-g||m>c+g||y<u-g||b>d+g||!e.contains(i.snapElements[p].item.ownerDocument,i.snapElements[p].item)?(i.snapElements[p].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(u-y)<=g,r=Math.abs(d-b)<=g,a=Math.abs(l-v)<=g,s=Math.abs(c-m)<=g,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),h=o||r||a||s,"outer"!==f.snapMode&&(o=Math.abs(u-b)<=g,r=Math.abs(d-y)<=g,a=Math.abs(l-m)<=g,s=Math.abs(c-v)<=g,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[p].snapping&&(o||r||a||s||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=o||r||a||s||h)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,r=i.options,a=e.makeArray(e(r.stack)).sort((function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)}));a.length&&(o=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each((function(t){e(this).css("zIndex",o+t)})),this.css("zIndex",o+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}}),e.ui.draggable})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(6),n(9),n(10),n(8),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var n,i,o,r,a=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,i=this.previousFilter||"",r=!1,o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),o===i?r=!0:o=i+o,n=this._filterMenuItems(o),(n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(o=String.fromCharCode(t.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(t,n),this.previousFilter=o,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,o,r=this,a=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);r._addClass(i,"ui-menu-icon","ui-icon "+a),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);r._isDivider(t)&&r._addClass(t,"ui-menu-divider","ui-widget-content")})),o=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,o;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,r,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+s>a&&this.activeMenu.scrollTop(r+o-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-o<0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,o;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+o>0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))}))}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(31),n(32),n(6),n(4)],void 0===(r="function"==typeof(i=function(e){var t;return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,o=i?this.options.iconPosition:n,r="top"===o||"bottom"===o;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(o),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=(t=e.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){e.exports=n.p+"34cfd3c1c29aab7e0099fd50ebd2e9c5.eot"},function(e,t,n){e.exports=n.p+"60a9390592198c43de4d029af34683ee.eot"},function(e,t,n){(function(e){
/**
 * @license AngularJS v1.3.15
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,n,i){"use strict";function o(e,t){return t=t||Error,function(){var n,i,o=arguments[0],r="["+(e?e+":":"")+o+"] ",a=arguments[1],s=arguments;for(n=(n=r+a.replace(/\{\d+\}/g,(function(e){var t=+e.slice(1,-1);return t+2<s.length?Le(s[t+2]):e})))+"\nhttp://errors.angularjs.org/1.3.15/"+(e?e+"/":"")+o,i=2;i<arguments.length;i++)n=n+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(Le(arguments[i]));return new t(n)}}var r=/^\/(.+)\/([a-z]*)$/,a=function(e){return N(e)?e.toLowerCase():e},s=Object.prototype.hasOwnProperty,l=function(e){return N(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(a=function(e){return N(e)?e.replace(/[A-Z]/g,(function(e){return String.fromCharCode(32|e.charCodeAt(0))})):e},l=function(e){return N(e)?e.replace(/[a-z]/g,(function(e){return String.fromCharCode(-33&e.charCodeAt(0))})):e});var c,u,d,p,h=[].slice,f=[].splice,g=[].push,m=Object.prototype.toString,v=o("ng"),b=t.angular||(t.angular={}),y=0;function x(e){if(null==e||V(e))return!1;var t=e.length;return!(e.nodeType!==Ce||!t)||(N(e)||z(e)||0===t||"number"==typeof t&&t>0&&t-1 in e)}function w(e,t,n){var i,o;if(e)if($(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(z(e)||x(e)){var r="object"!=typeof e;for(i=0,o=e.length;i<o;i++)(r||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==w)e.forEach(t,n,e);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);return e}function A(e){return Object.keys(e).sort()}function _(e){return function(t,n){e(n,t)}}function E(){return++y}function S(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function T(e){for(var t=e.$$hashKey,n=1,i=arguments.length;n<i;n++){var o=arguments[n];if(o)for(var r=Object.keys(o),a=0,s=r.length;a<s;a++){var l=r[a];e[l]=o[l]}}return S(e,t),e}function C(e){return parseInt(e,10)}function k(e,t){return T(Object.create(e),t)}function L(){}function I(e){return e}function D(e){return function(){return e}}function P(e){return void 0===e}function O(e){return void 0!==e}function M(e){return null!==e&&"object"==typeof e}function N(e){return"string"==typeof e}function R(e){return"number"==typeof e}function B(e){return"[object Date]"===m.call(e)}c=n.documentMode,L.$inject=[],I.$inject=[];var z=Array.isArray;function $(e){return"function"==typeof e}function H(e){return"[object RegExp]"===m.call(e)}function V(e){return e&&e.window===e}function j(e){return e&&e.$evalAsync&&e.$watch}function F(e){return"boolean"==typeof e}function U(e){return e&&$(e.then)}var W=function(e){return N(e)?e.trim():e},q=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function Q(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function G(e){return a(e.nodeName||e[0]&&e[0].nodeName)}function Y(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function Z(e,t,n,i){if(V(e)||j(e))throw v("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw v("cpi","Can't copy! Source and destination are identical.");if(n=n||[],i=i||[],M(e)){var o=n.indexOf(e);if(-1!==o)return i[o];n.push(e),i.push(t)}var r;if(z(e)){t.length=0;for(var a=0;a<e.length;a++)r=Z(e[a],null,n,i),M(e[a])&&(n.push(e[a]),i.push(r)),t.push(r)}else{var s=t.$$hashKey;for(var l in z(t)?t.length=0:w(t,(function(e,n){delete t[n]})),e)e.hasOwnProperty(l)&&(r=Z(e[l],null,n,i),M(e[l])&&(n.push(e[l]),i.push(r)),t[l]=r);S(t,s)}}else if(t=e,e)if(z(e))t=Z(e,[],n,i);else if(B(e))t=new Date(e.getTime());else if(H(e))(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0])).lastIndex=e.lastIndex;else if(M(e)){var c=Object.create(Object.getPrototypeOf(e));t=Z(e,c,n,i)}return t}function X(e,t){if(z(e)){t=t||[];for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}else if(M(e))for(var o in t=t||{},e)"$"===o.charAt(0)&&"$"===o.charAt(1)||(t[o]=e[o]);return t||e}function K(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,i,o,r=typeof e;if(r==typeof t&&"object"==r){if(!z(e)){if(B(e))return!!B(t)&&K(e.getTime(),t.getTime());if(H(e))return!!H(t)&&e.toString()==t.toString();if(j(e)||j(t)||V(e)||V(t)||z(t)||B(t)||H(t))return!1;for(i in o={},e)if("$"!==i.charAt(0)&&!$(e[i])){if(!K(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o.hasOwnProperty(i)&&"$"!==i.charAt(0)&&void 0!==t[i]&&!$(t[i]))return!1;return!0}if(!z(t))return!1;if((n=e.length)==t.length){for(i=0;i<n;i++)if(!K(e[i],t[i]))return!1;return!0}}return!1}var J=function(){if(O(J.isActive_))return J.isActive_;var e=!(!n.querySelector("[ng-csp]")&&!n.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(t){e=!0}return J.isActive_=e};function ee(e,t,n){return e.concat(h.call(t,n))}function te(e,t){return h.call(e,t||0)}function ne(e,t){var n=arguments.length>2?te(arguments,2):[];return!$(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,ee(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function ie(e,t){var i=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:V(t)?i="$WINDOW":t&&n===t?i="$DOCUMENT":j(t)&&(i="$SCOPE"),i}function oe(e,t){if(void 0!==e)return R(t)||(t=t?2:null),JSON.stringify(e,ie,t)}function re(e){return N(e)?JSON.parse(e):e}function ae(e){e=u(e).clone();try{e.empty()}catch(e){}var t=u("<div>").append(e).html();try{return e[0].nodeType===ke?a(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,(function(e,t){return"<"+a(t)}))}catch(e){return a(t)}}function se(e){try{return decodeURIComponent(e)}catch(e){}}function le(e){var t,n,i={};return w((e||"").split("&"),(function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),O(n=se(t[0])))){var o=!O(t[1])||se(t[1]);s.call(i,n)?z(i[n])?i[n].push(o):i[n]=[i[n],o]:i[n]=o}})),i}function ce(e){var t=[];return w(e,(function(e,n){z(e)?w(e,(function(e){t.push(de(n,!0)+(!0===e?"":"="+de(e,!0)))})):t.push(de(n,!0)+(!0===e?"":"="+de(e,!0)))})),t.length?t.join("&"):""}function ue(e){return de(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function de(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var pe=["ng-","data-ng-","ng:","x-ng-"];function he(e,t){var n,i,o={};w(pe,(function(t){var o=t+"app";!n&&e.hasAttribute&&e.hasAttribute(o)&&(n=e,i=e.getAttribute(o))})),w(pe,(function(t){var o,r=t+"app";!n&&(o=e.querySelector("["+r.replace(":","\\:")+"]"))&&(n=o,i=o.getAttribute(r))})),n&&(o.strictDi=null!==function(e,t){var n,i,o=pe.length;for(e=u(e),i=0;i<o;++i)if(n=pe[i]+t,N(n=e.attr(n)))return n;return null}(n,"strict-di"),t(n,i?[i]:[],o))}function fe(e,i,o){M(o)||(o={});o=T({strictDi:!1},o);var r=function(){if((e=u(e)).injector()){var t=e[0]===n?"document":ae(e);throw v("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),o.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var r=At(i,o.strictDi);return r.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply((function(){t.data("$injector",i),n(t)(e)}))}]),r},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&a.test(t.name)&&(o.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!s.test(t.name))return r();t.name=t.name.replace(s,""),b.resumeBootstrap=function(e){return w(e,(function(e){i.push(e)})),r()},$(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function ge(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function me(e){var t=b.element(e).injector();if(!t)throw v("test","no injector found for element argument to getTestability");return t.get("$$testability")}var ve=/[A-Z]/g;function be(e,t){return t=t||"_",e.replace(ve,(function(e,n){return(n?t:"")+e.toLowerCase()}))}var ye,xe=!1;function we(e,t,n){if(!e)throw v("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function Ae(e,t,n){return n&&z(e)&&(e=e[e.length-1]),we($(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function _e(e,t){if("hasOwnProperty"===e)throw v("badname","hasOwnProperty is not a valid {0} name",t)}function Ee(e,t,n){if(!t)return e;for(var i,o=t.split("."),r=e,a=o.length,s=0;s<a;s++)i=o[s],e&&(e=(r=e)[i]);return!n&&$(e)?ne(r,e):e}function Se(e){var t=e[0],n=e[e.length-1],i=[t];do{if(!(t=t.nextSibling))break;i.push(t)}while(t!==n);return u(i)}function Te(){return Object.create(null)}var Ce=1,ke=3;function Le(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):void 0===e?"undefined":"string"!=typeof e?function(e){var t=[];return JSON.stringify(e,(function(e,n){if(M(n=ie(e,n))){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n}))}(e):e}var Ie={full:"1.3.15",major:1,minor:3,dot:15,codeName:"locality-filtration"};Ge.expando="ng339";var De=Ge.cache={},Pe=1,Oe=function(e,t,n){e.addEventListener(t,n,!1)},Me=function(e,t,n){e.removeEventListener(t,n,!1)};Ge._data=function(e){return this.cache[e[this.expando]]||{}};var Ne=/([\:\-\_]+(.))/g,Re=/^moz([A-Z])/,Be={mouseleave:"mouseout",mouseenter:"mouseover"},ze=o("jqLite");function $e(e){return e.replace(Ne,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(Re,"Moz$1")}var He=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ve=/<|&#?\w+;/,je=/<([\w:]+)/,Fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ue={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function We(e){return!Ve.test(e)}function qe(e){var t=e.nodeType;return t===Ce||!t||9===t}function Qe(e,t){var n,i,o,r,a=t.createDocumentFragment(),s=[];if(We(e))s.push(t.createTextNode(e));else{for(n=n||a.appendChild(t.createElement("div")),i=(je.exec(e)||["",""])[1].toLowerCase(),o=Ue[i]||Ue._default,n.innerHTML=o[1]+e.replace(Fe,"<$1></$2>")+o[2],r=o[0];r--;)n=n.lastChild;s=ee(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",w(s,(function(e){a.appendChild(e)})),a}function Ge(e){if(e instanceof Ge)return e;var t,i,o,r;if(N(e)&&(e=W(e),t=!0),!(this instanceof Ge)){if(t&&"<"!=e.charAt(0))throw ze("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ge(e)}ot(this,t?(i=e,o=o||n,(r=He.exec(i))?[o.createElement(r[1])]:(r=Qe(i,o))?r.childNodes:[]):e)}function Ye(e){return e.cloneNode(!0)}function Ze(e,t){if(t||Ke(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,o=n.length;i<o;i++)Ke(n[i])}function Xe(e,t,n,i){if(O(i))throw ze("offargs","jqLite#off() does not support the `selector` argument");var o=Je(e),r=o&&o.events,a=o&&o.handle;if(a)if(t)w(t.split(" "),(function(t){if(O(n)){var i=r[t];if(Y(i||[],n),i&&i.length>0)return}Me(e,t,a),delete r[t]}));else for(t in r)"$destroy"!==t&&Me(e,t,a),delete r[t]}function Ke(e,t){var n=e.ng339,i=n&&De[n];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Xe(e)),delete De[n],e.ng339=void 0}}function Je(e,t){var n=e.ng339,i=n&&De[n];return t&&!i&&(e.ng339=n=++Pe,i=De[n]={events:{},data:{},handle:void 0}),i}function et(e,t,n){if(qe(e)){var i=O(n),o=!i&&t&&!M(t),r=!t,a=Je(e,!o),s=a&&a.data;if(i)s[t]=n;else{if(r)return s;if(o)return s&&s[t];T(s,t)}}}function tt(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function nt(e,t){t&&e.setAttribute&&w(t.split(" "),(function(t){e.setAttribute("class",W((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+W(t)+" "," ")))}))}function it(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");w(t.split(" "),(function(e){e=W(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")})),e.setAttribute("class",W(n))}}function ot(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;i<n;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function rt(e,t){return at(e,"$"+(t||"ngController")+"Controller")}function at(e,t,n){9==e.nodeType&&(e=e.documentElement);for(var i=z(t)?t:[t];e;){for(var o=0,r=i.length;o<r;o++)if(void 0!==(n=u.data(e,i[o])))return n;e=e.parentNode||11===e.nodeType&&e.host}}function st(e){for(Ze(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function lt(e,t){t||Ze(e);var n=e.parentNode;n&&n.removeChild(e)}Ue.optgroup=Ue.option,Ue.tbody=Ue.tfoot=Ue.colgroup=Ue.caption=Ue.thead,Ue.th=Ue.td;var ct=Ge.prototype={ready:function(e){var i=!1;function o(){i||(i=!0,e())}"complete"===n.readyState?setTimeout(o):(this.on("DOMContentLoaded",o),Ge(t).on("load",o))},toString:function(){var e=[];return w(this,(function(t){e.push(""+t)})),"["+e.join(", ")+"]"},eq:function(e){return u(e>=0?this[e]:this[this.length+e])},length:0,push:g,sort:[].sort,splice:[].splice},ut={};w("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(e){ut[a(e)]=e}));var dt={};w("input,select,option,textarea,button,form,details".split(","),(function(e){dt[e]=!0}));var pt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function ht(e,t){var n=ut[t.toLowerCase()];return n&&dt[G(e)]&&n}function ft(){this.$get=function(){return T(Ge,{hasClass:function(e,t){return e.attr&&(e=e[0]),tt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),it(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),nt(e,t)}})}}function gt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"==i||"object"==i&&null!==e?e.$$hashKey=i+":"+(t||E)():i+":"+e}function mt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}w(e,this.put,this)}w({data:et,removeData:Ke},(function(e,t){Ge[t]=e})),w({data:et,inheritedData:at,scope:function(e){return u.data(e,"$scope")||at(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return u.data(e,"$isolateScope")||u.data(e,"$isolateScopeNoTemplate")},controller:rt,injector:function(e){return at(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:tt,css:function(e,t,n){if(t=$e(t),!O(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var i=a(t);if(ut[i]){if(!O(n))return e[t]||(e.attributes.getNamedItem(t)||L).specified?i:void 0;n?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(O(n))e.setAttribute(t,n);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?void 0:o}},prop:function(e,t,n){if(!O(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(P(t)){var n=e.nodeType;return n===Ce||n===ke?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(P(t)){if(e.multiple&&"select"===G(e)){var n=[];return w(e.options,(function(e){e.selected&&n.push(e.value||e.text)})),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(P(t))return e.innerHTML;Ze(e,!0),e.innerHTML=t},empty:st},(function(e,t){Ge.prototype[t]=function(t,n){var i,o,r=this.length;if(e!==st&&void 0===(2==e.length&&e!==tt&&e!==rt?t:n)){if(M(t)){for(i=0;i<r;i++)if(e===et)e(this[i],t);else for(o in t)e(this[i],o,t[o]);return this}for(var a=e.$dv,s=void 0===a?Math.min(r,1):r,l=0;l<s;l++){var c=e(this[l],t,n);a=a?a+c:c}return a}for(i=0;i<r;i++)e(this[i],t,n);return this}})),w({removeData:Ke,on:function e(t,n,i,o){if(O(o))throw ze("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(qe(t)){var r=Je(t,!0),a=r.events,s=r.handle;s||(s=r.handle=function(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var o=t[i||n.type],r=o?o.length:0;if(r){if(P(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped},r>1&&(o=X(o));for(var s=0;s<r;s++)n.isImmediatePropagationStopped()||o[s].call(e,n)}};return n.elem=e,n}(t,a));for(var l=n.indexOf(" ")>=0?n.split(" "):[n],c=l.length;c--;){var u=a[n=l[c]];u||(a[n]=[],"mouseenter"===n||"mouseleave"===n?e(t,Be[n],(function(e){var t=e.relatedTarget;t&&(t===this||this.contains(t))||s(e,n)})):"$destroy"!==n&&Oe(t,n,s),u=a[n]),u.push(i)}}},off:Xe,one:function(e,t,n){(e=u(e)).on(t,(function i(){e.off(t,n),e.off(t,i)})),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;Ze(e),w(new Ge(t),(function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t}))},children:function(e){var t=[];return w(e.childNodes,(function(e){e.nodeType===Ce&&t.push(e)})),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Ce||11===n)for(var i=0,o=(t=new Ge(t)).length;i<o;i++){var r=t[i];e.appendChild(r)}},prepend:function(e,t){if(e.nodeType===Ce){var n=e.firstChild;w(new Ge(t),(function(t){e.insertBefore(t,n)}))}},wrap:function(e,t){t=u(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:lt,detach:function(e){lt(e,!0)},after:function(e,t){for(var n=e,i=e.parentNode,o=0,r=(t=new Ge(t)).length;o<r;o++){var a=t[o];i.insertBefore(a,n.nextSibling),n=a}},addClass:it,removeClass:nt,toggleClass:function(e,t,n){t&&w(t.split(" "),(function(t){var i=n;P(i)&&(i=!tt(e,t)),(i?it:nt)(e,t)}))},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Ye,triggerHandler:function(e,t,n){var i,o,r,a=t.type||t,s=Je(e),l=s&&s.events,c=l&&l[a];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:L,type:a,target:e},t.type&&(i=T(i,t)),o=X(c),r=n?[i].concat(n):[i],w(o,(function(t){i.isImmediatePropagationStopped()||t.apply(e,r)})))}},(function(e,t){Ge.prototype[t]=function(t,n,i){for(var o,r=0,a=this.length;r<a;r++)P(o)?O(o=e(this[r],t,n,i))&&(o=u(o)):ot(o,e(this[r],t,n,i));return O(o)?o:this},Ge.prototype.bind=Ge.prototype.on,Ge.prototype.unbind=Ge.prototype.off})),mt.prototype={put:function(e,t){this[gt(e,this.nextUid)]=t},get:function(e){return this[gt(e,this.nextUid)]},remove:function(e){var t=this[e=gt(e,this.nextUid)];return delete this[e],t}};var vt=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,bt=/,/,yt=/^\s*(_?)(\S+?)\1\s*$/,xt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,wt=o("$injector");function At(e,t){t=!0===t;var n={},i=[],o=new mt([],!0),r={$provide:{provider:c(u),factory:c(h),service:c((function(e,t){return h(e,["$injector",function(e){return e.instantiate(t)}])})),value:c((function(e,t){return h(e,D(t),!1)})),constant:c((function(e,t){_e(e,"constant"),r[e]=t,s[e]=t})),decorator:function(e,t){var n=a.get(e+"Provider"),i=n.$get;n.$get=function(){var e=l.invoke(i,n);return l.invoke(t,null,{$delegate:e})}}}},a=r.$injector=f(r,(function(e,t){throw b.isString(t)&&i.push(t),wt("unpr","Unknown provider: {0}",i.join(" <- "))})),s={},l=s.$injector=f(s,(function(e,t){var n=a.get(e+"Provider",t);return l.invoke(n.$get,n,void 0,e)}));return w(function e(t){var n,i=[];return w(t,(function(t){if(!o.get(t)){o.put(t,!0);try{N(t)?(n=p(t),i=i.concat(e(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):$(t)||z(t)?i.push(a.invoke(t)):Ae(t,"module")}catch(e){throw z(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),wt("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var i=e[t],o=a.get(i[0]);o[i[1]].apply(o,i[2])}}})),i}(e),(function(e){l.invoke(e||L)})),l;function c(e){return function(t,n){if(!M(t))return e(t,n);w(t,_(e))}}function u(e,t){if(_e(e,"service"),($(t)||z(t))&&(t=a.instantiate(t)),!t.$get)throw wt("pget","Provider '{0}' must define $get factory method.",e);return r[e+"Provider"]=t}function d(e,t){return function(){var n=l.invoke(t,this);if(P(n))throw wt("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function h(e,t,n){return u(e,{$get:!1!==n?d(e,t):t})}function f(e,o){function a(t,r){if(e.hasOwnProperty(t)){if(e[t]===n)throw wt("cdep","Circular dependency found: {0}",t+" <- "+i.join(" <- "));return e[t]}try{return i.unshift(t),e[t]=n,e[t]=o(t,r)}catch(i){throw e[t]===n&&delete e[t],i}finally{i.shift()}}function s(e,n,i,o){"string"==typeof i&&(o=i,i=null);var r,s,l,c=[],u=At.$$annotate(e,t,o);for(s=0,r=u.length;s<r;s++){if("string"!=typeof(l=u[s]))throw wt("itkn","Incorrect injection token! Expected service name as string, got {0}",l);c.push(i&&i.hasOwnProperty(l)?i[l]:a(l,o))}return z(e)&&(e=e[r]),e.apply(n,c)}return{invoke:s,instantiate:function(e,t,n){var i=Object.create((z(e)?e[e.length-1]:e).prototype||null),o=s(e,i,t,n);return M(o)||$(o)?o:i},get:a,annotate:At.$$annotate,has:function(t){return r.hasOwnProperty(t+"Provider")||e.hasOwnProperty(t)}}}}function _t(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,o){var r=n.document;function a(e){if(e){e.scrollIntoView();var t=function(){var e=s.yOffset;if($(e))e=e();else if(Q(e)){var t=e[0];e="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else R(e)||(e=0);return e}();if(t){var i=e.getBoundingClientRect().top;n.scrollBy(0,i-t)}}else n.scrollTo(0,0)}function s(){var e,t,n,o=i.hash();o?(e=r.getElementById(o))?a(e):(t=r.getElementsByName(o),n=null,Array.prototype.some.call(t,(function(e){if("a"===G(e))return n=e,!0})),(e=n)?a(e):"top"===o&&a(null)):a(null)}return e&&o.$watch((function(){return i.hash()}),(function(e,n){var i,r;e===n&&""===e||(i=function(){o.$evalAsync(s)},"complete"===(r=r||t).document.readyState?r.setTimeout(i):u(r).on("load",i))})),s}]}At.$$annotate=function(e,t,n){var i,o;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw N(n)&&n||(n=e.name||function(e){var t=e.toString().replace(xt,"").match(vt);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(e)),wt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);w(e.toString().replace(xt,"").match(vt)[1].split(bt),(function(e){e.replace(yt,(function(e,t,n){i.push(n)}))}))}e.$inject=i}}else z(e)?(Ae(e[o=e.length-1],"fn"),i=e.slice(0,o)):Ae(e,"fn",!0);return i};var Et=o("$animate"),St=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var i=t+"-animation";if(t&&"."!=t.charAt(0))throw Et("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=i,e.factory(i,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){var i;function o(e,t,n){for(var i=0,o=t.length;i<o;++i){e[t[i]]=n}}function r(){return i||(i=e.defer(),t((function(){i.resolve(),i=null}))),i.promise}function a(e,t){if(b.isObject(t)){var n=T(t.from||{},t.to||{});e.css(n)}}return{animate:function(e,t,n){return a(e,{from:t,to:n}),r()},enter:function(e,t,n,i){return a(e,i),n?n.after(e):t.prepend(e),r()},leave:function(e,t){return a(e,t),e.remove(),r()},move:function(e,t,n,i){return this.enter(e,t,n,i)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=u(e),t=N(t)?t:z(t)?t.join(" "):"",w(e,(function(e){it(e,t)})),a(e,n),r()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=u(e),t=N(t)?t:z(t)?t.join(" "):"",w(e,(function(e){nt(e,t)})),a(e,n),r()},setClass:function(t,i,r,a){var s=this,l=!1,c=(t=u(t)).data("$$animateClasses");c?a&&c.options&&(c.options=b.extend(c.options||{},a)):(c={classes:{},options:a},l=!0);var d,p,h,f=c.classes;return i=z(i)?i:i.split(" "),r=z(r)?r:r.split(" "),o(f,i,!0),o(f,r,!1),l&&(c.promise=(d=function(e){var n=t.data("$$animateClasses");if(t.removeData("$$animateClasses"),n){var i=function(e,t){var n=[],i=[],o=Te();return w((e.attr("class")||"").split(/\s+/),(function(e){o[e]=!0})),w(t,(function(e,t){var r=o[t];!1===e&&r?i.push(t):!0!==e||r||n.push(t)})),n.length+i.length>0&&[n.length?n:null,i.length?i:null]}(t,n.classes);i&&s.$$setClassImmediately(t,i[0],i[1],n.options)}e()},(h=e.defer()).promise.$$cancelFn=function(){p&&p()},n.$$postDigest((function(){p=d((function(){h.resolve()}))})),h.promise),t.data("$$animateClasses",c)),c.promise},$$setClassImmediately:function(e,t,n,i){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),a(e,i),r()},enabled:L,cancel:L}}]}];function Tt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Ct(e,t,n,i){var o=this,r=t[0],a=e.location,s=e.history,l=e.setTimeout,c=e.clearTimeout,d={};o.isMock=!1;var p=0,h=[];function f(e){try{e.apply(null,te(arguments,1))}finally{if(0===--p)for(;h.length;)try{h.pop()()}catch(e){n.error(e)}}}o.$$completeOutstandingRequest=f,o.$$incOutstandingRequestCount=function(){p++},o.notifyWhenNoOutstandingRequests=function(e){w(m,(function(e){e()})),0===p?e():h.push(e)};var g,m=[];o.addPollFn=function(e){return P(g)&&function(e,t){!function n(){w(m,(function(e){e()})),g=t(n,e)}()}(100,l),m.push(e),e};var v,b,y=a.href,x=t.find("base"),A=null;C(),b=v,o.url=function(t,n,r){if(P(r)&&(r=null),a!==e.location&&(a=e.location),s!==e.history&&(s=e.history),t){var l=b===r;if(y===t&&(!i.history||l))return o;var c=y&&dn(y)===dn(t);return y=t,b=r,!i.history||c&&l?(c||(A=t),n?a.replace(t):c?a.hash=function(e){var t=e.indexOf("#");return-1===t?"":e.substr(t+1)}(t):a.href=t):(s[n?"replaceState":"pushState"](r,"",t),C(),b=v),o}return A||a.href.replace(/%27/g,"'")},o.state=function(){return v};var _=[],E=!1;function S(){C(),k()}var T=null;function C(){K(v=P(v=function(){try{return s.state}catch(e){}}())?null:v,T)&&(v=T),T=v}function k(){y===o.url()&&b===v||(y=o.url(),b=v,w(_,(function(e){e(o.url(),v)})))}o.onUrlChange=function(t){return E||(i.history&&u(e).on("popstate",S),u(e).on("hashchange",S),E=!0),_.push(t),t},o.$$checkUrlChange=k,o.baseHref=function(){var e=x.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var I={},D="",O=o.baseHref();function M(e){try{return decodeURIComponent(e)}catch(t){return e}}o.cookies=function(e,t){var i,o,a,s,l;if(!e){if(r.cookie!==D)for(o=(D=r.cookie).split("; "),I={},s=0;s<o.length;s++)(l=(a=o[s]).indexOf("="))>0&&(e=M(a.substring(0,l)),void 0===I[e]&&(I[e]=M(a.substring(l+1))));return I}void 0===t?r.cookie=encodeURIComponent(e)+"=;path="+O+";expires=Thu, 01 Jan 1970 00:00:00 GMT":N(t)&&(i=(r.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+O).length+1)>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!")},o.defer=function(e,t){var n;return p++,n=l((function(){delete d[n],f(e)}),t||0),d[n]=!0,n},o.defer.cancel=function(e){return!!d[e]&&(delete d[e],c(e),f(L),!0)}}function kt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new Ct(e,i,t,n)}]}function Lt(){this.$get=function(){var e={};function t(t,n){if(t in e)throw o("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var i=0,r=T({},n,{id:t}),a={},s=n&&n.capacity||Number.MAX_VALUE,l={},c=null,u=null;return e[t]={put:function(e,t){s<Number.MAX_VALUE&&d(l[e]||(l[e]={key:e}));if(!P(t))return e in a||i++,a[e]=t,i>s&&this.remove(u.key),t},get:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;d(t)}return a[e]},remove:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;t==c&&(c=t.p),t==u&&(u=t.n),p(t.n,t.p),delete l[e]}delete a[e],i--},removeAll:function(){a={},i=0,l={},c=u=null},destroy:function(){a=null,r=null,l=null,delete e[t]},info:function(){return T({},r,{size:i})}};function d(e){e!=c&&(u?u==e&&(u=e.n):u=e,p(e.n,e.p),p(e,c),(c=e).n=null)}function p(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}}return t.info=function(){var t={};return w(e,(function(e,n){t[n]=e.info()})),t},t.get=function(t){return e[t]},t}}function It(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var Dt=o("$compile");function Pt(e,t){var i={},o=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,r=/(([\w\-]+)(?:\:([^;]+))?;?)/,s=function(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,c=/^(on[a-z]+|formaction)$/;this.directive=function t(n,o){return _e(n,"directive"),N(n)?(we(o,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+"Directive",["$injector","$exceptionHandler",function(e,t){var o=[];return w(i[n],(function(i,r){try{var a=e.invoke(i);$(a)?a={compile:D(a)}:!a.compile&&a.link&&(a.compile=D(a.link)),a.priority=a.priority||0,a.index=r,a.name=a.name||n,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA",M(a.scope)&&(a.$$isolateBindings=(s=a.scope,l=a.name,c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,u={},w(s,(function(e,t){var n=e.match(c);if(!n)throw Dt("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",l,t,e);u[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t}})),u)),o.push(a)}catch(e){t(e)}var s,l,c,u})),o}])),i[n].push(o)):w(n,_(t)),this},this.aHrefSanitizationWhitelist=function(e){return O(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return O(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var p=!0;this.debugInfoEnabled=function(e){return O(e)?(p=e,this):p},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,t,h,f,g,m,v,b,y,x,A){var _=function(e,t){if(t){var n,i,o,r=Object.keys(t);for(n=0,i=r.length;n<i;n++)this[o=r[n]]=t[o]}else this.$attr={};this.$$element=e};function E(e,t){try{e.addClass(t)}catch(e){}}_.prototype={$normalize:Mt,$addClass:function(e){e&&e.length>0&&x.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&x.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Nt(e,t);n&&n.length&&x.addClass(this.$$element,n);var i=Nt(t,e);i&&i.length&&x.removeClass(this.$$element,i)},$set:function(e,t,n,i){var o,r=this.$$element[0],a=ht(r,e),s=function(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&pt[t]}(r,e),l=e;if(a?(this.$$element.prop(e,t),i=a):s&&(this[s]=t,l=s),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=be(e,"-")),"a"===(o=G(this.$$element))&&"href"===e||"img"===o&&"src"===e)this[e]=t=A(t,"src"===e);else if("img"===o&&"srcset"===e){for(var c="",u=W(t),d=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,p=u.split(d),f=Math.floor(p.length/2),g=0;g<f;g++){var m=2*g;c+=A(W(p[m]),!0),c+=" "+W(p[m+1])}var v=W(p[2*g]).split(/\s/);c+=A(W(v[0]),!0),2===v.length&&(c+=" "+W(v[1])),this[e]=t=c}!1!==n&&(null==t?this.$$element.removeAttr(i):this.$$element.attr(i,t));var b=this.$$observers;b&&w(b[l],(function(e){try{e(t)}catch(e){h(e)}}))},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=Te()),o=i[e]||(i[e]=[]);return o.push(t),v.$evalAsync((function(){!o.$$inter&&n.hasOwnProperty(e)&&t(n[e])})),function(){Y(o,t)}}};var S=t.startSymbol(),C=t.endSymbol(),D="{{"==S||"}}"==C?I:function(e){return e.replace(/\{\{/g,S).replace(/}}/g,C)},P=/^ngAttr[A-Z]/;return O.$$addBindingInfo=p?function(e,t){var n=e.data("$binding")||[];z(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:L,O.$$addBindingClass=p?function(e){E(e,"ng-binding")}:L,O.$$addScopeInfo=p?function(e,t,n,i){var o=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(o,t)}:L,O.$$addScopeClass=p?function(e,t){E(e,t?"ng-isolate-scope":"ng-scope")}:L,O;function O(e,t,n,i,o){e instanceof u||(e=u(e)),w(e,(function(t,n){t.nodeType==ke&&t.nodeValue.match(/\S+/)&&(e[n]=u(t).wrap("<span></span>").parent()[0])}));var r=R(e,t,e,n,i,o);O.$$addScopeClass(e);var a=null;return function(t,n,i){we(t,"scope");var o,s,l,c=(i=i||{}).parentBoundTranscludeFn,d=i.transcludeControllers,p=i.futureParentElement;if(c&&c.$$boundTransclude&&(c=c.$$boundTransclude),a||(s=(o=p)&&o[0],a=s&&"foreignobject"!==G(s)&&s.toString().match(/SVG/)?"svg":"html"),l="html"!==a?u(ie(a,u("<div>").append(e).html())):n?ct.clone.call(e):e,d)for(var h in d)l.data("$"+h+"Controller",d[h].instance);return O.$$addScopeInfo(l,t),n&&n(l,t),r&&r(t,l,l,c),l}}function R(e,t,n,i,o,r){for(var a,s,l,c,d,p,h,f=[],g=0;g<e.length;g++)a=new _,(l=(s=H(e[g],[],a,0===g?i:void 0,o)).length?U(s,e[g],a,t,n,null,[],[],r):null)&&l.scope&&O.$$addScopeClass(a.$$element),d=l&&l.terminal||!(c=e[g].childNodes)||!c.length?null:R(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),(l||d)&&(f.push(g,l,d),p=!0,h=h||l),r=null;return p?function(e,n,i,o){var r,a,s,l,c,d,p,g,m;if(h){var v=n.length;for(m=new Array(v),c=0;c<f.length;c+=3)p=f[c],m[p]=n[p]}else m=n;for(c=0,d=f.length;c<d;)s=m[f[c++]],r=f[c++],a=f[c++],r?(r.scope?(l=e.$new(),O.$$addScopeInfo(u(s),l)):l=e,g=r.transcludeOnThisElement?B(e,r.transclude,o,r.elementTranscludeOnThisElement):!r.templateOnThisElement&&o?o:!o&&t?B(e,t):null,r(a,l,s,i,g)):a&&a(e,s.childNodes,void 0,o)}:null}function B(e,t,n,i){return function(i,o,r,a,s){return i||((i=e.$new(!1,s)).$$transcluded=!0),t(i,o,{parentBoundTranscludeFn:n,transcludeControllers:r,futureParentElement:a})}}function H(e,n,i,a,s){var l,c,u=e.nodeType,d=i.$attr;switch(u){case Ce:Q(n,Mt(G(e)),"E",a,s);for(var p,h,f,g,m,v,b=e.attributes,y=0,x=b&&b.length;y<x;y++){var w=!1,A=!1;h=(p=b[y]).name,m=W(p.value),g=Mt(h),(v=P.test(g))&&(h=h.replace(Ot,"").substr(8).replace(/_(.)/g,(function(e,t){return t.toUpperCase()})));var _=g.replace(/(Start|End)$/,"");Z(_)&&g===_+"Start"&&(w=h,A=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),d[f=Mt(h.toLowerCase())]=h,!v&&i.hasOwnProperty(f)||(i[f]=m,ht(e,f)&&(i[f]=!0)),oe(e,n,m,f,v),Q(n,f,"A",a,s,w,A)}if(M(c=e.className)&&(c=c.animVal),N(c)&&""!==c)for(;l=r.exec(c);)Q(n,f=Mt(l[2]),"C",a,s)&&(i[f]=W(l[3])),c=c.substr(l.index+l[0].length);break;case ke:!function(e,n){var i=t(n,!0);i&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&O.$$addBindingClass(t),function(e,t){var o=t.parent();n||O.$$addBindingClass(o),O.$$addBindingInfo(o,i.expressions),e.$watch(i,(function(e){t[0].nodeValue=e}))}}})}(n,e.nodeValue);break;case 8:try{(l=o.exec(e.nodeValue))&&Q(n,f=Mt(l[1]),"M",a,s)&&(i[f]=W(l[2]))}catch(e){}}return n.sort(ee),n}function V(e,t,n){var i=[],o=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw Dt("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==Ce&&(e.hasAttribute(t)&&o++,e.hasAttribute(n)&&o--),i.push(e),e=e.nextSibling}while(o>0);else i.push(e);return u(i)}function F(e,t,n){return function(i,o,r,a,s){return o=V(o[0],t,n),e(i,o,r,a,s)}}function U(e,i,o,r,a,s,c,d,p){p=p||{};for(var f,v,b,y,x,A,E,S=-Number.MAX_VALUE,T=p.controllerDirectives,C=p.newIsolateScopeDirective,k=p.templateDirective,L=p.nonTlbTranscludeDirective,I=!1,P=!1,R=p.hasElementTranscludeDirective,B=o.$$element=u(i),U=s,Q=r,G=0,Y=e.length;G<Y;G++){var Z=(b=e[G]).$$start,ee=b.$$end;if(Z&&(B=V(i,Z,ee)),x=void 0,S>b.priority)break;if((E=b.scope)&&(b.templateUrl||(M(E)?(ne("new/isolated scope",C||f,b,B),C=b):ne("new/isolated scope",C,b,B)),f=f||b),y=b.name,!b.templateUrl&&b.controller&&(E=b.controller,ne("'"+y+"' controller",(T=T||{})[y],b,B),T[y]=b),(E=b.transclude)&&(I=!0,b.$$tlb||(ne("transclusion",L,b,B),L=b),"element"==E?(R=!0,S=b.priority,x=B,B=o.$$element=u(n.createComment(" "+y+": "+o[y]+" ")),i=B[0],re(a,te(x),i),Q=O(x,r,S,U&&U.name,{nonTlbTranscludeDirective:L})):(x=u(Ye(i)).contents(),B.empty(),Q=O(x,r))),b.template)if(P=!0,ne("template",k,b,B),k=b,E=$(b.template)?b.template(B,o):b.template,E=D(E),b.replace){if(U=b,x=We(E)?[]:Rt(ie(b.templateNamespace,W(E))),i=x[0],1!=x.length||i.nodeType!==Ce)throw Dt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");re(a,B,i);var oe={$attr:{}},ce=H(i,[],oe),ue=e.splice(G+1,e.length-(G+1));C&&q(ce),e=e.concat(ce).concat(ue),X(o,oe),Y=e.length}else B.html(E);if(b.templateUrl)P=!0,ne("template",k,b,B),k=b,b.replace&&(U=b),he=J(e.splice(G,e.length-G),B,o,a,I&&Q,c,d,{controllerDirectives:T,newIsolateScopeDirective:C,templateDirective:k,nonTlbTranscludeDirective:L}),Y=e.length;else if(b.compile)try{$(A=b.compile(B,o,Q))?de(null,A,Z,ee):A&&de(A.pre,A.post,Z,ee)}catch(e){h(e,ae(B))}b.terminal&&(he.terminal=!0,S=Math.max(S,b.priority))}return he.scope=f&&!0===f.scope,he.transcludeOnThisElement=I,he.elementTranscludeOnThisElement=R,he.templateOnThisElement=P,he.transclude=Q,p.hasElementTranscludeDirective=R,he;function de(e,t,n,i){e&&(n&&(e=F(e,n,i)),e.require=b.require,e.directiveName=y,(C===b||b.$$isolateScope)&&(e=se(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=F(t,n,i)),t.require=b.require,t.directiveName=y,(C===b||b.$$isolateScope)&&(t=se(t,{isolateScope:!0})),d.push(t))}function pe(e,t,n,i){var o,r,a="data",s=!1,c=n;if(N(t)){if(r=t.match(l),t=t.substring(r[0].length),r[3]&&(r[1]?r[3]=null:r[1]=r[3]),"^"===r[1]?a="inheritedData":"^^"===r[1]&&(a="inheritedData",c=n.parent()),"?"===r[2]&&(s=!0),o=null,i&&"data"===a&&(o=i[t])&&(o=o.instance),!(o=o||c[a]("$"+t+"Controller"))&&!s)throw Dt("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return o||null}return z(t)&&(o=[],w(t,(function(t){o.push(pe(e,t,n,i))}))),o}function he(e,n,r,a,s){var l,p,h,f,b,y,x,A,E;if(i===r?(E=o,A=o.$$element):(A=u(r),E=new _(A,o)),C&&(b=n.$new(!0)),s&&((x=function(e,t,n){var i;j(e)||(n=t,t=e,e=void 0);R&&(i=y);n||(n=R?A.parent():A);return s(e,t,i,n,I)}).$$boundTransclude=s),T&&(v={},y={},w(T,(function(e){var t,i={$scope:e===C||e.$$isolateScope?b:n,$element:A,$attrs:E,$transclude:x};"@"==(f=e.controller)&&(f=E[e.name]),t=m(f,i,!0,e.controllerAs),y[e.name]=t,R||A.data("$"+e.name+"Controller",t.instance),v[e.name]=t}))),C){O.$$addScopeInfo(A,b,!0,!(k&&(k===C||k===C.$$originalDirective))),O.$$addScopeClass(A,!0);var S=v&&v[C.name],L=b;S&&S.identifier&&!0===C.bindToController&&(L=S.instance),w(b.$$isolateBindings=C.$$isolateBindings,(function(e,i){var o,r,a,s,l=e.attrName,c=e.optional;switch(e.mode){case"@":E.$observe(l,(function(e){L[i]=e})),E.$$observers[l].$$scope=n,E[l]&&(L[i]=t(E[l])(n));break;case"=":if(c&&!E[l])return;r=g(E[l]),s=r.literal?K:function(e,t){return e===t||e!=e&&t!=t},a=r.assign||function(){throw o=L[i]=r(n),Dt("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",E[l],C.name)},o=L[i]=r(n);var u,d=function(e){return s(e,L[i])||(s(e,o)?a(n,e=L[i]):L[i]=e),o=e};d.$stateful=!0,u=e.collection?n.$watchCollection(E[l],d):n.$watch(g(E[l],d),null,r.literal),b.$on("$destroy",u);break;case"&":r=g(E[l]),L[i]=function(e){return r(n,e)}}}))}for(v&&(w(v,(function(e){e()})),v=null),l=0,p=c.length;l<p;l++)le(h=c[l],h.isolateScope?b:n,A,E,h.require&&pe(h.directiveName,h.require,A,y),x);var I=n;for(C&&(C.template||null===C.templateUrl)&&(I=b),e&&e(I,r.childNodes,void 0,s),l=d.length-1;l>=0;l--)le(h=d[l],h.isolateScope?b:n,A,E,h.require&&pe(h.directiveName,h.require,A,y),x)}}function q(e){for(var t=0,n=e.length;t<n;t++)e[t]=k(e[t],{$$isolateScope:!0})}function Q(t,n,o,r,a,s,l){if(n===a)return null;var c=null;if(i.hasOwnProperty(n))for(var u,d=e.get(n+"Directive"),p=0,f=d.length;p<f;p++)try{u=d[p],(void 0===r||r>u.priority)&&-1!=u.restrict.indexOf(o)&&(s&&(u=k(u,{$$start:s,$$end:l})),t.push(u),c=u)}catch(e){h(e)}return c}function Z(t){if(i.hasOwnProperty(t))for(var n=e.get(t+"Directive"),o=0,r=n.length;o<r;o++)if(n[o].multiElement)return!0;return!1}function X(e,t){var n=t.$attr,i=e.$attr,o=e.$$element;w(e,(function(i,o){"$"!=o.charAt(0)&&(t[o]&&t[o]!==i&&(i+=("style"===o?";":" ")+t[o]),e.$set(o,i,!0,n[o]))})),w(t,(function(t,r){"class"==r?(E(o,t),e.class=(e.class?e.class+" ":"")+t):"style"==r?(o.attr("style",o.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==r.charAt(0)||e.hasOwnProperty(r)||(e[r]=t,i[r]=n[r])}))}function J(e,t,n,i,o,r,a,s){var l,c,d=[],p=t[0],h=e.shift(),g=k(h,{templateUrl:null,transclude:null,replace:null,$$originalDirective:h}),m=$(h.templateUrl)?h.templateUrl(t,n):h.templateUrl,v=h.templateNamespace;return t.empty(),f(y.getTrustedResourceUrl(m)).then((function(f){var b,y,x,A;if(f=D(f),h.replace){if(x=We(f)?[]:Rt(ie(v,W(f))),b=x[0],1!=x.length||b.nodeType!==Ce)throw Dt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h.name,m);y={$attr:{}},re(i,t,b);var _=H(b,[],y);M(h.scope)&&q(_),e=_.concat(e),X(n,y)}else b=p,t.html(f);for(e.unshift(g),l=U(e,b,n,o,t,h,r,a,s),w(i,(function(e,n){e==b&&(i[n]=t[0])})),c=R(t[0].childNodes,o);d.length;){var S=d.shift(),T=d.shift(),C=d.shift(),k=d.shift(),L=t[0];if(!S.$$destroyed){if(T!==p){var I=T.className;s.hasElementTranscludeDirective&&h.replace||(L=Ye(b)),re(C,u(T),L),E(u(L),I)}A=l.transcludeOnThisElement?B(S,l.transclude,k):k,l(c,S,L,i,A)}}d=null})),function(e,t,n,i,o){var r=o;t.$$destroyed||(d?d.push(t,n,i,r):(l.transcludeOnThisElement&&(r=B(t,l.transclude,o)),l(c,t,n,i,r)))}}function ee(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ne(e,t,n,i){if(t)throw Dt("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,ae(i))}function ie(e,t){switch(e=a(e||"html")){case"svg":case"math":var i=n.createElement("div");return i.innerHTML="<"+e+">"+t+"</"+e+">",i.childNodes[0].childNodes;default:return t}}function oe(e,n,i,o,r){var a=function(e,t){if("srcdoc"==t)return y.HTML;var n=G(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?y.RESOURCE_URL:void 0}(e,o);r=s[o]||r;var l=t(i,!0,a,r);if(l){if("multiple"===o&&"select"===G(e))throw Dt("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ae(e));n.push({priority:100,compile:function(){return{pre:function(e,n,s){var u=s.$$observers||(s.$$observers={});if(c.test(o))throw Dt("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var d=s[o];d!==i&&(l=d&&t(d,!0,a,r),i=d),l&&(s[o]=l(e),(u[o]||(u[o]=[])).$$inter=!0,(s.$$observers&&s.$$observers[o].$$scope||e).$watch(l,(function(e,t){"class"===o&&e!=t?s.$updateClass(e,t):s.$set(o,e)})))}}}})}}function re(e,t,i){var o,r,a=t[0],s=t.length,l=a.parentNode;if(e)for(o=0,r=e.length;o<r;o++)if(e[o]==a){e[o++]=i;for(var c=o,p=c+s-1,h=e.length;c<h;c++,p++)p<h?e[c]=e[p]:delete e[c];e.length-=s-1,e.context===a&&(e.context=i);break}l&&l.replaceChild(i,a);var f=n.createDocumentFragment();f.appendChild(a),u(i).data(u(a).data()),d?(ye=!0,d.cleanData([a])):delete u.cache[a[u.expando]];for(var g=1,m=t.length;g<m;g++){var v=t[g];u(v).remove(),f.appendChild(v),delete t[g]}t[0]=i,t.length=1}function se(e,t){return T((function(){return e.apply(null,arguments)}),e,t)}function le(e,t,n,i,o,r){try{e(t,n,i,o,r)}catch(e){h(e,ae(n))}}}]}Pt.$inject=["$provide","$$sanitizeUriProvider"];var Ot=/^((?:x|data)[\:\-_])/i;function Mt(e){return $e(e.replace(Ot,""))}function Nt(e,t){var n="",i=e.split(/\s+/),o=t.split(/\s+/);e:for(var r=0;r<i.length;r++){for(var a=i[r],s=0;s<o.length;s++)if(a==o[s])continue e;n+=(n.length>0?" ":"")+a}return n}function Rt(e){var t=(e=u(e)).length;if(t<=1)return e;for(;t--;){8===e[t].nodeType&&f.call(e,t,1)}return e}var Bt=o("$controller");function zt(){var e={},t=!1,n=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){_e(t,"controller"),M(t)?T(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(i,r){return function(o,s,l,c){var u,d,p,h;if(l=!0===l,c&&N(c)&&(h=c),N(o)){if(!(d=o.match(n)))throw Bt("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",o);p=d[1],h=h||d[3],Ae(o=e.hasOwnProperty(p)?e[p]:Ee(s.$scope,p,!0)||(t?Ee(r,p,!0):void 0),p,!0)}if(l){var f=(z(o)?o[o.length-1]:o).prototype;return u=Object.create(f||null),h&&a(s,h,u,p||o.name),T((function(){return i.invoke(o,u,s,p),u}),{instance:u,identifier:h})}return u=i.instantiate(o,s,p),h&&a(s,h,u,p||o.name),u};function a(e,t,n,i){if(!e||!M(e.$scope))throw o("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}}]}function $t(){this.$get=["$window",function(e){return u(e.document)}]}function Ht(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}var Vt={"Content-Type":"application/json;charset=utf-8"},jt=/^\[|^\{(?!\{)/,Ft={"[":/]$/,"{":/}$/},Ut=/^\)\]\}',?\n/;function Wt(e,t){if(N(e)){var n=e.replace(Ut,"").trim();if(n){var i=t("Content-Type");(i&&0===i.indexOf("application/json")||(r=(o=n).match(jt))&&Ft[r[0]].test(o))&&(e=re(n))}}var o,r;return e}function qt(e){var t,n,i,o=Te();return e?(w(e.split("\n"),(function(e){i=e.indexOf(":"),t=a(W(e.substr(0,i))),n=W(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)})),o):o}function Qt(e){var t=M(e)?e:void 0;return function(n){if(t||(t=qt(e)),n){var i=t[a(n)];return void 0===i&&(i=null),i}return t}}function Gt(e,t,n,i){return $(i)?i(e,t,n):(w(i,(function(i){e=i(e,t,n)})),e)}function Yt(e){return 200<=e&&e<300}function Zt(){var e=this.defaults={transformResponse:[Wt],transformRequest:[function(e){return!M(e)||(t=e,"[object File]"===m.call(t))||function(e){return"[object Blob]"===m.call(e)}(e)||function(e){return"[object FormData]"===m.call(e)}(e)?e:oe(e);var t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:X(Vt),put:X(Vt),patch:X(Vt)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return O(e)?(t=!!e,this):t};var n=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(i,r,s,c,u,d){var p=s("$http"),h=[];function f(n){if(!b.isObject(n))throw o("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);var s=T({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},n);s.headers=function(t){var n,i,o,r=e.headers,s=T({},t.headers);r=T({},r.common,r[a(t.method)]);e:for(n in r){for(o in i=a(n),s)if(a(o)===i)continue e;s[n]=r[n]}return l=s,u={},w(l,(function(e,t){$(e)?null!=(c=e())&&(u[t]=c):u[t]=e})),u;var l,c,u}(n),s.method=l(s.method);var d=[function(n){var o=n.headers,s=Gt(n.data,Qt(o),void 0,n.transformRequest);return P(s)&&w(o,(function(e,t){"content-type"===a(t)&&delete o[t]})),P(n.withCredentials)&&!P(e.withCredentials)&&(n.withCredentials=e.withCredentials),function(n,o){var a,s,l=u.defer(),d=l.promise,h=n.headers,g=function(e,t){if(!t)return e;var n=[];(function(e,t,n){for(var i=A(e),o=0;o<i.length;o++)t.call(n,e[i[o]],i[o])})(t,(function(e,t){null===e||P(e)||(z(e)||(e=[e]),w(e,(function(e){M(e)&&(e=B(e)?e.toISOString():oe(e)),n.push(de(t)+"="+de(e))})))})),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&"));return e}(n.url,n.params);f.pendingRequests.push(n),d.then(y,y),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(a=M(n.cache)?n.cache:M(e.cache)?e.cache:p);a&&(O(s=a.get(g))?U(s)?s.then(b,b):z(s)?v(s[1],s[0],X(s[2]),s[3]):v(s,200,{},"OK"):a.put(g,d));if(P(s)){var m=ai(n.url)?r.cookies()[n.xsrfCookieName||e.xsrfCookieName]:void 0;m&&(h[n.xsrfHeaderName||e.xsrfHeaderName]=m),i(n.method,g,o,(function(e,n,i,o){a&&(Yt(e)?a.put(g,[e,n,qt(i),o]):a.remove(g));function r(){v(n,e,i,o)}t?c.$applyAsync(r):(r(),c.$$phase||c.$apply())}),h,n.timeout,n.withCredentials,n.responseType)}return d;function v(e,t,i,o){(Yt(t=Math.max(t,0))?l.resolve:l.reject)({data:e,status:t,headers:Qt(i),config:n,statusText:o})}function b(e){v(e.data,e.status,X(e.headers()),e.statusText)}function y(){var e=f.pendingRequests.indexOf(n);-1!==e&&f.pendingRequests.splice(e,1)}}(n,s).then(y,y)},void 0],g=u.when(s);for(w(h,(function(e){(e.request||e.requestError)&&d.unshift(e.request,e.requestError),(e.response||e.responseError)&&d.push(e.response,e.responseError)}));d.length;){var m=d.shift(),v=d.shift();g=g.then(m,v)}return g.success=function(e){return g.then((function(t){e(t.data,t.status,t.headers,s)})),g},g.error=function(e){return g.then(null,(function(t){e(t.data,t.status,t.headers,s)})),g},g;function y(e){var t=T({},e);return e.data?t.data=Gt(e.data,e.headers,e.status,s.transformResponse):t.data=e.data,Yt(e.status)?t:u.reject(t)}}return w(n,(function(e){h.unshift(N(e)?d.get(e):d.invoke(e))})),f.pendingRequests=[],function(e){w(arguments,(function(e){f[e]=function(t,n){return f(T(n||{},{method:e,url:t}))}}))}("get","delete","head","jsonp"),function(e){w(arguments,(function(e){f[e]=function(t,n,i){return f(T(i||{},{method:e,url:t,data:n}))}}))}("post","put","patch"),f.defaults=e,f}]}function Xt(){return new t.XMLHttpRequest}function Kt(){this.$get=["$browser","$window","$document",function(e,t,n){return function(e,t,n,i,o){return function(r,s,l,c,u,d,p,h){if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"==a(r)){var f="_"+(i.counter++).toString(36);i[f]=function(e){i[f].data=e,i[f].called=!0};var g=function(e,t,n){var r=o.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){Me(r,"load",a),Me(r,"error",a),o.body.removeChild(r),r=null;var s=-1,l="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},Oe(r,"load",a),Oe(r,"error",a),o.body.appendChild(r),a}(s.replace("JSON_CALLBACK","angular.callbacks."+f),f,(function(e,t){x(c,e,i[f].data,"",t),i[f]=L}))}else{var m=t();m.open(r,s,!0),w(u,(function(e,t){O(e)&&m.setRequestHeader(t,e)})),m.onload=function(){var e=m.statusText||"",t="response"in m?m.response:m.responseText,n=1223===m.status?204:m.status;0===n&&(n=t?200:"file"==ri(s).protocol?404:0),x(c,n,t,m.getAllResponseHeaders(),e)};var v=function(){x(c,-1,null,null,"")};if(m.onerror=v,m.onabort=v,p&&(m.withCredentials=!0),h)try{m.responseType=h}catch(e){if("json"!==h)throw e}m.send(l||null)}if(d>0)var b=n(y,d);else U(d)&&d.then(y);function y(){g&&g(),m&&m.abort()}function x(t,i,o,r,a){void 0!==b&&n.cancel(b),g=m=null,t(i,o,r,a),e.$$completeOutstandingRequest(L)}}}(e,Xt,e.defer,t.angular.callbacks,n[0])}]}var Jt=o("$interpolate");function en(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,o){var r=e.length,a=t.length,s=new RegExp(e.replace(/./g,c),"g"),l=new RegExp(t.replace(/./g,c),"g");function c(e){return"\\\\\\"+e}function u(c,u,d,p){p=!!p;for(var h,f,g,m=0,v=[],b=[],y=c.length,x=[],w=[];m<y;){if(-1==(h=c.indexOf(e,m))||-1==(f=c.indexOf(t,h+r))){m!==y&&x.push(S(c.substring(m)));break}m!==h&&x.push(S(c.substring(m,h))),g=c.substring(h+r,f),v.push(g),b.push(n(g,C)),m=f+a,w.push(x.length),x.push("")}if(d&&x.length>1)throw Jt("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",c);if(!u||v.length){var A=function(e){for(var t=0,n=v.length;t<n;t++){if(p&&P(e[t]))return;x[w[t]]=e[t]}return x.join("")},_=function(e){return d?o.getTrusted(d,e):o.valueOf(e)},E=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=oe(e)}return e};return T((function(e){var t=0,n=v.length,o=new Array(n);try{for(;t<n;t++)o[t]=b[t](e);return A(o)}catch(e){var r=Jt("interr","Can't interpolate: {0}\n{1}",c,e.toString());i(r)}}),{exp:c,expressions:v,$$watchDelegate:function(e,t,n){var i;return e.$watchGroup(b,(function(n,o){var r=A(n);$(t)&&t.call(this,r,n!==o?i:r,e),i=r}),n)}})}function S(n){return n.replace(s,e).replace(l,t)}function C(e){try{return e=_(e),p&&!O(e)?e:E(e)}catch(e){var t=Jt("interr","Can't interpolate: {0}\n{1}",c,e.toString());i(t)}}}return u.startSymbol=function(){return e},u.endSymbol=function(){return t},u}]}function tn(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){var o={};function r(r,a,s,l){var c=t.setInterval,u=t.clearInterval,d=0,p=O(l)&&!l,h=(p?i:n).defer(),f=h.promise;return s=O(s)?s:0,f.then(null,null,r),f.$$intervalId=c((function(){h.notify(d++),s>0&&d>=s&&(h.resolve(d),u(f.$$intervalId),delete o[f.$$intervalId]),p||e.$apply()}),a),o[f.$$intervalId]=h,f}return r.cancel=function(e){return!(!e||!(e.$$intervalId in o))&&(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0)},r}]}function nn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"Â¤",posSuf:"",negPre:"(Â¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(e){return 1===e?"one":"other"}}}}var on=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,rn={http:80,https:443,ftp:21},an=o("$location");function sn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ue(t[n]);return t.join("/")}function ln(e,t){var n=ri(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=C(n.port)||rn[n.protocol]||null}function cn(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var i=ri(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=le(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function un(e,t){if(0===t.indexOf(e))return t.substr(e.length)}function dn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function pn(e){return e.replace(/(#.+)|#$/,"$1")}function hn(e){return e.substr(0,dn(e).lastIndexOf("/")+1)}function fn(e,t){this.$$html5=!0,t=t||"";var n=hn(e);ln(e,this),this.$$parse=function(e){var t=un(n,e);if(!N(t))throw an("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,n);cn(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=ce(this.$$search),t=this.$$hash?"#"+ue(this.$$hash):"";this.$$url=sn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=n+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){return o&&"#"===o[0]?(this.hash(o.slice(1)),!0):(void 0!==(r=un(e,i))?(a=r,s=void 0!==(r=un(t,r))?n+(un("/",r)||r):e+a):void 0!==(r=un(n,i))?s=n+r:n==i+"/"&&(s=n),s&&this.$$parse(s),!!s);var r,a,s}}function gn(e,t){var n=hn(e);ln(e,this),this.$$parse=function(i){var o,r=un(e,i)||un(n,i);"#"===r.charAt(0)?P(o=un(t,r))&&(o=r):o=this.$$html5?r:"",cn(o,this),this.$$path=function(e,t,n){var i,o=/^\/[A-Z]:(\/.*)/;0===t.indexOf(n)&&(t=t.replace(n,""));if(o.exec(t))return e;return(i=o.exec(e))?i[1]:e}(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var n=ce(this.$$search),i=this.$$hash?"#"+ue(this.$$hash):"";this.$$url=sn(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return dn(e)==dn(t)&&(this.$$parse(t),!0)}}function mn(e,t){this.$$html5=!0,gn.apply(this,arguments);var n=hn(e);this.$$parseLinkUrl=function(i,o){return o&&"#"===o[0]?(this.hash(o.slice(1)),!0):(e==dn(i)?r=i:(a=un(n,i))?r=e+t+a:n===i+"/"&&(r=n),r&&this.$$parse(r),!!r);var r,a},this.$$compose=function(){var n=ce(this.$$search),i=this.$$hash?"#"+ue(this.$$hash):"";this.$$url=sn(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+t+this.$$url}}var vn={$$html5:!1,$$replace:!1,absUrl:bn("$$absUrl"),url:function(e){if(P(e))return this.$$url;var t=on.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:bn("$$protocol"),host:bn("$$host"),port:bn("$$port"),path:yn("$$path",(function(e){return"/"==(e=null!==e?e.toString():"").charAt(0)?e:"/"+e})),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(N(e)||R(e))e=e.toString(),this.$$search=le(e);else{if(!M(e))throw an("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");w(e=Z(e,{}),(function(t,n){null==t&&delete e[n]})),this.$$search=e}break;default:P(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:yn("$$hash",(function(e){return null!==e?e.toString():""})),replace:function(){return this.$$replace=!0,this}};function bn(e){return function(){return this[e]}}function yn(e,t){return function(n){return P(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function xn(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return O(t)?(e=t,this):e},this.html5Mode=function(e){return F(e)?(t.enabled=e,this):M(e)?(F(e.enabled)&&(t.enabled=e.enabled),F(e.requireBase)&&(t.requireBase=e.requireBase),F(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,o,r,a){var s,l,c,d,p=i.baseHref(),h=i.url();if(t.enabled){if(!p&&t.requireBase)throw an("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=(d=h).substring(0,d.indexOf("/",d.indexOf("//")+2))+(p||"/"),l=o.history?fn:mn}else c=dn(h),l=gn;(s=new l(c,"#"+e)).$$parseLinkUrl(h,h),s.$$state=i.state();var f=/^\s*(javascript|mailto):/i;function g(e,t,n){var o=s.url(),r=s.$$state;try{i.url(e,t,n),s.$$state=i.state()}catch(e){throw s.url(o),s.$$state=r,e}}r.on("click",(function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var o=u(e.target);"a"!==G(o[0]);)if(o[0]===r[0]||!(o=o.parent())[0])return;var l=o.prop("href"),c=o.attr("href")||o.attr("xlink:href");M(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=ri(l.animVal).href),f.test(l)||!l||o.attr("target")||e.isDefaultPrevented()||s.$$parseLinkUrl(l,c)&&(e.preventDefault(),s.absUrl()!=i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}})),pn(s.absUrl())!=pn(h)&&i.url(s.absUrl(),!0);var m=!0;return i.onUrlChange((function(e,t){n.$evalAsync((function(){var i,o=s.absUrl(),r=s.$$state;s.$$parse(e),s.$$state=t,i=n.$broadcast("$locationChangeStart",e,o,t,r).defaultPrevented,s.absUrl()===e&&(i?(s.$$parse(o),s.$$state=r,g(o,!1,r)):(m=!1,v(o,r)))})),n.$$phase||n.$digest()})),n.$watch((function(){var e=pn(i.url()),t=pn(s.absUrl()),r=i.state(),a=s.$$replace,l=e!==t||s.$$html5&&o.history&&r!==s.$$state;(m||l)&&(m=!1,n.$evalAsync((function(){var t=s.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,s.$$state,r).defaultPrevented;s.absUrl()===t&&(i?(s.$$parse(e),s.$$state=r):(l&&g(t,a,r===s.$$state?null:s.$$state),v(e,r)))}))),s.$$replace=!1})),s;function v(e,t){n.$broadcast("$locationChangeSuccess",s.absUrl(),e,s.$$state,t)}}]}function wn(){var e=!0,t=this;this.debugEnabled=function(t){return O(t)?(e=t,this):e},this.$get=["$window",function(n){return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:(i=r("debug"),function(){e&&i.apply(t,arguments)})};var i;function o(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},i=t[e]||t.log||L,r=!1;try{r=!!i.apply}catch(e){}return r?function(){var e=[];return w(arguments,(function(t){e.push(o(t))})),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}}]}w([mn,gn,fn],(function(e){e.prototype=Object.create(vn),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==fn||!this.$$html5)throw an("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=P(t)?null:t,this}}));var An=o("$parse");function _n(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw An("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function En(e,t){if(e){if(e.constructor===e)throw An("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw An("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw An("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw An("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}var Sn=Function.prototype.call,Tn=Function.prototype.apply,Cn=Function.prototype.bind;var kn=Te();w({null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:function(){}},(function(e,t){e.constant=e.literal=e.sharedGetter=!0,kn[t]=e})),kn.this=function(e){return e},kn.this.sharedGetter=!0;var Ln=T(Te(),{"+":function(e,t,n,i){return n=n(e,t),i=i(e,t),O(n)?O(i)?n+i:n:O(i)?i:void 0},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),(O(n)?n:0)-(O(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"===":function(e,t,n,i){return n(e,t)===i(e,t)},"!==":function(e,t,n,i){return n(e,t)!==i(e,t)},"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return n(e,t)<i(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return n(e,t)<=i(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),In={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Dn=function(e){this.options=e};function Pn(e){return e.constant}Dn.prototype={constructor:Dn,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),o=Ln[t],r=Ln[n],a=Ln[i];if(o||r||a){var s=a?i:r?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||"Â "===e},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=O(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw An("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=a(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,o=!1;this.index<this.text.length;){var r=this.text.charAt(this.index);if(i+=r,o){if("u"===r){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=In[r]||r}o=!1}else if("\\"===r)o=!0;else{if(r===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=r}this.index++}this.throwError("Unterminated quote",t)}};var On=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};function Mn(e,t,n,i,o){En(e,o),En(t,o);for(var r,a=n.split("."),s=0;a.length>1;s++){r=_n(a.shift(),o);var l=0===s&&t&&t[r]||e[r];l||(l={},e[r]=l),e=En(l,o)}return En(e[r=_n(a.shift(),o)],o),e[r]=i,i}On.ZERO=T((function(){return 0}),{sharedGetter:!0,constant:!0}),On.prototype={constructor:On,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e,t,n;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in kn?e=kn[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw An("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw An("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,o){if(this.tokens.length>e){var r=this.tokens[e],a=r.text;if(a===t||a===n||a===i||a===o||!t&&!n&&!i&&!o)return r}return!1},expect:function(e,t,n,i){var o=this.peek(e,t,n,i);return!!o&&(this.tokens.shift(),o)},consume:function(e){if(0===this.tokens.length)throw An("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=Ln[e];return T((function(e,i){return n(e,i,t)}),{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,i){var o=Ln[t];return T((function(t,i){return o(t,i,e,n)}),{constant:e.constant&&n.constant,inputs:!i&&[e,n]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return function(e,t,n){var i=t.expensiveChecks,o=i?Rn:Nn,r=o[e];if(r)return r;var a=e.split("."),s=a.length;if(t.csp)r=s<6?zn(a[0],a[1],a[2],a[3],a[4],n,i):function(e,t){var o,r=0;do{o=zn(a[r++],a[r++],a[r++],a[r++],a[r++],n,i)(e,t),t=void 0,e=o}while(r<s);return o};else{var l="";i&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var c=i;w(a,(function(e,t){_n(e,n);var o=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(i||Bn(e))&&(o="eso("+o+", fe)",c=!0),l+="if(s == null) return undefined;\ns="+o+";\n"})),l+="return s;";var u=new Function("s","l","eso","fe",l);u.toString=D(l),c&&(u=function(e,t){return function(n,i){return e(n,i,En,t)}}(u,n)),r=u}return r.sharedGetter=!0,r.assign=function(t,n,i){return Mn(t,i,e,n,e)},o[e]=r,r}(e,this.options,this.text)},constant:function(){var e=this.consume().value;return T((function(){return e}),{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var i,o=0,r=e.length;o<r;o++)i=e[o](t,n);return i}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},filter:function(e){var t,n,i=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],n=[];this.expect(":");)t.push(this.expression());var o=[e].concat(t||[]);return T((function(o,r){var a=e(o,r);if(n){n[0]=a;for(var s=t.length;s--;)n[s+1]=t[s](o,r);return i.apply(void 0,n)}return i(a)}),{constant:!i.$stateful&&o.every(Pn),inputs:!i.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),T((function(t,i){return n.assign(t,e(t,i),i)}),{inputs:[n,e]})):n},ternary:function(){var e,t=this.logicalOR();if(this.expect("?")&&(e=this.assignment(),this.consume(":"))){var n=this.assignment();return T((function(i,o){return t(i,o)?e(i,o):n(i,o)}),{constant:t.constant&&e.constant&&n.constant})}return t},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(On.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return T((function(n,i,o){var r=o||e(n,i);return null==r?void 0:t(r)}),{assign:function(n,i,o){var r=e(n,o);return r||e.assign(n,r={},o),t.assign(r,i)}})},objectIndex:function(e){var t=this.text,n=this.expression();return this.consume("]"),T((function(i,o){var r=e(i,o),a=n(i,o);if(_n(a,t),r)return En(r[a],t)}),{assign:function(i,o,r){var a=_n(n(i,r),t),s=En(e(i,r),t);return s||e.assign(i,s={},r),s[a]=o}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do{n.push(this.expression())}while(this.expect(","));this.consume(")");var i=this.text,o=n.length?[]:null;return function(r,a){var s=t?t(r,a):O(t)?void 0:r,l=e(r,a,s)||L;if(o)for(var c=n.length;c--;)o[c]=En(n[c](r,a),i);En(s,i),function(e,t){if(e){if(e.constructor===e)throw An("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Sn||e===Tn||e===Cn)throw An("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}(l,i);var u=l.apply?l.apply(s,o):l(o[0],o[1],o[2],o[3],o[4]);return o&&(o.length=0),En(u,i)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),T((function(t,n){for(var i=[],o=0,r=e.length;o<r;o++)i.push(e[o](t,n));return i}),{literal:!0,constant:e.every(Pn),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),T((function(n,i){for(var o={},r=0,a=t.length;r<a;r++)o[e[r]]=t[r](n,i);return o}),{literal:!0,constant:t.every(Pn),inputs:t})}};var Nn=Te(),Rn=Te();function Bn(e){return"constructor"==e}function zn(e,t,n,i,o,r,a){_n(e,r),_n(t,r),_n(n,r),_n(i,r),_n(o,r);var s=function(e){return En(e,r)},l=a||Bn(e)?s:I,c=a||Bn(t)?s:I,u=a||Bn(n)?s:I,d=a||Bn(i)?s:I,p=a||Bn(o)?s:I;return function(r,a){var s=a&&a.hasOwnProperty(e)?a:r;if(null==s)return s;if(s=l(s[e]),!t)return s;if(null!=s){if(s=c(s[t]),!n)return s;if(null!=s){if(s=u(s[n]),!i)return s;if(null!=s){if(s=d(s[i]),!o)return s;if(null!=s)return s=p(s[o])}}}}}var $n=Object.prototype.valueOf;function Hn(e){return $(e.valueOf)?e.valueOf():$n.call(e)}function Vn(){var e=Te(),t=Te();this.$get=["$filter","$sniffer",function(n,i){var o={csp:i.csp,expensiveChecks:!1},r={csp:i.csp,expensiveChecks:!0};return function(i,a,p){var h,f,g;switch(typeof i){case"string":g=i=i.trim();var m=p?t:e;if(!(h=m[g])){":"===i.charAt(0)&&":"===i.charAt(1)&&(f=!0,i=i.substring(2));var v=p?r:o,b=new Dn(v);(h=new On(b,n,v).parse(i)).constant?h.$$watchDelegate=u:f?(h=function(e){var t=e;return e.sharedGetter&&((t=function(t,n){return e(t,n)}).literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}(h)).$$watchDelegate=h.literal?c:l:h.inputs&&(h.$$watchDelegate=s),m[g]=h}return d(h,a);case"function":return d(i,a);default:return d(L,a)}};function a(e,t){return null==e||null==t?e===t:("object"!=typeof e||"object"!=typeof(e=Hn(e)))&&(e===t||e!=e&&t!=t)}function s(e,t,n,i){var o,r=i.$$inputs||(i.$$inputs=function e(t,n){for(var i=0,o=t.length;i<o;i++){var r=t[i];r.constant||(r.inputs?e(r.inputs,n):-1===n.indexOf(r)&&n.push(r))}return n}(i.inputs,[]));if(1===r.length){var s=a;return r=r[0],e.$watch((function(e){var t=r(e);return a(t,s)||(o=i(e),s=t&&Hn(t)),o}),t,n)}for(var l=[],c=0,u=r.length;c<u;c++)l[c]=a;return e.$watch((function(e){for(var t=!1,n=0,s=r.length;n<s;n++){var c=r[n](e);(t||(t=!a(c,l[n])))&&(l[n]=c&&Hn(c))}return t&&(o=i(e)),o}),t,n)}function l(e,t,n,i){var o,r;return o=e.$watch((function(e){return i(e)}),(function(e,n,i){r=e,$(t)&&t.apply(this,arguments),O(e)&&i.$$postDigest((function(){O(r)&&o()}))}),n)}function c(e,t,n,i){var o,r;return o=e.$watch((function(e){return i(e)}),(function(e,n,i){r=e,$(t)&&t.call(this,e,n,i),a(e)&&i.$$postDigest((function(){a(r)&&o()}))}),n);function a(e){var t=!0;return w(e,(function(e){O(e)||(t=!1)})),t}}function u(e,t,n,i){var o;return o=e.$watch((function(e){return i(e)}),(function(e,n,i){$(t)&&t.apply(this,arguments),o()}),n)}function d(e,t){if(!t)return e;var n=e.$$watchDelegate,i=n!==c&&n!==l?function(n,i){var o=e(n,i);return t(o,n,i)}:function(n,i){var o=e(n,i),r=t(o,n,i);return O(o)?r:o};return e.$$watchDelegate&&e.$$watchDelegate!==s?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=s,i.inputs=[e]),i}}]}function jn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Un((function(t){e.$evalAsync(t)}),t)}]}function Fn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Un((function(t){e.defer(t)}),t)}]}function Un(e,t){var n=o("$q",TypeError);function i(){this.$$state={status:0}}function r(e,t){return function(n){t.call(e,n)}}function a(n){!n.processScheduled&&n.pending&&(n.processScheduled=!0,e((function(){!function(e){var n,i,o;o=e.pending,e.processScheduled=!1,e.pending=void 0;for(var r=0,a=o.length;r<a;++r){i=o[r][0],n=o[r][e.status];try{$(n)?i.resolve(n(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(e){i.reject(e),t(e)}}}(n)})))}function s(){this.promise=new i,this.resolve=r(this,this.resolve),this.reject=r(this,this.reject),this.notify=r(this,this.notify)}i.prototype={then:function(e,t,n){var i=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&a(this.$$state),i.promise},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then((function(t){return c(t,!0,e)}),(function(t){return c(t,!1,e)}),t)}},s.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(n("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,i;i=function(e,t,n){var i=!1;function o(t){return function(n){i||(i=!0,t.call(e,n))}}return[o(t),o(n)]}(this,this.$$resolve,this.$$reject);try{(M(e)||$(e))&&(n=e&&e.then),$(n)?(this.promise.$$state.status=-1,n.call(e,i[0],i[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,a(this.promise.$$state))}catch(e){i[1](e),t(e)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&e((function(){for(var e,o,r=0,a=i.length;r<a;r++){o=i[r][0],e=i[r][3];try{o.notify($(e)?e(n):n)}catch(e){t(e)}}}))}};var l=function(e,t){var n=new s;return t?n.resolve(e):n.reject(e),n.promise},c=function(e,t,n){var i=null;try{$(n)&&(i=n())}catch(e){return l(e,!1)}return U(i)?i.then((function(){return l(e,t)}),(function(e){return l(e,!1)})):l(e,t)},u=function(e,t,n,i){var o=new s;return o.resolve(e),o.promise.then(t,n,i)};var d=function e(t){if(!$(t))throw n("norslvr","Expected resolverFn, got '{0}'",t);if(!(this instanceof e))return new e(t);var i=new s;return t((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise};return d.defer=function(){return new s},d.reject=function(e){var t=new s;return t.reject(e),t.promise},d.when=u,d.all=function(e){var t=new s,n=0,i=z(e)?[]:{};return w(e,(function(e,o){n++,u(e).then((function(e){i.hasOwnProperty(o)||(i[o]=e,--n||t.resolve(i))}),(function(e){i.hasOwnProperty(o)||t.reject(e)}))})),0===n&&t.resolve(i),t.promise},d}function Wn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,o=!!n,r=o?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return r.supported=o,r}]}function qn(){var e=10,t=o("$rootScope"),n=null,i=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(o,r,a,l){function c(e){e.currentScope.$$destroyed=!0}function u(){this.$id=E(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(e,t){var n;return t=t||this,e?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=E(),this.$$ChildScope=null}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!=this)&&n.$on("$destroy",c),n},$watch:function(e,t,i){var o=a(e);if(o.$$watchDelegate)return o.$$watchDelegate(this,t,i,o);var r=this.$$watchers,s={fn:t,last:b,get:o,exp:e,eq:!!i};return n=null,$(t)||(s.fn=L),r||(r=this.$$watchers=[]),r.unshift(s),function(){Y(r,s),n=null}},$watchGroup:function(e,t){var n=new Array(e.length),i=new Array(e.length),o=[],r=this,a=!1,s=!0;if(!e.length){var l=!0;return r.$evalAsync((function(){l&&t(i,i,r)})),function(){l=!1}}if(1===e.length)return this.$watch(e[0],(function(e,o,r){i[0]=e,n[0]=o,t(i,e===o?i:n,r)}));function c(){a=!1,s?(s=!1,t(i,i,r)):t(i,n,r)}return w(e,(function(e,t){var s=r.$watch(e,(function(e,o){i[t]=e,n[t]=o,a||(a=!0,r.$evalAsync(c))}));o.push(s)})),function(){for(;o.length;)o.shift()()}},$watchCollection:function(e,t){g.$stateful=!0;var n,i,o,r=this,l=t.length>1,c=0,u=a(e,g),d=[],p={},h=!0,f=0;function g(e){var t,o,r,a;if(!P(n=e)){if(M(n))if(x(n)){i!==d&&(f=(i=d).length=0,c++),t=n.length,f!==t&&(c++,i.length=f=t);for(var s=0;s<t;s++)a=i[s],r=n[s],a!=a&&r!=r||a===r||(c++,i[s]=r)}else{for(o in i!==p&&(i=p={},f=0,c++),t=0,n)n.hasOwnProperty(o)&&(t++,r=n[o],a=i[o],o in i?a!=a&&r!=r||a===r||(c++,i[o]=r):(f++,i[o]=r,c++));if(f>t)for(o in c++,i)n.hasOwnProperty(o)||(f--,delete i[o])}else i!==n&&(i=n,c++);return c}}return this.$watch(u,(function(){if(h?(h=!1,t(n,n,r)):t(n,o,r),l)if(M(n))if(x(n)){o=new Array(n.length);for(var e=0;e<n.length;e++)o[e]=n[e]}else for(var i in o={},n)s.call(n,i)&&(o[i]=n[i]);else o=n}))},$digest:function(){var o,a,s,c,u,f,v,x,w,A,_=e,E=[];g("$digest"),l.$$checkUrlChange(),this===d&&null!==i&&(l.defer.cancel(i),y()),n=null;do{for(f=!1,x=this;p.length;){try{(A=p.shift()).scope.$eval(A.expression,A.locals)}catch(e){r(e)}n=null}e:do{if(c=x.$$watchers)for(u=c.length;u--;)try{if(o=c[u])if((a=o.get(x))===(s=o.last)||(o.eq?K(a,s):"number"==typeof a&&"number"==typeof s&&isNaN(a)&&isNaN(s))){if(o===n){f=!1;break e}}else f=!0,n=o,o.last=o.eq?Z(a,null):a,o.fn(a,s===b?a:s,x),_<5&&(E[w=4-_]||(E[w]=[]),E[w].push({msg:$(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:a,oldVal:s}))}catch(e){r(e)}if(!(v=x.$$childHead||x!==this&&x.$$nextSibling))for(;x!==this&&!(v=x.$$nextSibling);)x=x.$parent}while(x=v);if((f||p.length)&&!_--)throw m(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,E)}while(f||p.length);for(m();h.length;)try{h.shift()()}catch(e){r(e)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==d){for(var t in this.$$listenerCount)v(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=L,this.$on=this.$watch=this.$watchGroup=function(){return L},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e,t){d.$$phase||p.length||l.defer((function(){p.length&&d.$digest()})),p.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){h.push(e)},$apply:function(e){try{return g("$apply"),this.$eval(e)}catch(e){r(e)}finally{m();try{d.$digest()}catch(e){throw r(e),e}}},$applyAsync:function(e){var t=this;e&&f.push((function(){t.$eval(e)})),null===i&&(i=l.defer((function(){d.$apply(y)})))},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do{i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++}while(i=i.$parent);var o=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,v(o,1,e))}},$emit:function(e,t){var n,i,o,a=[],s=this,l=!1,c={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ee([c],arguments,1);do{for(n=s.$$listeners[e]||a,c.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,u)}catch(e){r(e)}else n.splice(i,1),i--,o--;if(l)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,i=n,o=n,a={name:e,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return a;for(var s,l,c,u=ee([a],arguments,1);i=o;){for(a.currentScope=i,l=0,c=(s=i.$$listeners[e]||[]).length;l<c;l++)if(s[l])try{s[l].apply(null,u)}catch(e){r(e)}else s.splice(l,1),l--,c--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var d=new u,p=d.$$asyncQueue=[],h=d.$$postDigestQueue=[],f=d.$$applyAsyncQueue=[];return d;function g(e){if(d.$$phase)throw t("inprog","{0} already in progress",d.$$phase);d.$$phase=e}function m(){d.$$phase=null}function v(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function b(){}function y(){for(;f.length;)try{f.shift()()}catch(e){r(e)}i=null}}]}function Qn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return O(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return O(e)?(t=e,this):t},this.$get=function(){return function(n,i){var o,r=i?t:e;return""===(o=ri(n).href)||o.match(r)?n:"unsafe:"+o}}}var Gn=o("$sce"),Yn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Zn(e){var t=[];return O(e)&&w(e,(function(e){t.push(function(e){if("self"===e)return e;if(N(e)){if(e.indexOf("***")>-1)throw Gn("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=q(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(H(e))return new RegExp("^"+e.source+"$");throw Gn("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))})),t}function Xn(){this.SCE_CONTEXTS=Yn;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Zn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Zn(e)),t},this.$get=["$injector",function(n){var i=function(e){throw Gn("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,t){return"self"===e?ai(t):!!e.exec(t.href)}function r(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}n.has("$sanitize")&&(i=n.get("$sanitize"));var a=r(),s={};return s[Yn.HTML]=r(a),s[Yn.CSS]=r(a),s[Yn.URL]=r(a),s[Yn.JS]=r(a),s[Yn.RESOURCE_URL]=r(s[Yn.URL]),{trustAs:function(e,t){var n=s.hasOwnProperty(e)?s[e]:null;if(!n)throw Gn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null==t||""===t)return t;if("string"!=typeof t)throw Gn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(n,r){if(null==r||""===r)return r;var a=s.hasOwnProperty(n)?s[n]:null;if(a&&r instanceof a)return r.$$unwrapTrustedValue();if(n===Yn.RESOURCE_URL){if(function(n){var i,r,a=ri(n.toString()),s=!1;for(i=0,r=e.length;i<r;i++)if(o(e[i],a)){s=!0;break}if(s)for(i=0,r=t.length;i<r;i++)if(o(t[i],a)){s=!1;break}return s}(r))return r;throw Gn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(n===Yn.HTML)return i(r);throw Gn("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof a?e.$$unwrapTrustedValue():e}}}]}function Kn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&c<8)throw Gn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=X(Yn);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=I),i.parseAs=function(e,n){var o=t(n);return o.literal&&o.constant?o:t(n,(function(t){return i.getTrusted(e,t)}))};var o=i.parseAs,r=i.getTrusted,s=i.trustAs;return w(Yn,(function(e,t){var n=a(t);i[$e("parse_as_"+n)]=function(t){return o(e,t)},i[$e("get_trusted_"+n)]=function(t){return r(e,t)},i[$e("trust_as_"+n)]=function(t){return s(e,t)}})),i}]}function Jn(){this.$get=["$window","$document",function(e,t){var n,i,o={},r=C((/android (\d+)/.exec(a((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),l=t[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,d=l.body&&l.body.style,p=!1,h=!1;if(d){for(var f in d)if(i=u.exec(f)){n=(n=i[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in d&&"webkit"),p=!(!("transition"in d)&&!(n+"Transition"in d)),h=!(!("animation"in d)&&!(n+"Animation"in d)),!r||p&&h||(p=N(l.body.style.webkitTransition),h=N(l.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||r<4||s),hasEvent:function(e){if("input"===e&&c<=11)return!1;if(P(o[e])){var t=l.createElement("div");o[e]="on"+e in t}return o[e]},csp:J(),vendorPrefix:n,transitions:p,animations:h,android:r}}]}Dt=o("$compile");function ei(){this.$get=["$templateCache","$http","$q",function(e,t,n){function i(o,r){i.totalPendingRequests++;var a=t.defaults&&t.defaults.transformResponse;z(a)?a=a.filter((function(e){return e!==Wt})):a===Wt&&(a=null);var s={cache:e,transformResponse:a};return t.get(o,s).finally((function(){i.totalPendingRequests--})).then((function(e){return e.data}),(function(e){if(!r)throw Dt("tpload","Failed to load template: {0}",o);return n.reject(e)}))}return i.totalPendingRequests=0,i}]}function ti(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={findBindings:function(e,t,n){var i=e.getElementsByClassName("ng-binding"),o=[];return w(i,(function(e){var i=b.element(e).data("$binding");i&&w(i,(function(i){n?new RegExp("(^|\\s)"+q(t)+"(\\s|\\||$)").test(i)&&o.push(e):-1!=i.indexOf(t)&&o.push(e)}))})),o},findModels:function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],o=0;o<i.length;++o){var r="["+i[o]+"model"+(n?"=":"*=")+'"'+t+'"]',a=e.querySelectorAll(r);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}};return i}]}function ni(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,o){var r={};function a(a,s,l){var c,u=O(l)&&!l,d=(u?i:n).defer(),p=d.promise;return c=t.defer((function(){try{d.resolve(a())}catch(e){d.reject(e),o(e)}finally{delete r[p.$$timeoutId]}u||e.$apply()}),s),p.$$timeoutId=c,r[c]=d,p}return a.cancel=function(e){return!(!e||!(e.$$timeoutId in r))&&(r[e.$$timeoutId].reject("canceled"),delete r[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},a}]}var ii=n.createElement("a"),oi=ri(t.location.href);function ri(e){var t=e;return c&&(ii.setAttribute("href",t),t=ii.href),ii.setAttribute("href",t),{href:ii.href,protocol:ii.protocol?ii.protocol.replace(/:$/,""):"",host:ii.host,search:ii.search?ii.search.replace(/^\?/,""):"",hash:ii.hash?ii.hash.replace(/^#/,""):"",hostname:ii.hostname,port:ii.port,pathname:"/"===ii.pathname.charAt(0)?ii.pathname:"/"+ii.pathname}}function ai(e){var t=N(e)?ri(e):e;return t.protocol===oi.protocol&&t.host===oi.host}function si(){this.$get=D(t)}function li(e){function t(n,i){if(M(n)){var o={};return w(n,(function(e,n){o[n]=t(n,e)})),o}return e.factory(n+"Filter",i)}this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+"Filter")}}],t("currency",di),t("date",_i),t("filter",ci),t("json",Ei),t("limitTo",Ci),t("lowercase",Si),t("number",pi),t("orderBy",ki),t("uppercase",Ti)}function ci(){return function(e,t,n){if(!z(e))return e;var i,o;switch(typeof t){case"function":i=t;break;case"boolean":case"number":case"string":o=!0;case"object":i=function(e,t,n){var i=M(e)&&"$"in e;!0===t?t=K:$(t)||(t=function(e,t){return!M(e)&&!M(t)&&(e=a(""+e),t=a(""+t),-1!==e.indexOf(t))});return function(o){return i&&!M(o)?ui(o,e.$,t,!1):ui(o,e,t,n)}}(t,n,o);break;default:return e}return e.filter(i)}}function ui(e,t,n,i,o){var r=null!==e?typeof e:"null",a=null!==t?typeof t:"null";if("string"===a&&"!"===t.charAt(0))return!ui(e,t.substring(1),n,i);if(z(e))return e.some((function(e){return ui(e,t,n,i)}));switch(r){case"object":var s;if(i){for(s in e)if("$"!==s.charAt(0)&&ui(e[s],t,n,!0))return!0;return!o&&ui(e,t,n,!1)}if("object"===a){for(s in t){var l=t[s];if(!$(l)&&!P(l)){var c="$"===s;if(!ui(c?e:e[s],l,n,c,c))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function di(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return P(n)&&(n=t.CURRENCY_SYM),P(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:hi(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function pi(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:hi(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}li.$inject=["$provide"],di.$inject=["$locale"],pi.$inject=["$locale"];function hi(e,t,n,i,o){if(!isFinite(e)||M(e))return"";var r=e<0,a=(e=Math.abs(e))+"",s="",l=[],c=!1;if(-1!==a.indexOf("e")){var u=a.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>o+1?e=0:(s=a,c=!0)}if(c)o>0&&e<1&&(s=e.toFixed(o),e=parseFloat(s));else{var d=(a.split(".")[1]||"").length;P(o)&&(o=Math.min(Math.max(t.minFrac,d),t.maxFrac));var p=(""+(e=+(Math.round(+(e.toString()+"e"+o)).toString()+"e"+-o))).split("."),h=p[0];p=p[1]||"";var f,g=0,m=t.lgSize,v=t.gSize;if(h.length>=m+v)for(g=h.length-m,f=0;f<g;f++)(g-f)%v==0&&0!==f&&(s+=n),s+=h.charAt(f);for(f=g;f<h.length;f++)(h.length-f)%m==0&&0!==f&&(s+=n),s+=h.charAt(f);for(;p.length<o;)p+="0";o&&"0"!==o&&(s+=i+p.substr(0,o))}return 0===e&&(r=!1),l.push(r?t.negPre:t.posPre,s,r?t.negSuf:t.posSuf),l.join("")}function fi(e,t,n){var i="";for(e<0&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function gi(e,t,n,i){return n=n||0,function(o){var r=o["get"+e]();return(n>0||r>-n)&&(r+=n),0===r&&-12==n&&(r=12),fi(r,t,i)}}function mi(e,t){return function(n,i){var o=n["get"+e]();return i[l(t?"SHORT"+e:e)][o]}}function vi(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function bi(e){return function(t){var n,i=vi(t.getFullYear()),o=+(n=t,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+i;return fi(1+Math.round(o/6048e5),e)}}function yi(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}var xi={yyyy:gi("FullYear",4),yy:gi("FullYear",2,0,!0),y:gi("FullYear",1),MMMM:mi("Month"),MMM:mi("Month",!0),MM:gi("Month",2,1),M:gi("Month",1,1),dd:gi("Date",2),d:gi("Date",1),HH:gi("Hours",2),H:gi("Hours",1),hh:gi("Hours",2,-12),h:gi("Hours",1,-12),mm:gi("Minutes",2),m:gi("Minutes",1),ss:gi("Seconds",2),s:gi("Seconds",1),sss:gi("Milliseconds",3),EEEE:mi("Day"),EEE:mi("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=fi(Math[t>0?"floor":"ceil"](t/60),2)+fi(Math.abs(t%60),2)},ww:bi(2),w:bi(1),G:yi,GG:yi,GGG:yi,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},wi=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ai=/^\-?\d+$/;function _i(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,o){var r,a,s="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,N(n)&&(n=Ai.test(n)?C(n):function(e){var n;if(n=e.match(t)){var i=new Date(0),o=0,r=0,a=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;n[9]&&(o=C(n[9]+n[10]),r=C(n[9]+n[11])),a.call(i,C(n[1]),C(n[2])-1,C(n[3]));var l=C(n[4]||0)-o,c=C(n[5]||0)-r,u=C(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(i,l,c,u,d),i}return e}(n)),R(n)&&(n=new Date(n)),!B(n))return n;for(;i;)(a=wi.exec(i))?i=(l=ee(l,a,1)).pop():(l.push(i),i=null);return o&&"UTC"===o&&(n=new Date(n.getTime())).setMinutes(n.getMinutes()+n.getTimezoneOffset()),w(l,(function(t){s+=(r=xi[t])?r(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function Ei(){return function(e,t){return P(t)&&(t=2),oe(e,t)}}_i.$inject=["$locale"];var Si=D(a),Ti=D(l);function Ci(){return function(e,t){return R(e)&&(e=e.toString()),z(e)||N(e)?(t=Math.abs(Number(t))===1/0?Number(t):C(t))?t>0?e.slice(0,t):e.slice(t):N(e)?"":[]:e}}function ki(e){return function(t,n,i){return x(t)?(0===(n=z(n)?n:[n]).length&&(n=["+"]),n=n.map((function(t){var n=!1,i=t||I;if(N(t)){if("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(n="-"==t.charAt(0),t=t.substring(1)),""===t)return o(s,n);if((i=e(t)).constant){var r=i();return o((function(e,t){return s(e[r],t[r])}),n)}}return o((function(e,t){return s(i(e),i(t))}),n)})),h.call(t).sort(o((function(e,t){for(var i=0;i<n.length;i++){var o=n[i](e,t);if(0!==o)return o}return 0}),i))):t;function o(e,t){return t?function(t,n){return e(n,t)}:e}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function a(e){return null===e?"null":"function"==typeof e.valueOf&&r(e=e.valueOf())||"function"==typeof e.toString&&r(e=e.toString())?e:""}function s(e,t){var n=typeof e,i=typeof t;return n===i&&"object"===n&&(e=a(e),t=a(t)),n===i?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):n<i?-1:1}}}function Li(e){return $(e)&&(e={link:e}),e.restrict=e.restrict||"AC",D(e)}ki.$inject=["$parse"];var Ii=D({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref&&!t.name)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===m.call(t.prop("href"))?"xlink:href":"href";t.on("click",(function(e){t.attr(n)||e.preventDefault()}))}}}}),Di={};w(ut,(function(e,t){if("multiple"!=e){var n=Mt("ng-"+t);Di[n]=function(){return{restrict:"A",priority:100,link:function(e,i,o){e.$watch(o[n],(function(e){o.$set(t,!!e)}))}}}}})),w(pt,(function(e,t){Di[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"==i.ngPattern.charAt(0)){var o=i.ngPattern.match(r);if(o)return void i.$set("ngPattern",new RegExp(o[1],o[2]))}e.$watch(i[t],(function(e){i.$set(t,e)}))}}}})),w(["src","srcset","href"],(function(e){var t=Mt("ng-"+e);Di[t]=function(){return{priority:99,link:function(n,i,o){var r=e,a=e;"href"===e&&"[object SVGAnimatedString]"===m.call(i.prop("href"))&&(a="xlinkHref",o.$attr[a]="xlink:href",r=null),o.$observe(t,(function(t){t?(o.$set(a,t),c&&r&&i.prop(r,o[a])):"href"===e&&o.$set(a,null)}))}}}}));var Pi={$addControl:L,$$renameControl:function(e,t){e.$name=t},$removeControl:L,$setValidity:L,$setDirty:L,$setPristine:L,$setSubmitted:L};function Oi(e,t,n,i,o){var r=this,a=[],s=r.$$parentForm=e.parent().controller("form")||Pi;r.$error={},r.$$success={},r.$pending=void 0,r.$name=o(t.name||t.ngForm||"")(n),r.$dirty=!1,r.$pristine=!0,r.$valid=!0,r.$invalid=!1,r.$submitted=!1,s.$addControl(r),r.$rollbackViewValue=function(){w(a,(function(e){e.$rollbackViewValue()}))},r.$commitViewValue=function(){w(a,(function(e){e.$commitViewValue()}))},r.$addControl=function(e){_e(e.$name,"input"),a.push(e),e.$name&&(r[e.$name]=e)},r.$$renameControl=function(e,t){var n=e.$name;r[n]===e&&delete r[n],r[t]=e,e.$name=t},r.$removeControl=function(e){e.$name&&r[e.$name]===e&&delete r[e.$name],w(r.$pending,(function(t,n){r.$setValidity(n,null,e)})),w(r.$error,(function(t,n){r.$setValidity(n,null,e)})),w(r.$$success,(function(t,n){r.$setValidity(n,null,e)})),Y(a,e)},ko({ctrl:this,$element:e,set:function(e,t,n){var i=e[t];i?-1===i.indexOf(n)&&i.push(n):e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(Y(i,n),0===i.length&&delete e[t])},parentForm:s,$animate:i}),r.$setDirty=function(){i.removeClass(e,wo),i.addClass(e,Ao),r.$dirty=!0,r.$pristine=!1,s.$setDirty()},r.$setPristine=function(){i.setClass(e,wo,Ao+" ng-submitted"),r.$dirty=!1,r.$pristine=!0,r.$submitted=!1,w(a,(function(e){e.$setPristine()}))},r.$setUntouched=function(){w(a,(function(e){e.$setUntouched()}))},r.$setSubmitted=function(){i.addClass(e,"ng-submitted"),r.$submitted=!0,s.$setSubmitted()}}Oi.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Mi=function(e){return["$timeout",function(t){return{name:"form",restrict:e?"EAC":"E",controller:Oi,compile:function(n,i){n.addClass(wo).addClass(xo);var o=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,r){if(!("action"in i)){var a=function(t){e.$apply((function(){r.$commitViewValue(),r.$setSubmitted()})),t.preventDefault()};Oe(n[0],"submit",a),n.on("$destroy",(function(){t((function(){Me(n[0],"submit",a)}),0,!1)}))}var s=r.$$parentForm;o&&(Mn(e,null,r.$name,r,r.$name),i.$observe(o,(function(t){r.$name!==t&&(Mn(e,null,r.$name,void 0,r.$name),s.$$renameControl(r,t),Mn(e,null,r.$name,r,r.$name))}))),n.on("$destroy",(function(){s.$removeControl(r),o&&Mn(e,null,i[o],void 0,r.$name),T(r,Pi)}))}}}}}]},Ni=Mi(),Ri=Mi(!0),Bi=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,zi=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,$i=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Hi=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Vi=/^(\d{4})-(\d{2})-(\d{2})$/,ji=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Fi=/^(\d{4})-W(\d\d)$/,Ui=/^(\d{4})-(\d\d)$/,Wi=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,qi={text:function(e,t,n,i,o,r){Gi(e,t,n,i,o,r),Qi(i)},date:Zi("date",Vi,Yi(Vi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Zi("datetimelocal",ji,Yi(ji,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Zi("time",Wi,Yi(Wi,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Zi("week",Fi,(function(e,t){if(B(e))return e;if(N(e)){Fi.lastIndex=0;var n=Fi.exec(e);if(n){var i=+n[1],o=+n[2],r=0,a=0,s=0,l=0,c=vi(i),u=7*(o-1);return t&&(r=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(i,0,c.getDate()+u,r,a,s,l)}}return NaN}),"yyyy-Www"),month:Zi("month",Ui,Yi(Ui,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,i,o,r){if(Xi(e,t,n,i),Gi(e,t,n,i,o,r),i.$$parserName="number",i.$parsers.push((function(e){return i.$isEmpty(e)?null:Hi.test(e)?parseFloat(e):void 0})),i.$formatters.push((function(e){if(!i.$isEmpty(e)){if(!R(e))throw _o("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})),O(n.min)||n.ngMin){var a;i.$validators.min=function(e){return i.$isEmpty(e)||P(a)||e>=a},n.$observe("min",(function(e){O(e)&&!R(e)&&(e=parseFloat(e,10)),a=R(e)&&!isNaN(e)?e:void 0,i.$validate()}))}if(O(n.max)||n.ngMax){var s;i.$validators.max=function(e){return i.$isEmpty(e)||P(s)||e<=s},n.$observe("max",(function(e){O(e)&&!R(e)&&(e=parseFloat(e,10)),s=R(e)&&!isNaN(e)?e:void 0,i.$validate()}))}},url:function(e,t,n,i,o,r){Gi(e,t,n,i,o,r),Qi(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||zi.test(n)}},email:function(e,t,n,i,o,r){Gi(e,t,n,i,o,r),Qi(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||$i.test(n)}},radio:function(e,t,n,i){P(n.name)&&t.attr("name",E());t.on("click",(function(e){t[0].checked&&i.$setViewValue(n.value,e&&e.type)})),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)},checkbox:function(e,t,n,i,o,r,a,s){var l=Ki(s,e,"ngTrueValue",n.ngTrueValue,!0),c=Ki(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",(function(e){i.$setViewValue(t[0].checked,e&&e.type)})),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return!1===e},i.$formatters.push((function(e){return K(e,l)})),i.$parsers.push((function(e){return e?l:c}))},hidden:L,button:L,submit:L,reset:L,file:L};function Qi(e){e.$formatters.push((function(t){return e.$isEmpty(t)?t:t.toString()}))}function Gi(e,t,n,i,o,r){var s=a(t[0].type);if(!o.android){var l=!1;t.on("compositionstart",(function(e){l=!0})),t.on("compositionend",(function(){l=!1,c()}))}var c=function(e){if(u&&(r.defer.cancel(u),u=null),!l){var o=t.val(),a=e&&e.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(o=W(o)),(i.$viewValue!==o||""===o&&i.$$hasNativeValidators)&&i.$setViewValue(o,a)}};if(o.hasEvent("input"))t.on("input",c);else{var u,d=function(e,t,n){u||(u=r.defer((function(){u=null,t&&t.value===n||c(e)})))};t.on("keydown",(function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||d(e,this,this.value)})),o.hasEvent("paste")&&t.on("paste cut",d)}t.on("change",c),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)}}function Yi(e,t){return function(n,i){var o,r;if(B(n))return n;if(N(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Bi.test(n))return new Date(n);if(e.lastIndex=0,o=e.exec(n))return o.shift(),r=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},w(o,(function(e,n){n<t.length&&(r[t[n]]=+e)})),new Date(r.yyyy,r.MM-1,r.dd,r.HH,r.mm,r.ss||0,1e3*r.sss||0)}return NaN}}function Zi(e,t,n,i){return function(o,r,a,s,l,c,u){Xi(o,r,a,s),Gi(0,r,a,s,l,c);var d,p,h,f=s&&s.$options&&s.$options.timezone;(s.$$parserName=e,s.$parsers.push((function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var i=n(e,d);return"UTC"===f&&i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i}})),s.$formatters.push((function(e){if(e&&!B(e))throw _o("datefmt","Expected `{0}` to be a date",e);if(g(e)){if((d=e)&&"UTC"===f){var t=6e4*d.getTimezoneOffset();d=new Date(d.getTime()+t)}return u("date")(e,i,f)}return d=null,""})),O(a.min)||a.ngMin)&&(s.$validators.min=function(e){return!g(e)||P(p)||n(e)>=p},a.$observe("min",(function(e){p=m(e),s.$validate()})));(O(a.max)||a.ngMax)&&(s.$validators.max=function(e){return!g(e)||P(h)||n(e)<=h},a.$observe("max",(function(e){h=m(e),s.$validate()})));function g(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function m(e){return O(e)?B(e)?e:n(e):void 0}}}function Xi(e,t,n,i){var o=t[0];(i.$$hasNativeValidators=M(o.validity))&&i.$parsers.push((function(e){var n=t.prop("validity")||{};return n.badInput&&!n.typeMismatch?void 0:e}))}function Ki(e,t,n,i,r){var a;if(O(i)){if(!(a=e(i)).constant)throw o("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return a(t)}return r}var Ji=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(o,r,s,l){l[0]&&(qi[a(s.type)]||qi.text)(o,r,s,l[0],t,e,n,i)}}}}],eo=/^(true|false|\d+)$/,to=function(){return{restrict:"A",priority:100,compile:function(e,t){return eo.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,(function(e){n.$set("value",e)}))}}}},no=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,i){e.$$addBindingInfo(n,i.ngBind),n=n[0],t.$watch(i.ngBind,(function(e){n.textContent=void 0===e?"":e}))}}}}],io=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,i,o){var r=e(i.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(i,r.expressions),i=i[0],o.$observe("ngBindTemplate",(function(e){i.textContent=void 0===e?"":e}))}}}}],oo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,o){var r=t(o.ngBindHtml),a=t(o.ngBindHtml,(function(e){return(e||"").toString()}));return n.$$addBindingClass(i),function(t,i,o){n.$$addBindingInfo(i,o.ngBindHtml),t.$watch(a,(function(){i.html(e.getTrustedHtml(r(t))||"")}))}}}}],ro=D({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push((function(){e.$eval(n.ngChange)}))}});function ao(e,t){return e="ngClass"+e,["$animate",function(n){return{restrict:"AC",link:function(r,a,s){var l;function c(e){var t=u(e,1);s.$addClass(t)}function u(e,t){var n=a.data("$classCounts")||{},i=[];return w(e,(function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))})),a.data("$classCounts",n),i.join(" ")}function d(e){if(!0===t||r.$index%2===t){var s=o(e||[]);if(l){if(!K(e,l)){!function(e,t){var o=i(t,e),r=i(e,t);o=u(o,1),r=u(r,-1),o&&o.length&&n.addClass(a,o),r&&r.length&&n.removeClass(a,r)}(o(l),s)}}else c(s)}l=X(e)}r.$watch(s[e],d,!0),s.$observe("class",(function(t){d(r.$eval(s[e]))})),"ngClass"!==e&&r.$watch("$index",(function(n,i){var a=1&n;if(a!==(1&i)){var l=o(r.$eval(s[e]));a===t?c(l):function(e){var t=u(e,-1);s.$removeClass(t)}(l)}}))}};function i(e,t){var n=[];e:for(var i=0;i<e.length;i++){for(var o=e[i],r=0;r<t.length;r++)if(o==t[r])continue e;n.push(o)}return n}function o(e){if(z(e))return e;if(N(e))return e.split(" ");if(M(e)){var t=[];return w(e,(function(e,n){e&&(t=t.concat(n.split(" ")))})),t}return e}}]}var so=ao("",!0),lo=ao("Odd",0),co=ao("Even",1),uo=Li({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),po=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ho={},fo={blur:!0,focus:!0};w("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(e){var t=Mt("ng-"+e);ho[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(o,r){var a=n(r[t],null,!0);return function(t,n){n.on(e,(function(n){var o=function(){a(t,{$event:n})};fo[e]&&i.$$phase?t.$evalAsync(o):t.$apply(o)}))}}}}]}));var go=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(t,i,o,r,a){var s,l,c;t.$watch(o.ngIf,(function(t){t?l||a((function(t,r){l=r,t[t.length++]=n.createComment(" end ngIf: "+o.ngIf+" "),s={clone:t},e.enter(t,i.parent(),i)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=Se(s.clone),e.leave(c).then((function(){c=null})),s=null))}))}}}],mo=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(o,r){var a=r.ngInclude||r.src,s=r.onload||"",l=r.autoscroll;return function(o,r,c,u,d){var p,h,f,g=0,m=function(){h&&(h.remove(),h=null),p&&(p.$destroy(),p=null),f&&(n.leave(f).then((function(){h=null})),h=f,f=null)};o.$watch(i.parseAsResourceUrl(a),(function(i){var a=function(){!O(l)||l&&!o.$eval(l)||t()},c=++g;i?(e(i,!0).then((function(e){if(c===g){var t=o.$new();u.template=e;var l=d(t,(function(e){m(),n.enter(e,null,r).then(a)}));f=l,(p=t).$emit("$includeContentLoaded",i),o.$eval(s)}}),(function(){c===g&&(m(),o.$emit("$includeContentError",i))})),o.$emit("$includeContentRequested",i)):(m(),u.template=null)}))}}}}],vo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,i,o,r){if(/SVG/.test(i[0].toString()))return i.empty(),void e(Qe(r.template,n).childNodes)(t,(function(e){i.append(e)}),{futureParentElement:i});i.html(r.template),e(i.contents())(t)}}}],bo=Li({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),yo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var o=t.attr(n.$attr.ngList)||", ",r="false"!==n.ngTrim,a=r?W(o):o;i.$parsers.push((function(e){if(!P(e)){var t=[];return e&&w(e.split(a),(function(e){e&&t.push(r?W(e):e)})),t}})),i.$formatters.push((function(e){if(z(e))return e.join(o)})),i.$isEmpty=function(e){return!e||!e.length}}}},xo="ng-valid",wo="ng-pristine",Ao="ng-dirty",_o=new o("ngModel"),Eo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,i,o,r,a,s,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e);var u,d=o(n.ngModel),p=d.assign,h=d,f=p,g=null,m=this;this.$$setOptions=function(e){if(m.$options=e,e&&e.getterSetter){var t=o(n.ngModel+"()"),r=o(n.ngModel+"($$$p)");h=function(e){var n=d(e);return $(n)&&(n=t(e)),n},f=function(e,t){$(d(e))?r(e,{$$$p:m.$modelValue}):p(e,m.$modelValue)}}else if(!d.assign)throw _o("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,ae(i))},this.$render=L,this.$isEmpty=function(e){return P(e)||""===e||null===e||e!=e};var v=i.inheritedData("$formController")||Pi,b=0;ko({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:v,$animate:r}),this.$setPristine=function(){m.$dirty=!1,m.$pristine=!0,r.removeClass(i,Ao),r.addClass(i,wo)},this.$setDirty=function(){m.$dirty=!0,m.$pristine=!1,r.removeClass(i,wo),r.addClass(i,Ao),v.$setDirty()},this.$setUntouched=function(){m.$touched=!1,m.$untouched=!0,r.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){m.$touched=!0,m.$untouched=!1,r.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){a.cancel(g),m.$viewValue=m.$$lastCommittedViewValue,m.$render()},this.$validate=function(){if(!R(m.$modelValue)||!isNaN(m.$modelValue)){var e=m.$$lastCommittedViewValue,t=m.$$rawModelValue,n=m.$valid,i=m.$modelValue,o=m.$options&&m.$options.allowInvalid;m.$$runValidators(t,e,(function(e){o||n===e||(m.$modelValue=e?t:void 0,m.$modelValue!==i&&m.$$writeModelToScope())}))}},this.$$runValidators=function(e,t,n){var i,o,r=++b;(function(){var e=m.$$parserName||"parse";if(void 0!==u)return u||(w(m.$validators,(function(e,t){a(t,null)})),w(m.$asyncValidators,(function(e,t){a(t,null)}))),a(e,u),u;a(e,null);return!0})()?!function(){var n=!0;if(w(m.$validators,(function(i,o){var r=i(e,t);n=n&&r,a(o,r)})),!n)return w(m.$asyncValidators,(function(e,t){a(t,null)})),!1;return!0}()?s(!1):(i=[],o=!0,w(m.$asyncValidators,(function(n,r){var s=n(e,t);if(!U(s))throw _o("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(r,void 0),i.push(s.then((function(){a(r,!0)}),(function(e){o=!1,a(r,!1)})))})),i.length?l.all(i).then((function(){s(o)}),L):s(!0)):s(!1);function a(e,t){r===b&&m.$setValidity(e,t)}function s(e){r===b&&n(e)}},this.$commitViewValue=function(){var e=m.$viewValue;a.cancel(g),(m.$$lastCommittedViewValue!==e||""===e&&m.$$hasNativeValidators)&&(m.$$lastCommittedViewValue=e,m.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var t=m.$$lastCommittedViewValue;if(u=!P(t)||void 0)for(var n=0;n<m.$parsers.length;n++)if(P(t=m.$parsers[n](t))){u=!1;break}R(m.$modelValue)&&isNaN(m.$modelValue)&&(m.$modelValue=h(e));var i=m.$modelValue,o=m.$options&&m.$options.allowInvalid;function r(){m.$modelValue!==i&&m.$$writeModelToScope()}m.$$rawModelValue=t,o&&(m.$modelValue=t,r()),m.$$runValidators(t,m.$$lastCommittedViewValue,(function(e){o||(m.$modelValue=e?t:void 0,r())}))},this.$$writeModelToScope=function(){f(e,m.$modelValue),w(m.$viewChangeListeners,(function(e){try{e()}catch(e){t(e)}}))},this.$setViewValue=function(e,t){m.$viewValue=e,m.$options&&!m.$options.updateOnDefault||m.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,i=0,o=m.$options;o&&O(o.debounce)&&(R(n=o.debounce)?i=n:R(n[t])?i=n[t]:R(n.default)&&(i=n.default)),a.cancel(g),i?g=a((function(){m.$commitViewValue()}),i):s.$$phase?m.$commitViewValue():e.$apply((function(){m.$commitViewValue()}))},e.$watch((function(){var t=h(e);if(t!==m.$modelValue){m.$modelValue=m.$$rawModelValue=t,u=void 0;for(var n=m.$formatters,i=n.length,o=t;i--;)o=n[i](o);m.$viewValue!==o&&(m.$viewValue=m.$$lastCommittedViewValue=o,m.$render(),m.$$runValidators(t,o,L))}return t}))}],So=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Eo,priority:1,compile:function(t){return t.addClass(wo).addClass("ng-untouched").addClass(xo),{pre:function(e,t,n,i){var o=i[0],r=i[1]||Pi;o.$$setOptions(i[2]&&i[2].$options),r.$addControl(o),n.$observe("name",(function(e){o.$name!==e&&r.$$renameControl(o,e)})),e.$on("$destroy",(function(){r.$removeControl(o)}))},post:function(t,n,i,o){var r=o[0];r.$options&&r.$options.updateOn&&n.on(r.$options.updateOn,(function(e){r.$$debounceViewValueCommit(e&&e.type)})),n.on("blur",(function(n){r.$touched||(e.$$phase?t.$evalAsync(r.$setTouched):t.$apply(r.$setTouched))}))}}}}}],To=/(\s+|^)default(\s+|$)/,Co=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=e.$eval(t.ngModelOptions),void 0!==this.$options.updateOn?(this.$options.updateOnDefault=!1,this.$options.updateOn=W(this.$options.updateOn.replace(To,(function(){return n.$options.updateOnDefault=!0," "})))):this.$options.updateOnDefault=!0}]}};function ko(e){var t=e.ctrl,n=e.$element,i={},o=e.set,r=e.unset,a=e.parentForm,s=e.$animate;function l(e,t){t&&!i[e]?(s.addClass(n,e),i[e]=!0):!t&&i[e]&&(s.removeClass(n,e),i[e]=!1)}function c(e,t){e=e?"-"+be(e,"-"):"",l(xo+e,!0===t),l("ng-invalid"+e,!1===t)}i["ng-invalid"]=!(i[xo]=n.hasClass(xo)),t.$setValidity=function(e,n,i){void 0===n?function(e,n,i){t[e]||(t[e]={});o(t[e],n,i)}("$pending",e,i):function(e,n,i){t[e]&&r(t[e],n,i);Lo(t[e])&&(t[e]=void 0)}("$pending",e,i);F(n)?n?(r(t.$error,e,i),o(t.$$success,e,i)):(o(t.$error,e,i),r(t.$$success,e,i)):(r(t.$error,e,i),r(t.$$success,e,i));t.$pending?(l("ng-pending",!0),t.$valid=t.$invalid=void 0,c("",null)):(l("ng-pending",!1),t.$valid=Lo(t.$error),t.$invalid=!t.$valid,c("",t.$valid));var s;s=t.$pending&&t.$pending[e]?void 0:!t.$error[e]&&(!!t.$$success[e]||null);c(e,s),a.$setValidity(e,s,t)}}function Lo(e){if(e)for(var t in e)return!1;return!0}var Io,Do=Li({terminal:!0,priority:1e3}),Po=["$locale","$interpolate",function(e,t){var n=/{}/g,i=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(o,r,s){var l,c=s.count,u=s.$attr.when&&r.attr(s.$attr.when),d=s.offset||0,p=o.$eval(u)||{},h={},f=t.startSymbol(),g=t.endSymbol(),m=f+c+"-"+d+g,v=b.noop;function y(e){r.text(e||"")}w(s,(function(e,t){var n=i.exec(t);if(n){var o=(n[1]?"-":"")+a(n[2]);p[o]=r.attr(s.$attr[t])}})),w(p,(function(e,i){h[i]=t(e.replace(n,m))})),o.$watch(c,(function(t){var n=parseFloat(t),i=isNaN(n);i||n in p||(n=e.pluralCat(n-d)),n===l||i&&isNaN(l)||(v(),v=o.$watch(h[n],y),l=n)}))}}}],Oo=["$parse","$animate",function(e,t){var i=o("ngRepeat"),r=function(e,t,n,i,o,r,a){e[n]=i,o&&(e[o]=r),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},a=function(e){return e.clone[0]},s=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(o,l){var c=l.ngRepeat,d=n.createComment(" end ngRepeat: "+c+" "),p=c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);var h=p[1],f=p[2],g=p[3],m=p[4];if(!(p=h.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var v,b,y,A,_=p[3]||p[1],E=p[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);var S={$id:gt};return m?v=e(m):(y=function(e,t){return gt(t)},A=function(e){return e}),function(e,n,o,l,p){v&&(b=function(t,n,i){return E&&(S[E]=t),S[_]=n,S.$index=i,v(e,S)});var h=Te();e.$watchCollection(f,(function(o){var l,f,m,v,S,T,C,k,L,I,D,P,O=n[0],M=Te();if(g&&(e[g]=o),x(o))L=o,k=b||y;else{for(var N in k=b||A,L=[],o)o.hasOwnProperty(N)&&"$"!=N.charAt(0)&&L.push(N);L.sort()}for(v=L.length,D=new Array(v),l=0;l<v;l++)if(S=o===L?l:L[l],T=o[S],C=k(S,T,l),h[C])I=h[C],delete h[C],M[C]=I,D[l]=I;else{if(M[C])throw w(D,(function(e){e&&e.scope&&(h[e.id]=e)})),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",c,C,T);D[l]={id:C,scope:void 0,clone:void 0},M[C]=!0}for(var R in h){if(P=Se((I=h[R]).clone),t.leave(P),P[0].parentNode)for(l=0,f=P.length;l<f;l++)P[l].$$NG_REMOVED=!0;I.scope.$destroy()}for(l=0;l<v;l++)if(S=o===L?l:L[l],T=o[S],(I=D[l]).scope){m=O;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);a(I)!=m&&t.move(Se(I.clone),null,u(O)),O=s(I),r(I.scope,l,_,T,E,S,v)}else p((function(e,n){I.scope=n;var i=d.cloneNode(!1);e[e.length++]=i,t.enter(e,null,u(O)),O=i,I.clone=e,M[I.id]=I,r(I.scope,l,_,T,E,S,v)}));h=M}))}}}}],Mo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,(function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],No=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,(function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],Ro=Li((function(e,t,n){e.$watchCollection(n.ngStyle,(function(e,n){n&&e!==n&&w(n,(function(e,n){t.css(n,"")})),e&&t.css(e)}))})),Bo=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,i,o,r){var a=o.ngSwitch||o.on,s=[],l=[],c=[],u=[],d=function(e,t){return function(){e.splice(t,1)}};t.$watch(a,(function(t){var i,o;for(i=0,o=c.length;i<o;++i)e.cancel(c[i]);for(c.length=0,i=0,o=u.length;i<o;++i){var a=Se(l[i].clone);u[i].$destroy(),(c[i]=e.leave(a)).then(d(c,i))}l.length=0,u.length=0,(s=r.cases["!"+t]||r.cases["?"])&&w(s,(function(t){t.transclude((function(i,o){u.push(o);var r=t.element;i[i.length++]=n.createComment(" end ngSwitchWhen: ");var a={clone:i};l.push(a),e.enter(i,r.parent(),r)}))}))}))}}}],zo=Li({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,o){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:o,element:t})}}),$o=Li({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,o){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:o,element:t})}}),Ho=Li({restrict:"EAC",link:function(e,t,n,i,r){if(!r)throw o("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ae(t));r((function(e){t.empty(),t.append(e)}))}}),Vo=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,o=t[0].text;e.put(i,o)}}}}],jo=o("ngOptions"),Fo=D({restrict:"A",terminal:!0}),Uo=["$compile","$parse",function(e,t){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,o={$setViewValue:L};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var i,r=this,a={},s=o;r.databound=n.ngModel,r.init=function(e,t,n){s=e,t,i=n},r.addOption=function(t,n){_e(t,'"option value"'),a[t]=!0,s.$viewValue==t&&(e.val(t),i.parent()&&i.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},r.removeOption=function(e){this.hasOption(e)&&(delete a[e],s.$viewValue===e&&this.renderUnknownOption(e))},r.renderUnknownOption=function(t){var n="? "+gt(t)+" ?";i.val(n),e.prepend(i),e.val(n),i.prop("selected",!0)},r.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",(function(){r.renderUnknownOption=L}))}],link:function(o,r,a,s){if(s[1]){for(var l,d=s[0],p=s[1],h=a.multiple,f=a.ngOptions,g=!1,m=!1,v=u(n.createElement("option")),b=u(n.createElement("optgroup")),y=v.clone(),x=0,_=r.children(),E=_.length;x<E;x++)if(""===_[x].value){l=g=_.eq(x);break}d.init(p,g,y),h&&(p.$isEmpty=function(e){return!e||0===e.length}),f?function(n,o,r){var a;if(!(a=f.match(i)))throw jo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",f,ae(o));var s=t(a[2]||a[1]),l=a[4]||a[6],u=/ as /.test(a[0])&&a[1],p=u?t(u):null,y=a[5],x=t(a[3]||""),_=t(a[2]?a[1]:l),E=t(a[7]),S=a[8]?t(a[8]):null,T={},C=[[{element:o,label:""}]],k={};g&&(e(g)(n),g.removeClass("ng-scope"),g.remove());o.empty(),o.on("change",I),r.$render=R,n.$watchCollection(E,M),n.$watchCollection(P,M),h&&n.$watchCollection((function(){return r.$modelValue}),M);function L(e,t,i){return k[l]=i,y&&(k[y]=t),e(n,k)}function I(){n.$apply((function(){var e,t=E(n)||[];if(h)e=[],w(o.val(),(function(n){n=S?T[n]:n,e.push(D(n,t[n]))}));else{var i=S?T[o.val()]:o.val();e=D(i,t[i])}r.$setViewValue(e),R()}))}function D(e,t){if("?"!==e)return""===e?null:L(p||_,e,t)}function P(){var e,t=E(n);if(t&&z(t)){e=new Array(t.length);for(var i=0,o=t.length;i<o;i++)e[i]=L(s,i,t[i]);return e}if(t)for(var r in e={},t)t.hasOwnProperty(r)&&(e[r]=L(s,r,t[r]));return e}function M(){m||(n.$$postDigest(R),m=!0)}function N(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function R(){m=!1;var e,t,i,a,l,u,f,I,D,P,M,R,B,$,H,V,j,F={"":[]},U=[""],W=r.$viewValue,q=E(n)||[],Q=y?A(q):q,G={},Y=function(e){var t;if(h)if(S&&z(e)){t=new mt([]);for(var n=0;n<e.length;n++)t.put(L(S,null,e[n]),!0)}else t=new mt(e);else S&&(e=L(S,null,e));return function(n,i){var o;return o=S||(p||_),h?O(t.remove(L(o,n,i))):e===L(o,n,i)}}(W),Z=!1;for(T={},R=0;R<(P=Q.length);R++)f=R,y&&"$"===(f=Q[R]).charAt(0)||(I=q[f],(t=F[e=L(x,f,I)||""])||(t=F[e]=[],U.push(e)),B=Y(f,I),Z=Z||B,V=O(V=L(s,f,I))?V:"",j=S?S(n,k):y?Q[R]:R,S&&(T[j]=f),t.push({id:j,label:V,selected:B}));for(h||(g||null===W?F[""].unshift({id:"",label:"",selected:!Z}):Z||F[""].unshift({id:"?",label:"",selected:!0})),M=0,D=U.length;M<D;M++){for(t=F[e=U[M]],C.length<=M?(l=[a={element:b.clone().attr("label",e),label:t.label}],C.push(l),o.append(a.element)):(a=(l=C[M])[0]).label!=e&&a.element.attr("label",a.label=e),$=null,R=0,P=t.length;R<P;R++)i=t[R],(u=l[R+1])?($=u.element,u.label!==i.label&&(N(G,u.label,!1),N(G,i.label,!0),$.text(u.label=i.label),$.prop("label",u.label)),u.id!==i.id&&$.val(u.id=i.id),$[0].selected!==i.selected&&($.prop("selected",u.selected=i.selected),c&&$.prop("selected",u.selected))):(""===i.id&&g?H=g:(H=v.clone()).val(i.id).prop("selected",i.selected).attr("selected",i.selected).prop("label",i.label).text(i.label),l.push(u={element:H,label:i.label,id:i.id,selected:i.selected}),N(G,i.label,!0),$?$.after(H):a.element.append(H),$=H);for(R++;l.length>R;)N(G,(i=l.pop()).label,!1),i.element.remove()}for(;C.length>M;){for(t=C.pop(),R=1;R<t.length;++R)N(G,t[R].label,!1);t[0].element.remove()}w(G,(function(e,t){e>0?d.addOption(t):e<0&&d.removeOption(t)}))}}(o,r,p):h?function(e,t,n){var i;n.$render=function(){var e=new mt(n.$viewValue);w(t.find("option"),(function(t){t.selected=O(e.get(t.value))}))},e.$watch((function(){K(i,n.$viewValue)||(i=X(n.$viewValue),n.$render())})),t.on("change",(function(){e.$apply((function(){var e=[];w(t.find("option"),(function(t){t.selected&&e.push(t.value)})),n.$setViewValue(e)}))}))}(o,r,p):function(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(y.parent()&&y.remove(),t.val(e),""===e&&l.prop("selected",!0)):P(e)&&l?t.val(""):i.renderUnknownOption(e)},t.on("change",(function(){e.$apply((function(){y.parent()&&y.remove(),n.$setViewValue(t.val())}))}))}(o,r,p,d)}}}}],Wo=["$interpolate",function(e){var t={addOption:L,removeOption:L};return{restrict:"E",priority:100,compile:function(n,i){if(P(i.value)){var o=e(n.text(),!0);o||i.$set("value",n.text())}return function(e,n,i){var r=n.parent(),a=r.data("$selectController")||r.parent().data("$selectController");a&&a.databound||(a=t),o?e.$watch(o,(function(e,t){i.$set("value",e),t!==e&&a.removeOption(t),a.addOption(e,n)})):a.addOption(i.value,n),n.on("$destroy",(function(){a.removeOption(i.value)}))}}}}],qo=D({restrict:"E",terminal:!1}),Qo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",(function(){i.$validate()})))}}},Go=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r,a=n.ngPattern||n.pattern;n.$observe("pattern",(function(e){if(N(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw o("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,ae(t));r=e||void 0,i.$validate()})),i.$validators.pattern=function(e){return i.$isEmpty(e)||P(r)||r.test(e)}}}}},Yo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var o=-1;n.$observe("maxlength",(function(e){var t=C(e);o=isNaN(t)?-1:t,i.$validate()})),i.$validators.maxlength=function(e,t){return o<0||i.$isEmpty(t)||t.length<=o}}}}},Zo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var o=0;n.$observe("minlength",(function(e){o=C(e)||0,i.$validate()})),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=o}}}}};t.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(xe||((d=e)&&d.fn.on?(u=d,T(d.fn,{scope:ct.scope,isolateScope:ct.isolateScope,controller:ct.controller,injector:ct.injector,inheritedData:ct.inheritedData}),Io=d.cleanData,d.cleanData=function(e){var t;if(ye)ye=!1;else for(var n,i=0;null!=(n=e[i]);i++)(t=d._data(n,"events"))&&t.$destroy&&d(n).triggerHandler("$destroy");Io(e)}):u=Ge,b.element=u,xe=!0),function(e){T(e,{bootstrap:fe,copy:Z,extend:T,equals:K,element:u,forEach:w,injector:At,noop:L,bind:ne,toJson:oe,fromJson:re,identity:I,isUndefined:P,isDefined:O,isString:N,isFunction:$,isObject:M,isNumber:R,isElement:Q,isArray:z,version:Ie,isDate:B,lowercase:a,uppercase:l,callbacks:{counter:0},getTestability:me,$$minErr:o,$$csp:J,reloadWithDebugInfo:ge}),p=function(e){var t=o("$injector"),n=o("ng");function i(e,t,n){return e[t]||(e[t]=n())}var r=i(e,"angular",Object);return r.$$minErr=r.$$minErr||o,i(r,"module",(function(){var e={};return function(o,r,a){return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(o,"module"),r&&e.hasOwnProperty(o)&&(e[o]=null),i(e,o,(function(){if(!r)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var e=[],n=[],i=[],s=c("$injector","invoke","push",n),l={_invokeQueue:e,_configBlocks:n,_runBlocks:i,requires:r,name:o,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:c("$provide","value"),constant:c("$provide","constant","unshift"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),config:s,run:function(e){return i.push(e),this}};return a&&s(a),l;function c(t,n,i,o){return o||(o=e),function(){return o[i||"push"]([t,n,arguments]),l}}}))}}))}(t);try{p("ngLocale")}catch(e){p("ngLocale",[]).provider("$locale",nn)}p("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Qn}),e.provider("$compile",Pt).directive({a:Ii,input:Ji,textarea:Ji,form:Ni,script:Vo,select:Uo,style:qo,option:Wo,ngBind:no,ngBindHtml:oo,ngBindTemplate:io,ngClass:so,ngClassEven:co,ngClassOdd:lo,ngCloak:uo,ngController:po,ngForm:Ri,ngHide:No,ngIf:go,ngInclude:mo,ngInit:bo,ngNonBindable:Do,ngPluralize:Po,ngRepeat:Oo,ngShow:Mo,ngStyle:Ro,ngSwitch:Bo,ngSwitchWhen:zo,ngSwitchDefault:$o,ngOptions:Fo,ngTransclude:Ho,ngModel:So,ngList:yo,ngChange:ro,pattern:Go,ngPattern:Go,required:Qo,ngRequired:Qo,minlength:Zo,ngMinlength:Zo,maxlength:Yo,ngMaxlength:Yo,ngValue:to,ngModelOptions:Co}).directive({ngInclude:vo}).directive(Di).directive(ho),e.provider({$anchorScroll:_t,$animate:St,$browser:kt,$cacheFactory:Lt,$controller:zt,$document:$t,$exceptionHandler:Ht,$filter:li,$interpolate:en,$interval:tn,$http:Zt,$httpBackend:Kt,$location:xn,$log:wn,$parse:Vn,$rootScope:qn,$q:jn,$$q:Fn,$sce:Kn,$sceDelegate:Xn,$sniffer:Jn,$templateCache:It,$templateRequest:ei,$$testability:ti,$timeout:ni,$window:si,$$rAF:Wn,$$asyncCallback:Tt,$$jqLite:ft})}])}(b),u(n).ready((function(){he(n,fe)})))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>')}).call(this,n(0))},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(15)],void 0===(r="function"==typeof(i=function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.plugin={add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,r=e.plugins[t];if(r&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,n)}}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(7),n(25),n(28),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i,o=n&&"left"===n?"scrollLeft":"scrollTop";return t[o]>0||(t[o]=1,i=t[o]>0,t[o]=0,i)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",(function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())})).on("mouseleave",(function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,o,r,a=this.options,s=this;if(this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)o="ui-resizable-"+(t=e.trim(i[n])),r=e("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:a.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(r);this._renderAxis=function(t){var n,i,o,r;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")})),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,r=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,i+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,r=this.axis,a=t.pageX-o.left||0,s=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,o,r,a,s,l,c=this.options;return this._helper&&(o=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:this.sizeDiff.height,r=i?0:this.sizeDiff.width,a={width:this.helper.width()-r,height:this.helper.height()-o},s=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:l,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,r,a=this.options;r={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=s-t.minWidth),i&&c&&(e.left=s-t.maxWidth),a&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(o[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),a=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,r,a,s,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,p=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),n=[],e(["Top","Right","Left","Bottom"]).each((function(e,i){n[e]=l._num(t.css("padding"+i))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,a=l._hasScroll(p,"left")?p.scrollWidth:r,s=l._hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:i.left,top:i.top,width:a,height:s}))},resize:function(t){var n,i,o,r,a=e(this).resizable("instance"),s=a.options,l=a.containerOffset,c=a.position,u=a._aspectRatio||t.shiftKey,d={top:0,left:0},p=a.containerElement,h=!0;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),u&&(a.size.height=a.size.width/a.aspectRatio,h=!1),a.position.left=s.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),u&&(a.size.width=a.size.height*a.aspectRatio,h=!1),a.position.top=a._helper?l.top:0),o=a.containerElement.get(0)===a.element.parent().get(0),r=/relative|absolute/.test(a.containerElement.css("position")),o&&r?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,u&&(a.size.height=a.size.width/a.aspectRatio,h=!1)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,u&&(a.size.width=a.size.height*a.aspectRatio,h=!1)),h||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,r=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:s.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:s.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,r=i.originalSize,a=i.originalPosition,s={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0};e(o.alsoResize).each((function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,(function(e,t){var n=(i[t]||0)+(s[t]||0);n&&n>=0&&(o[t]=n||null)})),t.css(o)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,r=n.originalSize,a=n.originalPosition,s=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-r.width)/c)*c,p=Math.round((o.height-r.height)/u)*u,h=r.width+d,f=r.height+p,g=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<f,v=i.minWidth&&i.minWidth>h,b=i.minHeight&&i.minHeight>f;i.grid=l,v&&(h+=c),b&&(f+=u),g&&(h-=c),m&&(f-=u),/^(se|s|e)$/.test(s)?(n.size.width=h,n.size.height=f):/^(ne)$/.test(s)?(n.size.width=h,n.size.height=f,n.position.top=a.top-p):/^(sw)$/.test(s)?(n.size.width=h,n.size.height=f,n.position.left=a.left-d):((f-u<=0||h-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=a.top-p):(f=u-t.height,n.size.height=f,n.position.top=a.top+r.height-f),h-c>0?(n.size.width=h,n.position.left=a.left-d):(h=c-t.width,n.size.width=h,n.position.left=a.left+r.width-h))}}),e.ui.resizable})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(4)],void 0===(r="function"==typeof(i=function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,(function(i,o){var r,a={};if(o)return"controlgroupLabel"===i?((r=t.element.find(o)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(r.get()))):void(e.fn[i]&&(a=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}},t.element.find(o).each((function(){var o=e(this),r=o[i]("instance"),s=e.widget.extend({},a);if("button"!==i||!o.parent(".ui-spinner").length){r||(r=o[i]()[i]("instance")),r&&(s.classes=t._resolveClassesValues(s.classes,r)),o[i](s);var l=o[i]("widget");e.data(l[0],"ui-controlgroup-data",r||o[i]("instance")),n.push(l[0])}}))))})),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var n=e(this).data("ui-controlgroup-data");n&&n[t]&&n[t]()}))},_updateCornerClass:function(e,t){var n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var o={};return e.each(n,(function(r){var a=i.options.classes[r]||"";a=e.trim(a.replace(t,"")),o[r]=(a+" "+n[r]).replace(/\s+/g," ")})),o},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,i){var o=t[i]().data("ui-controlgroup-data");if(o&&n["_"+o.widgetName+"Options"]){var r=n["_"+o.widgetName+"Options"](1===t.length?"only":i);r.classes=n._resolveClassesValues(r.classes,o),o.element[o.widgetName](r)}else n._updateCornerClass(t[i](),i)})),this._callChildMethod("refresh"))}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(12),n(16),n(17),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,i=this,o=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML})),this.originalLabel&&(o.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(o.disabled=t),o},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,n="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(n):e(n).filter((function(){return 0===e(this).form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Scale 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5),n(34)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("scale",(function(t,n){var i=e(this),o=t.mode,r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==o?0:100),a=e.extend(!0,{from:e.effects.scaledDimensions(i),to:e.effects.scaledDimensions(i,r,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(a.from.opacity=1,a.to.opacity=0),e.effects.effect.size.call(this,a,n)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Size 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("size",(function(t,n){var i,o,r,a=e(this),s=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=t.mode,d="effect"!==u,p=t.scale||"both",h=t.origin||["middle","center"],f=a.css("position"),g=a.position(),m=e.effects.scaledDimensions(a),v=t.from||m,b=t.to||e.effects.scaledDimensions(a,0);e.effects.createPlaceholder(a),"show"===u&&(r=v,v=b,b=r),o={from:{y:v.height/m.height,x:v.width/m.width},to:{y:b.height/m.height,x:b.width/m.width}},"box"!==p&&"both"!==p||(o.from.y!==o.to.y&&(v=e.effects.setTransition(a,l,o.from.y,v),b=e.effects.setTransition(a,l,o.to.y,b)),o.from.x!==o.to.x&&(v=e.effects.setTransition(a,c,o.from.x,v),b=e.effects.setTransition(a,c,o.to.x,b))),"content"!==p&&"both"!==p||o.from.y!==o.to.y&&(v=e.effects.setTransition(a,s,o.from.y,v),b=e.effects.setTransition(a,s,o.to.y,b)),h&&(i=e.effects.getBaseline(h,m),v.top=(m.outerHeight-v.outerHeight)*i.y+g.top,v.left=(m.outerWidth-v.outerWidth)*i.x+g.left,b.top=(m.outerHeight-b.outerHeight)*i.y+g.top,b.left=(m.outerWidth-b.outerWidth)*i.x+g.left),a.css(v),"content"!==p&&"both"!==p||(l=l.concat(["marginTop","marginBottom"]).concat(s),c=c.concat(["marginLeft","marginRight"]),a.find("*[width]").each((function(){var n=e(this),i=e.effects.scaledDimensions(n),r={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},a={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x};o.from.y!==o.to.y&&(r=e.effects.setTransition(n,l,o.from.y,r),a=e.effects.setTransition(n,l,o.to.y,a)),o.from.x!==o.to.x&&(r=e.effects.setTransition(n,c,o.from.x,r),a=e.effects.setTransition(n,c,o.to.x,a)),d&&e.effects.saveStyle(n),n.css(r),n.animate(a,t.duration,t.easing,(function(){d&&e.effects.restoreStyle(n)}))}))),a.animate(b,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=a.offset();0===b.opacity&&a.css("opacity",v.opacity),d||(a.css("position","static"===f?"relative":f).offset(t),e.effects.saveStyle(a)),n()}})}))})?i.apply(t,o):i)||(e.exports=r)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,$,fullScreenApi;//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}!function(e){e.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var t,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null==e?String(e):n[i.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!o.call(t,"constructor")&&!o.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var i in t)n=i;return void 0===n||o.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=(t=document.createElement("canvas"),!(!e.isFunction(t.getContext)||!t.getContext("2d"))),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(n,1)/i}return 1}()}(OpenSeadragon),function($){$.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=arguments.length,l=!1,c=1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},c=2),"object"==typeof a||OpenSeadragon.isFunction(a)||(a={}),s===c&&(a=this,--c);c<s;c++)if(null!==(e=arguments[c])||void 0!==e)for(t in e)n=a[t],a!==(i=e[t])&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(o=OpenSeadragon.isArray(i)))?(o?(o=!1,r=n&&OpenSeadragon.isArray(n)?n:[]):r=n&&OpenSeadragon.isPlainObject(n)?n:{},a[t]=OpenSeadragon.extend(l,r,i)):void 0!==i&&(a[t]=i));return a};var isIOSDevice=function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,i=new $.Point;for(n=getOffsetParent(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position);n;)i.x+=e.offsetLeft,i.y+=e.offsetTop,t&&(i=i.plus($.getPageScroll())),n=getOffsetParent(e=n,t="fixed"==$.getElementStyle(e).position);return i},getElementOffset:function(e){var t,n,i=(e=$.getElement(e))&&e.ownerDocument,o={top:0,left:0};return i?(t=i.documentElement,void 0!==e.getBoundingClientRect&&(o=e.getBoundingClientRect()),n=i==i.window?i:9===i.nodeType&&(i.defaultView||i.parentWindow),new $.Point(o.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),o.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return(e=$.getElement(e)).currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var t={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==t[e])return t[e];var n=document.createElement("div").style,i=null;if(void 0!==n[e])i=e;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],r=$.capitalizeFirstLetter(e),a=0;a<o.length;a++){var s=o[a]+r;if(void 0!==n[s]){i=s;break}}return t[e]=i,i},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),i=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+i.x&&t.y<n.y+i.y&&t.y>=n.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if(void 0!==window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,(n=$.getPageScroll()).x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return(n=$.makeNeutralElement("span")).style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var i;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(i="alpha(opacity="+Math.round(100*t)+")",e.style.filter=i):e.style.filter=""},setElementTouchActionNone:function(e){void 0!==(e=$.getElement(e)).style.touchAction?e.style.touchAction="none":void 0!==e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){(e=$.getElement(e)).className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var i,o,r=n||0;if(!e)throw new TypeError;if(0===(o=e.length)||r>=o)return-1;for(r<0&&(r=o-Math.abs(r)),i=r;i<o;i++)if(e[i]===t)return i;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,i,o=[];for(n=(e=$.getElement(e)).className.split(/\s+/),i=0;i<n.length;i++)n[i]&&n[i]!==t&&o.push(n[i]);e.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,i){(e=$.getElement(e)).addEventListener(t,n,i)};if(window.attachEvent)return function(e,t,n,i){(e=$.getElement(e)).attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,i){(e=$.getElement(e)).removeEventListener(t,n,i)};if(window.detachEvent)return function(e,t,n,i){(e=$.getElement(e)).detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){(e=$.getEvent(e)).preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){(e=$.getEvent(e)).cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){(e=$.getEvent(e)).stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){(e=$.getEvent(e)).cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var n,i=[];for(n=2;n<arguments.length;n++)i.push(arguments[n]);return function(){var n,o=i.concat([]);for(n=0;n<arguments.length;n++)o.push(arguments[n]);return t.apply(e,o)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,n){var i,o,r;$.isPlainObject(e)&&(t=e.success,n=e.error,i=e.withCredentials,o=e.headers,r=e.responseType||null,e=e.url);var a=$.getUrlProtocol(e),s=$.createAjaxRequest("file:"===a);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=function(){},s.status>=200&&s.status<300||0===s.status&&"http:"!==a&&"https:"!==a?t(s):($.console.log("AJAX request returned %d: %s",s.status,e),$.isFunction(n)&&n(s)))};try{if(s.open("GET",e,!0),r&&(s.responseType=r),o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.setRequestHeader(l,o[l]);i&&(s.withCredentials=!0),s.send(null)}catch(i){var c=i.message;if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10&&void 0!==i.number&&-2147024891==i.number&&(c+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",i.name,c),s.onreadystatechange=function(){},window.XDomainRequest){var u=new window.XDomainRequest;if(u){u.onload=function(e){$.isFunction(t)&&t({responseText:u.responseText,status:200,statusText:"OK"})},u.onerror=function(e){$.isFunction(n)&&n({responseText:u.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{u.open("GET",e),u.send()}catch(e){$.isFunction(n)&&n(s,i)}}}else $.isFunction(n)&&n(s,i)}return s},jsonp:function(e){var t,n=e.url,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+$.now(),r=window[o],a="$1"+o+"$2",s=e.param||"callback",l=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,a),n+=(/\?/.test(n)?"&":"?")+s+"="+o,window[o]=function(e){if(r)window[o]=r;else try{delete window[o]}catch(e){}l&&$.isFunction(l)&&l(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=n,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,i&&t.parentNode&&i.removeChild(t),t=void 0)},i.insertBefore(t,i.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return!!FILEFORMATS[(e=e||"").toLowerCase()]}});var nullfunction=function(e){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}!function(){var e=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(t.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):t.indexOf("Safari")>=0?($.Browser.vendor=t.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var n,i,o,r=window.location.search.substring(1).split("&");for(o=0;o<r.length;o++)if((i=(n=r[o]).indexOf("="))>0){var a=n.substring(0,i),s=n.substring(i+1);try{URLPARAMS[a]=decodeURIComponent(s)}catch(e){$.console.error("Ignoring malformed URL parameter: %s=%s",a,s)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}(),function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var i,o=[],r=[],a=0;$.requestAnimationFrame=function(e){return o.push([++a,e]),i||(i=setInterval((function(){if(o.length){var e=$.now(),t=r;for(r=o,o=t;r.length;)r.shift()[1](e)}else clearInterval(i),i=void 0}),20)),a},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=o.length;t<n;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,n=r.length;t<n;t+=1)if(r[t][0]===e)return void r.splice(t,1)}}}(window)}(OpenSeadragon),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return OpenSeadragon})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),$=OpenSeadragon,fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.fullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.requestFullscreen()},fullScreenApi.exitFullScreen=function(){document.exitFullscreen()},fullScreenApi.fullScreenEventName="fullscreenchange",fullScreenApi.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.msFullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.msRequestFullscreen()},fullScreenApi.exitFullScreen=function(){document.msExitFullscreen()},fullScreenApi.fullScreenEventName="MSFullscreenChange",fullScreenApi.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.webkitFullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.webkitRequestFullscreen()},fullScreenApi.exitFullScreen=function(){document.webkitExitFullscreen()},fullScreenApi.fullScreenEventName="webkitfullscreenchange",fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},fullScreenApi.requestFullScreen=function(e){return e.webkitRequestFullScreen()},fullScreenApi.exitFullScreen=function(){document.webkitCancelFullScreen()},fullScreenApi.fullScreenEventName="webkitfullscreenchange",fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.mozFullScreenElement},fullScreenApi.requestFullScreen=function(e){return e.mozRequestFullScreen()},fullScreenApi.exitFullScreen=function(){document.mozCancelFullScreen()},fullScreenApi.fullScreenEventName="mozfullscreenchange",fullScreenApi.fullScreenErrorEventName="mozfullscreenerror"),fullScreenApi.isFullScreen=function(){return null!==fullScreenApi.getFullScreenElement()},fullScreenApi.cancelFullScreen=function(){$.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),fullScreenApi.exitFullScreen()},$.extend($,fullScreenApi),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,n,i){var o=this;i=i||1;var r=0,a=function(n){++r===i&&o.removeHandler(e,a),t(n)};this.addHandler(e,a,n)},addHandler:function(t,n,i){var o=this.events[t];o||(this.events[t]=o=[]),n&&e.isFunction(n)&&(o[o.length]={handler:n,userData:i||null})},removeHandler:function(t,n){var i,o=this.events[t],r=[];if(o&&e.isArray(o)){for(i=0;i<o.length;i++)o[i].handler!==n&&r.push(o[i]);this.events[t]=r}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var i,o=t.length;for(i=0;i<o;i++)t[i]&&(n.eventSource=e,n.userData=t[i].userData,t[i].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&(t||(t={}),n(this,t))}}}(OpenSeadragon),function(e){var t,n,i,o,r,a,s=[],l={};function c(t){var n,i=l[t.hash],o=i.activePointersLists.length;for(n=0;n<o;n++)i.activePointersLists[n].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",i.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",i.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",i.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",i.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",i.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",i.touchendcaptured,!0),i.activePointersLists[n].captureCount=0);for(n=0;n<o;n++)i.activePointersLists.pop()}function u(t){var n,i,o=l[t.hash];if(o.tracking){for(i=0;i<e.MouseTracker.subscribeEvents.length;i++)n=e.MouseTracker.subscribeEvents[i],e.removeEvent(t.element,n,o[n],!1);c(t),o.tracking=!1}}function d(t,n){var i=l[t.hash];if("pointerevent"===n)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:i.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:i.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:i.mouseupcaptured,moveName:"mousemove",moveHandler:i.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function p(t,n,i){var o,r=t.getActivePointersListByType(n);r.captureCount+=i||1,1===r.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(o=d(t,e.MouseTracker.havePointerEvents?"pointerevent":n),be&&ye(window.top)&&e.addEvent(window.top,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0)))}function h(t,n,i){var o,r=t.getActivePointersListByType(n);r.captureCount-=i||1,0===r.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(o=d(t,e.MouseTracker.havePointerEvents?"pointerevent":n),be&&ye(window.top)&&e.removeEvent(window.top,o.upName,o.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0)))}function f(t){var n;if(e.MouseTracker.unprefixedPointerEvents)n=t.pointerType;else switch(t.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function g(t){return e.getMousePosition(t)}function m(e,t){return v(g(e),t)}function v(t,n){var i=e.getElementOffset(n);return t.minus(i)}function b(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function y(t,n){t.clickHandler&&e.cancelEvent(n)}function x(t,n){t.dblClickHandler&&e.cancelEvent(n)}function w(t,n){t.keyDownHandler&&(n=e.getEvent(n),t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}function A(t,n){t.keyUpHandler&&(n=e.getEvent(n),t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}function _(t,n){t.keyHandler&&(n=e.getEvent(n),t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}function E(t,n){t.focusHandler&&(n=e.getEvent(n),!1===t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))}function S(t,n){t.blurHandler&&(n=e.getEvent(n),!1===t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))}function T(e,t){k(e,t,t)}function C(t,n){var i={target:(n=e.getEvent(n)).target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?i.deltaY=-n.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:i.deltaY=n.detail,k(t,i,n)}function k(t,n,i){var o;o=n.deltaY<0?1:-1,t.scrollHandler&&!1===t.scrollHandler({eventSource:t,pointerType:"mouse",position:m(n,t.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i)}function L(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function I(t,n){P(t,n=e.getEvent(n))}function D(t,n){(n=e.getEvent(n)).currentTarget===n.relatedTarget||L(n.currentTarget,n.relatedTarget)||P(t,n)}function P(t,n){he(t,n,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:e.now()}])}function O(t,n){N(t,n=e.getEvent(n))}function M(t,n){(n=e.getEvent(n)).currentTarget===n.relatedTarget||L(n.currentTarget,n.relatedTarget)||N(t,n)}function N(t,n){fe(t,n,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:e.now()}])}function R(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function B(t,n){ge(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:e.now()}],R(n.button))&&(e.stopEvent(n),p(t,"mouse")),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(n)}function z(e,t){H(e,t)}function $(t,n){H(t,n),e.stopEvent(n)}function H(t,n){me(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:e.now()}],R(n.button))&&h(t,"mouse")}function V(e,t){F(e,t)}function j(t,n){F(t,n),e.stopEvent(n)}function F(t,n){ve(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:e.now()}])}function U(e,t,n){var i,o=n.getLength(),r=[];if("touch"===n.type||n.contacts>0){for(i=0;i<o;i++)r.push(n.getByIndex(i));r.length>0&&(me(e,t,r,0),n.captureCount=1,h(e,n.type),fe(e,t,r))}}function W(t,n){var i,o,r,a,l=n.changedTouches.length,c=[],u=t.getActivePointersListByType("touch");for(i=e.now(),u.getLength()>n.touches.length-l&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),U(t,n,u)),o=0;o<l;o++)c.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:g(n.changedTouches[o]),currentTime:i});for(he(t,n,c),o=0;o<s.length;o++)if(s[o]!==t&&s[o].isTracking()&&L(s[o].element,t.element)){for(a=[],r=0;r<l;r++)a.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:g(n.changedTouches[r]),currentTime:i});he(s[o],n,a)}ge(t,n,c,0)&&(e.stopEvent(n),p(t,"touch",l)),e.cancelEvent(n)}function q(e,t){G(e,t)}function Q(t,n){G(t,n),e.stopEvent(n)}function G(t,n){var i,o,r,a,l=n.changedTouches.length,c=[];for(i=e.now(),o=0;o<l;o++)c.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:g(n.changedTouches[o]),currentTime:i});for(me(t,n,c,0)&&h(t,"touch",l),fe(t,n,c),o=0;o<s.length;o++)if(s[o]!==t&&s[o].isTracking()&&L(s[o].element,t.element)){for(a=[],r=0;r<l;r++)a.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:g(n.changedTouches[r]),currentTime:i});fe(s[o],n,a)}e.cancelEvent(n)}function Y(e,t){X(e,t)}function Z(t,n){X(t,n),e.stopEvent(n)}function X(t,n){var i,o=n.changedTouches.length,r=[];for(i=0;i<o;i++)r.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:g(n.changedTouches[i]),currentTime:e.now()});ve(t,n,r),e.cancelEvent(n)}function K(e,t){var n=e.getActivePointersListByType("touch");U(e,t,n)}function J(e,t){return t.stopPropagation(),t.preventDefault(),!1}function ee(e,t){return t.stopPropagation(),t.preventDefault(),!1}function te(t,n){n.currentTarget===n.relatedTarget||L(n.currentTarget,n.relatedTarget)||he(t,n,[{id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:e.now()}])}function ne(t,n){n.currentTarget===n.relatedTarget||L(n.currentTarget,n.relatedTarget)||fe(t,n,[{id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:e.now()}])}function ie(t,n){var i;ge(t,n,[i={id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:e.now()}],n.button)&&(e.stopEvent(n),p(t,i.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(n)}function oe(e,t){ae(e,t)}function re(t,n){t.getActivePointersListByType(f(n)).getById(n.pointerId)&&ae(t,n),e.stopEvent(n)}function ae(t,n){var i;me(t,n,[i={id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:e.now()}],n.button)&&h(t,i.type)}function se(e,t){ce(e,t)}function le(t,n){t.getActivePointersListByType(f(n)).getById(n.pointerId)&&ce(t,n),e.stopEvent(n)}function ce(t,n){ve(t,n,[{id:n.pointerId,type:f(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:e.now()}])}function ue(e,t){!function(e,t,n){me(e,t,n,0),fe(e,t,n)}(e,t,[{id:t.pointerId,type:f(t)}])}function de(e,t){return Object.prototype.hasOwnProperty.call(t,"isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function pe(e,t){var n,i;return e.getById(t.id)?(n=e.removeById(t.id),Object.prototype.hasOwnProperty.call(t,"isPrimary")||(i=e.getPrimary())||(i=e.getByIndex(0))&&(i.isPrimary=!0)):n=e.getLength(),n}function he(t,n,i){var o,r,a,s=t.getActivePointersListByType(i[0].type),l=i.length;for(o=0;o<l;o++)r=i[o],(a=s.getById(r.id))?(a.insideElement=!0,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=r.currentPos,a.currentTime=r.currentTime,r=a):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,de(s,r)),t.enterHandler&&!1===t.enterHandler({eventSource:t,pointerType:r.type,position:v(r.currentPos,t.element),buttons:s.buttons,pointers:t.getActivePointerCount(),insideElementPressed:r.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===r.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function fe(t,n,i){var o,r,a,s=t.getActivePointersListByType(i[0].type),l=i.length;for(o=0;o<l;o++)r=i[o],(a=s.getById(r.id))&&(a.captured?(a.insideElement=!1,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=r.currentPos,a.currentTime=r.currentTime):pe(s,a),r=a),t.exitHandler&&!1===t.exitHandler({eventSource:t,pointerType:r.type,position:r.currentPos&&v(r.currentPos,t.element),buttons:s.buttons,pointers:t.getActivePointerCount(),insideElementPressed:!!a&&a.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===r.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function ge(t,n,i,o){var r,a,s,c=l[t.hash],u=t.getActivePointersListByType(i[0].type),d=i.length;void 0!==n.buttons?u.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?u.buttons+=1:1===o?u.buttons+=4:2===o?u.buttons+=2:3===o?u.buttons+=8:4===o?u.buttons+=16:5===o&&(u.buttons+=32):0===o?u.buttons|=1:1===o?u.buttons|=4:2===o?u.buttons|=2:3===o?u.buttons|=8:4===o?u.buttons|=16:5===o&&(u.buttons|=32);var p=t.getActivePointersListsExceptType(i[0].type);for(r=0;r<p.length;r++)U(t,n,p[r]);if(0!==o)return t.nonPrimaryPressHandler&&!1===t.nonPrimaryPressHandler({eventSource:t,pointerType:i[0].type,position:v(i[0].currentPos,t.element),button:o,buttons:u.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),!1;for(r=0;r<d;r++)a=i[r],(s=u.getById(a.id))?(s.captured=!0,s.insideElementPressed=!0,s.insideElement=!0,s.contactPos=a.currentPos,s.contactTime=a.currentTime,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=a.currentPos,s.currentTime=a.currentTime,a=s):(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,de(u,a)),u.addContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,a),1===u.contacts?t.pressHandler&&!1===t.pressHandler({eventSource:t,pointerType:a.type,position:v(a.contactPos,t.element),buttons:u.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n):2===u.contacts&&t.pinchHandler&&"touch"===a.type&&(c.pinchGPoints=u.asArray(),c.lastPinchDist=c.currentPinchDist=c.pinchGPoints[0].currentPos.distanceTo(c.pinchGPoints[1].currentPos),c.lastPinchCenter=c.currentPinchCenter=b(c.pinchGPoints[0].currentPos,c.pinchGPoints[1].currentPos));return!0}function me(t,n,i,o){var r,a,s,c,u,d,p=l[t.hash],h=t.getActivePointersListByType(i[0].type),f=i.length,g=!1,m=!1;if(void 0!==n.buttons?h.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?h.buttons-=1:1===o?h.buttons-=4:2===o?h.buttons-=2:3===o?h.buttons-=8:4===o?h.buttons-=16:5===o&&(h.buttons-=32):0===o?h.buttons^=-2:1===o?h.buttons^=-5:2===o?h.buttons^=-3:3===o?h.buttons^=-9:4===o?h.buttons^=-17:5===o&&(h.buttons^=-33),0!==o){t.nonPrimaryReleaseHandler&&!1===t.nonPrimaryReleaseHandler({eventSource:t,pointerType:i[0].type,position:v(i[0].currentPos,t.element),button:o,buttons:h.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n);var y=t.getActivePointersListByType("mouse");return U(t,n,y),!1}if(void 0===i[0].currentPos)return U(t,n,h),!1;for(s=0;s<f;s++)c=i[s],(u=h.getById(c.id))&&(u.captured&&(u.captured=!1,g=!0,m=!0),u.lastPos=u.currentPos,u.lastTime=u.currentTime,u.currentPos=c.currentPos,u.currentTime=c.currentTime,u.insideElement||pe(h,u),r=u.currentPos,a=u.currentTime,m?(h.removeContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,u),0===h.contacts?(t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:u.type,position:v(r,t.element),buttons:h.buttons,insideElementPressed:u.insideElementPressed,insideElementReleased:u.insideElement,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),t.dragEndHandler&&!u.currentPos.equals(u.contactPos)&&!1===t.dragEndHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),speed:u.speed,direction:u.direction,shift:n.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),(t.clickHandler||t.dblClickHandler)&&u.insideElement&&(d=a-u.contactTime<=t.clickTimeThreshold&&u.contactPos.distanceTo(r)<=t.clickDistThreshold,t.clickHandler&&!1===t.clickHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),quick:d,shift:n.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),t.dblClickHandler&&d&&(h.clicks++,1===h.clicks?(p.lastClickPos=r,p.dblClickTimeOut=setTimeout((function(){h.clicks=0}),t.dblClickTimeThreshold)):2===h.clicks&&(clearTimeout(p.dblClickTimeOut),h.clicks=0,p.lastClickPos.distanceTo(r)<=t.dblClickDistThreshold&&!1===t.dblClickHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),shift:n.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n),p.lastClickPos=null)))):2===h.contacts&&t.pinchHandler&&"touch"===u.type&&(p.pinchGPoints=h.asArray(),p.lastPinchDist=p.currentPinchDist=p.pinchGPoints[0].currentPos.distanceTo(p.pinchGPoints[1].currentPos),p.lastPinchCenter=p.currentPinchCenter=b(p.pinchGPoints[0].currentPos,p.pinchGPoints[1].currentPos))):t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:u.type,position:v(r,t.element),buttons:h.buttons,insideElementPressed:u.insideElementPressed,insideElementReleased:u.insideElement,isTouchEvent:"touch"===u.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n));return g}function ve(t,n,i){var o,r,a,s,c,u=l[t.hash],d=t.getActivePointersListByType(i[0].type),p=i.length;for(void 0!==n.buttons&&(d.buttons=n.buttons),o=0;o<p;o++)r=i[o],(a=d.getById(r.id))?(Object.prototype.hasOwnProperty.call(r,"isPrimary")&&(a.isPrimary=r.isPrimary),a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=r.currentPos,a.currentTime=r.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,de(d,r));t.stopHandler&&"mouse"===i[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout((function(){!function(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:m(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}(t,n,i[0].type)}),t.stopDelay)),0===d.contacts?t.moveHandler&&!1===t.moveHandler({eventSource:t,pointerType:i[0].type,position:v(i[0].currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n):1===d.contacts?(t.moveHandler&&(a=d.asArray()[0],!1===t.moveHandler({eventSource:t,pointerType:a.type,position:v(a.currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)),t.dragHandler&&(c=(a=d.asArray()[0]).currentPos.minus(a.lastPos),!1===t.dragHandler({eventSource:t,pointerType:a.type,position:v(a.currentPos,t.element),buttons:d.buttons,delta:c,speed:a.speed,direction:a.direction,shift:n.shiftKey,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))):2===d.contacts&&(t.moveHandler&&(s=d.asArray(),!1===t.moveHandler({eventSource:t,pointerType:s[0].type,position:v(b(s[0].currentPos,s[1].currentPos),t.element),buttons:d.buttons,isTouchEvent:"touch"===s[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)),t.pinchHandler&&"touch"===i[0].type&&(c=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos))!=u.currentPinchDist&&(u.lastPinchDist=u.currentPinchDist,u.currentPinchDist=c,u.lastPinchCenter=u.currentPinchCenter,u.currentPinchCenter=b(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos),!1===t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:u.pinchGPoints,lastCenter:v(u.lastPinchCenter,t.element),center:v(u.currentPinchCenter,t.element),lastDistance:u.lastPinchDist,distance:u.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)))}e.MouseTracker=function(t){s.push(this);var n=arguments;e.isPlainObject(t)||(t={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=e.getElement(t.element),this.clickTimeThreshold=t.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=t.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=t.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=t.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=t.userData||null,this.stopDelay=t.stopDelay||50,this.enterHandler=t.enterHandler||null,this.exitHandler=t.exitHandler||null,this.pressHandler=t.pressHandler||null,this.nonPrimaryPressHandler=t.nonPrimaryPressHandler||null,this.releaseHandler=t.releaseHandler||null,this.nonPrimaryReleaseHandler=t.nonPrimaryReleaseHandler||null,this.moveHandler=t.moveHandler||null,this.scrollHandler=t.scrollHandler||null,this.clickHandler=t.clickHandler||null,this.dblClickHandler=t.dblClickHandler||null,this.dragHandler=t.dragHandler||null,this.dragEndHandler=t.dragEndHandler||null,this.pinchHandler=t.pinchHandler||null,this.stopHandler=t.stopHandler||null,this.keyDownHandler=t.keyDownHandler||null,this.keyUpHandler=t.keyUpHandler||null,this.keyHandler=t.keyHandler||null,this.focusHandler=t.focusHandler||null,this.blurHandler=t.blurHandler||null;var i=this;l[this.hash]={click:function(e){y(i,e)},dblclick:function(e){x(i,e)},keydown:function(e){w(i,e)},keyup:function(e){A(i,e)},keypress:function(e){_(i,e)},focus:function(e){E(i,e)},blur:function(e){S(i,e)},wheel:function(e){T(i,e)},mousewheel:function(e){C(i,e)},DOMMouseScroll:function(e){C(i,e)},MozMousePixelScroll:function(e){C(i,e)},mouseenter:function(e){I(i,e)},mouseleave:function(e){O(i,e)},mouseover:function(e){D(i,e)},mouseout:function(e){M(i,e)},mousedown:function(e){B(i,e)},mouseup:function(e){z(i,e)},mouseupcaptured:function(e){$(i,e)},mousemove:function(e){V(i,e)},mousemovecaptured:function(e){j(i,e)},touchstart:function(e){W(i,e)},touchend:function(e){q(i,e)},touchendcaptured:function(e){Q(i,e)},touchmove:function(e){Y(i,e)},touchmovecaptured:function(e){Z(i,e)},touchcancel:function(e){K(i,e)},gesturestart:function(e){J(i,e)},gesturechange:function(e){ee(i,e)},pointerover:function(e){te(i,e)},MSPointerOver:function(e){te(i,e)},pointerout:function(e){ne(i,e)},MSPointerOut:function(e){ne(i,e)},pointerdown:function(e){ie(i,e)},MSPointerDown:function(e){ie(i,e)},pointerup:function(e){oe(i,e)},MSPointerUp:function(e){oe(i,e)},pointermove:function(e){se(i,e)},MSPointerMove:function(e){se(i,e)},pointercancel:function(e){ue(i,e)},MSPointerCancel:function(e){ue(i,e)},pointerupcaptured:function(e){re(i,e)},pointermovecaptured:function(e){le(i,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},t.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(u(this),this.element=null,e=0;e<s.length;e++)if(s[e]===this){s.splice(e,1);break}l[this.hash]=null,delete l[this.hash]},isTracking:function(){return l[this.hash].tracking},setTracking:function(t){return t?function(t){var n,i,o=l[t.hash];if(!o.tracking){for(i=0;i<e.MouseTracker.subscribeEvents.length;i++)n=e.MouseTracker.subscribeEvents[i],e.addEvent(t.element,n,o[n],!1);c(t),o.tracking=!0}}(this):u(this),this},getActivePointersListsExceptType:function(e){for(var t=l[this.hash],n=[],i=0;i<t.activePointersLists.length;++i)t.activePointersLists[i].type!==e&&n.push(t.activePointersLists[i]);return n},getActivePointersListByType:function(t){var n,i,o=l[this.hash],r=o.activePointersLists.length;for(n=0;n<r;n++)if(o.activePointersLists[n].type===t)return o.activePointersLists[n];return i=new e.MouseTracker.GesturePointList(t),o.activePointersLists.push(i),i},getActivePointerCount:function(){var e,t=l[this.hash],n=t.activePointersLists.length,i=0;for(e=0;e<n;e++)i+=t.activePointersLists[e].getLength();return i},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<s.length;e++)s[e].isTracking()&&(s[e].setTracking(!1),s[e].setTracking(!0))},e.MouseTracker.gesturePointVelocityTracker=(t=[],n=0,i=0,o=function(e,t){return e.hash.toString()+t.type+t.id.toString()},r=function(){var n,o,r,a,s,l,c=t.length,u=e.now();for(a=u-i,i=u,n=0;n<c;n++)(r=(o=t[n]).gPoint).direction=Math.atan2(r.currentPos.y-o.lastPos.y,r.currentPos.x-o.lastPos.x),s=o.lastPos.distanceTo(r.currentPos),o.lastPos=r.currentPos,l=1e3*s/(a+1),r.speed=.75*l+.25*r.speed},{addPoint:function(a,s){var l=o(a,s);t.push({guid:l,gPoint:s,lastPos:s.currentPos}),1===t.length&&(i=e.now(),n=window.setInterval(r,50))},removePoint:function(e,i){var r,a=o(e,i),s=t.length;for(r=0;r<s;r++)if(t[r].guid===a){t.splice(r,1),0==--s&&window.clearInterval(n);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=(a=document.createElement("div"),e.isFunction(a.setCapture)&&e.isFunction(a.releaseCapture)),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var be=function(){try{return window.self!==window.top}catch(e){return!0}}();function ye(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,i){var o=t.parentNode;"number"==typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=void 0===n.attachToViewer||n.attachToViewer,this.autoFade=void 0===n.autoFade||n.autoFade,this.element=t,this.anchor=n.anchor,this.container=i,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):o.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var n,i=e.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==t)return n;return-1}e.ControlDock=function(t){var n,i,o=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<o.length;i++)n=o[i],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,i){var o=null;if(!(t(this,n=e.getElement(n))>=0)){switch(i.anchor){case e.ControlAnchor.TOP_RIGHT:o=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:o=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:o=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:o=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,i,o)),n.style.display="inline-block"}},removeControl:function(n){var i=t(this,n=e.getElement(n));return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(e){var t={},n=1;function i(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function o(t,n){if(n instanceof e.Overlay)return n;var i=null;if(n.element)i=e.getElement(n.element);else{var o=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(i=e.getElement(n.id))||((i=document.createElement("a")).href="#/overlay/"+o),i.id=o,e.addClass(i,n.className?n.className:"openseadragon-overlay")}var r=n.location,a=n.width,s=n.height;if(!r){var l=n.x,c=n.y;if(void 0!==n.px){var u=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,a||0,s||0));l=u.x,c=u.y,a=void 0!==a?u.width:void 0,s=void 0!==s?u.height:void 0}r=new e.Point(l,c)}var d=n.placement;return d&&"string"===e.type(d)&&(d=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:i,location:r,placement:d,onDraw:n.onDraw,checkResize:n.checkResize,width:a,height:s,rotationMode:n.rotationMode})}function r(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function a(t,n){return e.requestAnimationFrame((function(){n(t)}))}function s(t){e.requestAnimationFrame((function(){!function(t){var n,i,o,r;if(t.controlsShouldFade){for(n=e.now(),i=n-t.controlsFadeBeginTime,o=1-i/t.controlsFadeLength,o=Math.min(1,o),o=Math.max(0,o),r=t.controls.length-1;r>=0;r--)t.controls[r].autoFade&&t.controls[r].setOpacity(o);o>0&&s(t)}}(t)}))}function l(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){s(t)}),t.controlsFadeDelay))}function c(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function u(){c(this)}function d(){l(this)}function p(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function h(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function f(e){var t;document.activeElement==this.canvas||this.canvas.focus(),this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",n),!n.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType)).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function g(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function m(e){var t,n={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var i=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=i.x,this.viewport.centerSpringY.target.value+=i.y;var o=this.viewport.getBounds(),r=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=i.x,this.viewport.centerSpringY.target.value-=i.y,o.x!=r.x&&(e.delta.x=0),o.y!=r.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function v(t){if(!t.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(t.pointerType);if(n.flickEnabled&&t.speed>=n.flickMinSpeed){var i=0;this.panHorizontal&&(i=n.flickMomentum*t.speed*Math.cos(t.direction));var o=0;this.panVertical&&(o=n.flickMomentum*t.speed*Math.sin(t.direction));var r=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),a=this.viewport.pointFromPixel(new e.Point(r.x-i,r.y-o));this.viewport.panTo(a,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function b(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function y(t){window.location!=window.parent.location&&e.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function x(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function w(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function A(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function _(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){var t,n,i;if(!e.preventDefaultAction&&this.viewport&&((t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),i=this.viewport.pointFromPixel(e.lastCenter,!0).minus(n),this.panHorizontal||(i.x=0),this.panVertical||(i.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),t.zoomToRefPoint&&this.viewport.panBy(i,!0),this.viewport.applyConstraints()),t.pinchRotate)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),r=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-r)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function S(t){var n,i,o;if((o=e.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=o,this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),!t.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(i=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(i,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),n&&n.scrollToZoom)return!1}else if((n=this.gestureSettingsByDeviceType(t.pointerType))&&n.scrollToZoom)return!1}function T(e){t[this.hash].mouseInside=!0,c(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function C(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||l(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function k(e){!function(e){if(e._opening)return;if(e.autoResize){var n=i(e.container),o=t[e.hash].prevContainerSize;if(!n.equals(o)){var r=e.viewport;if(e.preserveImageSizeOnResize){var a=o.x/n.x,s=r.getZoom()*a,u=r.getCenter();r.resize(n,!1),r.zoomTo(s,null,!0),r.panTo(u,!0)}else{var d=r.getBounds();r.resize(n,!0),r.fitBoundsWithConstraints(d,!0)}t[e.hash].prevContainerSize=n,t[e.hash].forceRedraw=!0}}var p=e.viewport.update(),h=e.world.update()||p;p&&e.raiseEvent("viewport-change");e.referenceStrip&&(h=e.referenceStrip.update(e.viewport)||h);!t[e.hash].animating&&h&&(e.raiseEvent("animation-start"),c(e));(h||t[e.hash].forceRedraw||e.world.needsDraw())&&(!function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),t[e.hash].forceRedraw=!1,h&&e.raiseEvent("animation"));t[e.hash].animating&&!h&&(e.raiseEvent("animation-finish"),t[e.hash].mouseInside||l(e));t[e.hash].animating=h}(e),e.isOpen()?e._updateRequestId=a(e,k):e._updateRequestId=!1}function L(e,t){return e?e+t:t}function I(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,O(this)}function D(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,O(this)}function P(){t[this.hash].zooming=!1}function O(t){e.requestAnimationFrame(e.delegate(t,M))}function M(){var n,i,o;t[this.hash].zooming&&this.viewport&&(i=(n=e.now())-t[this.hash].lastZoomTime,o=Math.pow(t[this.hash].zoomFactor,i/1e3),this.viewport.zoomBy(o),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=n,O(this))}function N(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function R(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function B(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function z(){this.viewport&&this.viewport.goHome()}function $(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function H(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t+this.rotationIncrement,360):e.positiveModulo(t-this.rotationIncrement,360),this.viewport.setRotation(t)}}function V(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t-this.rotationIncrement,360):e.positiveModulo(t+this.rotationIncrement,360),this.viewport.setRotation(t)}}function j(){this.viewport.toggleFlip()}function F(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function U(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}e.Viewer=function(o){var r,s,c=arguments,u=this;if(e.isPlainObject(o)||(o={id:c[0],xmlPath:c.length>1?c[1]:void 0,prefixUrl:c.length>2?c[2]:void 0,controls:c.length>3?c[3]:void 0,overlays:c.length>4?c[4]:void 0}),o.config&&(e.extend(!0,o,o.config),delete o.config),e.extend(!0,this,{id:o.id,hash:o.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,o),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);u._showMessage(n)})),e.ControlDock.call(this,o),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(s=this.canvas.style).width="100%",s.height="100%",s.overflow="hidden",s.position="absolute",s.top="0px",s.left="0px",e.setElementTouchActionNone(this.canvas),""!==o.tabIndex&&(this.canvas.tabIndex=void 0===o.tabIndex?0:o.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,p),keyHandler:e.delegate(this,h),clickHandler:e.delegate(this,f),dblClickHandler:e.delegate(this,g),dragHandler:e.delegate(this,m),dragEndHandler:e.delegate(this,v),enterHandler:e.delegate(this,b),exitHandler:e.delegate(this,y),pressHandler:e.delegate(this,x),releaseHandler:e.delegate(this,w),nonPrimaryPressHandler:e.delegate(this,A),nonPrimaryReleaseHandler:e.delegate(this,_),scrollHandler:e.delegate(this,S),pinchHandler:e.delegate(this,E)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,T),exitHandler:e.delegate(this,C)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=i(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){u.source=u.world.getItemAt(0).source,t[u.hash].forceRedraw=!0,u._updateRequestId||(u._updateRequestId=a(u,k))})),this.world.addHandler("remove-item",(function(e){u.world.getItemCount()?u.source=u.world.getItemAt(0).source:u.source=null,t[u.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){u.viewport&&u.viewport._setContentBounds(u.world.getHomeBounds(),u.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){u.source=u.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:o.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(r=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(r,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(r=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(r,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),r=0;r<this.customControls.length;r++)this.addControl(this.customControls[r].id,{anchor:this.customControls[r].anchor});e.requestAnimationFrame((function(){l(u)})),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t,n){var i=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===n||isNaN(n)||(this.initialPage=n),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var r,a=t.length,s=0,l=0,c=function(){if(s+l===a)if(s){!i._firstOpen&&i.preserveViewport||(i.viewport.goHome(!0),i.viewport.update()),i._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),i.overlays&&!i.preserveOverlays)for(var n=0;n<i.overlays.length;n++)i.currentOverlays[n]=o(i,i.overlays[n]);i._drawOverlays(),i._opening=!1,i.raiseEvent("open",{source:e})}else i._opening=!1,i.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var n=t.success;t.success=function(e){if(s++,t.tileSource.overlays)for(var o=0;o<t.tileSource.overlays.length;o++)i.addOverlay(t.tileSource.overlays[o]);n&&n(e),c()};var o=t.error;t.error=function(e){l++,r||(r=e),o&&o(e),c()},i.addTiledImage(t)},d=0;d<t.length;d++)u(t[d]);return this}}},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?c(this):l(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(n){var i,o,r=document.body,a=r.style,s=document.documentElement.style,l=this;if(n==this.isFullPage())return this;var c={fullPage:n,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",c),c.preventDefaultAction)return this;if(n){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=a.margin,this.docMargin=s.margin,a.margin="0",s.margin="0",this.bodyPadding=a.padding,this.docPadding=s.padding,a.padding="0",s.padding="0",this.bodyWidth=a.width,this.docWidth=s.width,a.width="100%",s.width="100%",this.bodyHeight=a.height,this.docHeight=s.height,a.height="100%",s.height="100%",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,i=r.childNodes.length,o=0;o<i;o++)this.previousBody.push(r.childNodes[0]),r.removeChild(r.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,r.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),r.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,T)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,a.margin=this.bodyMargin,s.margin=this.docMargin,a.padding=this.bodyPadding,s.padding=this.docPadding,a.width=this.bodyWidth,s.width=this.docWidth,a.height=this.bodyHeight,s.height=this.docHeight,r.removeChild(this.element),i=this.previousBody.length,o=0;o<i;o++)r.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(r.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var u=0,d=function(){e.setPageScroll(l.pageScroll);var t=e.getPageScroll();++u<10&&(t.x!==l.pageScroll.x||t.y!==l.pageScroll.y)&&e.requestAnimationFrame(d)};e.requestAnimationFrame(d),t[this.hash].fullPage=!1,e.delegate(this,C)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:n}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var i={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",i),i.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var o=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,o),e.removeEvent(document,e.fullScreenErrorEventName,o),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&setTimeout((function(){n.navigator.update(n.viewport)})),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,o),e.addEvent(document,e.fullScreenErrorEventName,o),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var n=this;t.replace&&(t.replaceItem=n.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),void 0===t.ajaxHeaders||null===t.ajaxHeaders?t.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(t.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(t.ajaxHeaders=e.extend({},this.ajaxHeaders,t.ajaxHeaders));var i={options:t};function o(e){for(var o=0;o<n._loadQueue.length;o++)if(n._loadQueue[o]===i){n._loadQueue.splice(o,1);break}0===n._loadQueue.length&&r(i),n.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function r(e){n.collectionMode&&(n.world.arrange({immediately:e.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}function a(){for(var t,i,o;n._loadQueue.length&&(t=n._loadQueue[0]).tileSource;){if(n._loadQueue.splice(0,1),t.options.replace){var a=n.world.getIndexOfItem(t.options.replaceItem);-1!=a&&(t.options.index=a),n.world.removeItem(t.options.replaceItem)}i=new e.TiledImage({viewer:n,source:t.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,compositeOperation:t.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:n.debugMode}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.world.addItem(i,{index:t.options.index}),0===n._loadQueue.length&&r(t),1!==n.world.getItemCount()||n.preserveViewport||n.viewport.goHome(!0),n.navigator&&(o=e.extend({},t.options,{replace:!1,originalTiledImage:i,tileSource:t.tileSource}),n.navigator.addTiledImage(o)),t.options.success&&t.options.success({item:i})}}e.isArray(t.tileSource)?setTimeout((function(){o({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(i),function(t,n,i,o,r){var a=t;if("string"==e.type(n))if(n.match(/^\s*<.*>\s*$/))n=e.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var s=e.parseJSON(n);n=s}catch(e){}function l(e,t){e.ready?o(e):(e.addHandler("ready",(function(){o(e)})),e.addHandler("open-failed",(function(e){r({message:e.message,source:t})})))}setTimeout((function(){if("string"==e.type(n))(n=new e.TileSource({url:n,crossOriginPolicy:void 0!==i.crossOriginPolicy?i.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:t.ajaxHeaders,useCanvas:t.useCanvas,success:function(e){o(e.tileSource)}})).addHandler("open-failed",(function(e){r(e)}));else if(e.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===i.crossOriginPolicy&&void 0===t.crossOriginPolicy||(n.crossOriginPolicy=void 0!==i.crossOriginPolicy?i.crossOriginPolicy:t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var s=new e.TileSource(n);s.getTileUrl=n.getTileUrl,o(s)}else{var c=e.TileSource.determineType(a,n);if(!c)return void r({message:"Unable to load TileSource",source:n});var u=c.prototype.configure.apply(a,[n]);l(new c(u),n)}else l(n,n)}))}(this,t.tileSource,t,(function(e){i.tileSource=e,a()}),(function(e){e.options=t,o(e),a()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var i=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(i),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,u),n=e.delegate(this,d),i=e.delegate(this,U),o=e.delegate(this,F),r=this.navImages,a=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(a=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:L(this.prefixUrl,r.previous.REST),srcGroup:L(this.prefixUrl,r.previous.GROUP),srcHover:L(this.prefixUrl,r.previous.HOVER),srcDown:L(this.prefixUrl,r.previous.DOWN),onRelease:o,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:L(this.prefixUrl,r.next.REST),srcGroup:L(this.prefixUrl,r.next.GROUP),srcHover:L(this.prefixUrl,r.next.HOVER),srcDown:L(this.prefixUrl,r.next.DOWN),onRelease:i,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),a&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,I),n=e.delegate(this,P),i=e.delegate(this,N),o=e.delegate(this,D),r=e.delegate(this,R),a=e.delegate(this,z),s=e.delegate(this,$),l=e.delegate(this,H),c=e.delegate(this,V),p=e.delegate(this,j),h=e.delegate(this,u),f=e.delegate(this,d),g=this.navImages,m=[],v=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(v=!1),this.showZoomControl&&(m.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:L(this.prefixUrl,g.zoomIn.REST),srcGroup:L(this.prefixUrl,g.zoomIn.GROUP),srcHover:L(this.prefixUrl,g.zoomIn.HOVER),srcDown:L(this.prefixUrl,g.zoomIn.DOWN),onPress:t,onRelease:n,onClick:i,onEnter:t,onExit:n,onFocus:h,onBlur:f})),m.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:L(this.prefixUrl,g.zoomOut.REST),srcGroup:L(this.prefixUrl,g.zoomOut.GROUP),srcHover:L(this.prefixUrl,g.zoomOut.HOVER),srcDown:L(this.prefixUrl,g.zoomOut.DOWN),onPress:o,onRelease:n,onClick:r,onEnter:o,onExit:n,onFocus:h,onBlur:f}))),this.showHomeControl&&m.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:L(this.prefixUrl,g.home.REST),srcGroup:L(this.prefixUrl,g.home.GROUP),srcHover:L(this.prefixUrl,g.home.HOVER),srcDown:L(this.prefixUrl,g.home.DOWN),onRelease:a,onFocus:h,onBlur:f})),this.showFullPageControl&&m.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:L(this.prefixUrl,g.fullpage.REST),srcGroup:L(this.prefixUrl,g.fullpage.GROUP),srcHover:L(this.prefixUrl,g.fullpage.HOVER),srcDown:L(this.prefixUrl,g.fullpage.DOWN),onRelease:s,onFocus:h,onBlur:f})),this.showRotationControl&&(m.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:L(this.prefixUrl,g.rotateleft.REST),srcGroup:L(this.prefixUrl,g.rotateleft.GROUP),srcHover:L(this.prefixUrl,g.rotateleft.HOVER),srcDown:L(this.prefixUrl,g.rotateleft.DOWN),onRelease:l,onFocus:h,onBlur:f})),m.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:L(this.prefixUrl,g.rotateright.REST),srcGroup:L(this.prefixUrl,g.rotateright.GROUP),srcHover:L(this.prefixUrl,g.rotateright.HOVER),srcDown:L(this.prefixUrl,g.rotateright.DOWN),onRelease:c,onFocus:h,onBlur:f}))),this.showFlipControl&&m.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:L(this.prefixUrl,g.flip.REST),srcGroup:L(this.prefixUrl,g.flip.GROUP),srcHover:L(this.prefixUrl,g.flip.HOVER),srcDown:L(this.prefixUrl,g.flip.DOWN),onRelease:p,onFocus:h,onBlur:f})),v&&(this.buttons=new e.ButtonGroup({buttons:m,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,B)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,n,i,a){var s;if(s=e.isPlainObject(t)?t:{element:t,location:n,placement:i,onDraw:a},t=e.getElement(s.element),r(this.currentOverlays,t)>=0)return this;var l=o(this,s);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:s.location,placement:s.placement}),this},updateOverlay:function(n,i,o){var a;return n=e.getElement(n),(a=r(this.currentOverlays,n))>=0&&(this.currentOverlays[a].update(i,o),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:n,location:i,placement:o})),this},removeOverlay:function(n){var i;return n=e.getElement(n),(i=r(this.currentOverlays,n))>=0&&(this.currentOverlays[i].destroy(),this.currentOverlays.splice(i,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:n})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),(n=r(this.currentOverlays,t))>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function n(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function i(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function o(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function r(e,t){a(e,"rotate("+t+"deg)")}function a(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(a){var s,l,c,u,d=a.viewer,p=this;function h(e){r(p.displayRegionContainer,e),r(p.displayRegion,-e),p.viewport.setRotation(e)}(a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"==a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=d.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!=e.ControlAnchor.NONE&&(c=this.element.style,u=this.borderWidth,c.margin="0px",c.border=u+"px solid "+a.borderColor,c.padding="0px",c.background=a.background,c.opacity=a.opacity,c.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+a.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",d.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!=e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(s=e.getElementSize(d.element),this.element.style.height=Math.round(s.y*a.sizeRatio)+"px",this.element.style.width=Math.round(s.x*a.sizeRatio)+"px",this.oldViewerSize=s,l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate)&&(h(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0),a.viewer.addHandler("rotate",(function(e){h(e.degrees)})));this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,i),scrollHandler:e.delegate(this,o)}),this.addHandler("reset-size",(function(){p.viewport&&p.viewport.goHome(!0)})),d.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=p.world.getItemAt(e.previousIndex);p.world.setItemIndex(t,e.newIndex)}),1)})),d.world.addHandler("remove-item",(function(e){var t=e.item,n=p._getMatchingItem(t);n&&p.world.removeItem(n)})),this.update(d.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){a(this.displayRegion,e),a(this.canvas,e),a(this.element,e)},update:function(t){var n,i,o,r,a,s;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(i=n.x*this.sizeRatio,o=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),o=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(o)+"px",this.elementArea||(this.elementArea=i*o),this.updateSize()),t&&this.viewport){r=t.getBoundsNoRotate(!0),a=this.viewport.pixelFromPointNoRotate(r.getTopLeft(),!1),s=this.viewport.pixelFromPointNoRotate(r.getBottomRight(),!1).minus(this.totalBorderWidths);var l=this.displayRegion.style;l.display=this.world.getItemCount()?"block":"none",l.top=Math.round(a.y)+"px",l.left=Math.round(a.x)+"px";var c=Math.abs(a.x-s.x),u=Math.abs(a.y-s.y);l.width=Math.round(Math.max(c,0))+"px",l.height=Math.round(Math.max(u,0))+"px"}},addTiledImage:function(t){var n=this,i=t.originalTiledImage;delete t.original;var o=e.extend({},t,{success:function(e){var t=e.item;function o(){n._matchBounds(t,i)}t._originalForNavigator=i,n._matchBounds(t,i,!0),i.addHandler("bounds-change",o),i.addHandler("clip-change",o),i.addHandler("opacity-change",(function(){n._matchOpacity(t,i)})),i.addHandler("composite-operation-change",(function(){n._matchCompositeOperation(t,i)}))}});return e.Viewer.prototype.addTiledImage.apply(this,[o])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),i=0;i<n;i++)if((t=this.world.getItemAt(i))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var i=t.getBoundsNoRotate();e.setPosition(i.getTopLeft(),n),e.setWidth(i.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var i,o=n.split("."),r=null,a=arguments,s=t;for(i=0;i<o.length-1;i++)s=s[o[i]]||{};return"string"!=typeof(r=s[o[i]])&&(e.console.log("Untranslated source string:",n),r=""),r.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<a.length?a[t]:""}))},setString:function(e,n){var i,o=e.split("."),r=t;for(i=0;i<o.length-1;i++)r[o[i]]||(r[o[i]]={}),r=r[o[i]];r[o[i]]=n}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){var i,o;if(n=n||new e.Point(0,0),t%90==0){switch(e.positiveModulo(t,360)){case 0:i=1,o=0;break;case 90:i=0,o=1;break;case 180:i=-1,o=0;break;case 270:i=0,o=-1}}else{var r=t*Math.PI/180;i=Math.cos(r),o=Math.sin(r)}var a=i*(this.x-n.x)-o*(this.y-n.y)+n.x,s=o*(this.x-n.x)+i*(this.y-n.y)+n.y;return new e.Point(a,s)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(t,n,i,o,r,a){var s,l,c=this,u=arguments;if(s=e.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},e.EventSource.call(this),e.extend(!0,this,s),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",(function(e){c.success(e)})),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=s.width&&s.height?s.width/s.height:1,this.dimensions=new e.Point(s.width,s.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=s.tileOverlap?s.tileOverlap:0,this.minLevel=s.minLevel?s.minLevel:0,this.maxLevel=void 0!==s.maxLevel&&null!==s.maxLevel?s.maxLevel:s.width&&s.height?Math.ceil(Math.log(Math.max(s.width,s.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(t){var n=this.getLevelScale(t),i=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),o=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(i,o)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),i=1/n.x,o=1/n.y;return new e.Point(i,o)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,n){var i=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;e.console.assert(i,"[TileSource.getTileAtPoint] must be called with a valid point.");var o=this.dimensions.x*this.getLevelScale(t),r=n.x*o,a=n.y*o,s=Math.floor(r/this.getTileWidth(t)),l=Math.floor(a/this.getTileHeight(t));n.x>=1&&(s=this.getNumTiles(t).x-1);return n.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(s,l)},getTileBounds:function(t,n,i,o){var r=this.dimensions.times(this.getLevelScale(t)),a=this.getTileWidth(t),s=this.getTileHeight(t),l=0===n?0:a*n-this.tileOverlap,c=0===i?0:s*i-this.tileOverlap,u=a+(0===n?1:2)*this.tileOverlap,d=s+(0===i?1:2)*this.tileOverlap,p=1/r.x;return u=Math.min(u,r.x-l),d=Math.min(d,r.y-c),o?new e.Rect(0,0,u,d):new e.Rect(l*p,c*p,u*p,d*p)},getImageInfo:function(t){var n,i,o,r,a,s,l,c=this;t&&(l=(s=(a=t.split("/"))[a.length-1]).lastIndexOf("."))>-1&&(a[a.length-1]=s.slice(0,l)),i=function(n){"string"==typeof n&&(n=e.parseXml(n));var i=e.TileSource.determineType(c,n,t);i?(void 0===(r=i.prototype.configure.apply(c,[n,t])).ajaxWithCredentials&&(r.ajaxWithCredentials=c.ajaxWithCredentials),o=new i(r),c.ready=!0,c.raiseEvent("ready",{tileSource:o})):c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(n=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:n,callback:i})):e.makeAjaxRequest({url:t,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var n=function(t){var n,i,o=t.responseText,r=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw r=t.status,n=404==r?"Not Found":t.statusText,new Error(e.getString("Errors.Status",r,n));if(o.match(/\s*<.*/))try{i=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(o)}catch(e){i=t.responseText}else if(o.match(/\s*[\{\[].*/))try{i=e.parseJSON(o)}catch(e){i=o}else i=o;return i}(t);i(n)},error:function(e,n){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(e){i=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource"}c.raiseEvent("open-failed",{message:i,source:t})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(e,t,n){return{}},tileExists:function(e,t,n){var i=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<i.x&&n<i.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,i){var o;for(o in OpenSeadragon)if(o.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[o])&&e.isFunction(OpenSeadragon[o].prototype.supports)&&OpenSeadragon[o].prototype.supports.call(t,n,i))return OpenSeadragon[o];e.console.error("No TileSource was able to open %s %s",i,n)}}(OpenSeadragon),function(e){function t(t,n){var i,o,r=n.Image,a=r.Url,s=r.Format,l=r.Size,c=r.DisplayRect||[],u=parseInt(l.Width,10),d=parseInt(l.Height,10),p=parseInt(r.TileSize,10),h=parseInt(r.Overlap,10),f=[];for(o=0;o<c.length;o++)i=c[o].Rect,f.push(new e.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return e.extend(!0,{width:u,height:d,tileSize:p,tileOverlap:h,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:s,displayRects:f},n)}e.DziTileSource=function(t,n,i,o,r,a,s,l,c){var u,d,p,h;if(h=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=h.tilesUrl,this.fileFormat=h.fileFormat,this.displayRects=h.displayRects,this.displayRects)for(u=this.displayRects.length-1;u>=0;u--)for(p=(d=this.displayRects[u]).minLevel;p<=d.maxLevel;p++)this._levelRects[p]||(this._levelRects[p]=[]),this._levelRects[p].push(d);e.TileSource.apply(this,[h])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(n=e.documentElement.namespaceURI)),-1!==(n=(n||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(n,i){var o;return o=e.isPlainObject(n)?t(this,n):function(n,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var o,r,a,s,l,c=i.documentElement,u=c.localName||c.tagName,d=i.documentElement.namespaceURI,p=null,h=[];if("Image"==u)try{if(void 0===(s=c.getElementsByTagName("Size")[0])&&(s=c.getElementsByTagNameNS(d,"Size")[0]),p={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:c.getAttribute("Url"),Format:c.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(c.getAttribute("Overlap"),10),TileSize:parseInt(c.getAttribute("TileSize"),10),Size:{Height:parseInt(s.getAttribute("Height"),10),Width:parseInt(s.getAttribute("Width"),10)}}},!e.imageFormatSupported(p.Image.Format))throw new Error(e.getString("Errors.ImageFormat",p.Image.Format.toUpperCase()));for(void 0===(o=c.getElementsByTagName("DisplayRect"))&&(o=c.getElementsByTagNameNS(d,"DisplayRect")[0]),l=0;l<o.length;l++)r=o[l],void 0===(a=r.getElementsByTagName("Rect")[0])&&(a=r.getElementsByTagNameNS(d,"Rect")[0]),h.push({Rect:{X:parseInt(a.getAttribute("X"),10),Y:parseInt(a.getAttribute("Y"),10),Width:parseInt(a.getAttribute("Width"),10),Height:parseInt(a.getAttribute("Height"),10),MinLevel:parseInt(r.getAttribute("MinLevel"),10),MaxLevel:parseInt(r.getAttribute("MaxLevel"),10)}});return h.length&&(p.Image.DisplayRect=h),t(n,p)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==u)throw new Error(e.getString("Errors.Dzc"));if("Error"==u){var f=c.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(f)}}throw new Error(e.getString("Errors.Dzi"))}(this,n),i&&!o.tilesUrl&&(o.tilesUrl=i.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=i.search(/\.(dzi|xml|js)\?/)?o.queryParams=i.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var i,o,r,a,s,l,c,u=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!u||!u.length)return!0;for(c=u.length-1;c>=0;c--)if(!(e<(i=u[c]).minLevel||e>i.maxLevel)&&(o=this.getLevelScale(e),r=i.x*o,a=i.y*o,s=r+i.width*o,l=a+i.height*o,r=Math.floor(r/this._tileWidth),a=Math.floor(a/this._tileWidth),s=Math.ceil(s/this._tileWidth),l=Math.ceil(l/this._tileWidth),r<=t&&t<s&&a<=n&&n<l))return!0;return!1}})}(OpenSeadragon),function(e){function t(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,n=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),i=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(i=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(i=-1!==e.extraFeatures.indexOf("sizeByWh")),!n||i}function n(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e["@id"]+"/full/"+e.sizes[n].width+","+(3===e.version?e.sizes[n].height:"")+"/0/default."+e.tileFormat,width:e.sizes[n].width,height:e.sizes[n].height});return t.sort((function(e,t){return e.width-t.width}))}e.IIIFTileSource=function(i){if(e.extend(!0,this,i),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(i.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=i.version,this.tile_width&&this.tile_height)i.tileWidth=this.tile_width,i.tileHeight=this.tile_height;else if(this.tile_width)i.tileSize=this.tile_width;else if(this.tile_height)i.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)i.tileWidth=this.tiles[0].width,i.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var r=0;r<this.tiles[o].scaleFactors.length;r++){var a=this.tiles[o].scaleFactors[r];this.scale_factors.push(a),i.tileSizePerScaleFactor[a]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(t(i)){for(var s=Math.min(this.height,this.width),l=[256,512,1024],c=[],u=0;u<l.length;u++)l[u]<=s&&c.push(l[u]);c.length>0?i.tileSize=Math.max.apply(null,c):i.tileSize=s}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,i.levels=n(this),e.extend(!0,i,{width:i.levels[i.levels.length-1].width,height:i.levels[i.levels.length-1].height,tileSize:Math.max(i.height,i.width),tileOverlap:0,minLevel:0,maxLevel:i.levels.length-1}),this.levels=i.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!i.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var d=Math.max.apply(null,this.scale_factors);i.maxLevel=Math.round(Math.log(d)*Math.LOG2E)}else i.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[i])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!(!e.protocol||"http://iiif.io/api/image"!=e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI))))},configure:function(t,n){if(e.isPlainObject(t)){if(t["@context"]){var i=t["@context"];if(Array.isArray(i))for(var o=0;o<i.length;o++)if("string"==typeof i[o]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(i[o])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===i[o])){i=i[o];break}switch(i){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":t.version=1;break;case"http://iiif.io/api/image/2/context.json":t.version=2;break;case"http://iiif.io/api/image/3/context.json":t.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=n.replace("/info.json",""),t.version=1;if(!t["@id"]&&t.id&&(t["@id"]=t.id),t.preferredFormats)for(var r=0;r<t.preferredFormats.length;r++)if(OpenSeadragon.imageFormatSupported(t.preferredFormats[r])){t.tileFormat=t.preferredFormats[r];break}return t}var a=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var n=t.documentElement,i=n.tagName,o=null;if("info"==i)try{return function t(n,i,o){var r,a;if(3==n.nodeType&&o)(a=n.nodeValue.trim()).match(/^\d*$/)&&(a=Number(a)),i[o]?(e.isArray(i[o])||(i[o]=[i[o]]),i[o].push(a)):i[o]=a;else if(1==n.nodeType)for(r=0;r<n.childNodes.length;r++)t(n.childNodes[r],i,n.nodeName)}(n,o={}),o}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(t);return a["@context"]="http://iiif.io/api/image/1.0/context.json",a["@id"]=n.replace("/info.xml",""),a.version=1,a},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){return this.emulateLegacyImagePyramid?this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}var o,r,a,s,l,c,u,d,p,h,f,g,m,v=Math.pow(.5,this.maxLevel-e),b=Math.ceil(this.width*v),y=Math.ceil(this.height*v);return o=this.getTileWidth(e),r=this.getTileHeight(e),a=Math.ceil(o/v),s=Math.ceil(r/v),m=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,b<o&&y<r?(h=2===this.version&&b===this.width||3===this.version&&b===this.width&&y===this.height?"max":3===this.version?b+","+y:b+",",l="full"):(c=t*a,u=n*s,d=Math.min(a,this.width-c),p=Math.min(s,this.height-u),l=0===t&&0===n&&d===this.width&&p===this.height?"full":[c,u,d,p].join(","),f=Math.ceil(d*v),g=Math.ceil(p*v),h=2===this.version&&f===this.width||3===this.version&&f===this.width&&g===this.height?"max":3===this.version?f+","+g:f+","),[this["@id"],l,h,"0",m].join("/")},__testonly__:{canBeTiled:t,constructLevels:n}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,n,i,o,r){var a;(a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&a.height||(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,e.TileSource.apply(this,[a])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,n,i,o,r){var a;a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var s,l=256*Math.ceil(a.width/256),c=256*Math.ceil(a.height/256);s=l>c?l/256:c/256,a.maxLevel=Math.ceil(Math.log(s)/Math.log(2))-1,a.tileSize=256,a.width=l,a.height=c,e.TileSource.apply(this,[a])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var i=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(i-n)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var i=0,o={},r=0;r<e;r++)i+=(o=this.gridSize[r]).x*o.y;return i+=(o=this.gridSize[e]).x*n+t},supports:function(e,t){return e.type&&"zoomifytileservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var i,o=this._calculateAbsoluteTileNumber(e,t,n);return i=Math.floor(o/256),this.tilesUrl+"TileGroup"+i+"/"+e+"-"+t+"-"+n+".jpg"}})}(OpenSeadragon),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var n,i,o;e.isArray(t)&&(n={type:"legacy-image-pyramid",levels:t}),n.levels=function(t){var n,i,o=[];for(i=0;i<t.length;i++)(n=t[i]).height&&n.width&&n.url?o.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return o.sort((function(e,t){return e.height-t.height}))}(n.levels),n.levels.length>0?(i=n.levels[n.levels.length-1].width,o=n.levels[n.levels.length-1].height):(i=0,o=0,e.console.error("No supported image formats found")),e.extend(!0,n,{width:i,height:o,tileSize:Math.max(o,i),tileOverlap:0,minLevel:0,maxLevel:n.levels.length>0?n.levels.length-1:0}),e.TileSource.apply(this,[n]),this.levels=n.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(n,i){return e.isPlainObject(n)?t(this,n):function(n,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var o,r,a=i.documentElement,s=a.tagName,l=null,c=[];if("image"==s)try{for(l={type:a.getAttribute("type"),levels:[]},c=a.getElementsByTagName("level"),r=0;r<c.length;r++)o=c[r],l.levels.push({url:o.getAttribute("url"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)});return t(n,l)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==s)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==s)throw new Error("Error: "+i)}throw new Error("Unknown element "+s)}(this,n)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var n=this._image=new Image,i=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",(function(){i.width=Object.prototype.hasOwnProperty.call(n,"naturalWidth")?n.naturalWidth:n.width,i.height=Object.prototype.hasOwnProperty.call(n,"naturalHeight")?n.naturalHeight:n.height,i.aspectRatio=i.width/i.height,i.dimensions=new e.Point(i.width,i.height),i._tileWidth=i.width,i._tileHeight=i.height,i.tileOverlap=0,i.minLevel=0,i.levels=i._buildLevels(),i.maxLevel=i.levels.length-1,i.ready=!0,i.raiseEvent("ready",{tileSource:i})})),e.addEvent(n,"error",(function(){i.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i},getContext2D:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].context2D),i},_buildLevels:function(){var t=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,i=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,o=document.createElement("canvas"),r=o.getContext("2d");if(o.width=n,o.height=i,r.drawImage(this._image,0,0,n,i),t[0].context2D=r,delete this._image,e.isCanvasTainted(o))return t;for(;n>=2&&i>=2;){n=Math.floor(n/2),i=Math.floor(i/2);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=n,a.height=i,s.drawImage(o,0,0,n,i),t.splice(0,0,{context2D:s,width:n,height:i}),o=a,r=s}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,n,i,o){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(n){e.requestAnimationFrame((function(){!function(n){var i,o,r;n.shouldFade&&(i=e.now(),o=i-n.fadeBeginTime,r=1-o/n.fadeLength,r=Math.min(1,r),r=Math.max(0,r),n.imgGroup&&e.setElementOpacity(n.imgGroup,r,!0),r>0&&t(n))}(n)}))}function n(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(!function(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function i(n,i){n.element.disabled||(i<=e.ButtonState.HOVER&&n.currentState==e.ButtonState.DOWN&&(n.imgDown&&(n.imgDown.style.visibility="hidden"),n.currentState=e.ButtonState.HOVER),i<=e.ButtonState.GROUP&&n.currentState==e.ButtonState.HOVER&&(n.imgHover&&(n.imgHover.style.visibility="hidden"),n.currentState=e.ButtonState.GROUP),i<=e.ButtonState.REST&&n.currentState==e.ButtonState.GROUP&&(!function(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout((function(){t(n)}),n.fadeDelay)}(n),n.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var o=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(n(o,e.ButtonState.DOWN),o.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||n(o,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),o.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){i(o,e.ButtonState.GROUP),t.insideElementPressed&&o.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),o.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){n(o,e.ButtonState.DOWN),o.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(i(o,e.ButtonState.HOVER),o.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?i(o,e.ButtonState.GROUP):n(o,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&o.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(o.raiseEvent("click",{originalEvent:e.originalEvent}),o.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),i(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){n(this,e.ButtonState.GROUP)},notifyGroupExit:function(){i(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,i=this.buttons.concat([]),o=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",n=0;n<i.length;n++)this.element.appendChild(i[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<o.buttons.length;t++)o.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<o.buttons.length;t++)o.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(t,n,i,o,r){var a,s;this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.width="number"==typeof i?i:0,this.height="number"==typeof o?o:0,this.degrees="number"==typeof r?r:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(a=this.getTopRight(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=270):this.degrees>=180?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):this.degrees>=90&&(a=this.getBottomLeft(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=90)},e.Rect.fromSummits=function(t,n,i){var o=t.distanceTo(n),r=t.distanceTo(i),a=n.minus(t),s=Math.atan(a.y/a.x);return a.x<0?s+=Math.PI:a.y<0&&(s+=2*Math.PI),new e.Rect(t.x,t.y,o,r,s/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),i=t.getBoundingBox(),o=Math.min(n.x,i.x),r=Math.min(n.y,i.y),a=Math.max(n.x+n.width,i.x+i.width),s=Math.max(n.y+n.height,i.y+i.height);return new e.Rect(o,r,a-o,s-r)},intersection:function(t){var n=[],i=this.getTopLeft();t.containsPoint(i,1e-10)&&n.push(i);var o=this.getTopRight();t.containsPoint(o,1e-10)&&n.push(o);var r=this.getBottomLeft();t.containsPoint(r,1e-10)&&n.push(r);var a=this.getBottomRight();t.containsPoint(a,1e-10)&&n.push(a);var s=t.getTopLeft();this.containsPoint(s,1e-10)&&n.push(s);var l=t.getTopRight();this.containsPoint(l,1e-10)&&n.push(l);var c=t.getBottomLeft();this.containsPoint(c,1e-10)&&n.push(c);var u=t.getBottomRight();this.containsPoint(u,1e-10)&&n.push(u);for(var d=this._getSegments(),p=t._getSegments(),h=0;h<d.length;h++)for(var f=d[h],g=0;g<p.length;g++){var m=p[g],v=b(f[0],f[1],m[0],m[1]);v&&n.push(v)}function b(t,n,i,o){var r=n.minus(t),a=o.minus(i),s=-a.x*r.y+r.x*a.y;if(0===s)return null;var l=(r.x*(t.y-i.y)-r.y*(t.x-i.x))/s,c=(a.x*(t.y-i.y)-a.y*(t.x-i.x))/s;return-1e-10<=l&&l<=1-1e-10&&-1e-10<=c&&c<=1-1e-10?new e.Point(t.x+c*r.x,t.y+c*r.y):null}if(0===n.length)return null;for(var y=n[0].x,x=n[0].x,w=n[0].y,A=n[0].y,_=1;_<n.length;_++){var E=n[_];E.x<y&&(y=E.x),E.x>x&&(x=E.x),E.y<w&&(w=E.y),E.y>A&&(A=E.y)}return new e.Rect(y,w,x-y,A-w)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),i=this.getBottomRight();return[[e,t],[t,i],[i,n],[n,e]]},rotate:function(t,n){if(0===(t=e.positiveModulo(t,360)))return this.clone();n=n||this.getCenter();var i=this.getTopLeft().rotate(t,n),o=this.getTopRight().rotate(t,n).minus(i);o=o.apply((function(e){return Math.abs(e)<1e-15?0:e}));var r=Math.atan(o.y/o.x);return o.x<0?r+=Math.PI:o.y<0&&(r+=2*Math.PI),new e.Rect(i.x,i.y,this.width,this.height,r/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),i=this.getBottomLeft(),o=this.getBottomRight(),r=Math.min(t.x,n.x,i.x,o.x),a=Math.max(t.x,n.x,i.x,o.x),s=Math.min(t.y,n.y,i.y,o.y),l=Math.max(t.y,n.y,i.y,o.y);return new e.Rect(r,s,a-r,l-s)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),i=Math.floor(t.y),o=Math.ceil(t.width+t.x-n),r=Math.ceil(t.height+t.y-i);return new e.Rect(n,i,o,r)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),i=this.getTopRight(),o=this.getBottomLeft(),r=i.minus(n),a=o.minus(n);return(e.x-n.x)*r.x+(e.y-n.y)*r.y>=-t&&(e.x-i.x)*r.x+(e.y-i.y)*r.y<=t&&(e.x-n.x)*a.x+(e.y-n.y)*a.y>=-t&&(e.x-o.x)*a.x+(e.y-o.y)*a.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var t={};function n(t){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?n>-(r-s.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",o(this,s.x,n+2*t.delta.x)):-t.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*t.delta.x+"px",o(this,s.x,n+2*t.delta.x)):-t.delta.y>0?i>-(a-s.y)&&(this.element.style.marginTop=i+2*t.delta.y+"px",o(this,s.y,i+2*t.delta.y)):-t.delta.y<0&&i<0&&(this.element.style.marginTop=i+2*t.delta.y+"px",o(this,s.y,i+2*t.delta.y))),!1}function i(t){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?n>-(r-s.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",o(this,s.x,n-60*t.scroll)):t.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*t.scroll+"px",o(this,s.x,n-60*t.scroll)):t.scroll<0?i>s.y-a&&(this.element.style.marginTop=i+60*t.scroll+"px",o(this,s.y,i+60*t.scroll)):t.scroll>0&&i<0&&(this.element.style.marginTop=i+60*t.scroll+"px",o(this,s.y,i+60*t.scroll))),!1}function o(t,n,i){var o,r,a,s,l,c,u;for(o="horizontal"==t.scroll?t.panelWidth:t.panelHeight,r=Math.ceil(n/o)+5,c=r=(r=(a=Math.ceil((Math.abs(i)+n)/o)+1)-r)<0?0:r;c<a&&c<t.panels.length;c++)if(!(u=t.panels[c]).activePanel){var d,p=t.viewer.tileSources[c];d=p.referenceStripThumbnailUrl?{type:"image",url:p.referenceStripThumbnailUrl}:p,(s=new e.Viewer({id:u.id,tileSources:[d],element:u,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,useCanvas:t.useCanvas})).displayRegion=e.makeNeutralElement("div"),s.displayRegion.id=u.id+"-displayregion",s.displayRegion.className="displayregion",(l=s.displayRegion.style).position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l.float="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=t.panelWidth-4+"px",l.height=t.panelHeight-4+"px",s.displayRegion.innerTracker=new e.MouseTracker({element:s.displayRegion,startDisabled:!0}),u.getElementsByTagName("div")[0].appendChild(s.displayRegion),t.miniViewers[u.id]=s,u.activePanel=!0}}function r(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function a(t){var n=t.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px",!1}function s(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function l(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}e.ReferenceStrip=function(c){var u,d,p,h=c.viewer,f=e.getElementSize(h.element);for(c.id||(c.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=c.id,this.element.className="referencestrip"),c=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},c,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,c),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(d=this.element.style).marginTop="0px",d.marginRight="0px",d.marginBottom="0px",d.marginLeft="0px",d.left="0px",d.bottom="0px",d.border="0px",d.background="#000",d.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=h,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,i),enterHandler:e.delegate(this,r),exitHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,s),keyHandler:e.delegate(this,l)}),c.width&&c.height?(this.element.style.width=c.width+"px",this.element.style.height=c.height+"px",h.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==c.scroll?(this.element.style.width=f.x*c.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.height=f.y*c.sizeRatio+"px",h.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*c.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.width=f.x*c.sizeRatio+"px",h.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<h.tileSources.length;p++)(u=e.makeNeutralElement("div")).id=this.element.id+"-"+p,u.style.width=this.panelWidth+"px",u.style.height=this.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",e.setElementTouchActionNone(u),u.innerTracker=new e.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var n=t.eventSource,i=n.element.id,o=Number(i.split("-")[2]),r=e.now();t.insideElementPressed&&t.insideElementReleased&&n.dragging&&r-n.dragging<n.clickTimeThreshold&&(n.dragging=null,h.goToPage(o))}}),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);o(this,"vertical"==this.scroll?f.y:f.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var n,i=this.element.querySelector("#"+this.element.id+"-"+t),a=e.getElementSize(this.viewer.canvas),s=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),c=-Number(this.element.style.marginLeft.replace("px","")),u=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==i&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=i,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(t)*(this.panelWidth+3))>c+a.x-this.panelWidth?(n=Math.min(n,s-a.x),this.element.style.marginLeft=-n+"px",o(this,a.x,-n)):n<c&&(n=Math.max(0,n-a.x/2),this.element.style.marginLeft=-n+"px",o(this,a.x,-n)):(n=Number(t)*(this.panelHeight+3))>u+a.y-this.panelHeight?(n=Math.min(n,l-a.y),this.element.style.marginTop=-n+"px",o(this,a.y,-n)):n<u&&(n=Math.max(0,n-a.y/2),this.element.style.marginTop=-n+"px",o(this,a.y,-n)),this.currentPage=t,r.call(this,{eventSource:this.innerTracker}))},update:function(){return!!t[this.id].animating&&(e.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,n,i,o,r,a){e.Rect.apply(this,[t,n,i,o]),this.minLevel=r,this.maxLevel=a},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(t){var n=arguments;"object"!=typeof t&&(t={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var t,n;this.current.time=e.now(),this._exponential?(t=this.start._logValue,n=this.target._logValue):(t=this.start.value,n=this.target.value);var i,o,r=this.current.time>=this.target.time?n:t+(n-t)*(i=this.springStiffness,o=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(i*-o))/(1-Math.exp(-i))),a=this.current.value;return this._exponential?this.current.value=Math.exp(r):this.current.value=r,a!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}t.prototype={errorMsg:null,start:function(){var t=this,n=this.abort;this.image=new Image,this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.errorMsg="Image load aborted",t.finish(!1)},this.jobId=window.setTimeout((function(){t.errorMsg="Image load exceeded timeout ("+t.timeout+" ms)",t.finish(!1)}),this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(e){var n;try{n=new window.Blob([e.response])}catch(t){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&i){var o=new i;o.append(e.response),n=o.getBlob()}}0===n.size&&(t.errorMsg="Empty image response.",t.finish(!1));var r=(window.URL||window.webkitURL).createObjectURL(n);t.image.src=r},error:function(e){t.errorMsg="Image load aborted - XHR error",t.finish(!1)}}),this.abort=function(){t.request.abort(),"function"==typeof n&&n()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var n=this,i=new t({src:e.src,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.loadWithAjax?e.ajaxHeaders:null,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:function(t){!function(e,t,n){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(e.jobQueue.shift().start(),e.jobsInProgress++);n(t.image,t.errorMsg,t.request)}(n,t,e.callback)},abort:e.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(i.start(),this.jobsInProgress++):this.jobQueue.push(i)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,n,i,o,r,a,s,l,c){this.level=e,this.x=t,this.y=n,this.bounds=i,this.sourceBounds=c,this.exists=o,this.url=r,this.context2D=a,this.loadWithAjax=s,this.ajaxHeaders=l,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,n,i,o){var r,a,s,l=this.position.times(e.pixelDensityRatio),c=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(r=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&r?(t.save(),t.globalAlpha=this.opacity,"number"==typeof i&&1!==i&&(l=l.times(i),c=c.times(i)),o instanceof e.Point&&(l=l.plus(o)),1===t.globalAlpha&&this._hasTransparencyChannel()&&t.clearRect(l.x,l.y,c.x,c.y),n({context:t,tile:this,rendered:r}),this.sourceBounds?(a=Math.min(this.sourceBounds.width,r.canvas.width),s=Math.min(this.sourceBounds.height,r.canvas.height)):(a=r.canvas.width,s=r.canvas.height),t.drawImage(r.canvas,0,0,a,s,l.x,l.y,c.x,c.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,i){var o=Math.max(1,Math.ceil((i.x-n.x)/2)),r=Math.max(1,Math.ceil((i.y-n.y)/2));return new e.Point(o,r).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,i){var o;o=e.isPlainObject(t)?t:{element:t,location:n,placement:i},this.element=o.element,this.style=o.element.style,this._init(o)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var i=e.Placement.properties[this.placement];i&&(i.isHorizontallyCentered?t.x-=n.x/2:i.isRight&&(t.x-=n.x),i.isVerticallyCentered?t.y-=n.y/2:i.isBottom&&(t.y-=n.y))},destroy:function(){var t=this.element,n=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(n.display="none",document.body.appendChild(t))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var i=e.getCssPropertyWithVendorPrefix("transformOrigin"),o=e.getCssPropertyWithVendorPrefix("transform");i&&o&&(n[i]="",n[o]="")},drawHTML:function(t,n){var i=this.element;i.parentNode!==t&&(i.prevElementParent=i.parentNode,i.prevNextSibling=i.nextSibling,t.appendChild(i),this.style.position="absolute",this.size=e.getElementSize(i));var o=this._getOverlayPositionAndSize(n),r=o.position,a=this.size=o.size,s=o.rotate;if(this.onDraw)this.onDraw(r,a,this.element);else{var l=this.style;l.left=r.x+"px",l.top=r.y+"px",null!==this.width&&(l.width=a.x+"px"),null!==this.height&&(l.height=a.y+"px");var c=e.getCssPropertyWithVendorPrefix("transformOrigin"),u=e.getCssPropertyWithVendorPrefix("transform");c&&u&&(s?(l[c]=this._getTransformOrigin(),l[u]="rotate("+s+"deg)"):(l[c]="",l[u]="")),"none"!==l.display&&(l.display="block")}},_getOverlayPositionAndSize:function(t){var n=t.pixelFromPoint(this.location,!0),i=this._getSizeInPixels(t);this.adjust(n,i);var o=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var r=new e.Rect(n.x,n.y,i.x,i.y),a=this._getBoundingBox(r,t.degrees);n=a.getTopLeft(),i=a.getSize()}else o=t.degrees;return{position:n,size:i,rotate:o}},_getSizeInPixels:function(t){var n=this.size.x,i=this.size.y;if(null!==this.width||null!==this.height){var o=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=o.x),null!==this.height&&(i=o.y)}if(this.checkResize&&(null===this.width||null===this.height)){var r=this.size=e.getElementSize(this.element);null===this.width&&(n=r.x),null===this.height&&(i=r.y)}return new e.Point(n,i)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),i=e.Placement.properties[this.placement];return i&&(i.isHorizontallyCentered?n.x+=t.width/2:i.isRight&&(n.x+=t.width),i.isVerticallyCentered?n.y+=t.height/2:i.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n?(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom"),t):t},update:function(t,n){var i=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:i.location||this.location,placement:void 0!==i.placement?i.placement:this.placement,onDraw:i.onDraw||this.onDraw,checkResize:i.checkResize||this.checkResize,width:void 0!==i.width?i.width:this.width,height:void 0!==i.height?i.height:this.height,rotationMode:i.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,i=this.height;if(null===n||null===i){var o=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=o.x),null===i&&(i=o.y)}var r=this.location.clone();return this.adjust(r,new e.Point(n,i)),this._adjustBoundsForRotation(t,new e.Rect(r.x,r.y,n,i))},_adjustBoundsForRotation:function(t,n){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var i=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(i.position.x,i.position.y,i.size.x,i.size.y))}return n.rotate(-t.degrees,this._getPlacementPoint(n))}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var i=this._calculateCanvasSize();this.canvas.width=i.x,this.canvas.height=i.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(t,n,i,o){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,i,o),this},updateOverlay:function(t,n,i){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,i),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(t){var n=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},clipWithPolygons:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),e.forEach((function(e){e.forEach((function(e,t){n[0===t?"moveTo":"lineTo"](e.x,e.y)}))})),n.clip()}},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,i=0;i<n.getItemCount();i++)n.getItemAt(i).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,i=0;i<t.getItemCount();i++){var o=t.getItemAt(i).getOpacity();o>n&&(n=o)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var i=n.canvas;n.clearRect(0,0,i.width,i.height)}}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),i=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},drawTile:function(t,n,i,o,r){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var a=this._getContext(i);o=o||1,t.drawCanvas(a,n,o,r)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var i=this;this.viewer.addHandler("rotate",(function e(){if(0!==i.viewport.getRotation()){i.viewer.removeHandler("rotate",e);var t=i._calculateSketchCanvasSize();i.sketchCanvas.width=t.x,i.sketchCanvas.height=t.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var i=this._getContext(n);i.save(),i.fillStyle=t,i.fillRect(e.x,e.y,e.width,e.height),i.restore()}},blendSketch:function(t,n,i,o){var r=t;if(e.isPlainObject(r)||(r={opacity:t,scale:n,translate:i,compositeOperation:o}),this.useCanvas&&this.sketchCanvas){t=r.opacity,o=r.compositeOperation;var a=r.bounds;if(this.context.save(),this.context.globalAlpha=t,o&&(this.context.globalCompositeOperation=o),a)a.x<0&&(a.width+=a.x,a.x=0),a.x+a.width>this.canvas.width&&(a.width=this.canvas.width-a.x),a.y<0&&(a.height+=a.y,a.y=0),a.y+a.height>this.canvas.height&&(a.height=this.canvas.height-a.y),this.context.drawImage(this.sketchCanvas,a.x,a.y,a.width,a.height,a.x,a.y,a.width,a.height);else{n=r.scale||1;var s=(i=r.translate)instanceof e.Point?i:new e.Point(0,0),l=0,c=0;if(i){var u=this.sketchCanvas.width-this.canvas.width,d=this.sketchCanvas.height-this.canvas.height;l=Math.round(u/2),c=Math.round(d/2)}this.context.drawImage(this.sketchCanvas,s.x-l*n,s.y-c*n,(this.canvas.width+2*l)*n,(this.canvas.height+2*c)*n,-l,-c,this.canvas.width+2*l,this.canvas.height+2*c)}this.context.restore()}},drawDebugInfo:function(t,n,i,o){if(this.useCanvas){var r=this.viewer.world.getIndexOfItem(o)%this.debugGridColor.length,a=this.context;a.save(),a.lineWidth=2*e.pixelDensityRatio,a.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",a.strokeStyle=this.debugGridColor[r],a.fillStyle=this.debugGridColor[r],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),o.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:o.getRotation(!0),point:o.viewport.pixelFromPointNoRotate(o._getRotationPoint(!0),!0)}),0===o.viewport.degrees&&o.getRotation(!0)%360==0&&o._drawer.viewer.viewport.getFlip()&&o._drawer._flip(),a.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var s=(t.position.x+t.size.x/2)*e.pixelDensityRatio,l=(t.position.y+t.size.y/2)*e.pixelDensityRatio;a.translate(s,l),a.rotate(Math.PI/180*-this.viewport.degrees),a.translate(-s,-l),0===t.x&&0===t.y&&(a.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),a.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),a.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),a.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),a.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),a.fillText("Order: "+i+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),a.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),a.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),o.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===o.viewport.degrees&&o.getRotation(!0)%360==0&&o._drawer.viewer.viewport.getFlip()&&o._drawer._flip(),a.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},setImageSmoothingEnabled:function(e){this.useCanvas&&(this._imageSmoothingEnabled=e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var n=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(t.useSketch);i.save(),i.translate(n.x,n.y),this.viewer.viewport.flipped?(i.rotate(Math.PI/180*-t.degrees),i.scale(-1,1)):i.rotate(Math.PI/180*t.degrees),i.translate(-n.x,-n.y)},_flip:function(t){var n=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(t.useSketch);i.translate(n.x,0),i.scale(-1,1),i.translate(-n.x,0)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*t),y:Math.round(n.y*t)}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-i/2,n,i)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var n=this.getCenter(t),i=1/this.getZoom(t),o=i/this.getAspectRatio();return new e.Rect(n.x-i/2,n.y-o/2,i,o)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,i,o,r,a,s,l=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?l:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),r=(o=1/(i=this.getZoom()))/this.getAspectRatio(),a=new e.Rect(l.x-o/2,l.y-r/2,o,r),s=this._pixelFromPoint(this.zoomPoint,a).minus(n).divide(this._containerInnerSize.x*i),c.plus(s)):c},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var n=new e.Rect(t.x,t.y,t.width,t.height);if(this.wrapHorizontal);else{var i=this.visibilityRatio*n.width,o=n.x+n.width,r=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,a=this._contentBoundsNoRotate.x-o+i,s=r-n.x-i;i>this._contentBoundsNoRotate.width?n.x+=(a+s)/2:s<0?n.x+=s:a>0&&(n.x+=a)}if(this.wrapVertical);else{var l=this.visibilityRatio*n.height,c=n.y+n.height,u=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,d=this._contentBoundsNoRotate.y-c+l,p=u-n.y-l;l>this._contentBoundsNoRotate.height?n.y+=(d+p)/2:p<0?n.y+=p:d>0&&(n.y+=d)}return n},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var i=this.getBoundsNoRotate(),o=this._applyBoundaryConstraints(i);return this._raiseConstraintsEvent(e),(i.x!==o.x||i.y!==o.y||e)&&this.fitBounds(o.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){var i=(n=n||{}).immediately||!1,o=n.constraints||!1,r=this.getAspectRatio(),a=t.getCenter(),s=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();s.getAspectRatio()>=r?s.height=s.width/r:s.width=s.height*r,s.x=a.x-s.width/2,s.y=a.y-s.height/2;var l=1/s.width;if(o){var c=s.getAspectRatio(),u=this._applyZoomConstraints(l);l!==u&&(l=u,s.width=1/l,s.x=a.x-s.width/2,s.height=s.width/c,s.y=a.y-s.height/2),a=(s=this._applyBoundaryConstraints(s)).getCenter(),this._raiseConstraintsEvent(i)}if(i)return this.panTo(a,!0),this.zoomTo(l,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var d=this.getBounds(),p=this.getZoom();if(0===p||Math.abs(l/p-1)<1e-8)return this.zoomTo(l,!0),this.panTo(a,i);var h=(s=s.rotate(-this.getRotation())).getTopLeft().times(l).minus(d.getTopLeft().times(p)).divide(l-p);return this.zoomTo(l,h,i)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,n){var i=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,i){var o=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this._adjustCenterSpringsForZoomPoint((function(){o.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:i}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var n,i=this.getBoundsNoRotate(),o=i;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,o.width=i.width*n,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(o,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var n=this.pixelFromPoint(this.zoomPoint,!0).minus(t),i=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var i=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/i.width).plus(i.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/i,n*this._contentSizeNoRotate.x/i)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===i){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,n,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*i,n/this._contentSizeNoRotate.x*i)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===i){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,n,!0)}}var o=this._imageToViewportDelta(t,n);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(t,n,i,o){var r=t;if(r instanceof e.Rect||(r=new e.Rect(t,n,i,o)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===a){return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,n,i,o,!0)}}var s=this.imageToViewportCoordinates(r.x,r.y),l=this._imageToViewportDelta(r.width,r.height);return new e.Rect(s.x,s.y,l.x,l.y,r.degrees)},viewportToImageRectangle:function(t,n,i,o){var r=t;if(r instanceof e.Rect||(r=new e.Rect(t,n,i,o)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===a){return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,n,i,o,!0)}}var s=this.viewportToImageCoordinates(r.x,r.y),l=this._viewportToImageDelta(r.width,r.height);return new e.Rect(s.x,s.y,l.x,l.y,r.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}}var i=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/i*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this}}}(OpenSeadragon),function(e){function t(e,t,i,o,r,a,l,c,u){var d=l.getBoundingBox().getTopLeft(),p=l.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:o,opacity:r,visibility:a,drawArea:l,topleft:d,bottomright:p,currenttime:c,best:u}),s(e.coverage,o),s(e.loadingCoverage,o);for(var h=e._getCornerTiles(o,d,p),f=h.topLeft,g=h.bottomRight,m=e.source.getNumTiles(o),v=e.viewport.pixelFromPoint(e.viewport.getCenter()),b=f.x;b<=g.x;b++)for(var y=f.y;y<=g.y;y++){if(!e.wrapHorizontal&&!e.wrapVertical){var x=e.source.getTileBounds(o,b,y);if(null===l.intersection(x))continue}u=n(e,i,t,b,y,o,r,a,v,m,c,u)}return u}function n(t,n,o,s,l,c,u,d,p,h,f,g){var m=function(t,n,i,o,r,a,s,l,c,u){var d,p,h,f,g,m,v,b,y;a[i]||(a[i]={});a[i][t]||(a[i][t]={});a[i][t][n]||(d=(l.x+t%l.x)%l.x,p=(l.y+n%l.y)%l.y,h=r.getTileBounds(i,d,p),f=r.getTileBounds(i,d,p,!0),g=r.tileExists(i,d,p),m=r.getTileUrl(i,d,p),o.loadTilesWithAjax?(v=r.getTileAjaxHeaders(i,d,p),e.isPlainObject(o.ajaxHeaders)&&(v=e.extend({},o.ajaxHeaders,v))):v=null,b=r.getContext2D?r.getContext2D(i,d,p):void 0,h.x+=(t-d)/l.x,h.y+=u/c*((n-p)/l.y),y=new e.Tile(i,t,n,h,g,m,b,o.loadTilesWithAjax,v,f),d===l.x-1&&(y.isRightMost=!0),p===l.y-1&&(y.isBottomMost=!0),a[i][t][n]=y);return(y=a[i][t][n]).lastTouchTime=s,y}(s,l,c,t,t.source,t.tilesMatrix,f,h,t._worldWidthCurrent,t._worldHeightCurrent),v=o;t.viewer&&t.viewer.raiseEvent("update-tile",{tiledImage:t,tile:m}),a(t.coverage,c,s,l,!1);var b=m.loaded||m.loading||r(t.loadingCoverage,c,s,l);if(a(t.loadingCoverage,c,s,l,b),!m.exists)return g;if(n&&!v&&(r(t.coverage,c,s,l)?a(t.coverage,c,s,l,!0):v=!0),!v)return g;if(function(t,n,i,o,r,a){var s=t.bounds.getTopLeft();s.x*=a._scaleSpring.current.value,s.y*=a._scaleSpring.current.value,s.x+=a._xSpring.current.value,s.y+=a._ySpring.current.value;var l=t.bounds.getSize();l.x*=a._scaleSpring.current.value,l.y*=a._scaleSpring.current.value;var c=i.pixelFromPointNoRotate(s,!0),u=i.pixelFromPointNoRotate(s,!1),d=i.deltaPixelsFromPointsNoRotate(l,!0),p=i.deltaPixelsFromPointsNoRotate(l,!1),h=u.plus(p.divide(2)),f=o.squaredDistanceTo(h);n||(d=d.plus(new e.Point(1,1)));t.isRightMost&&a.wrapHorizontal&&(d.x+=.75);t.isBottomMost&&a.wrapVertical&&(d.y+=.75);t.position=c,t.size=d,t.squaredDistance=f,t.visibility=r}(m,t.source.tileOverlap,t.viewport,p,d,t),!m.loaded)if(m.context2D)i(t,m);else{var y=t._tileCache.getImageRecord(m.cacheKey);if(y)i(t,m,y.getImage())}m.loaded?function(e,t,n,i,o,r,s){var l,c,u=1e3*e.blendTime;t.blendStart||(t.blendStart=s);l=s-t.blendStart,c=u?Math.min(1,l/u):1,e.alwaysBlend&&(c*=r);if(t.opacity=c,e.lastDrawn.push(t),1===c)a(e.coverage,o,n,i,!0),e._hasOpaqueTile=!0;else if(l<u)return!0;return!1}(t,m,s,l,c,u,f)&&(t._needsDraw=!0):m.loading?t._tilesLoading++:b||(g=function(e,t){if(!e)return t;if(t.visibility>e.visibility)return t;if(t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance)return t;return e}(g,m));return g}function i(e,t,n,i,o){var r=0;function a(){return r++,s}function s(){0===--r&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:i,tiledImage:e}),e._needsDraw=!0)}e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:o,image:n,getCompletionCallback:a}),a()()}function o(e,t,n,i){var o,r,a,s;if(!e[t])return!1;if(void 0===n||void 0===i){for(a in o=e[t])if(Object.prototype.hasOwnProperty.call(o,a))for(s in r=o[a])if(Object.prototype.hasOwnProperty.call(r,s)&&!r[s])return!1;return!0}return void 0===e[t][n]||void 0===e[t][n][i]||!0===e[t][n][i]}function r(e,t,n,i){return void 0===n||void 0===i?o(e,t+1):o(e,t+1,2*n,2*i)&&o(e,t+1,2*n,2*i+1)&&o(e,t+1,2*n+1,2*i)&&o(e,t+1,2*n+1,2*i+1)}function a(t,n,i,o,r){t[n]?(t[n][i]||(t[n][i]={}),t[n][i][o]=r):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function s(e,t){e[t]={}}e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var i=t.x||0;delete t.x;var o=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var r=1;t.width?(r=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(r=t.height/this.normHeight,delete t.height);var a=t.fitBounds;delete t.fitBounds;var s=t.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete t.fitBoundsPlacement;var l=t.degrees||0;delete t.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:l,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),a&&this.fitBounds(a,s,!0),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),n=this._scaleSpring.update(),i=this._degreesSpring.update();return!!(e||t||n||i)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var n=this.getBoundsNoRotate(t);if(this._clip){var i=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,o=this._clip.times(i);n=new e.Rect(n.x+o.x,n.y+o.y,o.width,o.height)}return n.rotate(this.getRotation(t),this._getRotationPoint(t))},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,n,i){var o=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/o),n*(this.source.dimensions.y*this.contentAspectX/o))},viewportToImageCoordinates:function(t,n,i){var o;return t instanceof e.Point?(i=n,o=t):o=new e.Point(t,n),o=o.rotate(-this.getRotation(i),this._getRotationPoint(i)),i?this._viewportToImageDelta(o.x-this._xSpring.current.value,o.y-this._ySpring.current.value):this._viewportToImageDelta(o.x-this._xSpring.target.value,o.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,i){var o=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*o,n/this.source.dimensions.y/this.contentAspectX*o)},imageToViewportCoordinates:function(t,n,i){t instanceof e.Point&&(i=n,n=t.y,t=t.x);var o=this._imageToViewportDelta(t,n);return i?(o.x+=this._xSpring.current.value,o.y+=this._ySpring.current.value):(o.x+=this._xSpring.target.value,o.y+=this._ySpring.target.value),o.rotate(this.getRotation(i),this._getRotationPoint(i))},imageToViewportRectangle:function(t,n,i,o,r){var a=t;a instanceof e.Rect?r=n:a=new e.Rect(t,n,i,o);var s=this.imageToViewportCoordinates(a.getTopLeft(),r),l=this._imageToViewportDelta(a.width,a.height,r);return new e.Rect(s.x,s.y,l.x,l.y,a.degrees+this.getRotation(r))},viewportToImageRectangle:function(t,n,i,o,r){var a=t;t instanceof e.Rect?r=n:a=new e.Rect(t,n,i,o);var s=this.viewportToImageCoordinates(a.getTopLeft(),r),l=this._viewportToImageDelta(a.width,a.height,r);return new e.Rect(s.x,s.y,l.x,l.y,a.degrees-this.getRotation(r))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var n=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/n,(t.y-this._ySpring.current.value)/n,t.width/n,t.height/n,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){var n=function(t){return t.map((function(t){try{if(function(t){return t instanceof e.Point||"number"==typeof t.x&&"number"==typeof t.y}(t))return{x:t.x,y:t.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}}))};try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map((function(e){return n(e)}))}catch(t){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(t),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(t,n,i){n=n||e.Placement.CENTER;var o=e.Placement.properties[n],r=this.contentAspectX,a=0,s=0,l=1,c=1;if(this._clip&&(r=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,c=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>r?(a=this._clip.x/this._clip.height*t.height,s=this._clip.y/this._clip.height*t.height):(a=this._clip.x/this._clip.width*t.width,s=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>r){var u=t.height/c,d=0;o.isHorizontallyCentered?d=(t.width-t.height*r)/2:o.isRight&&(d=t.width-t.height*r),this.setPosition(new e.Point(t.x-a+d,t.y-s),i),this.setHeight(u,i)}else{var p=t.width/l,h=0;o.isVerticallyCentered?h=(t.height-t.width/r)/2:o.isBottom&&(h=t.height-t.width/r),this.setPosition(new e.Point(t.x-a,t.y-s+h),i),this.setWidth(p,i)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),{lowestLevel:e=Math.min(e,n),highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var n=this.viewport,r=this._viewportToTiledImageRectangle(n.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var a=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(r=r.intersection(a)))return}for(var s=this._getLevelsInterval(),l=s.lowestLevel,c=s.highestLevel,u=null,d=!1,p=e.now(),h=c;h>=l;h--){var f=!1,g=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!0).x*this._scaleSpring.current.value;if(h===l||!d&&g>=this.minPixelRatio)f=!0,d=!0;else if(!d)continue;var m=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!1).x*this._scaleSpring.current.value,v=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,b=this.immediateRender?1:v;if(u=t(this,d,f,h,Math.min(1,(g-.5)/.5),b/Math.abs(b-m),r,p,u),o(this.coverage,h))break}!function(t,n){if(0===t.opacity||0===n.length&&!t.placeholderFillStyle)return;var i,o,r,a=n[0];a&&(i=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&a._hasTransparencyChannel());var s,l=t.viewport.getZoom(!0),c=t.viewportToImageZoom(l);n.length>1&&c>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360==0&&e.supportsCanvas&&(i=!0,o=a.getScaleForEdgeSmoothing(),r=a.getTranslationForEdgeSmoothing(o,t._drawer.getCanvasSize(!1),t._drawer.getCanvasSize(!0)));i&&(o||(s=t.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox(),t._drawer.viewer.viewport.getFlip()&&(0===t.viewport.degrees&&t.getRotation(!0)%360==0||(s.x=t._drawer.viewer.container.clientWidth-(s.x+s.width))),s=s.times(e.pixelDensityRatio)),t._drawer._clear(!0,s));o||(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:i}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:i}),0===t.viewport.degrees&&t.getRotation(!0)%360==0&&t._drawer.viewer.viewport.getFlip()&&t._drawer._flip());var u=!1;if(t._clip){t._drawer.saveContext(i);var d=t.imageToViewportRectangle(t._clip,!0);d=d.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var p=t._drawer.viewportToDrawerRectangle(d);o&&(p=p.times(o)),r&&(p=p.translate(r)),t._drawer.setClip(p,i),u=!0}if(t._croppingPolygons){t._drawer.saveContext(i);try{var h=t._croppingPolygons.map((function(e){return e.map((function(e){var n=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(-t.getRotation(!0),t._getRotationPoint(!0)),i=t._drawer.viewportCoordToDrawerCoord(n);return o&&(i=i.times(o)),i}))}));t._drawer.clipWithPolygons(h,i)}catch(t){e.console.error(t)}u=!0}if(t.placeholderFillStyle&&!1===t._hasOpaqueTile){var f=t._drawer.viewportToDrawerRectangle(t.getBounds(!0));o&&(f=f.times(o)),r&&(f=f.translate(r));var g=null;g="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,t._drawer.context):t.placeholderFillStyle,t._drawer.drawRectangle(f,g,i)}for(var m=n.length-1;m>=0;m--)a=n[m],t._drawer.drawTile(a,t._drawingHandler,i,o,r),a.beingDrawn=!0,t.viewer&&t.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:a});u&&t._drawer.restoreContext(i);o||(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(i),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(i));i&&(o&&(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:!1}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:!1})),t._drawer.blendSketch({opacity:t.opacity,scale:o,translate:r,compositeOperation:t.compositeOperation,bounds:s}),o&&(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(!1),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(!1)));o||0===t.viewport.degrees&&t.getRotation(!0)%360==0&&t._drawer.viewer.viewport.getFlip()&&t._drawer._flip();!function(t,n){if(t.debugMode)for(var i=n.length-1;i>=0;i--){var o=n[i];try{t._drawer.drawDebugInfo(o,n.length,i,t)}catch(t){e.console.error(t)}}}(t,n)}(this,this.lastDrawn),u&&!u.context2D?(!function(t,n,o){n.loading=!0,t._imageLoader.addJob({src:n.url,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.ajaxHeaders,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:function(r,a,s){!function(t,n,o,r,a,s){if(!r)return e.console.log("Tile %s failed to load: %s - error: %s",n,n.url,a),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:o,message:a,tileRequest:s}),n.loading=!1,void(n.exists=!1);if(o<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);var l=function(){var e=t.source.getClosestLevel();i(t,n,r,e,s)};t._midDraw?window.setTimeout(l,1):l()}(t,n,o,r,a,s)},abort:function(){n.loading=!1}})}(this,u,p),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,n,i){var o,r,a,s;this.wrapHorizontal?(o=e.positiveModulo(n.x,1),r=e.positiveModulo(i.x,1)):(o=Math.max(0,n.x),r=Math.min(1,i.x));var l=1/this.source.aspectRatio;this.wrapVertical?(a=e.positiveModulo(n.y,l),s=e.positiveModulo(i.y,l)):(a=Math.max(0,n.y),s=Math.min(l,i.y));var c=this.source.getTileAtPoint(t,new e.Point(o,a)),u=this.source.getTileAtPoint(t,new e.Point(r,s)),d=this.source.getNumTiles(t);return this.wrapHorizontal&&(c.x+=d.x*Math.floor(n.x),u.x+=d.x*Math.floor(i.x)),this.wrapVertical&&(c.y+=d.y*Math.floor(n.y/l),u.y+=d.y*Math.floor(i.y/l)),{topLeft:c,bottomRight:u}}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},n=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(i){e.console.assert(i,"[TileCache.cacheTile] options is required"),e.console.assert(i.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(i.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(i.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var o=i.cutoff||0,r=this._tilesLoaded.length,a=this._imagesLoaded[i.tile.cacheKey];if(a||(e.console.assert(i.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),a=this._imagesLoaded[i.tile.cacheKey]=new n({image:i.image}),this._imagesLoadedCount++),a.addTile(i.tile),i.tile.cacheImageRecord=a,this._imagesLoadedCount>this._maxImageCacheCount){for(var s,l,c,u,d,p,h=null,f=-1,g=null,m=this._tilesLoaded.length-1;m>=0;m--)(s=(p=this._tilesLoaded[m]).tile).level<=o||s.beingDrawn||(h?(u=s.lastTouchTime,l=h.lastTouchTime,d=s.level,c=h.level,(u<l||u==l&&d>c)&&(h=s,f=m,g=p)):(h=s,f=m,g=p));h&&f>=0&&(this._unloadTile(g),r=f)}this._tilesLoaded[r]=new t({tile:i.tile,tiledImage:i.tiledImage})},clearTilesFor:function(t){var n;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var i=0;i<this._tilesLoaded.length;++i)(n=this._tilesLoaded[i]).tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(i,1),i--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,i=t.tiledImage;n.unload(),n.cacheImageRecord=null;var o=this._imagesLoaded[n.cacheKey];o.removeTile(n),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),i.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:i})}}}(OpenSeadragon),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(n=n||{}).index){var i=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(i,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:i,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var n,i=(t=t||{}).immediately||!1,o=t.layout||e.DEFAULT_SETTINGS.collectionLayout,r=t.rows||e.DEFAULT_SETTINGS.collectionRows,a=t.columns||e.DEFAULT_SETTINGS.collectionColumns,s=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=s+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);n=!t.rows&&a?a:Math.ceil(this._items.length/r);var c,u,d,p,h,f=0,g=0;this.setAutoRefigureSizes(!1);for(var m=0;m<this._items.length;m++)m&&m%n==0&&("horizontal"===o?(g+=l,f=0):(f+=l,g=0)),p=(d=(u=(c=this._items[m]).getBounds()).width>u.height?s:s*(u.width/u.height))*(u.height/u.width),h=new e.Point(f+(s-d)/2,g+(s-p)/2),c.setPosition(h,i),c.setWidth(d,i),"horizontal"===o?f+=l:g+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,i=this._contentFactor||0;if(this._items.length){var o=this._items[0],r=o.getBounds();this._contentFactor=o.getContentSize().x/r.width;for(var a=o.getClippedBounds().getBoundingBox(),s=a.x,l=a.y,c=a.x+a.width,u=a.y+a.height,d=1;d<this._items.length;d++)r=(o=this._items[d]).getBounds(),this._contentFactor=Math.max(this._contentFactor,o.getContentSize().x/r.width),a=o.getClippedBounds().getBoundingBox(),s=Math.min(s,a.x),l=Math.min(l,a.y),c=Math.max(c,a.x+a.width),u=Math.max(u,a.y+a.height);this._homeBounds=new e.Rect(s,l,c-s,u-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===i&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},function(e,t,n){var i,o;
/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.8
 * Copyright (C) 2019 Oliver Nightingale
 * @license MIT
 */!function(){var r,a,s,l,c,u,d,p,h,f,g,m,v,b,y,x,w,A,_,E,S,T,C,k,L,I,D=function(e){var t=new D.Builder;return t.pipeline.add(D.trimmer,D.stopWordFilter,D.stemmer),t.searchPipeline.add(D.stemmer),e.call(t,t),t.build()};D.version="2.3.8"
/*!
 * lunr.utils
 * Copyright (C) 2019 Oliver Nightingale
 */,D.utils={},D.utils.warn=(r=this,function(e){r.console&&console.warn&&console.warn(e)}),D.utils.asString=function(e){return null==e?"":e.toString()},D.utils.clone=function(e){if(null==e)return e;for(var t=Object.create(null),n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],r=e[o];if(Array.isArray(r))t[o]=r.slice();else{if("string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r)throw new TypeError("clone is not deep and does not support nested objects");t[o]=r}}return t},D.FieldRef=function(e,t,n){this.docRef=e,this.fieldName=t,this._stringValue=n},D.FieldRef.joiner="/",D.FieldRef.fromString=function(e){var t=e.indexOf(D.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var n=e.slice(0,t),i=e.slice(t+1);return new D.FieldRef(i,n,e)},D.FieldRef.prototype.toString=function(){return null==this._stringValue&&(this._stringValue=this.fieldName+D.FieldRef.joiner+this.docRef),this._stringValue}
/*!
 * lunr.Set
 * Copyright (C) 2019 Oliver Nightingale
 */,D.Set=function(e){if(this.elements=Object.create(null),e){this.length=e.length;for(var t=0;t<this.length;t++)this.elements[e[t]]=!0}else this.length=0},D.Set.complete={intersect:function(e){return e},union:function(e){return e},contains:function(){return!0}},D.Set.empty={intersect:function(){return this},union:function(e){return e},contains:function(){return!1}},D.Set.prototype.contains=function(e){return!!this.elements[e]},D.Set.prototype.intersect=function(e){var t,n,i,o=[];if(e===D.Set.complete)return this;if(e===D.Set.empty)return e;this.length<e.length?(t=this,n=e):(t=e,n=this),i=Object.keys(t.elements);for(var r=0;r<i.length;r++){var a=i[r];a in n.elements&&o.push(a)}return new D.Set(o)},D.Set.prototype.union=function(e){return e===D.Set.complete?D.Set.complete:e===D.Set.empty?this:new D.Set(Object.keys(this.elements).concat(Object.keys(e.elements)))},D.idf=function(e,t){var n=0;for(var i in e)"_index"!=i&&(n+=Object.keys(e[i]).length);var o=(t-n+.5)/(n+.5);return Math.log(1+Math.abs(o))},D.Token=function(e,t){this.str=e||"",this.metadata=t||{}},D.Token.prototype.toString=function(){return this.str},D.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},D.Token.prototype.clone=function(e){return e=e||function(e){return e},new D.Token(e(this.str,this.metadata),this.metadata)}
/*!
 * lunr.tokenizer
 * Copyright (C) 2019 Oliver Nightingale
 */,D.tokenizer=function(e,t){if(null==e||null==e)return[];if(Array.isArray(e))return e.map((function(e){return new D.Token(D.utils.asString(e).toLowerCase(),D.utils.clone(t))}));for(var n=e.toString().toLowerCase(),i=n.length,o=[],r=0,a=0;r<=i;r++){var s=r-a;if(n.charAt(r).match(D.tokenizer.separator)||r==i){if(s>0){var l=D.utils.clone(t)||{};l.position=[a,s],l.index=o.length,o.push(new D.Token(n.slice(a,r),l))}a=r+1}}return o},D.tokenizer.separator=/[\s\-]+/
/*!
 * lunr.Pipeline
 * Copyright (C) 2019 Oliver Nightingale
 */,D.Pipeline=function(){this._stack=[]},D.Pipeline.registeredFunctions=Object.create(null),D.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&D.utils.warn("Overwriting existing registered function: "+t),e.label=t,D.Pipeline.registeredFunctions[e.label]=e},D.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||D.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},D.Pipeline.load=function(e){var t=new D.Pipeline;return e.forEach((function(e){var n=D.Pipeline.registeredFunctions[e];if(!n)throw new Error("Cannot load unregistered function: "+e);t.add(n)})),t},D.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach((function(e){D.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)}),this)},D.Pipeline.prototype.after=function(e,t){D.Pipeline.warnIfFunctionNotRegistered(t);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");n+=1,this._stack.splice(n,0,t)},D.Pipeline.prototype.before=function(e,t){D.Pipeline.warnIfFunctionNotRegistered(t);var n=this._stack.indexOf(e);if(-1==n)throw new Error("Cannot find existingFn");this._stack.splice(n,0,t)},D.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},D.Pipeline.prototype.run=function(e){for(var t=this._stack.length,n=0;n<t;n++){for(var i=this._stack[n],o=[],r=0;r<e.length;r++){var a=i(e[r],r,e);if(null!=a&&""!==a)if(Array.isArray(a))for(var s=0;s<a.length;s++)o.push(a[s]);else o.push(a)}e=o}return e},D.Pipeline.prototype.runString=function(e,t){var n=new D.Token(e,t);return this.run([n]).map((function(e){return e.toString()}))},D.Pipeline.prototype.reset=function(){this._stack=[]},D.Pipeline.prototype.toJSON=function(){return this._stack.map((function(e){return D.Pipeline.warnIfFunctionNotRegistered(e),e.label}))}
/*!
 * lunr.Vector
 * Copyright (C) 2019 Oliver Nightingale
 */,D.Vector=function(e){this._magnitude=0,this.elements=e||[]},D.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,n=this.elements.length/2,i=n-t,o=Math.floor(i/2),r=this.elements[2*o];i>1&&(r<e&&(t=o),r>e&&(n=o),r!=e);)i=n-t,o=t+Math.floor(i/2),r=this.elements[2*o];return r==e||r>e?2*o:r<e?2*(o+1):void 0},D.Vector.prototype.insert=function(e,t){this.upsert(e,t,(function(){throw"duplicate index"}))},D.Vector.prototype.upsert=function(e,t,n){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=n(this.elements[i+1],t):this.elements.splice(i,0,e,t)},D.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,n=1;n<t;n+=2){var i=this.elements[n];e+=i*i}return this._magnitude=Math.sqrt(e)},D.Vector.prototype.dot=function(e){for(var t=0,n=this.elements,i=e.elements,o=n.length,r=i.length,a=0,s=0,l=0,c=0;l<o&&c<r;)(a=n[l])<(s=i[c])?l+=2:a>s?c+=2:a==s&&(t+=n[l+1]*i[c+1],l+=2,c+=2);return t},D.Vector.prototype.similarity=function(e){return this.dot(e)/this.magnitude()||0},D.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,n=0;t<this.elements.length;t+=2,n++)e[n]=this.elements[t];return e},D.Vector.prototype.toJSON=function(){return this.elements}
/*!
 * lunr.stemmer
 * Copyright (C) 2019 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */,D.stemmer=(a={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},s={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},l="[aeiouy]",c="[^aeiou][^aeiouy]*",u=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),d=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),p=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),f=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,v=/^(.+?)(ed|ing)$/,b=/.$/,y=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+c+l+"[^aeiouwxy]$"),A=/^(.+?[^aeiou])y$/,_=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,S=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,T=/^(.+?)(s|t)(ion)$/,C=/^(.+?)e$/,k=/ll$/,L=new RegExp("^"+c+l+"[^aeiouwxy]$"),I=function(e){var t,n,i,o,r,l,c;if(e.length<3)return e;if("y"==(i=e.substr(0,1))&&(e=i.toUpperCase()+e.substr(1)),r=g,(o=f).test(e)?e=e.replace(o,"$1$2"):r.test(e)&&(e=e.replace(r,"$1$2")),r=v,(o=m).test(e)){var I=o.exec(e);(o=u).test(I[1])&&(o=b,e=e.replace(o,""))}else r.test(e)&&(t=(I=r.exec(e))[1],(r=h).test(t)&&(l=x,c=w,(r=y).test(e=t)?e+="e":l.test(e)?(o=b,e=e.replace(o,"")):c.test(e)&&(e+="e")));return(o=A).test(e)&&(e=(t=(I=o.exec(e))[1])+"i"),(o=_).test(e)&&(t=(I=o.exec(e))[1],n=I[2],(o=u).test(t)&&(e=t+a[n])),(o=E).test(e)&&(t=(I=o.exec(e))[1],n=I[2],(o=u).test(t)&&(e=t+s[n])),r=T,(o=S).test(e)?(t=(I=o.exec(e))[1],(o=d).test(t)&&(e=t)):r.test(e)&&(t=(I=r.exec(e))[1]+I[2],(r=d).test(t)&&(e=t)),(o=C).test(e)&&(t=(I=o.exec(e))[1],r=p,l=L,((o=d).test(t)||r.test(t)&&!l.test(t))&&(e=t)),r=d,(o=k).test(e)&&r.test(e)&&(o=b,e=e.replace(o,"")),"y"==i&&(e=i.toLowerCase()+e.substr(1)),e},function(e){return e.update(I)}),D.Pipeline.registerFunction(D.stemmer,"stemmer")
/*!
 * lunr.stopWordFilter
 * Copyright (C) 2019 Oliver Nightingale
 */,D.generateStopWordFilter=function(e){var t=e.reduce((function(e,t){return e[t]=t,e}),{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},D.stopWordFilter=D.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),D.Pipeline.registerFunction(D.stopWordFilter,"stopWordFilter")
/*!
 * lunr.trimmer
 * Copyright (C) 2019 Oliver Nightingale
 */,D.trimmer=function(e){return e.update((function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")}))},D.Pipeline.registerFunction(D.trimmer,"trimmer")
/*!
 * lunr.TokenSet
 * Copyright (C) 2019 Oliver Nightingale
 */,D.TokenSet=function(){this.final=!1,this.edges={},this.id=D.TokenSet._nextId,D.TokenSet._nextId+=1},D.TokenSet._nextId=1,D.TokenSet.fromArray=function(e){for(var t=new D.TokenSet.Builder,n=0,i=e.length;n<i;n++)t.insert(e[n]);return t.finish(),t.root},D.TokenSet.fromClause=function(e){return"editDistance"in e?D.TokenSet.fromFuzzyString(e.term,e.editDistance):D.TokenSet.fromString(e.term)},D.TokenSet.fromFuzzyString=function(e,t){for(var n=new D.TokenSet,i=[{node:n,editsRemaining:t,str:e}];i.length;){var o=i.pop();if(o.str.length>0){var r,a=o.str.charAt(0);a in o.node.edges?r=o.node.edges[a]:(r=new D.TokenSet,o.node.edges[a]=r),1==o.str.length&&(r.final=!0),i.push({node:r,editsRemaining:o.editsRemaining,str:o.str.slice(1)})}if(0!=o.editsRemaining){if("*"in o.node.edges)var s=o.node.edges["*"];else{s=new D.TokenSet;o.node.edges["*"]=s}if(0==o.str.length&&(s.final=!0),i.push({node:s,editsRemaining:o.editsRemaining-1,str:o.str}),o.str.length>1&&i.push({node:o.node,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)}),1==o.str.length&&(o.node.final=!0),o.str.length>=1){if("*"in o.node.edges)var l=o.node.edges["*"];else{l=new D.TokenSet;o.node.edges["*"]=l}1==o.str.length&&(l.final=!0),i.push({node:l,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)})}if(o.str.length>1){var c,u=o.str.charAt(0),d=o.str.charAt(1);d in o.node.edges?c=o.node.edges[d]:(c=new D.TokenSet,o.node.edges[d]=c),1==o.str.length&&(c.final=!0),i.push({node:c,editsRemaining:o.editsRemaining-1,str:u+o.str.slice(2)})}}}return n},D.TokenSet.fromString=function(e){for(var t=new D.TokenSet,n=t,i=0,o=e.length;i<o;i++){var r=e[i],a=i==o-1;if("*"==r)t.edges[r]=t,t.final=a;else{var s=new D.TokenSet;s.final=a,t.edges[r]=s,t=s}}return n},D.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var n=t.pop(),i=Object.keys(n.node.edges),o=i.length;n.node.final&&(n.prefix.charAt(0),e.push(n.prefix));for(var r=0;r<o;r++){var a=i[r];t.push({prefix:n.prefix.concat(a),node:n.node.edges[a]})}}return e},D.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),n=t.length,i=0;i<n;i++){var o=t[i];e=e+o+this.edges[o].id}return e},D.TokenSet.prototype.intersect=function(e){for(var t=new D.TokenSet,n=void 0,i=[{qNode:e,output:t,node:this}];i.length;){n=i.pop();for(var o=Object.keys(n.qNode.edges),r=o.length,a=Object.keys(n.node.edges),s=a.length,l=0;l<r;l++)for(var c=o[l],u=0;u<s;u++){var d=a[u];if(d==c||"*"==c){var p=n.node.edges[d],h=n.qNode.edges[c],f=p.final&&h.final,g=void 0;d in n.output.edges?(g=n.output.edges[d]).final=g.final||f:((g=new D.TokenSet).final=f,n.output.edges[d]=g),i.push({qNode:h,output:g,node:p})}}}return t},D.TokenSet.Builder=function(){this.previousWord="",this.root=new D.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},D.TokenSet.Builder.prototype.insert=function(e){var t,n=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var i=0;i<e.length&&i<this.previousWord.length&&e[i]==this.previousWord[i];i++)n++;this.minimize(n),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(i=n;i<e.length;i++){var o=new D.TokenSet,r=e[i];t.edges[r]=o,this.uncheckedNodes.push({parent:t,char:r,child:o}),t=o}t.final=!0,this.previousWord=e},D.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},D.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var n=this.uncheckedNodes[t],i=n.child.toString();i in this.minimizedNodes?n.parent.edges[n.char]=this.minimizedNodes[i]:(n.child._str=i,this.minimizedNodes[i]=n.child),this.uncheckedNodes.pop()}}
/*!
 * lunr.Index
 * Copyright (C) 2019 Oliver Nightingale
 */,D.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},D.Index.prototype.search=function(e){return this.query((function(t){new D.QueryParser(e,t).parse()}))},D.Index.prototype.query=function(e){for(var t=new D.Query(this.fields),n=Object.create(null),i=Object.create(null),o=Object.create(null),r=Object.create(null),a=Object.create(null),s=0;s<this.fields.length;s++)i[this.fields[s]]=new D.Vector;e.call(t,t);for(s=0;s<t.clauses.length;s++){var l=t.clauses[s],c=null,u=D.Set.complete;c=l.usePipeline?this.pipeline.runString(l.term,{fields:l.fields}):[l.term];for(var d=0;d<c.length;d++){var p=c[d];l.term=p;var h=D.TokenSet.fromClause(l),f=this.tokenSet.intersect(h).toArray();if(0===f.length&&l.presence===D.Query.presence.REQUIRED){for(var g=0;g<l.fields.length;g++){r[P=l.fields[g]]=D.Set.empty}break}for(var m=0;m<f.length;m++){var v=f[m],b=this.invertedIndex[v],y=b._index;for(g=0;g<l.fields.length;g++){var x=b[P=l.fields[g]],w=Object.keys(x),A=v+"/"+P,_=new D.Set(w);if(l.presence==D.Query.presence.REQUIRED&&(u=u.union(_),void 0===r[P]&&(r[P]=D.Set.complete)),l.presence!=D.Query.presence.PROHIBITED){if(i[P].upsert(y,l.boost,(function(e,t){return e+t})),!o[A]){for(var E=0;E<w.length;E++){var S,T=w[E],C=new D.FieldRef(T,P),k=x[T];void 0===(S=n[C])?n[C]=new D.MatchData(v,P,k):S.add(v,P,k)}o[A]=!0}}else void 0===a[P]&&(a[P]=D.Set.empty),a[P]=a[P].union(_)}}}if(l.presence===D.Query.presence.REQUIRED)for(g=0;g<l.fields.length;g++){r[P=l.fields[g]]=r[P].intersect(u)}}var L=D.Set.complete,I=D.Set.empty;for(s=0;s<this.fields.length;s++){var P;r[P=this.fields[s]]&&(L=L.intersect(r[P])),a[P]&&(I=I.union(a[P]))}var O=Object.keys(n),M=[],N=Object.create(null);if(t.isNegated()){O=Object.keys(this.fieldVectors);for(s=0;s<O.length;s++){C=O[s];var R=D.FieldRef.fromString(C);n[C]=new D.MatchData}}for(s=0;s<O.length;s++){var B=(R=D.FieldRef.fromString(O[s])).docRef;if(L.contains(B)&&!I.contains(B)){var z,$=this.fieldVectors[R],H=i[R.fieldName].similarity($);if(void 0!==(z=N[B]))z.score+=H,z.matchData.combine(n[R]);else{var V={ref:B,score:H,matchData:n[R]};N[B]=V,M.push(V)}}}return M.sort((function(e,t){return t.score-e.score}))},D.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map((function(e){return[e,this.invertedIndex[e]]}),this),t=Object.keys(this.fieldVectors).map((function(e){return[e,this.fieldVectors[e].toJSON()]}),this);return{version:D.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},D.Index.load=function(e){var t={},n={},i=e.fieldVectors,o=Object.create(null),r=e.invertedIndex,a=new D.TokenSet.Builder,s=D.Pipeline.load(e.pipeline);e.version!=D.version&&D.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+D.version+"' does not match serialized index '"+e.version+"'");for(var l=0;l<i.length;l++){var c=(d=i[l])[0],u=d[1];n[c]=new D.Vector(u)}for(l=0;l<r.length;l++){var d,p=(d=r[l])[0],h=d[1];a.insert(p),o[p]=h}return a.finish(),t.fields=e.fields,t.fieldVectors=n,t.invertedIndex=o,t.tokenSet=a.root,t.pipeline=s,new D.Index(t)}
/*!
 * lunr.Builder
 * Copyright (C) 2019 Oliver Nightingale
 */,D.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=D.tokenizer,this.pipeline=new D.Pipeline,this.searchPipeline=new D.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},D.Builder.prototype.ref=function(e){this._ref=e},D.Builder.prototype.field=function(e,t){if(/\//.test(e))throw new RangeError("Field '"+e+"' contains illegal character '/'");this._fields[e]=t||{}},D.Builder.prototype.b=function(e){this._b=e<0?0:e>1?1:e},D.Builder.prototype.k1=function(e){this._k1=e},D.Builder.prototype.add=function(e,t){var n=e[this._ref],i=Object.keys(this._fields);this._documents[n]=t||{},this.documentCount+=1;for(var o=0;o<i.length;o++){var r=i[o],a=this._fields[r].extractor,s=a?a(e):e[r],l=this.tokenizer(s,{fields:[r]}),c=this.pipeline.run(l),u=new D.FieldRef(n,r),d=Object.create(null);this.fieldTermFrequencies[u]=d,this.fieldLengths[u]=0,this.fieldLengths[u]+=c.length;for(var p=0;p<c.length;p++){var h=c[p];if(null==d[h]&&(d[h]=0),d[h]+=1,null==this.invertedIndex[h]){var f=Object.create(null);f._index=this.termIndex,this.termIndex+=1;for(var g=0;g<i.length;g++)f[i[g]]=Object.create(null);this.invertedIndex[h]=f}null==this.invertedIndex[h][r][n]&&(this.invertedIndex[h][r][n]=Object.create(null));for(var m=0;m<this.metadataWhitelist.length;m++){var v=this.metadataWhitelist[m],b=h.metadata[v];null==this.invertedIndex[h][r][n][v]&&(this.invertedIndex[h][r][n][v]=[]),this.invertedIndex[h][r][n][v].push(b)}}}},D.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,n={},i={},o=0;o<t;o++){var r=D.FieldRef.fromString(e[o]),a=r.fieldName;i[a]||(i[a]=0),i[a]+=1,n[a]||(n[a]=0),n[a]+=this.fieldLengths[r]}var s=Object.keys(this._fields);for(o=0;o<s.length;o++){var l=s[o];n[l]=n[l]/i[l]}this.averageFieldLength=n},D.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),n=t.length,i=Object.create(null),o=0;o<n;o++){for(var r=D.FieldRef.fromString(t[o]),a=r.fieldName,s=this.fieldLengths[r],l=new D.Vector,c=this.fieldTermFrequencies[r],u=Object.keys(c),d=u.length,p=this._fields[a].boost||1,h=this._documents[r.docRef].boost||1,f=0;f<d;f++){var g,m,v,b=u[f],y=c[b],x=this.invertedIndex[b]._index;void 0===i[b]?(g=D.idf(this.invertedIndex[b],this.documentCount),i[b]=g):g=i[b],m=g*((this._k1+1)*y)/(this._k1*(1-this._b+this._b*(s/this.averageFieldLength[a]))+y),m*=p,m*=h,v=Math.round(1e3*m)/1e3,l.insert(x,v)}e[r]=l}this.fieldVectors=e},D.Builder.prototype.createTokenSet=function(){this.tokenSet=D.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},D.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new D.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},D.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},D.MatchData=function(e,t,n){for(var i=Object.create(null),o=Object.keys(n||{}),r=0;r<o.length;r++){var a=o[r];i[a]=n[a].slice()}this.metadata=Object.create(null),void 0!==e&&(this.metadata[e]=Object.create(null),this.metadata[e][t]=i)},D.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),n=0;n<t.length;n++){var i=t[n],o=Object.keys(e.metadata[i]);null==this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var r=0;r<o.length;r++){var a=o[r],s=Object.keys(e.metadata[i][a]);null==this.metadata[i][a]&&(this.metadata[i][a]=Object.create(null));for(var l=0;l<s.length;l++){var c=s[l];null==this.metadata[i][a][c]?this.metadata[i][a][c]=e.metadata[i][a][c]:this.metadata[i][a][c]=this.metadata[i][a][c].concat(e.metadata[i][a][c])}}}},D.MatchData.prototype.add=function(e,t,n){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=n);if(t in this.metadata[e])for(var i=Object.keys(n),o=0;o<i.length;o++){var r=i[o];r in this.metadata[e][t]?this.metadata[e][t][r]=this.metadata[e][t][r].concat(n[r]):this.metadata[e][t][r]=n[r]}else this.metadata[e][t]=n},D.Query=function(e){this.clauses=[],this.allFields=e},D.Query.wildcard=new String("*"),D.Query.wildcard.NONE=0,D.Query.wildcard.LEADING=1,D.Query.wildcard.TRAILING=2,D.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},D.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=D.Query.wildcard.NONE),e.wildcard&D.Query.wildcard.LEADING&&e.term.charAt(0)!=D.Query.wildcard&&(e.term="*"+e.term),e.wildcard&D.Query.wildcard.TRAILING&&e.term.slice(-1)!=D.Query.wildcard&&(e.term=e.term+"*"),"presence"in e||(e.presence=D.Query.presence.OPTIONAL),this.clauses.push(e),this},D.Query.prototype.isNegated=function(){for(var e=0;e<this.clauses.length;e++)if(this.clauses[e].presence!=D.Query.presence.PROHIBITED)return!1;return!0},D.Query.prototype.term=function(e,t){if(Array.isArray(e))return e.forEach((function(e){this.term(e,D.utils.clone(t))}),this),this;var n=t||{};return n.term=e.toString(),this.clause(n),this},D.QueryParseError=function(e,t,n){this.name="QueryParseError",this.message=e,this.start=t,this.end=n},D.QueryParseError.prototype=new Error,D.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},D.QueryLexer.prototype.run=function(){for(var e=D.QueryLexer.lexText;e;)e=e(this)},D.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,n=this.pos,i=0;i<this.escapeCharPositions.length;i++)n=this.escapeCharPositions[i],e.push(this.str.slice(t,n)),t=n+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},D.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},D.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},D.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return D.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},D.QueryLexer.prototype.width=function(){return this.pos-this.start},D.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},D.QueryLexer.prototype.backup=function(){this.pos-=1},D.QueryLexer.prototype.acceptDigitRun=function(){var e,t;do{t=(e=this.next()).charCodeAt(0)}while(t>47&&t<58);e!=D.QueryLexer.EOS&&this.backup()},D.QueryLexer.prototype.more=function(){return this.pos<this.length},D.QueryLexer.EOS="EOS",D.QueryLexer.FIELD="FIELD",D.QueryLexer.TERM="TERM",D.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",D.QueryLexer.BOOST="BOOST",D.QueryLexer.PRESENCE="PRESENCE",D.QueryLexer.lexField=function(e){return e.backup(),e.emit(D.QueryLexer.FIELD),e.ignore(),D.QueryLexer.lexText},D.QueryLexer.lexTerm=function(e){if(e.width()>1&&(e.backup(),e.emit(D.QueryLexer.TERM)),e.ignore(),e.more())return D.QueryLexer.lexText},D.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(D.QueryLexer.EDIT_DISTANCE),D.QueryLexer.lexText},D.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(D.QueryLexer.BOOST),D.QueryLexer.lexText},D.QueryLexer.lexEOS=function(e){e.width()>0&&e.emit(D.QueryLexer.TERM)},D.QueryLexer.termSeparator=D.tokenizer.separator,D.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==D.QueryLexer.EOS)return D.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return D.QueryLexer.lexField;if("~"==t)return e.backup(),e.width()>0&&e.emit(D.QueryLexer.TERM),D.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),e.width()>0&&e.emit(D.QueryLexer.TERM),D.QueryLexer.lexBoost;if("+"==t&&1===e.width())return e.emit(D.QueryLexer.PRESENCE),D.QueryLexer.lexText;if("-"==t&&1===e.width())return e.emit(D.QueryLexer.PRESENCE),D.QueryLexer.lexText;if(t.match(D.QueryLexer.termSeparator))return D.QueryLexer.lexTerm}else e.escapeCharacter()}},D.QueryParser=function(e,t){this.lexer=new D.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},D.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=D.QueryParser.parseClause;e;)e=e(this);return this.query},D.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},D.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},D.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},D.QueryParser.parseClause=function(e){var t=e.peekLexeme();if(null!=t)switch(t.type){case D.QueryLexer.PRESENCE:return D.QueryParser.parsePresence;case D.QueryLexer.FIELD:return D.QueryParser.parseField;case D.QueryLexer.TERM:return D.QueryParser.parseTerm;default:var n="expected either a field or a term, found "+t.type;throw t.str.length>=1&&(n+=" with value '"+t.str+"'"),new D.QueryParseError(n,t.start,t.end)}},D.QueryParser.parsePresence=function(e){var t=e.consumeLexeme();if(null!=t){switch(t.str){case"-":e.currentClause.presence=D.Query.presence.PROHIBITED;break;case"+":e.currentClause.presence=D.Query.presence.REQUIRED;break;default:var n="unrecognised presence operator'"+t.str+"'";throw new D.QueryParseError(n,t.start,t.end)}var i=e.peekLexeme();if(null==i){n="expecting term or field, found nothing";throw new D.QueryParseError(n,t.start,t.end)}switch(i.type){case D.QueryLexer.FIELD:return D.QueryParser.parseField;case D.QueryLexer.TERM:return D.QueryParser.parseTerm;default:n="expecting term or field, found '"+i.type+"'";throw new D.QueryParseError(n,i.start,i.end)}}},D.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(null!=t){if(-1==e.query.allFields.indexOf(t.str)){var n=e.query.allFields.map((function(e){return"'"+e+"'"})).join(", "),i="unrecognised field '"+t.str+"', possible fields: "+n;throw new D.QueryParseError(i,t.start,t.end)}e.currentClause.fields=[t.str];var o=e.peekLexeme();if(null==o){i="expecting term, found nothing";throw new D.QueryParseError(i,t.start,t.end)}switch(o.type){case D.QueryLexer.TERM:return D.QueryParser.parseTerm;default:i="expecting term, found '"+o.type+"'";throw new D.QueryParseError(i,o.start,o.end)}}},D.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(null!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var n=e.peekLexeme();if(null!=n)switch(n.type){case D.QueryLexer.TERM:return e.nextClause(),D.QueryParser.parseTerm;case D.QueryLexer.FIELD:return e.nextClause(),D.QueryParser.parseField;case D.QueryLexer.EDIT_DISTANCE:return D.QueryParser.parseEditDistance;case D.QueryLexer.BOOST:return D.QueryParser.parseBoost;case D.QueryLexer.PRESENCE:return e.nextClause(),D.QueryParser.parsePresence;default:var i="Unexpected lexeme type '"+n.type+"'";throw new D.QueryParseError(i,n.start,n.end)}else e.nextClause()}},D.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(null!=t){var n=parseInt(t.str,10);if(isNaN(n)){var i="edit distance must be numeric";throw new D.QueryParseError(i,t.start,t.end)}e.currentClause.editDistance=n;var o=e.peekLexeme();if(null!=o)switch(o.type){case D.QueryLexer.TERM:return e.nextClause(),D.QueryParser.parseTerm;case D.QueryLexer.FIELD:return e.nextClause(),D.QueryParser.parseField;case D.QueryLexer.EDIT_DISTANCE:return D.QueryParser.parseEditDistance;case D.QueryLexer.BOOST:return D.QueryParser.parseBoost;case D.QueryLexer.PRESENCE:return e.nextClause(),D.QueryParser.parsePresence;default:i="Unexpected lexeme type '"+o.type+"'";throw new D.QueryParseError(i,o.start,o.end)}else e.nextClause()}},D.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(null!=t){var n=parseInt(t.str,10);if(isNaN(n)){var i="boost must be numeric";throw new D.QueryParseError(i,t.start,t.end)}e.currentClause.boost=n;var o=e.peekLexeme();if(null!=o)switch(o.type){case D.QueryLexer.TERM:return e.nextClause(),D.QueryParser.parseTerm;case D.QueryLexer.FIELD:return e.nextClause(),D.QueryParser.parseField;case D.QueryLexer.EDIT_DISTANCE:return D.QueryParser.parseEditDistance;case D.QueryLexer.BOOST:return D.QueryParser.parseBoost;case D.QueryLexer.PRESENCE:return e.nextClause(),D.QueryParser.parsePresence;default:i="Unexpected lexeme type '"+o.type+"'";throw new D.QueryParseError(i,o.start,o.end)}else e.nextClause()}},void 0===(o="function"==typeof(i=function(){return D})?i.call(t,n,t,e):i)||(e.exports=o)}()},function(e,t,n){e.exports=n(38)},function(e,t,n){"use strict";n(39),n(24),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(65),n(66),n(67),n(68),n(69),n(70),n(75),n(76),n(80),n(81),n(82),n(148),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(205),n(206),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(229),n(230),n(231),n(232),n(233),n(235),n(236),n(237),n(239),n(240),n(241),n(242),n(243),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(254),n(255),n(257),n(258),n(259),n(260),n(261),n(262),n(264),n(266),n(267),n(268),n(269),n(270),n(272),n(273),n(274),n(275),n(277),n(278),n(279),n(280),n(282),n(283),n(284),n(285),n(287),n(288),n(289),n(290),n(291),n(293),n(294),n(295),n(296),n(297),n(299),n(301),n(302),n(303),n(305),n(306),n(307),n(308),n(309),n(311),n(312),n(313),n(314),n(315),n(317),n(318),n(319),n(320),n(321),n(323),n(324),n(325),n(326),n(328),n(329),n(330),n(331),n(333),n(334),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(349),n(350),n(351),n(353),n(354),n(355),n(356),n(357),n(359),n(361),n(363),n(364),n(365),n(366),n(368),n(369),n(370),n(371),n(372),n(373),n(375),n(376),n(377),n(378),n(379),angular.module("evtviewer",["ngAnimate","ngCookies","ngMessages","ngResource","ngSanitize","ngTouch","ngRoute","rzModule","xml","prettyXml","infinite-scroll","pascalprecht.translate","oc.lazyLoad","evtviewer.core","evtviewer.communication","evtviewer.translation","evtviewer.dataHandler","evtviewer.interface","evtviewer.box","evtviewer.select","evtviewer.buttonSwitch","evtviewer.popover","evtviewer.namedEntity","evtviewer.criticalApparatusEntry","evtviewer.reading","evtviewer.dialog","evtviewer.bibliography","evtviewer.reference","evtviewer.list","evtviewer.quote","evtviewer.tabsContainer","evtviewer.sourcesApparatusEntry","evtviewer.analogue","evtviewer.analoguesApparatusEntry","evtviewer.apparatuses","evtviewer.versionReading","evtviewer.versionApparatusEntry","evtviewer.UItools","evtviewer.navBar","evtviewer.visColl","evtviewer.search","evtviewer.imageViewer","evtviewer.toc","nemLogging","ui-leaflet","evtviewer.tdhop"])},function(e,t,n){var i=n(40);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(2)(!1);var i=n(13),o=i(n(41)),r=i(n(42)),a=i(n(43)),s=i(n(22)),l=i(n(22)+"#iefix"),c=i(n(44)),u=i(n(45)),d=i(n(46)+"#evt"),p=i(n(23)),h=i(n(23)+"#iefix"),f=i(n(47)),g=i(n(48)),m=i(n(49)+"#evt"),v=i(n(50)),b=i(n(51)),y=i(n(52));t.push([e.i,"@font-face{font-family:'Junicode';src:url("+o+") format(\"woff\");font-weight:normal;font-style:normal}@font-face{font-family:'Junicode-bold';src:url("+r+") format(\"woff\");font-weight:bold;font-style:normal}@font-face{font-family:'Junicode-italic';src:url("+a+") format(\"woff\");font-weight:normal;font-style:italic}@font-face{font-family:'evt';src:url("+s+");src:url("+l+') format("embedded-opentype"),url('+c+') format("truetype"),url('+u+') format("woff"),url('+d+") format(\"svg\");font-weight:normal;font-style:normal}@font-face{font-family:'evtbis-icons';src:url("+p+");src:url("+h+') format("embedded-opentype"),url('+f+') format("truetype"),url('+g+') format("woff"),url('+m+') format("svg");font-weight:normal;font-style:normal}[class^="icon-"],[class*=" icon-"]{font-family:"evt" !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[class^="iconbis-"],[class*=" iconbis-"]{font-family:"evtbis-icons" !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-evt_3dhop:before{content:"\\e800"}.icon-evt_add:before{content:"\\e900"}.icon-evt_advanced-search:before{content:"\\f013"}.icon-evt_align:before{content:"\\e937"}.icon-evt_book:before{content:"\\e901"}.icon-evt_bookmark-alt:before{content:"\\e902"}.icon-evt_bookmark-alt2:before{content:"\\e938"}.icon-evt_bookmark:before{content:"\\e903"}.icon-evt_bookreader-alt:before{content:"\\e939"}.icon-evt_bookreader:before{content:"\\e904"}.icon-evt_books:before{content:"\\e905"}.icon-evt_case-sensitive:before{content:"\\e93f"}.icon-evt_close:before{content:"\\e8f6"}.icon-evt_code:before{content:"\\e907"}.icon-evt_collation:before{content:"\\e908"}.icon-evt_color-legend:before{content:"\\e909"}.icon-evt_color-lens:before{content:"\\e90a"}.icon-evt_colors-fill:before{content:"\\e90b"}.icon-evt_copyright:before{content:"\\e90c"}.icon-evt_drop-down:before{content:"\\e90d"}.icon-evt_drop-up:before{content:"\\e90e"}.icon-evt_exact-match:before{content:"\\e940"}.icon-evt_filter:before{content:"\\e90f"}.icon-evt_find-in-page:before{content:"\\e910"}.icon-evt_font-size-minus-alt:before{content:"\\e93a"}.icon-evt_font-size-minus:before{content:"\\e914"}.icon-evt_font-size-plus-alt:before{content:"\\e915"}.icon-evt_font-size-plus:before{content:"\\e916"}.icon-evt_font-size-reset-alt:before{content:"\\e93b"}.icon-evt_font-size-reset:before{content:"\\e917"}.icon-evt_font-size:before{content:"\\e93d"}.icon-evt_fragment:before{content:"\\e918"}.icon-evt_heatmap-alt:before{content:"\\e919"}.icon-evt_heatmap:before{content:"\\e91a"}.icon-evt_help-alt:before{content:"\\e91b"}.icon-evt_help:before{content:"\\e91c"}.icon-evt_hotspot:before{content:"\\e91d"}.icon-evt_imgtxt:before{content:"\\e91e"}.icon-evt_info-alt-r:before{content:"\\e91f"}.icon-evt_info-alt-sq:before{content:"\\e920"}.icon-evt_info-alt:before{content:"\\e921"}.icon-evt_info:before{content:"\\e922"}.icon-evt_keyboard:before{content:"\\f11c"}.icon-evt_link:before{content:"\\e923"}.icon-evt_list-alt:before{content:"\\e924"}.icon-evt_list:before{content:"\\e925"}.icon-evt_mail:before{content:"\\e926"}.icon-evt_menu:before{content:"\\e927"}.icon-evt_more-horiz:before{content:"\\e928"}.icon-evt_more-vert:before{content:"\\e929"}.icon-evt_next:before{content:"\\f105"}.icon-evt_note:before{content:"\\e92a"}.icon-evt_paragraph:before{content:"\\e92b"}.icon-evt_pin-alt-on:before{content:"\\e92c"}.icon-evt_pin-off:before{content:"\\e92d"}.icon-evt_pin-on:before{content:"\\e92e"}.icon-evt_previous:before{content:"\\f104"}.icon-evt_search-results-close:before{content:"\\f103"}.icon-evt_search-results-open:before{content:"\\f102"}.icon-evt_search:before{content:"\\e92f"}.icon-evt_thumbnails:before{content:"\\e93e"}.icon-evt_txt:before{content:"\\e930"}.icon-evt_txttxt:before{content:"\\e931"}.icon-evt_viscoll:before{content:"\\e801"}.icon-evt_zoom-fit:before{content:"\\e932"}.icon-evt_zoom-in:before{content:"\\e935"}.icon-evt_zoom-out:before{content:"\\e934"}.icon-evt_zoom-reset:before{content:"\\e933"}.icon-evt_zoom-reset1:before{content:"\\e93c"}.icon-evt_zoom:before{content:"\\e936"}.iconbis-evt_srctxt:before{content:"\\e945"}.iconbis-evt_versions:before{content:"\\e944"}.iconbis-evt_quote-left:before{content:"\\e943"}.iconbis-evt_quote-right:before{content:"\\e941"}.iconbis-evt_fork:before{content:"\\e942"}.iconbis-evt_analogue:before{content:"\\e93f"}.iconbis-evt_schema:before{content:"\\e93f"}.fa-rotate-45{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}body{max-width:100%;margin-left:auto;margin-right:auto;background-image:linear-gradient(to right, rgba(102,102,255,0.25),rgba(179,179,255,0.25));background-size:5.55556%;background-origin:content-box;background-clip:content-box;background-position:left top;font-family:Junicode, Times, serif;background:#f0f0f0;margin:0;padding:0;min-height:600px;overflow:hidden;position:absolute;font-size:30px;height:100%;width:100%;min-width:800px}body:after{content:" ";display:block;clear:both}body>header,body>footer,body>section{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;float:left;padding-left:.07282%;padding-right:.07282%}body>header,body>footer{height:54px;padding:10px;color:#ECEFF1;background:#263238}body>header .logo{height:34px;float:left;margin-right:1rem}body>header .webSiteLink{color:#f5f5f5;font-size:1.2rem;margin-left:0.4rem;opacity:.7;opacity:0.7}body>header .webSiteLink:hover{opacity:1;cursor:pointer}footer{display:none}#global-container-ext{height:100%}#global-container{height:-moz-calc(100% -  56px + 1px);height:-o-calc(100% -  56px + 1px);height:-webkit-calc(100% -  56px + 1px);height:calc(100% -  56px + 1px);padding:1px 0 0;overflow:hidden;width:100%}div#global-container-ext.navbar-opened #global-container{height:-moz-calc(100% -  56px - 45px + 1px);height:-o-calc(100% -  56px - 45px + 1px);height:-webkit-calc(100% -  56px - 45px + 1px);height:calc(100% -  56px - 45px + 1px)}section>div{height:100%;display:block;vertical-align:middle}#left-nav{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:5%;float:left;padding-left:.07282%;padding-right:.07282%;text-align:center}#left-nav span{height:59px;top:50%;position:relative;transform:translateY(-50%);opacity:0.5}#left-nav span:hover{opacity:1;cursor:pointer}#main-container{height:100%;overflow:hidden;padding:0px;font-size:18px;line-height:22px}#main-container>div{white-space:nowrap}#right-nav{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:5%;float:left;padding-left:.07282%;padding-right:.07282%;text-align:center}#right-nav span{height:59px;top:50%;position:relative;transform:translateY(-50%);opacity:0.5}#right-nav span:hover{opacity:1;cursor:pointer}.apparatuses_main{height:100%;overflow-y:hidden}.apparatuses_main .loading{height:100%;z-index:999;background:rgba(0,0,0,0.3)}.apparatuses_main .apparatuses_tabs{height:100%;overflow:hidden}.apparatuses_main .apparatuses_tabs .appLabel{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:33.33333%;float:left;padding-left:.48544%;padding-right:.48544%;cursor:pointer;height:42px;padding:6px;background-color:#7893a1;color:#fff;text-align:center;vertical-align:middle;font-size:18px;border-left:1px solid #fff}.apparatuses_main .apparatuses_tabs .appLabel:hover{background-color:rgba(120,147,161,0.5);color:#263238}.apparatuses_main .apparatuses_tabs .appLabel.selected,.apparatuses_main .apparatuses_tabs .appLabel.selected:hover{color:#263238;background-color:#fff;-moz-box-shadow:inset 0 2px 2px -1px #7d7d7d;-o-box-shadow:inset 0 2px 2px -1px #7d7d7d;-webkit-box-shadow:inset 0 2px 2px -1px #7d7d7d;-khtml-box-shadow:inset 0 2px 2px -1px #7d7d7d;-ms-box-shadow:inset 0 2px 2px -1px #7d7d7d;box-shadow:inset 0 2px 2px -1px #7d7d7d;cursor:default}.apparatuses_main .apparatuses_tabs_header{display:block;width:100%;position:relative;height:42px;background:#7893a1}.apparatuses_main .apparatuses_tabs_body{height:-moz-calc(100% - 42px);height:-o-calc(100% - 42px);height:-webkit-calc(100% - 42px);height:calc(100% - 42px);padding:4%;overflow-y:auto}.apparatuses_main .apparatuses_tabs_fakeTopSpace{display:block;width:calc(100% - 23px);height:4px;position:absolute;top:42px + 2;top:-moz-calc(42px + 2px);top:-o-calc(42px + 2px);top:-webkit-calc(42px + 2px);top:calc(42px + 2px);z-index:1;background:#fff}.selector{height:28px;min-width:80px;margin-right:5px;position:relative;left:0;display:inline-block;background:#ECEFF1;color:#263238;font-size:1em;text-align:left;overflow:visible;-moz-box-shadow:0px 2px 4px rgba(0,0,0,0.4);-o-box-shadow:0px 2px 4px rgba(0,0,0,0.4);-webkit-box-shadow:0px 2px 4px rgba(0,0,0,0.4);-khtml-box-shadow:0px 2px 4px rgba(0,0,0,0.4);-ms-box-shadow:0px 2px 4px rgba(0,0,0,0.4);box-shadow:0px 2px 4px rgba(0,0,0,0.4);-moz-border-radius:2px;-o-border-radius:2px;-webkit-border-radius:2px;-khtml-border-radius:2px;-ms-border-radius:2px;border-radius:2px}.selector .label_selected{position:relative;top:3.5px;margin:0 4px;padding-right:24px}.selector .open_options{height:28px;width:24px;position:absolute;right:0;top:0;opacity:0.5;border-left:1px solid #b0bec5;border-radius:0 2px 2px 0;background:#b0bec5;text-align:center;cursor:pointer}.selector .open_options:hover{opacity:1}.selector .open_options .fa{text-shadow:none !important}.selector .option_container{display:none;height:auto;max-height:170px;min-width:100%;width:auto;position:absolute;left:0;top:30px;overflow-y:auto;background:#ECEFF1;z-index:400;-moz-box-shadow:0 2px 5px rgba(0,0,0,0.4);-o-box-shadow:0 2px 5px rgba(0,0,0,0.4);-webkit-box-shadow:0 2px 5px rgba(0,0,0,0.4);-khtml-box-shadow:0 2px 5px rgba(0,0,0,0.4);-ms-box-shadow:0 2px 5px rgba(0,0,0,0.4);box-shadow:0 2px 5px rgba(0,0,0,0.4)}.selector .option_container.openUp{display:block;visibility:hidden;top:0px;position:relative;float:left;max-height:300px;overflow:auto;-moz-box-shadow:0px 0px 5px rgba(0,0,0,0.4);-o-box-shadow:0px 0px 5px rgba(0,0,0,0.4);-webkit-box-shadow:0px 0px 5px rgba(0,0,0,0.4);-khtml-box-shadow:0px 0px 5px rgba(0,0,0,0.4);-ms-box-shadow:0px 0px 5px rgba(0,0,0,0.4);box-shadow:0px 0px 5px rgba(0,0,0,0.4)}.selector .option_container.expanded{display:block}.selector .option_container.expanded.openUp{display:inline;visibility:visible}.selector .option_container .option{height:100%;width:100%;padding:5px;position:relative;left:0;border-bottom:solid 1px #263238;background:#ECEFF1;color:#263238;display:flex}.selector .option_container .option:hover:not(.groupTitle){cursor:pointer;background:#37474f;color:#ECEFF1}.selector .option_container .option-icon-label{font-size:0.6em;margin:auto 0;position:relative;text-shadow:0px 0px 2px #000;margin-right:6px}.selector .option_container .option.groupTitle{cursor:default;font-size:90%;font-variant:small-caps;font-weight:bold;border-bottom:none;border-top:3px double #000}.selector .option_container .option.doubleBorderTop{border-top:3px double #000}.selector .option_container .option.selected{background:#263238;color:#ECEFF1;cursor:default}.selector .option_container .option.selected:hover{background:#263238;color:#ECEFF1}.selector.smaller{height:18px}.selector.smaller .label_selected{top:0}.selector.smaller .open_options{height:18px}.selector.smaller .open_options .fa{top:-2px;position:relative}.selector.smaller .option_container{top:20px}.selector.smaller .option_container .option{padding:1px 5px}.evt-bibliography__header{position:relative;background:#FFF;margin-top:0;padding:10px;height:45px;max-height:45px;text-align:center}.evt-bibliography__content{height:-moz-calc(calc(100% - 45px));height:-o-calc(calc(100% - 45px));height:-webkit-calc(calc(100% - 45px));height:calc(calc(100% - 45px));width:100%;overflow:auto;position:absolute;padding:10px}.evt-bibliography__content.noSorter{height:100% !important}.evt-bibliography__header>div{display:initial}.biblRef,.evtBiblRef{background-color:initial;-moz-transition-property:background-color;-o-transition-property:background-color;-webkit-transition-property:background-color;-khtml-transition-property:background-color;-ms-transition-property:background-color;transition-property:background-color;-moz-transition-duration:2s;-o-transition-duration:2s;-webkit-transition-duration:2s;-khtml-transition-duration:2s;-ms-transition-duration:2s;transition-duration:2s}.biblRef[highlight=true],.evtBiblRef[highlight=true]{background-color:antiquewhite}.biblRef *{color:#666;font-size:90%}.front .evtBiblRef{text-indent:1rem;margin-bottom:0.5rem}.biblRef:before,.evtBiblRef:before{content:\' \'}.biblRef .titleAnalytic:before,.biblRef .author:before,.biblRef .titleMonogr:before,.biblRef .biblscope .pubPlace:before,.biblRef .date:before,.biblRef .note:before,.biblRef .idno:before,.biblRef .edition:before,.biblRef .accessed:before,.biblRef .url .vol:before,.biblRef .pp:before,.biblRef .editors:before,.biblRef .date:before,.biblRef .publisher:before,.evtBiblRef .titleAnalytic:before,.evtBiblRef .author:before,.evtBiblRef .titleMonogr:before,.evtBiblRef .biblscope .pubPlace:before,.evtBiblRef .date:before,.evtBiblRef .note:before,.evtBiblRef .idno:before,.evtBiblRef .edition:before,.evtBiblRef .accessed:before,.evtBiblRef .url .vol:before,.evtBiblRef .pp:before,.evtBiblRef .editors:before,.evtBiblRef .date:before,.evtBiblRef .publisher:before{content:\' \'}.biblRef>span:last-of-type:after,.evtBiblRef>span:last-of-type:after{content:\'.\' !important}.biblRef>span:last-child:after,.evtBiblRef>span:last-child:after{content:\'.\' !important}.biblRef>span[data-style=mla]:last-of-type:after,.evtBiblRef>span[data-style=mla]:last-of-type:after{content:\'. Print.\' !important}.biblRef .name:before,.biblRef .surname:before,.evtBiblRef .name:before,.evtBiblRef .surname:before{content:\' \'}.biblRef .accessed,.evtBiblRef .accessed{content:\' accessed \'}.biblRef .url:before,.evtBiblRef .url:before{content:\' url: \'}.biblRef .author .name[data-style=chicago]:after,.evtBiblRef .author .name[data-style=chicago]:after{content:\', \'}.biblRef .author .name[data-style=mla]:after,.evtBiblRef .author .name[data-style=mla]:after{content:", "}.biblRef .author>.name[data-style=apa]:after,.evtBiblRef .author>.name[data-style=apa]:after{content:\', \'}.biblRef .author .surname[data-style=chicago]:after,.evtBiblRef .author .surname[data-style=chicago]:after{content:\', \'}.biblRef .author .surname[data-style=mla]:after,.evtBiblRef .author .surname[data-style=mla]:after{content:", "}.biblRef .author>.surname[data-style=apa]:after,.evtBiblRef .author>.surname[data-style=apa]:after{content:\', \'}.biblRef .author[data-style=apa]:not(:first-child):before,.evtBiblRef .author[data-style=apa]:not(:first-child):before{content:\' \'}.biblRef .authors[data-style=chicago]>.author:last-child:before,.evtBiblRef .authors[data-style=chicago]>.author:last-child:before{content:\'and \'}.biblRef .authors[data-style=chicago]>.author:last-child:before span:last-child:after,.evtBiblRef .authors[data-style=chicago]>.author:last-child:before span:last-child:after{content:\'.\'}.biblRef .authors[data-style=chicago]>.author:first-child:before,.evtBiblRef .authors[data-style=chicago]>.author:first-child:before{content:\' \'}.biblRef .authors[data-style=apa]>.author:last-child span:last-child:after,.evtBiblRef .authors[data-style=apa]>.author:last-child span:last-child:after{content:\'\'}.biblRef .authors[data-style=apa]>.author:last-child:before,.evtBiblRef .authors[data-style=apa]>.author:last-child:before{content:\'& \'}.biblRef .authors[data-style=apa]>.author:first-child:before,.evtBiblRef .authors[data-style=apa]>.author:first-child:before{content:\' \'}.biblRef .authors[data-style=mla]>.author:last-child span:last-child:after,.evtBiblRef .authors[data-style=mla]>.author:last-child span:last-child:after{content:\'\'}.biblRef .authors[data-style=mla]>.author:last-child:before,.evtBiblRef .authors[data-style=mla]>.author:last-child:before{content:\'and \'}.biblRef .authors[data-style=mla]>.author:first-child:before,.evtBiblRef .authors[data-style=mla]>.author:first-child:before{content:\' \'}.biblRef .date[data-style=chicago]:after,.evtBiblRef .date[data-style=chicago]:after{content:\'. \'}.biblRef .date[data-style=apa]:before,.evtBiblRef .date[data-style=apa]:before{content:\' (\'}.biblRef .date[data-style=apa]:after,.evtBiblRef .date[data-style=apa]:after{content:\'). \'}.biblRef .date[data-style=mla]:after,.evtBiblRef .date[data-style=mla]:after{content:\'. \'}.biblRef .edition[data-style=apa]:before,.evtBiblRef .edition[data-style=apa]:before{content:" "}.biblRef .edition[data-style=apa]:after,.evtBiblRef .edition[data-style=apa]:after{content:". "}.biblRef .editor[data-style=mla]:after,.evtBiblRef .editor[data-style=mla]:after{content:\'. \'}.biblRef>.editors[data-style=chicago]>.editor[data-style=chicago]:after,.evtBiblRef>.editors[data-style=chicago]>.editor[data-style=chicago]:after{content:\',\'}.biblRef .editors[data-style=chicago]>.editor:first-child:before,.evtBiblRef .editors[data-style=chicago]>.editor:first-child:before{content:\' edited by \'}.biblRef .editors[data-style=chicago]>.editor:last-child:not(:first-child):before,.evtBiblRef .editors[data-style=chicago]>.editor:last-child:not(:first-child):before{content:\' and \'}.biblRef .editors[data-style=chicago]>.editor:last-child:after,.evtBiblRef .editors[data-style=chicago]>.editor:last-child:after{content:\'\'}.biblRef .idno[data-type=DOI]:before,.evtBiblRef .idno[data-type=DOI]:before{content:\' DOI:\'}.biblRef .idno[data-type=ISSN]:before,.evtBiblRef .idno[data-type=ISSN]:before{content:\' ISSN:\'}.biblRef .idno[data-type=ISBN]:before,.evtBiblRef .idno[data-type=ISBN]:before{content:\' ISBN:\'}.biblRef .idno[data-type=URI]:before,.evtBiblRef .idno[data-type=URI]:before{content:\' URI:\'}.biblRef .idno[data-type=VIAF]:before,.evtBiblRef .idno[data-type=VIAF]:before{content:\' VIAF:\'}.biblRef .idno[data-type=ESTC]:before,.evtBiblRef .idno[data-type=ESTC]:before{content:\' ESTC:\'}.biblRef .idno[data-type=OCLC]:before,.evtBiblRef .idno[data-type=OCLC]:before{content:\' OCLC:\'}.biblRef .issue[data-style=chicago]:before,.evtBiblRef .issue[data-style=chicago]:before{content:\' no. \'}.biblRef>.pubPlace[data-style=chicago]:not(:last-child):after,.evtBiblRef>.pubPlace[data-style=chicago]:not(:last-child):after{content:\': \'}.biblRef>.pubPlace[data-style=chicago]:after,.evtBiblRef>.pubPlace[data-style=chicago]:after{content:\'. \'}.biblRef .pubPlace[data-style=apa]:after,.evtBiblRef .pubPlace[data-style=apa]:after{content:":"}.biblRef .pubPlace[data-style=mla]:after,.evtBiblRef .pubPlace[data-style=mla]:after{content:": " !important}.biblRef .pubPlace[data-style=mla]:after,.evtBiblRef .pubPlace[data-style=mla]:after{content:\'. \'}.biblRef .publisher[data-style=apa]:before,.evtBiblRef .publisher[data-style=apa]:before{content:\' \'}.biblRef .publisher[data-style=apa]:after,.evtBiblRef .publisher[data-style=apa]:after{content:\'. \'}.biblRef .publisher[data-style=mla]:after,.evtBiblRef .publisher[data-style=mla]:after{content:\', \'}.biblRef .titleMonogr[data-style=chicago],.biblRef .titleMonogr[data-style=apa],.biblRef .titleMonogr[data-style=mla],.evtBiblRef .titleMonogr[data-style=chicago],.evtBiblRef .titleMonogr[data-style=apa],.evtBiblRef .titleMonogr[data-style=mla]{font-style:italic}.biblRef .titleMonogr[data-style=chicago]:after,.biblRef .titleMonogr[data-style=apa]:after,.biblRef .titleMonogr[data-style=mla]:after,.evtBiblRef .titleMonogr[data-style=chicago]:after,.evtBiblRef .titleMonogr[data-style=apa]:after,.evtBiblRef .titleMonogr[data-style=mla]:after{content:\'.\'}.biblRef .titleAnalytic[data-style=chicago]:before,.evtBiblRef .titleAnalytic[data-style=chicago]:before{content:\' "\'}.biblRef .titleAnalytic[data-style=chicago]:after,.evtBiblRef .titleAnalytic[data-style=chicago]:after{content:\'", \'}.biblRef .titleAnalytic[data-style=chicago]+.titleMonogr[data-style=chicago]:before,.evtBiblRef .titleAnalytic[data-style=chicago]+.titleMonogr[data-style=chicago]:before{font-style:initial;content:\'in \'}.biblRef .titleAnalytic[data-style=apa]:after,.evtBiblRef .titleAnalytic[data-style=apa]:after{content:\'. \'}.biblRef .titleAnalytic[data-style=mla]:after,.evtBiblRef .titleAnalytic[data-style=mla]:after{content:\'. \'}.biblRef .url[data-style=apa]:before,.evtBiblRef .url[data-style=apa]:before{content:\' \'}.biblRef .url[data-style=apa]:after,.evtBiblRef .url[data-style=apa]:after{content:\'. \'}.biblRef .vol[data-style=chicago]:not(:last-child):after,.evtBiblRef .vol[data-style=chicago]:not(:last-child):after{content:\',\'}.biblRef .vol[data-style=apa]:not(:last-child):after,.evtBiblRef .vol[data-style=apa]:not(:last-child):after{content:\',\'}.biblRef[pubblicationtype=m] .edition[data-style=chicago]:after,.evtBiblRef[pubblicationtype=m] .edition[data-style=chicago]:after{content:\'.\'}.biblRef[pubblicationtype=m] .pp[data-style=apa]:before,.evtBiblRef[pubblicationtype=m] .pp[data-style=apa]:before{content:\' (pp. \'}.biblRef[pubblicationtype=m] .pp[data-style=apa]:after,.evtBiblRef[pubblicationtype=m] .pp[data-style=apa]:after{content:\'). \'}.biblRef[pubblicationtype=m]>.publisher[data-style=chicago]:not(:last-child):after,.evtBiblRef[pubblicationtype=m]>.publisher[data-style=chicago]:not(:last-child):after{content:\',\'}.biblRef[pubblicationtype=m]>.publisher[data-style=chicago]:after,.evtBiblRef[pubblicationtype=m]>.publisher[data-style=chicago]:after{content:\'.\'}.biblRef[pubblicationtype=m] .vol[data-style=chicago]:after,.evtBiblRef[pubblicationtype=m] .vol[data-style=chicago]:after{content:\'.\'}.biblRef[pubblicationtype=a] .pp[data-style=apa]:before,.evtBiblRef[pubblicationtype=a] .pp[data-style=apa]:before{content:\'  \'}.biblRef[pubblicationtype=a] .pp[data-style=apa]:after,.evtBiblRef[pubblicationtype=a] .pp[data-style=apa]:after{content:\'  \'}.biblRef[pubblicationtype=am] .pp[data-style=apa]:before,.biblRef[pubblicationtype=ma] .pp[data-style=apa]:before,.evtBiblRef[pubblicationtype=am] .pp[data-style=apa]:before,.evtBiblRef[pubblicationtype=ma] .pp[data-style=apa]:before{content:\' (pp. \'}.biblRef[pubblicationtype=am] .pp[data-style=apa]:after,.biblRef[pubblicationtype=ma] .pp[data-style=apa]:after,.evtBiblRef[pubblicationtype=am] .pp[data-style=apa]:after,.evtBiblRef[pubblicationtype=ma] .pp[data-style=apa]:after{content:\'). \'}.biblRef[pubblicationtype=j] .pp[data-style=apa]:after,.biblRef[pubblicationtype=u] .pp[data-style=apa]:after,.evtBiblRef[pubblicationtype=j] .pp[data-style=apa]:after,.evtBiblRef[pubblicationtype=u] .pp[data-style=apa]:after{content:\'. \'}.biblRef[pubblicationtype=j] .date[data-style=mla]:before,.evtBiblRef[pubblicationtype=j] .date[data-style=mla]:before{content:" ("}.biblRef[pubblicationtype=j] .date:last-of-type:after,.evtBiblRef[pubblicationtype=j] .date:last-of-type:after{content:\'). Print. \' !important}.biblRef[pubblicationtype=j]>.date[data-style=mla]:not(:last-child):after,.evtBiblRef[pubblicationtype=j]>.date[data-style=mla]:not(:last-child):after{content:"): "}.biblRef[pubblicationtype=j] .titleAnalytic[data-style=mla]:before,.evtBiblRef[pubblicationtype=j] .titleAnalytic[data-style=mla]:before{content:\' "\'}.biblRef[pubblicationtype=j] .titleAnalytic[data-style=mla]:after,.evtBiblRef[pubblicationtype=j] .titleAnalytic[data-style=mla]:after{content:\'." \'}.biblRef[pubblicationtype=j] .titleMonogr[data-style=mla]:after,.evtBiblRef[pubblicationtype=j] .titleMonogr[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=j] .pp[data-style=mla]:after,.evtBiblRef[pubblicationtype=j] .pp[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=j] .vol[data-style=mla]:after,.evtBiblRef[pubblicationtype=j] .vol[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=a] .date[data-style=mla]:before,.evtBiblRef[pubblicationtype=a] .date[data-style=mla]:before{content:" ("}.biblRef[pubblicationtype=a] .date[data-style=mla]:last-of-type:after,.evtBiblRef[pubblicationtype=a] .date[data-style=mla]:last-of-type:after{content:\'). Print. \' !important}.biblRef[pubblicationtype=a]>.date[data-style=mla]:not(:last-child):after,.evtBiblRef[pubblicationtype=a]>.date[data-style=mla]:not(:last-child):after{content:"): "}.biblRef[pubblicationtype=a] .pp[data-style=mla]:after,.evtBiblRef[pubblicationtype=a] .pp[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=a] .titleAnalytic[data-style=mla]:before,.evtBiblRef[pubblicationtype=a] .titleAnalytic[data-style=mla]:before{content:\' "\'}.biblRef[pubblicationtype=a] .titleAnalytic[data-style=mla]:after,.evtBiblRef[pubblicationtype=a] .titleAnalytic[data-style=mla]:after{content:\'." \'}.biblRef[pubblicationtype=a] .titleMonogr[data-style=mla]:after,.evtBiblRef[pubblicationtype=a] .titleMonogr[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=a] .vol[data-style=mla]:after,.evtBiblRef[pubblicationtype=a] .vol[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=u] .date[data-style=mla]:before,.evtBiblRef[pubblicationtype=u] .date[data-style=mla]:before{content:" "}.biblRef[pubblicationtype=u] .date[data-style=mla]:last-child:after,.evtBiblRef[pubblicationtype=u] .date[data-style=mla]:last-child:after{content:\'. Print.\' !important}.biblRef[pubblicationtype=u]>.date[data-style=mla]+:not(span.generic):after,.evtBiblRef[pubblicationtype=u]>.date[data-style=mla]+:not(span.generic):after{content:" "}.biblRef[pubblicationtype=u] .pp[data-style=mla]:after,.evtBiblRef[pubblicationtype=u] .pp[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=u] .titleAnalytic[data-style=mla]:before,.evtBiblRef[pubblicationtype=u] .titleAnalytic[data-style=mla]:before{content:\' "\'}.biblRef[pubblicationtype=u] .titleAnalytic[data-style=mla]:after,.evtBiblRef[pubblicationtype=u] .titleAnalytic[data-style=mla]:after{content:\'." \'}.biblRef[pubblicationtype=u] .titleMonogr[data-style=mla]:after,.evtBiblRef[pubblicationtype=u] .titleMonogr[data-style=mla]:after{content:". "}.biblRef[pubblicationtype=u] .vol[data-style=mla]:after,.evtBiblRef[pubblicationtype=u] .vol[data-style=mla]:after{content:". "}.biblRef .unstructuredBibl.emph,.evtBiblRef .unstructuredBibl.emph{font-style:italic}button-switch{margin-right:5px;display:inline-block}button-switch .buttonSwitch{min-height:28px;min-width:30px;width:auto;vertical-align:middle;position:relative;display:inline-flex !important;justify-content:center;align-items:center;overflow:visible;left:0px;font-size:1em;text-align:left;background:#ECEFF1;color:#263238;box-shadow:0px 2px 4px rgba(0,0,0,0.4);border-radius:2px}button-switch .buttonSwitch.only-icon{text-align:center}button-switch .buttonSwitch.only-text{padding-right:10px;text-align:center}button-switch .buttonSwitch:hover{box-shadow:1px 2px 3px rgba(0,0,0,0.4) inset;text-shadow:none !important;cursor:pointer}button-switch .buttonSwitch-active{background:#FFC107;color:#000}button-switch .buttonSwitch-disabled{opacity:.5;cursor:default !important}button-switch .buttonSwitch-disabled:hover{box-shadow:none !important;text-shadow:none !important}button-switch .buttonSwitch-label{margin:0px;margin-left:4px}button-switch .buttonSwitch-icon{position:relative;right:0px;font-size:1.4em}button-switch .buttonSwitch-icon.fa{font-size:1.1em !important;top:0px}button-switch .buttonSwitch-icon.fa.fa-angle-double-down{top:-4px}button-switch .buttonSwitch.iconLeft .buttonSwitch-icon{top:8px}button-switch .buttonSwitch.iconLeft .buttonSwitch-label{margin-left:0;margin-right:4px}button-switch .buttonSwitch-disabled,button-switch[data-disabled="true"] .buttonSwitch{opacity:.5;cursor:not-allowed !important}button-switch .buttonSwitch-disabled:hover,button-switch[data-disabled="true"] .buttonSwitch:hover{box-shadow:none !important;text-shadow:none !important}button-switch.sliders{margin-right:0}button-switch.sliders .buttonSwitch{font-size:0.5em}button-switch.navBar-opener .buttonSwitch,button-switch.navBar-closer .buttonSwitch{position:absolute;right:2px;left:auto;bottom:45px;background:rgba(236,239,241,0.4);z-index:999999;font-size:0.8em;border-bottom-left-radius:0;border-bottom-right-radius:0}button-switch.navBar-opener .buttonSwitch:hover,button-switch.navBar-closer .buttonSwitch:hover{background:#eceff1}button-switch.navBar-opener.inverted-color .buttonSwitch,button-switch.navBar-closer.inverted-color .buttonSwitch{background:rgba(38,50,56,0.4)}button-switch.navBar-opener.inverted-color .buttonSwitch:hover,button-switch.navBar-closer.inverted-color .buttonSwitch:hover{background:#263238}button-switch.navBar-closer .buttonSwitch{bottom:1px}button-switch.inverted-color .buttonSwitch{color:#ECEFF1;background:#263238}button-switch.no-background .buttonSwitch{background:none;box-shadow:none;border-radius:0;width:0px}button-switch.no-background .buttonSwitch-label{font-variant:small-caps;font-size:80%;top:0}button-switch.no-background .buttonSwitch-icon{font-size:1.3em}button-switch.no-background .buttonSwitch-active .icon,button-switch.no-background .buttonSwitch:hover .icon{cursor:pointer}button-switch[data-type=\'removeWit\'],button-switch[data-type*=\'remove\'],button-switch[data-type*=\'close\']{position:absolute;right:6px}button-switch[data-type=\'removeWit\'] .buttonSwitch,button-switch[data-type*=\'remove\'] .buttonSwitch,button-switch[data-type*=\'close\'] .buttonSwitch{border-radius:100px;height:22px;min-height:22px;min-width:22px;width:22px;font-size:0.7em}button-switch[data-type=\'removeWit\'] .buttonSwitch-icon,button-switch[data-type*=\'remove\'] .buttonSwitch-icon,button-switch[data-type*=\'close\'] .buttonSwitch-icon{right:0px;font-weight:bold}button-switch.smaller .buttonSwitch{font-size:90%;top:-2px}.togglePinned_btn{position:absolute;top:54px;z-index:20;left:75%;transform:none !important}.togglePinned_btn.centered{left:75%}.togglePinned_btn.half-centered{left:62.5%}.togglePinned_btn.half-left{left:50%}.togglePinned_btn.left{left:37.5%}.togglePinned_btn .buttonSwitch{transform:translate(-50%, 0px);border-radius:100px;height:40px;width:40px;text-align:center;opacity:1;font-weight:bold;color:#291d1d;background:#FFC107}.togglePinned_btn .buttonSwitch.buttonSwitch-disabled{display:none}.togglePinned_btn .buttonSwitch-label{display:none}.togglePinned_btn .buttonSwitch-icon{margin-left:8px;margin:8px 0;font-size:1.4em}.box{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:50%;float:left;padding-left:.08091%;padding-right:.08091%;height:100%;white-space:normal;position:relative;display:inline-block;color:#000;background:#fff}.box .box-body{border:2px solid #263238}.box .box-menu{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;float:left;padding-left:.16181%;padding-right:.16181%;color:#ECEFF1;background:#263238;height:42px;min-height:42px;font-size:16px;padding:6px;display:block;float:none;color:#ECEFF1;background:#263238}.box .box-menu[data-position=\'top\']{display:inline-flex;align-items:center;border-radius:2px 2px 0 0}.box .box-menu[data-position=\'bottom\']{display:inline-flex;align-items:center;border-radius:0 0 2px 2px}.box .box-body{padding:4% 4%;height:-moz-calc(100% -  84px);height:-o-calc(100% -  84px);height:-webkit-calc(100% -  84px);height:calc(100% -  84px);overflow:auto}.box .box-body.noBottomMenu{height:-moz-calc(100% -  84px + 42px);height:-o-calc(100% -  84px + 42px);height:-webkit-calc(100% -  84px + 42px);height:calc(100% -  84px + 42px)}.box .box-top-box,.box .box-bottom-box{background:#fff;text-align:left;font-size:90%;margin-top:42px;margin-bottom:42px;display:none;position:absolute;z-index:10;padding:20px}.box .box-top-box.open,.box .box-bottom-box.open{display:block}.box .box-top-box:not(#msDesc){background:rgba(236,239,241,0.8);overflow-y:auto;overflow-x:hidden;top:2px;right:3px;left:3px;height:-moz-calc(100% -  84px - 4px);height:-o-calc(100% -  84px - 4px);height:-webkit-calc(100% -  84px - 4px);height:calc(100% -  84px - 4px);width:-moz-calc(calc(100% - $mainContainer-border-width));width:-o-calc(calc(100% - $mainContainer-border-width));width:-webkit-calc(calc(100% - $mainContainer-border-width));width:calc(calc(100% - $mainContainer-border-width))}.box #msDesc{background:rgba(236,239,241,0.8);overflow-y:auto;overflow-x:hidden;top:2px;right:3px;left:3px;width:-moz-calc(calc(100% - $mainContainer-border-width));width:-o-calc(calc(100% - $mainContainer-border-width));width:-webkit-calc(calc(100% - $mainContainer-border-width));width:calc(calc(100% - $mainContainer-border-width));z-index:30}.box .box-bottom-box{bottom:0px;right:2px;left:2px;height:auto;overflow:hidden;border-top:1px solid;-moz-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-o-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-webkit-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-khtml-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-ms-box-shadow:0px 0px 4px rgba(0,0,0,0.5);box-shadow:0px 0px 4px rgba(0,0,0,0.5)}.box .tools-group-box{display:none;position:absolute;z-index:10;height:auto;min-width:calc(100% - 8px);overflow:hidden;padding:5px 10px;margin-top:42px;margin-bottom:42px;bottom:3px;left:4px;border:2px solid #263238;background:#fff;-moz-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-o-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-webkit-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-khtml-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-ms-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);text-align:left;font-size:1.5em}.box .tools-group-box.open{display:block}.box .filters-box{display:none;position:absolute;z-index:10;height:auto;min-width:30%;overflow:hidden;margin-top:42px;margin-bottom:42px;bottom:3px;left:4px;border:2px solid #263238;background:#fff;-moz-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-o-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-webkit-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-khtml-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);-ms-box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);box-shadow:0px 0px 14px -4px rgba(0,0,0,0.5);text-align:left;font-size:90%}.box .filters-box.open{display:block}.box .filters-box .filter-group{border-bottom:3px double #000}.box .filters-box .filter-group:last-child{border-bottom:0}.box .filters-box .filters-section-title{text-transform:uppercase;font-weight:bold;font-size:85%;width:100%;text-align:left;padding:10px;padding-top:5px;padding-bottom:5px;background:#e5e5e5}.box .filters-box .filter-value-outer{padding:3px 10px}.box .filters-box .filter-value{border-radius:2px;background:#E0E0E0;display:inline-block}.box .filters-box .filter-value-label{cursor:pointer;padding:0 8px;display:inline-block;font-variant:small-caps}.box .filters-box .filter-value-label:not(.active){background:#fff !important}.box .filters-box .filter-value-label:not(.active):hover{border-radius:2px;background:rgba(255,255,255,0.5) !important}.box .filters-box .filter-value-label.active{border-radius:2px;-moz-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-o-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-webkit-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-khtml-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-ms-box-shadow:0px 1px 3px rgba(0,0,0,0.3);box-shadow:0px 1px 3px rgba(0,0,0,0.3)}.box .filters-box .filter-value-label.active:not(.filter-any):hover{border-radius:2px;background:rgba(255,255,255,0.2) !important}.box.box-image .box-body{color:#ECEFF1;background:#000;overflow:hidden;text-align:center;padding:0px}.box.box-image .box-body img{height:100%}.box.box-text.span6of18,.box.box-critical_apparatus.span6of18{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:33.33333%;float:left;padding-left:.08091%;padding-right:.08091%}.box.box-witness{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:41.66667%;float:left;padding-left:.12136%;padding-right:.12136%;float:none}.box.box-witness.span6of12{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:50%;float:left;padding-left:.12136%;padding-right:.12136%}.box.box-witness.span9of9{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;float:left;padding-left:.16181%;padding-right:.16181%}.box.box-witness .box-body{border-color:#607d8b;background:#eceff1}.box.box-witness .box-menu{color:#ECEFF1;background:#607d8b}.box.box-witness .filters-box,.box.box-witness .tools-group-box{border-color:#607d8b}.box.box-version{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:41.66667%;float:left;padding-left:.12136%;padding-right:.12136%;float:none}.box.box-version.span6of12{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:50%;float:left;padding-left:.12136%;padding-right:.12136%}.box.box-version.span9of9{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;float:left;padding-left:.16181%;padding-right:.16181%}.box.box-version .box-body{border-color:#607d8b;background:#eceff1}.box.box-version .box-menu{color:#ECEFF1;background:#607d8b}.box.box-version .filters-box,.box.box-version .tools-group-box{border-color:#607d8b}.box.box-text .box-body,.box.box-witness .box-body,.box.box-version .box-body{position:relative;overflow-x:hidden;overflow-y:auto}.box.box-critical_apparatus .box-body{height:100%;overflow-x:auto}.box.box-pinnedBoard{width:25%;left:12.5%}.box.box-source .box-body{overflow-y:auto}.box.box-empty .box-body{height:100%;padding:0.4px;overflow:hidden;border-color:#607d8b}.box.topBoxOpened .box-body{color:transparent !important;text-shadow:0 0 5px #000}.box.topBoxOpened .box-body *{background:transparent !important}.box .loading{position:absolute;top:0;left:0;text-align:center;width:100%}.box .loading i{margin-left:-22.5px}.centered .box{left:25%}.half-centered .box{left:12.5%}.half-left .box{left:0%}.smaller-left .box{left:0%;width:37.5%}.smaller .box{width:37.5%}.pin-centered .box{left:0%}.compareWits_box,.compareVer_box{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:66.66667%;float:left;padding-left:.08091%;padding-right:.08091%;overflow-x:auto;overflow-y:hidden;height:100%;white-space:normal;position:relative;display:inline-block;margin:0}.compareWits_box.span9of18,.compareVer_box.span9of18{width:50%;overflow-x:hidden}.compareWits_box.span18of18,.compareVer_box.span18of18{width:100%}.compareWits_box.span18of18 .box-witness,.compareWits_box.span18of18 .box-version,.compareVer_box.span18of18 .box-witness,.compareVer_box.span18of18 .box-version{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:27.77778%;float:left;padding-left:.08091%;padding-right:.08091%;float:none}.compareWits_box.span18of18 .box-witness.span6of12,.compareWits_box.span18of18 .box-witness.span9of9,.compareWits_box.span18of18 .box-version.span6of12,.compareWits_box.span18of18 .box-version.span9of9,.compareVer_box.span18of18 .box-witness.span6of12,.compareVer_box.span18of18 .box-witness.span9of9,.compareVer_box.span18of18 .box-version.span6of12,.compareVer_box.span18of18 .box-version.span9of9{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:50%;float:left;padding-left:.08091%;padding-right:.08091%}.compareWits_box.span18of18 .box-witness.span6of18,.compareWits_box.span18of18 .box-version.span6of18,.compareVer_box.span18of18 .box-witness.span6of18,.compareVer_box.span18of18 .box-version.span6of18{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:33.33333%;float:left;padding-left:.08091%;padding-right:.08091%}.compareWits_box--buttonAddWit,.compareVer_box--buttonAddVer{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:20}.compareWits_box--buttonAddWit.left75,.compareVer_box--buttonAddVer.left75{left:75%}.compareWits_box--buttonAddWit.floatRight,.compareVer_box--buttonAddVer.floatRight{position:absolute;left:99%;transform:translate(-100%, -50%);top:50%}.compareWits_box--buttonAddWit.floatRight .buttonSwitch,.compareVer_box--buttonAddVer.floatRight .buttonSwitch{border-radius:100px;height:40px;width:40px;text-align:center;opacity:.5;font-weight:bold}.compareWits_box--buttonAddWit.floatRight .buttonSwitch:hover,.compareVer_box--buttonAddVer.floatRight .buttonSwitch:hover{opacity:1}.compareWits_box--buttonAddWit.floatRight .buttonSwitch.buttonSwitch-disabled,.compareVer_box--buttonAddVer.floatRight .buttonSwitch.buttonSwitch-disabled{display:none}.compareWits_box--buttonAddWit.floatRight .buttonSwitch-label,.compareVer_box--buttonAddVer.floatRight .buttonSwitch-label{display:none}.compareWits_box--buttonAddWit.floatRight .buttonSwitch-icon,.compareVer_box--buttonAddVer.floatRight .buttonSwitch-icon{margin-left:8px;margin:8px 0;font-size:2.2em}.box-body.search-opened #mainContentToTranform{padding-bottom:30px}.popover{display:inline}.popover_trigger{color:#263238;opacity:.7;cursor:pointer;font-size:110%;vertical-align:top}.popover_trigger.expanded{opacity:1}.popover_trigger.active:hover{opacity:1;text-shadow:0px 0px 0.3px rgba(0,0,0,0.9)}.popover_trigger.active:hover .popup_tooltip{text-decoration:none}.popover_trigger.blurred{color:transparent !important;text-shadow:0 0 5px #000}.avoidBlur .popover_trigger.blurred{color:#263238 !important;text-shadow:0px 0px 0.3px rgba(0,0,0,0.9)}.popover_tooltip{display:none;margin:0 10px;position:relative;padding:5px;z-index:99;background:#ECEFF1;color:#263238;font-size:90%;text-align:center;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067;border:2.5px solid black;border-radius:3px;cursor:text !important}.popover_tooltip span{background:transparent}.popover_tooltip.expanded{display:block}.popover_tooltip.hidden{opacity:0}.popover_tooltip .popover__tooltip__before{position:absolute;top:0px}.popover_tooltip .popover__tooltip__before::before{position:absolute;font-family:FontAwesome;font-size:2em;color:#ECEFF1;top:-15px;content:"\\f0d8";text-shadow:0px -3px 0px #000;height:0px}.popover_tooltip.open-up .popover__tooltip__before::before{content:"\\f0d7";text-shadow:0px 3px 0px #000}.critical-apparatus-entry{margin:0;margin-bottom:10px;position:relative;z-index:0;background:rgba(0,0,0,0);color:#263238;font-size:95%;border-left:1px solid #7d7d7d;border-right:1px solid #7d7d7d;cursor:text !important}.critical-apparatus-entry span:not(.app_lemma),.critical-apparatus-entry span:not(.app_lemma_content){background:transparent;display:inline;word-wrap:break-word}.critical-apparatus-entry.active{display:block}.critical-apparatus-entry.blurred{border:none;color:transparent !important;text-shadow:0 0 5px #000}.critical-apparatus-entry.hidden{opacity:0;background:transparent !important}.critical-apparatus-entry.over{-webkit-box-shadow:0 10px 10px -10px rgba(125,125,125,0.8);-moz-box-shadow:0 10px 10px -10px rgba(125,125,125,0.8);box-shadow:0 10px 10px -10px rgba(125,125,125,0.8)}.critical-apparatus-entry.selected{background-color:#ECEFF1;border-color:#7d7d7d}.critical-apparatus-entry.selected .critical-apparatus-entry-panels{background-color:#f5f8f8}.critical-apparatus-entry_tools{padding:0;float:right;display:block;position:relative;bottom:6px;right:-2px;background:transparent;text-align:center}.critical-apparatus-entry_tools button-switch{margin-right:0;font-size:70%}.critical-apparatus-entry_tools button-switch .buttonSwitch{box-shadow:none;border:1px solid rgba(0,0,0,0);top:3px;display:inline-block}.critical-apparatus-entry_tools button-switch.active .buttonSwitch,.critical-apparatus-entry_tools button-switch:hover .buttonSwitch{-moz-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-o-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-webkit-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-khtml-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-ms-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);background-color:#f5f8f8;border:1px solid #7d7d7d}.critical-apparatus-entry_main-content{padding:5px;font-size:105%;border-top:1px solid #7d7d7d}.critical-apparatus-entry_main-content_list{display:inline}.critical-apparatus-entry_main-content ul{display:inline;margin:0;padding:0}.critical-apparatus-entry_main-content ul li{display:inline-block;margin-right:5px}.critical-apparatus-entry_main-content ul li:not(:last-child)::after{content:"; "}.critical-apparatus-entry_main-content ul.app_reading_list{list-style-type:initial !important;position:relative;left:1em;margin-top:0.7em;margin-bottom:0.4em;margin-left:0.4em;margin-right:0.4em}.critical-apparatus-entry_main-content ul.app_reading_list li{display:list-item;margin-bottom:0.2em}.critical-apparatus-entry_main-content ul.app_reading_list li:not(:last-child)::after{content:none}.critical-apparatus-entry_main-content ul.app_reading_list li span.witGrp_name{display:inline;font-weight:bold;font-style:italic;font-variant:small-caps}.critical-apparatus-entry_main-content ul.app_reading_list li span.witGrp_content{display:inline}.critical-apparatus-entry_main-content .app_lemma::after{content:"]"}.critical-apparatus-entry_main-content .sub_app .app_lemma_content::after{content:"]"}.critical-apparatus-entry_main-content .sub_app{margin-left:30px;margin-top:5px}.critical-apparatus-entry_main-content .sub_app.firstSubApp{margin-top:15px !important}.critical-apparatus-entry_other-content{border-top:3px double #7d7d7d;border-bottom:1px solid #7d7d7d}.critical-apparatus-entry_other-content p{padding:0 10px}.critical-apparatus-entry_other-content_headers{z-index:2;position:relative}.critical-apparatus-entry_other-content_headers:not(.closed){-moz-box-shadow:0px 9px 5px -4px #f5f8f8;-o-box-shadow:0px 9px 5px -4px #f5f8f8;-webkit-box-shadow:0px 9px 5px -4px #f5f8f8;-khtml-box-shadow:0px 9px 5px -4px #f5f8f8;-ms-box-shadow:0px 9px 5px -4px #f5f8f8;box-shadow:0px 9px 5px -4px #f5f8f8}.critical-apparatus-entry_other-content_headers span{padding:5px;display:inline-block;font-size:95%;cursor:pointer;border-left:1px solid #f5f8f8}.critical-apparatus-entry_other-content_headers span:first-child{border-left:none}.critical-apparatus-entry_other-content_headers span:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.critical-apparatus-entry_other-content_headers span.active{-moz-box-shadow:inset 0 2px 2px -1px #7d7d7d;-o-box-shadow:inset 0 2px 2px -1px #7d7d7d;-webkit-box-shadow:inset 0 2px 2px -1px #7d7d7d;-khtml-box-shadow:inset 0 2px 2px -1px #7d7d7d;-ms-box-shadow:inset 0 2px 2px -1px #7d7d7d;box-shadow:inset 0 2px 2px -1px #7d7d7d;background-color:#f5f8f8;border-right:1px solid #f5f8f8}.critical-apparatus-entry_other-content_headers span.active:not(:first-child){border-left:1px solid #f5f8f8}.critical-apparatus-entry_other-content_headers span.active+span{border-left:none}.critical-apparatus-entry_other-content_panels{overflow-x:hidden;overflow-y:auto;background-color:#f5f8f8}.critical-apparatus-entry_other-content_panels:not(.closed){padding:10px 15px}.critical-apparatus-entry_other-content_panels:not(.fullHeight){max-height:150px}.critical-apparatus-entry_other-content_panel{display:none}.critical-apparatus-entry_other-content_panel.active{display:block;margin-bottom:10px}.critical-apparatus-entry_other-content_panel ul{padding-left:10px;list-style-type:none;margin:5px 0px}.critical-apparatus-entry_other-content_panel .app_lemma em{font-weight:bold}.critical-apparatus-entry_other-content_panel .app_lemma::after{content:""}.critical-apparatus-entry_other-content_panel .app_lemma .witnesses{display:none}.critical-apparatus-entry_other-content_panel .app_reading{font-weight:bold}.critical-apparatus-entry_other-content_panel .app_reading .witnesses{display:none}.critical-apparatus-entry_other-content_panel_orthographic_title{text-align:center;width:100%;font-variant:small-caps;font-size:95%;margin-top:10px;margin-bottom:10px}.critical-apparatus-entry .witnesses{display:inline}.critical-apparatus-entry .witnesses .wit{margin:0 3px;cursor:pointer;text-decoration:underline}.critical-apparatus-entry .witnesses .wit:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.critical-apparatus-entry .witnesses .wit::after{text-decoration:none !important}.critical-apparatus-entry .witnesses .wit.selected{cursor:default;text-shadow:0px 0px 1px rgba(0,0,0,0.7);text-decoration:none}.critical-apparatus-entry .attributes::before{content:" â "}.critical-apparatus-entry .attributes::after{content:""}.critical-apparatus-entry .attributes span{font-style:italic}.critical-apparatus-entry .attributes span::after{content:", "}.critical-apparatus-entry .attributes span:last-child::after{content:""}.critical-apparatus-entry.noTools{border-right:1px solid #7d7d7d}.critical-apparatus-entry.noTools .critical-apparatus-entry_main-content,.critical-apparatus-entry.noTools .critical-apparatus-entry_other-content{width:100%}.in_critical_apparatus .critical-apparatus-entry{cursor:pointer !important;border:0;background:transparent}.in_critical_apparatus .critical-apparatus-entry:hover{background:rgba(0,0,0,0)}.in_critical_apparatus .critical-apparatus-entry:hover>*{background:rgba(0,0,0,0)}.in_critical_apparatus .critical-apparatus-entry_tools{border:0;padding-left:0}.in_critical_apparatus .critical-apparatus-entry_tools button-switch .buttonSwitch{border:1px solid transparent}.in_critical_apparatus .critical-apparatus-entry_main-content{border:0}.in_critical_apparatus .critical-apparatus-entry_other-content{display:none}.in_critical_apparatus.active .critical-apparatus-entry{background:rgba(0,0,0,0)}.blurred .critical-apparatus-entry,.blurred .critical-apparatus-entry *{border:none !important;-moz-box-shadow:none;-o-box-shadow:none;-webkit-box-shadow:none;-khtml-box-shadow:none;-ms-box-shadow:none;box-shadow:none;color:transparent !important;text-shadow:0 0 5px #000 !important;background:transparent !important}.moreInfo-label{font-weight:bold;font-variant:small-caps}.moreInfo-label:after{content:": "}.moreInfo-metadataTitle{border-top:1px solid #999;padding-top:10px;text-align:center;width:100%;font-variant:small-caps;font-size:95%;margin-top:10px;margin-bottom:10px}.app_reading_content{margin-bottom:20px !important}[data-type="pinnedBoard"] .critical-apparatus-entry_tools{position:absolute;top:-3px;right:0;bottom:auto}.apparatus_exponent{margin:0;position:relative;bottom:0.3em;word-spacing:-0.25em;padding:0.05em;font-size:0.8em;color:#263238;text-align:center;vertical-align:center}.criticalEdition .choice .orig{display:none}.criticalEdition .choice .reg:before,.criticalEdition .choice .reg:after{content:" "}sup.iconbis-evt_quote-left{font-size:0.5em;color:#263238;margin:0;padding:0;display:inline}.sources-apparatus-entry{margin:0;margin-bottom:10px;position:static;background:rgba(0,0,0,0);color:#263238;font-size:90%;border-left:1px solid #7d7d7d;border-right:1px solid #7d7d7d;cursor:text !important}.sources-apparatus-entry span{background:transparent}.sources-apparatus-entry.active{display:block}.sources-apparatus-entry.blurred{border:none;color:transparent !important;text-shadow:0 0 5px #000}.sources-apparatus-entry.hidden{opacity:0;background:transparent !important}.sources-apparatus-entry.over{-webkit-box-shadow:4px 4px 5px 0px #7d7d7d;-moz-box-shadow:4px 4px 5px 0px #7d7d7d;box-shadow:4px 4px 5px 0px #7d7d7d}.sources-apparatus-entry:hover:not(.selected){-webkit-box-shadow:4px 4px 5px 0px #7d7d7d;-moz-box-shadow:4px 4px 5px 0px #7d7d7d;box-shadow:4px 4px 5px 0px #7d7d7d}.sources-apparatus-entry.selected{background-color:#ECEFF1}.sources-apparatus-entry_tools{padding:0;float:right;display:block;position:relative;bottom:4px;right:-2px;background:transparent;text-align:center}.sources-apparatus-entry_tools button-switch{margin-right:0;font-size:70%}.sources-apparatus-entry_tools button-switch .buttonSwitch{box-shadow:none;border:1px solid rgba(0,0,0,0)}.sources-apparatus-entry_tools button-switch.active .buttonSwitch,.sources-apparatus-entry_tools button-switch:hover .buttonSwitch{-moz-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-o-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-webkit-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-khtml-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-ms-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);background-color:#f5f8f8;border:1px solid #7d7d7d}.sources-apparatus-entry_main-content{padding:9px;font-size:105%;border-top:1px solid #7d7d7d}.sources-apparatus-entry_main-content_header{display:inline}.sources-apparatus-entry_main-content_header .textNode{margin-right:0.2em}.sources-apparatus-entry_main-content_list{padding:5px;font-size:105%;border-top:1px solid #7d7d7d;padding:0}.sources-apparatus-entry_main-content_list-label{width:100%;font-variant:small-caps;font-size:95%;position:relative;left:1em;padding-top:0.2em;padding-bottom:0;margin-bottom:0;top:10px}.sources-apparatus-entry_main-content_list ul{width:100%;display:block;list-style-type:disc}.sources-apparatus-entry_main-content_list ul.pointer{cursor:pointer}.sources-apparatus-entry_main-content_list ul li.source-id{font-size:105%;display:list-item;font-style:italic}.sources-apparatus-entry_main-content_list ul li.source-id.over{text-shadow:0px 0px 1px rgba(0,0,0,0.7);cursor:pointer}.sources-apparatus-entry_main-content_list ul li.source-id.selected{font-weight:bold;cursor:pointer}.sources-apparatus-entry_main-content_list.srctxt{border-bottom:1px solid #7d7d7d}.sources-apparatus-entry_other-content{border-top:3px double #7d7d7d;border-bottom:1px solid #7d7d7d}.sources-apparatus-entry_other-content p{padding:0 10px}.sources-apparatus-entry_other-content_headers{z-index:2;position:relative}.sources-apparatus-entry_other-content_headers:not(.closed){-moz-box-shadow:0px 9px 5px -4px #f5f8f8;-o-box-shadow:0px 9px 5px -4px #f5f8f8;-webkit-box-shadow:0px 9px 5px -4px #f5f8f8;-khtml-box-shadow:0px 9px 5px -4px #f5f8f8;-ms-box-shadow:0px 9px 5px -4px #f5f8f8;box-shadow:0px 9px 5px -4px #f5f8f8}.sources-apparatus-entry_other-content_headers span{padding:5px;display:inline-block;font-size:90%;cursor:pointer;border-left:1px solid #f5f8f8}.sources-apparatus-entry_other-content_headers span:first-child{border-left:none}.sources-apparatus-entry_other-content_headers span:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.sources-apparatus-entry_other-content_headers span.active{-moz-box-shadow:inset 0 2px 2px -1px #7d7d7d;-o-box-shadow:inset 0 2px 2px -1px #7d7d7d;-webkit-box-shadow:inset 0 2px 2px -1px #7d7d7d;-khtml-box-shadow:inset 0 2px 2px -1px #7d7d7d;-ms-box-shadow:inset 0 2px 2px -1px #7d7d7d;box-shadow:inset 0 2px 2px -1px #7d7d7d;background-color:#f5f8f8;border-right:1px solid #f5f8f8}.sources-apparatus-entry_other-content_headers span.active:not(:first-child){border-left:1px solid #f5f8f8}.sources-apparatus-entry_other-content_headers span.active+span{border-left:none}.sources-apparatus-entry_other-content_panels{max-height:150px;overflow-x:hidden;overflow-y:auto;background-color:#f5f8f8}.sources-apparatus-entry_other-content_panels:not(.closed){padding:10px 15px}.sources-apparatus-entry_other-content_panel{display:none}.sources-apparatus-entry_other-content_panel.active{display:block;margin-bottom:10px}.sources-apparatus-entry_other-content_panel ul{padding-left:10px;list-style-type:none;margin:5px 0px}.sources-apparatus-entry_other-content_panel .textNode{margin-right:0.2em}.sources-apparatus-entry .attributes::before{content:" â "}.sources-apparatus-entry .attributes::after{content:""}.sources-apparatus-entry .attributes span{font-style:italic}.sources-apparatus-entry .attributes span::after{content:", "}.sources-apparatus-entry .attributes span:last-child::after{content:""}.sources-apparatus-entry.noTools{border-right:1px solid #7d7d7d}.sources-apparatus-entry.noTools .sources-apparatus-entry_main-content_header,.sources-apparatus-entry.noTools .sources-apparatus-entry_other-content{width:100%}.in_sources_apparatus .sources-apparatus-entry{cursor:pointer !important;border:0;background:transparent}.in_sources_apparatus .sources-apparatus-entry:hover{background:rgba(0,0,0,0)}.in_sources_apparatus .sources-apparatus-entry:hover>*{background:rgba(0,0,0,0)}.in_sources_apparatus .sources-apparatus-entry_tools{border:0;padding-left:0}.in_sources_apparatus .sources-apparatus-entry_tools button-switch .buttonSwitch{border:1px solid transparent}.in_sources_apparatus .sources-apparatus-entry_main-content{border:0}.in_sources_apparatus .sources-apparatus-entry_other-content{display:none}.in_sources_apparatus.active .sources-apparatus-entry{background:rgba(0,0,0,0)}.blurred .sources-apparatus-entry,.blurred .sources-apparatus-entry *{border:none !important;-moz-box-shadow:none;-o-box-shadow:none;-webkit-box-shadow:none;-khtml-box-shadow:none;-ms-box-shadow:none;box-shadow:none;color:transparent !important;text-shadow:0 0 5px #000 !important;background:transparent !important}sup.iconbis-evt_analogue{font-size:0.8em;color:#263238;margin:0;padding:0;display:inline}.analogues-apparatus-entry{margin:0;margin-bottom:10px;position:relative;z-index:0;background:rgba(0,0,0,0);color:#263238;font-size:90%;border-left:1px solid #7d7d7d;border-right:1px solid #7d7d7d;cursor:text !important}.analogues-apparatus-entry span:not(.app_lemma),.analogues-apparatus-entry span:not(.app_lemma_content){background:transparent}.analogues-apparatus-entry.active{display:block}.analogues-apparatus-entry.blurred{border:none;color:transparent !important;text-shadow:0 0 5px #000}.analogues-apparatus-entry.hidden{opacity:0;background:transparent !important}.analogues-apparatus-entry.over{-webkit-box-shadow:4px 4px 5px 0px #7d7d7d;-moz-box-shadow:4px 4px 5px 0px #7d7d7d;box-shadow:4px 4px 5px 0px #7d7d7d}.analogues-apparatus-entry:hover:not(.selected){-webkit-box-shadow:4px 4px 5px 0px #7d7d7d;-moz-box-shadow:4px 4px 5px 0px #7d7d7d;box-shadow:4px 4px 5px 0px #7d7d7d}.analogues-apparatus-entry.selected{background-color:#ECEFF1}.analogues-apparatus-entry_tools{padding:0;float:right;display:block;position:relative;bottom:4px;right:-2px;background:transparent;text-align:center}.analogues-apparatus-entry_tools button-switch{margin-right:0;font-size:70%}.analogues-apparatus-entry_tools button-switch .buttonSwitch{box-shadow:none;border:1px solid rgba(0,0,0,0)}.analogues-apparatus-entry_tools button-switch.active .buttonSwitch,.analogues-apparatus-entry_tools button-switch:hover .buttonSwitch{-moz-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-o-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-webkit-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-khtml-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-ms-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);background-color:#f5f8f8;border:1px solid #7d7d7d}.analogues-apparatus-entry_main-content{padding:9px;font-size:105%;border-top:1px solid #7d7d7d}.analogues-apparatus-entry_main-content_header{display:inline}.analogues-apparatus-entry_main-content_header .textNode{margin-right:0.2em}.analogues-apparatus-entry_main-content_header span{display:inline;margin-right:0.2em}.analogues-apparatus-entry_main-content_list{border-top:1px solid #7d7d7d;padding:0}.analogues-apparatus-entry_main-content_list-label{width:100%;font-variant:small-caps;font-size:95%;position:relative;left:1em;padding-top:0.2em;padding-bottom:0;margin-bottom:0;top:10px}.analogues-apparatus-entry_main-content_list ul{width:100%;display:block;list-style-type:disc}.analogues-apparatus-entry_main-content_list ul.pointer{cursor:pointer}.analogues-apparatus-entry_main-content_list ul li.source-id{font-size:105%;display:list-item;font-style:italic}.analogues-apparatus-entry_main-content_list ul li.source-id.over{text-shadow:0px 0px 1px rgba(0,0,0,0.7);cursor:pointer}.analogues-apparatus-entry_main-content_list ul li.source-id.selected{font-weight:bold;cursor:pointer}.analogues-apparatus-entry_other-content{border-top:3px double #7d7d7d;border-bottom:1px solid #7d7d7d}.analogues-apparatus-entry_other-content p{padding:0 10px}.analogues-apparatus-entry_other-content_headers{z-index:2;position:relative}.analogues-apparatus-entry_other-content_headers span{padding:5px;display:inline-block;font-size:90%;cursor:pointer;border-left:1px solid #f5f8f8}.analogues-apparatus-entry_other-content_headers span:first-child{border-left:none}.analogues-apparatus-entry_other-content_headers span:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.analogues-apparatus-entry_other-content_headers span.active{-moz-box-shadow:inset 0 2px 2px -1px #7d7d7d;-o-box-shadow:inset 0 2px 2px -1px #7d7d7d;-webkit-box-shadow:inset 0 2px 2px -1px #7d7d7d;-khtml-box-shadow:inset 0 2px 2px -1px #7d7d7d;-ms-box-shadow:inset 0 2px 2px -1px #7d7d7d;box-shadow:inset 0 2px 2px -1px #7d7d7d;background-color:#f5f8f8;border-right:1px solid #f5f8f8}.analogues-apparatus-entry_other-content_headers span.active:not(:first-child){border-left:1px solid #f5f8f8}.analogues-apparatus-entry_other-content_headers span.active+span{border-left:none}.analogues-apparatus-entry_other-content_panels{max-height:150px;overflow-x:hidden;overflow-y:auto;background-color:#f5f8f8}.analogues-apparatus-entry_other-content_panels:not(.closed){padding:10px 15px}.analogues-apparatus-entry_other-content_panel{display:none}.analogues-apparatus-entry_other-content_panel.active{display:block;margin-bottom:10px}.analogues-apparatus-entry_other-content_panel ul{padding-left:10px;list-style-type:none;margin:5px 0px}.analogues-apparatus-entry_other-content_panel .textNode{margin-right:0.2em}.analogues-apparatus-entry .attributes::before{content:" â "}.analogues-apparatus-entry .attributes::after{content:""}.analogues-apparatus-entry .attributes span{font-style:italic}.analogues-apparatus-entry .attributes span::after{content:", "}.analogues-apparatus-entry .attributes span:last-child::after{content:""}.analogues-apparatus-entry.noTools{border-right:1px solid #7d7d7d}.analogues-apparatus-entry.noTools .analogues-apparatus-entry_main-content,.analogues-apparatus-entry.noTools .analogues-apparatus-entry_other-content{width:100%}.in_analogues_apparatus .analogues-apparatus-entry{cursor:pointer !important;border:0;background:transparent}.in_analogues_apparatus .analogues-apparatus-entry:hover{background:rgba(0,0,0,0)}.in_analogues_apparatus .analogues-apparatus-entry:hover>*{background:rgba(0,0,0,0)}.in_analogues_apparatus .analogues-apparatus-entry_tools{border:0;padding-left:0}.in_analogues_apparatus .analogues-apparatus-entry_tools button-switch .buttonSwitch{border:1px solid transparent}.in_analogues_apparatus .analogues-apparatus-entry_main-content{border:0}.in_analogues_apparatus .analogues-apparatus-entry_other-content{display:none}.in_analogues_apparatus.active .analogues-apparatus-entry{background:rgba(0,0,0,0)}.blurred .analogues-apparatus-entry,.blurred .analogues-apparatus-entry *{border:none !important;-moz-box-shadow:none;-o-box-shadow:none;-webkit-box-shadow:none;-khtml-box-shadow:none;-ms-box-shadow:none;box-shadow:none;color:transparent !important;text-shadow:0 0 5px #000 !important;background:transparent !important}evt-reading+evt-reading:not(.autoLemma) .reading:not(.hidden),evt-reading+evt-reading:not(.autoLemma) .reading:not(.invisible){margin-left:2px}.reading .reading__text .w:after{content:" "}.reading .reading__text .w:last-of-type:after{content:""}.reading:not(.hidden){padding:0;cursor:pointer}.reading:not(.hidden) .reading__text{background:#d0dcff}.reading:not(.hidden).over .reading__text,.reading:not(.hidden).over .reading .reading__text,.reading:not(.hidden).over .reading .reading__text,.reading:not(.hidden).over .reading .reading .reading__text{background:#658aff}.reading:not(.hidden) .empty{padding:0 5px}.reading:not(.hidden).blurred .reading_exponent{color:transparent !important;text-shadow:0 0 5px #000 !important}.reading:not(.hidden).expansed:not(.invisible)>.reading__text{border-top:1px solid #7d7d7d;border-bottom:5px solid rgba(0,0,0,0);position:relative;z-index:9;margin-bottom:-1px}.reading:not(.hidden).expansed:not(.invisible)>.reading__text:first-child{border-left:1px solid #7d7d7d}.reading:not(.hidden).expansed:not(.invisible)>.reading__text:last-child{border-right:1px solid #7d7d7d}.reading:not(.hidden).expansed:not(.invisible).blurred,.reading:not(.hidden).expansed:not(.invisible).blurred *{color:transparent !important;text-shadow:0 0 5px #000 !important;background:transparent !important}.reading:not(.hidden).selected .reading__text{background:#658aff}.reading:not(.hidden) .reading_exponent{display:inline-block;position:relative;left:-4px;bottom:3px;min-width:15px;min-height:15px;margin:0;padding:0.05em;border-radius:3px;font-size:0.8em;font-weight:bold;word-spacing:-0.25em;vertical-align:super;text-align:center}.reading.invisible>.reading__text{background:transparent !important;border:none;cursor:default}.reading.invisible>.reading__apparatus{display:none !important}.reading:not(.invisible) .reading:not(.hidden):not(.blurred) .reading__text{border:1px solid #999}.reading:not(.invisible) .reading:not(.hidden):not(.blurred)>.reading__text:hover{border-color:#000}.reading:not(.invisible) .reading:not(.hidden):not(.blurred).expansed>.reading__text{border-bottom:5px solid rgba(0,0,0,0)}.reading:not(.invisible) .reading:not(.hidden):not(.blurred).selected .reading__text{background:#658aff}.filters__reading__color{min-width:10px;min-height:10px;width:10px;height:10px;display:inline-block}.quote{padding:0;cursor:pointer}.quote sup.iconbis-evt_quote-left,.quote sup.iconbis-evt_quote-right{font-size:0.5em;color:#263238;margin:0;padding:0}.quote sup.iconbis-evt_quote-left:after{white-space:nowrap}.quote sup.iconbis-evt_quote-right:before{white-space:nowrap}.quote .quote__text{border-bottom:1px dotted #263238}.quote.over .quote__text{background-color:#d2dbe0 !important}.quote.selected sup.iconbis-evt_quote-left,.quote.selected sup.iconbis-evt_quote-right{font-size:0.65em}.quote.selected .quote__text{border-bottom:1px solid #263238}.quote.highlight .quote__text{background-color:#7893a1}.quote.subquote{border-bottom:1px dashed #263238}.quote.subquote.noquotes sup.iconbis-evt_quote-left,.quote.subquote.noquotes sup.iconbis-evt_quote-right{display:none}evt-quote span.quote{display:inline !important}span.quote{display:none !important}.analogue{padding:0;cursor:pointer}.analogue i.iconbis-evt_analogue{font-size:0.8em;color:#263238;margin:0;padding:0;margin-right:-6px}.analogue i.iconbis-evt_analogue:after{white-space:nowrap}.analogue .analogue__text{border-bottom:1px dotted #263238}.analogue.over .analogue__text{background-color:#d2dbe0 !important}.analogue.selected i.iconbis-evt_analogue{font-size:1em;color:#263238}.analogue.selected .analogue__text{border-bottom:1px solid #263238}.evt-dialog{position:fixed;top:0px;left:0px;width:100%;height:100%;z-index:9999}.evt-dialog-shadow{position:fixed;background:rgba(0,0,0,0.6);width:100%;height:100%}.evt-dialog-container{border-radius:2px;font-size:60%;background:#fff;min-width:80%;height:2000px;max-height:80%;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-moz-box-shadow:0px 0px 8px #000;-o-box-shadow:0px 0px 8px #000;-webkit-box-shadow:0px 0px 8px #000;-khtml-box-shadow:0px 0px 8px #000;-ms-box-shadow:0px 0px 8px #000;box-shadow:0px 0px 8px #000}.evt-dialog-container div[ng-switch]{height:-moz-calc(100% - 42px);height:-o-calc(100% - 42px);height:-webkit-calc(100% - 42px);height:calc(100% - 42px)}.evt-dialog-container-top{height:42px;background:#263238;color:#ECEFF1;padding:10px;padding-right:50px;text-align:center;font-size:1.2em}.evt-dialog-container-top button-switch{font-size:90%;top:4px}.evt-dialog-container-content{overflow-y:auto;height:100%}.evt-dialog.evt-dialog-error .evt-dialog-container,.evt-dialog.evt-dialog-small .evt-dialog-container{min-width:10%;max-width:60%;height:auto}.evt-dialog.evt-dialog-error .evt-dialog-container-content,.evt-dialog.evt-dialog-small .evt-dialog-container-content{padding:20px}.evt-dialog.evt-dialog-error .evt-dialog-container-top{background:#990000}.evtRef{display:inline;text-decoration:underline}.evtRef:hover{cursor:pointer;color:#666}.evt-tabs-container{padding-top:1px;height:100%;overflow:hidden}.evt-tabs-container.vertical .evt-tabs-container_headers{display:inline-block;float:left;height:-moz-calc(100% - 42px);height:-o-calc(100% - 42px);height:-webkit-calc(100% - 42px);height:calc(100% - 42px);border-right:1px solid #263238;width:20%;position:absolute;overflow:hidden;bottom:0;left:0;top:43px}.evt-tabs-container.vertical .evt-tabs-container_header{display:block;border-bottom:1px solid #263238;color:#263238;font-variant:small-caps;text-align:left;padding:10px;cursor:pointer}.evt-tabs-container.vertical .evt-tabs-container_header.hasSubTabs{border-bottom:1px solid #ECEFF1}.evt-tabs-container.vertical .evt-tabs-container_header.active,.evt-tabs-container.vertical .evt-tabs-container_header:hover{background:#37474f;color:#ECEFF1}.evt-tabs-container.vertical .evt-tabs-container_header.active{background:#263238;color:#ECEFF1}.evt-tabs-container.vertical .evt-tabs-container_header-icon{min-width:18px;margin-right:3px;text-align:center}.evt-tabs-container.vertical .evt-tabs-container_header_subTabs{margin:0;padding:0;list-style-type:none !important}.evt-tabs-container.vertical .evt-tabs-container_header_subTabs.hide{display:none}.evt-tabs-container.vertical .evt-tabs-container_header_subTabs_tab{padding:5px 10px 5px 30px;display:block;border-bottom:1px solid #ECEFF1;color:#263238;font-variant:small-caps;font-size:0.93em;text-align:left;cursor:pointer}.evt-tabs-container.vertical .evt-tabs-container_header_subTabs_tab.active,.evt-tabs-container.vertical .evt-tabs-container_header_subTabs_tab:hover{background:#37474f;color:#ECEFF1}.evt-tabs-container.vertical .evt-tabs-container_header_subTabs_tab.active{background:#263238;color:#ECEFF1}.evt-tabs-container.vertical .evt-tabs-container_header_subTabs_tab:last-child{border-bottom:1px solid #263238}.evt-tabs-container.vertical .evt-tabs-container_panels{position:relative;height:100%;left:20%;width:80%}.evt-tabs-container.vertical .evt-tabs-container_panels.noPadding{padding:0}.evt-tabs-container_panel{display:none;padding:10px 15px;height:100%}.evt-tabs-container_panel.active{display:block;margin-bottom:10px;overflow-y:auto}.evt-tabs-container_panel.noscroll{overflow-y:hidden !important;padding:0;margin-bottom:0}.evt-tabs-container_panel.noPadding{padding:0px !important}.evt-tabs-container_panel.addPadding{padding:20px !important}.evt-list__listLetters{position:relative;margin:auto;text-align:center;background:#FFF;margin-top:0;padding:10px;height:45px;max-height:45px}.evt-list__listLetters__letter{margin-right:9px;color:#999;font-size:90%;cursor:pointer;text-transform:uppercase}.evt-list__listLetters__letter.active{color:#000;font-weight:bold;cursor:default}.evt-list__content{height:-moz-calc(calc(100% - 45px));height:-o-calc(calc(100% - 45px));height:-webkit-calc(calc(100% - 45px));height:calc(calc(100% - 45px));width:100%;overflow:auto;position:absolute}.evt-list__content>div{width:100%;padding-left:10px}.evt-list__content>div>*:nth-child(odd){background:rgba(55,71,79,0.1)}.evt-list__content>div>*:nth-child(even){background:#fff}.evt-list__content>div>*:hover{background:rgba(55,71,79,0.2)}.evt-list .scrollableDiv{overflow-y:scroll;height:100%}.namedEntity{display:block;background:inherit;font-size:95%}.namedEntity__icon{margin-right:5px}.namedEntity__header{display:block;padding:7px;padding-bottom:4px}.namedEntity__header:hover{cursor:pointer}.namedEntity__header .opener:before{content:"\\f0da"}.namedEntity_tools{padding:0;float:right;display:block;position:relative;bottom:5px;right:-2px;background:transparent;text-align:center}.namedEntity_tools button-switch{margin-right:0;font-size:70%;float:right}.namedEntity_tools button-switch .buttonSwitch{box-shadow:none;background:none;border:none}.namedEntity_tools button-switch.active .buttonSwitch,.namedEntity_tools button-switch:hover .buttonSwitch{-moz-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-o-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-webkit-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-khtml-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-ms-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);background-color:#e1e1e1;border:1px solid #7d7d7d}.namedEntity__details{display:none;font-size:85%;border-top:3px double #37474f}.namedEntity__details p{padding:0 10px}.namedEntity__details-headers{z-index:2;position:relative}.namedEntity__details-headers span{padding:5px;display:inline-block;font-size:90%;cursor:pointer;border-left:1px solid #e1e1e1}.namedEntity__details-headers span:first-child{border-left:none}.namedEntity__details-headers span.active{-moz-box-shadow:inset 0 2px 2px -1px #7d7d7d;-o-box-shadow:inset 0 2px 2px -1px #7d7d7d;-webkit-box-shadow:inset 0 2px 2px -1px #7d7d7d;-khtml-box-shadow:inset 0 2px 2px -1px #7d7d7d;-ms-box-shadow:inset 0 2px 2px -1px #7d7d7d;box-shadow:inset 0 2px 2px -1px #7d7d7d;background-color:#e1e1e1;border-right:1px solid #e1e1e1}.namedEntity__details-headers span.active:not(:first-child){border-left:1px solid #e1e1e1}.namedEntity__details-headers span.active+span{border-left:none}.namedEntity__details-panels{max-height:150px;overflow-x:hidden;overflow-y:auto;background-color:#e1e1e1}.namedEntity__details-panels:not(.closed){padding:10px 15px}.namedEntity__details-panels.largeMap{max-height:100%}.namedEntity__details-panel{display:block}.namedEntity__details-panel ul{padding-left:10px;list-style-type:none;margin:5px 0px}.namedEntity__details .opener:before{content:"\\f0da"}.namedEntity__detail{display:block}.namedEntity__detail-icon{float:left;margin-top:0.1rem}.namedEntity__detail-text{margin-left:24px;display:block}.namedEntity__detail-text-content{display:inline-block}.namedEntity__detail-text-content:first-letter{text-transform:uppercase}.namedEntity__detail-text-content .place,.namedEntity__detail-text-content .person,.namedEntity__detail-text-content .org,.namedEntity__detail-text-content .item{display:list-item;margin-left:20px}.namedEntity__detail-text-attribute{font-variant:small-caps;font-size:90%;vertical-align:top;display:inline-block;padding-top:0.2rem}.namedEntity__detail-text-attribute:first-letter{text-transform:uppercase}.namedEntity__detail-text-attribute:after{content:", ";vertical-align:top;margin-right:0.2em}.namedEntity__detail-text-attribute:last-of-type:after{content:": ";margin-right:0}.namedEntity__occurrences,.namedEntity__moreInfo{display:none;padding-left:16px}.namedEntity__occurrences.opened,.namedEntity__occurrences.location-mainText,.namedEntity__moreInfo.opened,.namedEntity__moreInfo.location-mainText{display:block}.namedEntity__occurrences.opened>span,.namedEntity__occurrences.location-mainText>span,.namedEntity__moreInfo.opened>span,.namedEntity__moreInfo.location-mainText>span{display:block}.namedEntity__occurrences-toggler,.namedEntity__moreInfo-toggler{display:block;font-variant:small-caps;padding-top:5px;cursor:pointer}.namedEntity__occurrences-toggler:hover,.namedEntity__moreInfo-toggler:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.namedEntity__occurrences-occurrence{border-radius:4px;padding:3px 6px;display:inline-block;border:1px solid rgba(55,71,79,0.3);margin-right:3px;font-size:85%;margin-bottom:3px;display:inline-block !important;cursor:pointer}.namedEntity__occurrences-occurrence:hover,.namedEntity__occurrences-occurrence.active{background:rgba(55,71,79,0.2)}.namedEntity.opened,.namedEntity.location-mainText{margin-top:1px}.namedEntity.opened .namedEntity__header .opener:before,.namedEntity.location-mainText .namedEntity__header .opener:before{content:"\\f0d7"}.namedEntity.opened .namedEntity__details,.namedEntity.location-mainText .namedEntity__details{display:block}.namedEntity__details.moreInfoOpened .namedEntity__moreInfo{display:block}.namedEntity__details.moreInfoOpened .namedEntity__moreInfo-toggler .opener:before{content:"\\f0d7"}.namedEntity__details.occurrencesOpened .namedEntity__occurrences{display:block}.namedEntity__details.occurrencesOpened .namedEntity__occurrences-toggler .opener:before{content:"\\f0d7"}.namedEntity.location-mainText{border-left:1px solid #37474f;border-right:1px solid #37474f}.namedEntity.location-mainText.opened{margin-bottom:10px}.namedEntity.location-mainText .namedEntity__header{border-top:1px solid #37474f;cursor:default}.namedEntity.location-mainText .namedEntity__details{border-bottom:1px solid #37474f}.namedEntity .listplace .place,.namedEntity .listperson .person,.namedEntity .listorg .org,.namedEntity .list .item{display:list-item;margin-left:20px}.namedEntity-person,.namedEntity-pers,.namedEntity-persName{border-bottom-color:#ffcdd2}.namedEntity-person.location-mainText,.namedEntity-person.location-pinned,.namedEntity-pers.location-mainText,.namedEntity-pers.location-pinned,.namedEntity-persName.location-mainText,.namedEntity-persName.location-pinned{background:#FFF0F1}.namedEntity-person>.namedEntity__details>.namedEntity__details-headers span.active,.namedEntity-pers>.namedEntity__details>.namedEntity__details-headers span.active,.namedEntity-persName>.namedEntity__details>.namedEntity__details-headers span.active{-moz-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-o-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-webkit-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-khtml-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-ms-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);background-color:#ffcdd2;border-right-color:#ffcdd2}.namedEntity-person>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child),.namedEntity-pers>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child),.namedEntity-persName>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child){border-left-color:#ffcdd2}.namedEntity-person>.namedEntity__details>.namedEntity__details-headers span:hover,.namedEntity-pers>.namedEntity__details>.namedEntity__details-headers span:hover,.namedEntity-persName>.namedEntity__details>.namedEntity__details-headers span:hover{background-color:#ffcdd2}.namedEntity-person>.namedEntity__details>.namedEntity__details-headers:not(.closed) span,.namedEntity-pers>.namedEntity__details>.namedEntity__details-headers:not(.closed) span,.namedEntity-persName>.namedEntity__details>.namedEntity__details-headers:not(.closed) span{margin-bottom:-3px}.namedEntity-person>.namedEntity__details>.namedEntity__details-panels,.namedEntity-pers>.namedEntity__details>.namedEntity__details-panels,.namedEntity-persName>.namedEntity__details>.namedEntity__details-panels{-moz-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-o-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-webkit-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-khtml-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-ms-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);background-color:#ffcdd2}.namedEntity-person .namedEntity__occurrences-occurrence,.namedEntity-pers .namedEntity__occurrences-occurrence,.namedEntity-persName .namedEntity__occurrences-occurrence{background:rgba(255,255,255,0.5);border-color:#ffcdd2}.namedEntity-person .namedEntity__occurrences-occurrence:hover,.namedEntity-person .namedEntity__occurrences-occurrence.active,.namedEntity-pers .namedEntity__occurrences-occurrence:hover,.namedEntity-pers .namedEntity__occurrences-occurrence.active,.namedEntity-persName .namedEntity__occurrences-occurrence:hover,.namedEntity-persName .namedEntity__occurrences-occurrence.active{background:#fff}.namedEntity-place,.namedEntity-placeName{border-bottom-color:#c8e6c9}.namedEntity-place.location-mainText,.namedEntity-place.location-pinned,.namedEntity-placeName.location-mainText,.namedEntity-placeName.location-pinned{background:#EEF7EF}.namedEntity-place>.namedEntity__details>.namedEntity__details-headers span.active,.namedEntity-placeName>.namedEntity__details>.namedEntity__details-headers span.active{-moz-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-o-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-webkit-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-khtml-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-ms-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);background-color:#c8e6c9;border-right-color:#c8e6c9}.namedEntity-place>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child),.namedEntity-placeName>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child){border-left-color:#c8e6c9}.namedEntity-place>.namedEntity__details>.namedEntity__details-headers span:hover,.namedEntity-placeName>.namedEntity__details>.namedEntity__details-headers span:hover{background-color:#c8e6c9}.namedEntity-place>.namedEntity__details>.namedEntity__details-headers:not(.closed) span,.namedEntity-placeName>.namedEntity__details>.namedEntity__details-headers:not(.closed) span{margin-bottom:-3px}.namedEntity-place>.namedEntity__details>.namedEntity__details-panels,.namedEntity-placeName>.namedEntity__details>.namedEntity__details-panels{-moz-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-o-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-webkit-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-khtml-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-ms-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);background-color:#c8e6c9}.namedEntity-place .namedEntity__occurrences-occurrence,.namedEntity-placeName .namedEntity__occurrences-occurrence{background:rgba(255,255,255,0.5);border-color:#c8e6c9}.namedEntity-place .namedEntity__occurrences-occurrence:hover,.namedEntity-place .namedEntity__occurrences-occurrence.active,.namedEntity-placeName .namedEntity__occurrences-occurrence:hover,.namedEntity-placeName .namedEntity__occurrences-occurrence.active{background:#fff}.namedEntity-org,.namedEntity-orgName{border-bottom-color:#ffb74d}.namedEntity-org.location-mainText,.namedEntity-org.location-pinned,.namedEntity-orgName.location-mainText,.namedEntity-orgName.location-pinned{background:#FFE9C9}.namedEntity-org>.namedEntity__details>.namedEntity__details-headers span.active,.namedEntity-orgName>.namedEntity__details>.namedEntity__details-headers span.active{-moz-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-o-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-webkit-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-khtml-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);-ms-box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);box-shadow:inset 0 2px 3px -1px rgba(0,0,0,0.4);background-color:#ffb74d;border-right-color:#ffb74d}.namedEntity-org>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child),.namedEntity-orgName>.namedEntity__details>.namedEntity__details-headers span.active:not(:first-child){border-left-color:#ffb74d}.namedEntity-org>.namedEntity__details>.namedEntity__details-headers span:hover,.namedEntity-orgName>.namedEntity__details>.namedEntity__details-headers span:hover{background-color:#ffb74d}.namedEntity-org>.namedEntity__details>.namedEntity__details-headers:not(.closed) span,.namedEntity-orgName>.namedEntity__details>.namedEntity__details-headers:not(.closed) span{margin-bottom:-3px}.namedEntity-org>.namedEntity__details>.namedEntity__details-panels,.namedEntity-orgName>.namedEntity__details>.namedEntity__details-panels{-moz-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-o-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-webkit-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-khtml-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);-ms-box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);box-shadow:inset 0 2px 3px -2px rgba(0,0,0,0.4);background-color:#ffb74d}.namedEntity-org .namedEntity__occurrences-occurrence,.namedEntity-orgName .namedEntity__occurrences-occurrence{background:rgba(255,255,255,0.5);border-color:#ffb74d}.namedEntity-org .namedEntity__occurrences-occurrence:hover,.namedEntity-org .namedEntity__occurrences-occurrence.active,.namedEntity-orgName .namedEntity__occurrences-occurrence:hover,.namedEntity-orgName .namedEntity__occurrences-occurrence.active{background:#fff}[data-list-type=person] .evt-list__content>div>*:nth-child(odd){background:rgba(255,205,210,0.5)}[data-list-type=person] .evt-list__content>div>*:nth-child(even){background:rgba(255,205,210,0.2)}[data-list-type=person] .evt-list__content>div>*:hover{background:rgba(255,205,210,0.4)}[data-list-type=person] .evt-list__content>.namedEntity.opened{background:rgba(255,205,210,0.5)}[data-list-type=place] .evt-list__content>div>*:nth-child(odd){background:rgba(200,230,201,0.5)}[data-list-type=place] .evt-list__content>div>*:nth-child(even){background:rgba(200,230,201,0.2)}[data-list-type=place] .evt-list__content>div>*:hover{background:rgba(200,230,201,0.4)}[data-list-type=place] .evt-list__content>.namedEntity.opened{background:rgba(200,230,201,0.5)}[data-list-type=org] .evt-list__content>div>*:nth-child(odd){background:rgba(255,183,77,0.5)}[data-list-type=org] .evt-list__content>div>*:nth-child(even){background:rgba(255,183,77,0.2)}[data-list-type=org] .evt-list__content>div>*:hover{background:rgba(255,183,77,0.4)}[data-list-type=org] .evt-list__content>.namedEntity.opened{background:rgba(255,183,77,0.5)}.namedEntityRef{color:#37474f;cursor:pointer}.namedEntityRef.highlighted{background:#ffc !important}.namedEntityRef.fakeEntity{cursor:default}.namedEntityRef.active{border:1px solid #000;border-bottom:5px solid #fff}.namedEntityRef-person:hover,.namedEntityRef-pers:hover,.namedEntityRef-persName:hover{background-color:#FFF0F1}.namedEntityRef-person.active,.namedEntityRef-pers.active,.namedEntityRef-persName.active{background-color:#FFF0F1;border-bottom-color:#FFF0F1}.namedEntityRef-place:hover,.namedEntityRef-placeName:hover{background-color:#EEF7EF}.namedEntityRef-place.active,.namedEntityRef-placeName.active{background-color:#EEF7EF;border-bottom-color:#EEF7EF}.namedEntityRef-org:hover,.namedEntityRef-orgName:hover{background-color:#FFE9C9}.namedEntityRef-org.active,.namedEntityRef-orgName.active{background-color:#FFE9C9;border-bottom-color:#FFE9C9}.namedEntityRef__details{font-size:90%;position:absolute;line-height:100%;display:none;background:rgba(236,239,241,0.9);border:1.5px solid #263238;border-radius:3px;-moz-box-shadow:2px 2px 2px rgbs(#263238, 0.6);-o-box-shadow:2px 2px 2px rgbs(#263238, 0.6);-webkit-box-shadow:2px 2px 2px rgbs(#263238, 0.6);-khtml-box-shadow:2px 2px 2px rgbs(#263238, 0.6);-ms-box-shadow:2px 2px 2px rgbs(#263238, 0.6);box-shadow:2px 2px 2px rgbs(#263238, 0.6);padding:5px;z-index:99;text-align:left;cursor:text !important;min-width:30px;margin-top:10px}.namedEntityRef__details.active{display:block}.namedEntityRef__details-before{position:absolute;top:0}.namedEntityRef__details-before:before{position:absolute;font-family:FontAwesome;font-size:2em;color:#ECEFF1;top:-10px;content:"\\f0d8";text-shadow:0px -3px 0px #000;height:0px}.namedEntityRef__details.open-up .namedEntityRef__details-before::before{content:"\\f0d7";text-shadow:0px 3px 0px #000}.person-active .namedEntityRef-person,.person-active .namedEntityRef-pers,.person-active .namedEntityRef-persName,.pers-active .namedEntityRef-person,.pers-active .namedEntityRef-pers,.pers-active .namedEntityRef-persName,.persName-active .namedEntityRef-person,.persName-active .namedEntityRef-pers,.persName-active .namedEntityRef-persName{background-color:#ffcdd2}.person-active .namedEntityRef-person:hover:not(.active),.person-active .namedEntityRef-pers:hover:not(.active),.person-active .namedEntityRef-persName:hover:not(.active),.pers-active .namedEntityRef-person:hover:not(.active),.pers-active .namedEntityRef-pers:hover:not(.active),.pers-active .namedEntityRef-persName:hover:not(.active),.persName-active .namedEntityRef-person:hover:not(.active),.persName-active .namedEntityRef-pers:hover:not(.active),.persName-active .namedEntityRef-persName:hover:not(.active){background-color:#FFF0F1}.place-active .namedEntityRef-place,.place-active .namedEntityRef-placeName,.placeName-active .namedEntityRef-place,.placeName-active .namedEntityRef-placeName{background-color:#c8e6c9}.place-active .namedEntityRef-place:hover:not(.active),.place-active .namedEntityRef-placeName:hover:not(.active),.placeName-active .namedEntityRef-place:hover:not(.active),.placeName-active .namedEntityRef-placeName:hover:not(.active){background-color:#EEF7EF}.org-active .namedEntityRef-org,.org-active .namedEntityRef-orgName,.orgName-active .namedEntityRef-org,.orgName-active .namedEntityRef-orgName{background-color:#ffb74d}.org-active .namedEntityRef-org:hover:not(.active),.org-active .namedEntityRef-orgName:hover:not(.active),.orgName-active .namedEntityRef-org:hover:not(.active),.orgName-active .namedEntityRef-orgName:hover:not(.active){background-color:#FFE9C9}[data-value="person"] .option-icon-label,[data-value="pers"] .option-icon-label,[data-value="persName"] .option-icon-label{color:#ffcdd2}[data-value="place"] .option-icon-label,[data-value="placeName"] .option-icon-label{color:#c8e6c9}[data-value="org"] .option-icon-label,[data-value="orgName"] .option-icon-label{color:#ffb74d}.relation-name{font-weight:bold;font-variant:small-caps}[data-type="pinnedBoard"] .namedEntity{margin-bottom:10px}[data-type="pinnedBoard"] .namedEntity_tools{position:relative;bottom:5px;right:-7px}.source-seg sup.iconbis-evt_quote-left,.source-seg sup.iconbis-evt_quote-right{font-size:0.5em;color:#7893a1;margin:0;padding:0}.source-seg sup.iconbis-evt_quote-left:after{white-space:nowrap}.source-seg sup.iconbis-evt_quote-right:before{white-space:nowrap}.source-seg_text{cursor:pointer;padding:0;border-bottom:1px dotted #7893a1}.source-seg_text.over{background-color:#7893a1}.source-seg_text.selected{border-bottom:1px solid #7893a1}.source-seg_panel{margin:0;margin-bottom:10px;position:relative;z-index:0;background:#ECEFF1;border:1px solid #7d7d7d;cursor:text;display:block;color:#263238;font-size:90%;padding:5px}.source-seg_panel_label{font-size:95%;font-variant:small-caps;margin:0;padding:0}.quoteText.over{text-shadow:0px 0px 1px rgba(0,0,0,0.7);cursor:pointer}.quoteText.selected{font-weight:bold}.source-ref{cursor:pointer}.source-ref_text{font-weight:bold;text-decoration:underline;color:#263238}.version-reading_text{display:inline-block;border-left:1px dotted #607d8b;padding-left:0.5em;cursor:pointer}.version-reading_text.over{background-color:#d2dbe0}.version-reading_text.selected{border-left:2px solid #607d8b}.version-reading.blurred,.version-reading.blurred *{color:transparent !important;text-shadow:0 0 5px #000 !important;background:transparent !important;border:none}.iconbis-evt_fork{margin-right:2px;color:#263238;font-size:0.9em}.version-apparatus-entry{margin:0;margin-bottom:10px;position:relative;z-index:0;background:rgba(0,0,0,0);color:#263238;font-size:90%;border-left:1px solid #7d7d7d;border-right:1px solid #7d7d7d;cursor:text !important}.version-apparatus-entry span{background:transparent;display:inline-block}.version-apparatus-entry.blurred{border:none;color:transparent !important;text-shadow:0 0 5px #000}.version-apparatus-entry_tools{padding:0;float:right;display:block;position:relative;bottom:6px;right:-2px;background:transparent;text-align:center}.version-apparatus-entry_tools button-switch{margin-right:0;font-size:70%}.version-apparatus-entry_tools button-switch .buttonSwitch{box-shadow:none;border:1px solid rgba(0,0,0,0)}.version-apparatus-entry_tools button-switch.active .buttonSwitch,.version-apparatus-entry_tools button-switch:hover .buttonSwitch{-moz-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-o-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-webkit-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-khtml-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);-ms-box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px 0 rgba(0,0,0,0.1);background-color:#f5f8f8;border:1px solid #7d7d7d}.version-apparatus-entry_main-content{padding:5px;font-size:105%;border-top:1px solid #7d7d7d}.version-apparatus-entry_other-content{border-top:3px double #7d7d7d;border-bottom:1px solid #7d7d7d}.version-apparatus-entry_other-content p{padding:0 10px}.version-apparatus-entry_other-content_headers{z-index:2;position:relative}.version-apparatus-entry_other-content_headers:not(.closed){-moz-box-shadow:0px 9px 5px -4px #f5f8f8;-o-box-shadow:0px 9px 5px -4px #f5f8f8;-webkit-box-shadow:0px 9px 5px -4px #f5f8f8;-khtml-box-shadow:0px 9px 5px -4px #f5f8f8;-ms-box-shadow:0px 9px 5px -4px #f5f8f8;box-shadow:0px 9px 5px -4px #f5f8f8}.version-apparatus-entry_other-content_headers span{padding:5px;display:inline-block;font-size:90%;cursor:pointer;border-left:1px solid #f5f8f8}.version-apparatus-entry_other-content_headers span:first-child{border-left:none}.version-apparatus-entry_other-content_headers span:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.version-apparatus-entry_other-content_headers span.active{-moz-box-shadow:inset 0 2px 2px -1px #7d7d7d;-o-box-shadow:inset 0 2px 2px -1px #7d7d7d;-webkit-box-shadow:inset 0 2px 2px -1px #7d7d7d;-khtml-box-shadow:inset 0 2px 2px -1px #7d7d7d;-ms-box-shadow:inset 0 2px 2px -1px #7d7d7d;box-shadow:inset 0 2px 2px -1px #7d7d7d;background-color:#f5f8f8;border-right:1px solid #f5f8f8}.version-apparatus-entry_other-content_headers span.active:not(:first-child){border-left:1px solid #f5f8f8}.version-apparatus-entry_other-content_headers span.active+span{border-left:none}.version-apparatus-entry_other-content_panels{max-height:150px;overflow-x:hidden;overflow-y:auto;background-color:#f5f8f8}.version-apparatus-entry_other-content_panels:not(.closed){padding:10px 15px}.version-apparatus-entry_other-content_panel{display:none}.version-apparatus-entry_other-content_panel.active{display:block;margin-bottom:10px}.version-apparatus-entry_other-content_panel ul{padding-left:10px;list-style-type:none;margin:5px 0px}.version-apparatus-entry_other-content_panel .app_version em{font-weight:bold}.version-apparatus-entry_other-content_panel .app_version::after{content:""}.version-apparatus-entry_other-content_panel .app_version .witnesses{display:none}.version-apparatus-entry_other-content_panel .app_reading{font-weight:bold}.version-apparatus-entry_other-content_panel .app_reading .witnesses{display:none}.version-apparatus-entry_other-content_panel_orthographic_title{text-align:center;width:100%;font-variant:small-caps;font-size:95%;margin-top:10px;margin-bottom:10px}.version-apparatus-entry .witnesses{display:inline}.version-apparatus-entry .witnesses .wit{margin:0 3px;cursor:pointer;text-decoration:underline}.version-apparatus-entry .witnesses .wit:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.version-apparatus-entry .witnesses .wit::after{text-decoration:none !important}.version-apparatus-entry .witnesses .wit.selected{cursor:default;text-shadow:0px 0px 1px rgba(0,0,0,0.7);text-decoration:none}.version-apparatus-entry .attributes::before{content:" â "}.version-apparatus-entry .attributes::after{content:""}.version-apparatus-entry .attributes span{font-style:italic}.version-apparatus-entry .attributes span::after{content:", "}.version-apparatus-entry .attributes span:last-child::after{content:""}.version-apparatus-entry.noTools{border-right:1px solid #7d7d7d}.version-apparatus-entry.noTools .version-apparatus-entry_main-content,.version-apparatus-entry.noTools .version-apparatus-entry_other-content{width:100%}.in_version_apparatus .version-apparatus-entry{cursor:pointer !important;border:0;background:transparent}.in_version_apparatus .version-apparatus-entry:hover{background:rgba(0,0,0,0)}.in_version_apparatus .version-apparatus-entry:hover>*{background:rgba(0,0,0,0)}.in_version_apparatus .version-apparatus-entry_tools{border:0;padding-left:0}.in_version_apparatus .version-apparatus-entry_tools button-switch .buttonSwitch{border:1px solid transparent}.in_version_apparatus .version-apparatus-entry_main-content{border:0}.in_version_apparatus .version-apparatus-entry_other-content{display:none}.in_version_apparatus.active .version-apparatus-entry{background:rgba(0,0,0,0)}.blurred .version-apparatus-entry,.blurred .version-apparatus-entry *{border:none !important;-moz-box-shadow:none;-o-box-shadow:none;-webkit-box-shadow:none;-khtml-box-shadow:none;-ms-box-shadow:none;box-shadow:none;color:transparent !important;text-shadow:0 0 5px #000 !important;background:transparent !important}.moreInfo-label{font-weight:bold;font-variant:small-caps}.moreInfo-label:after{content:": "}.moreInfo-metadataTitle{border-top:1px solid #999;padding-top:10px;text-align:center;width:100%;font-variant:small-caps;font-size:95%;margin-top:10px;margin-bottom:10px}.app_reading_content{margin-bottom:20px !important}.evt-version-ref{margin:0 3px;cursor:pointer;text-decoration:underline !important}.evt-version-ref:hover{text-shadow:0px 0px 1px rgba(0,0,0,0.7)}.evt-version-ref::after{text-decoration:none !important}.evt-version-ref.selected{cursor:default;text-shadow:0px 0px 1px rgba(0,0,0,0.7);text-decoration:none}.evt-version-ref_text:not(.selected):not(.not-select){text-decoration:underline !important}.evt-version-ref_text.not-select{font-weight:bold;cursor:default}.navBarSliderWrapper{height:45px;background:#263238;position:fixed;bottom:0px;width:100%;padding:0 20px;vertical-align:middle;text-align:center}#sliderValue{font-size:0.5em;display:inline;color:#ffffff;position:relative}.navBarSlider{position:relative;cursor:pointer;z-index:1;display:inline-block;min-width:50vw;width:68vw;text-align:initial}.navBarSlider .rzslider{margin:auto}.navBarSlider .rzslider .rz-bar{height:8px;margin-top:-2px}.navBarSlider .rzslider .rz-selection{background:#607d8b}.navBarSlider .rzslider .rz-bubble{background:#fff;font-size:0.85rem;bottom:10px;border:1px solid;border-radius:4px;opacity:0.8}.navBarSlider .rzslider .rz-bubble.rz-model-value{opacity:1}.navBarSlider .rzslider[disabled] .rz-bubble{opacity:.8}.navBarSlider .rzslider .rz-pointer{top:-4px;width:22px;height:13px;background-color:#ECEFF1;border:1px solid;-moz-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-o-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-webkit-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-khtml-box-shadow:0px 0px 4px rgba(0,0,0,0.5);-ms-box-shadow:0px 0px 4px rgba(0,0,0,0.5);box-shadow:0px 0px 4px rgba(0,0,0,0.5);outline:none}.navBarSlider .rzslider .rz-pointer:hover{background:#fff}.navBarSlider .rzslider .rz-pointer:after{content:none}.navBarSlider .buttonSlider{cursor:pointer;position:relative}.navBarSlider #left,.navBarSlider #right{background:#bedde0;border-radius:16px;font-size:15px;top:3px}.navBarSlider #leftLeft,.navBarSlider #rightRight{background:#bedde0;border-radius:16px;font-size:15px;top:3px}.navBarSlider #thumbnails,.navBarSlider #visColl{border-radius:16px;top:3px;background:#bedde0}.navBar-closer>span:nth-child(1) .fa-caret-down{transform:rotate(180deg)}.viscollContainer{height:100%;vertical-align:top;width:100%;max-height:300px;padding-bottom:20px}.viscollContainer:not(:last-child){margin-bottom:20px;border-bottom:1px solid lightgray}.selectorViscoll{font-size:0.5em;margin-bottom:5px}.selectorViscoll label{display:block}.selectorViscoll .selector{margin:0}.imgSelectorViscoll{display:block}.imgSelectorViscoll_empty{padding-top:10px;font-size:0.5em;height:170px;width:100%;font-style:italic}.quireSelector{width:100%;padding:30px;font-size:0.5em;position:relative}.quireNumber{position:relative;display:block;font-size:1.3rem;font-variant:small-caps;margin-bottom:10px}.viscollItemsContainer{padding:0 30px}.viscollItem-leftContainer{width:20%;display:inline-block}.viscollItem-rightContainer{width:77%;display:inline-block;vertical-align:top}.viscollContainer svg{position:relative;background:#396f7b;height:auto;width:70%;border-radius:8px;margin-bottom:5px}.viscollContainer svg>g:hover .leaf,.viscollContainer svg .over_unit .leaf{cursor:pointer;stroke:#FFC107}.viscollContainer svg .active_unit.first_unit .leaf{stroke:#ff9800;cursor:default}.viscollContainer svg .active_unit.second_unit .leaf{stroke:#ff5722;cursor:default}.viscollContainer .thumbnail.first_unit img{border-color:#ff9800}.viscollContainer .thumbnail.second_unit img{border-color:#ff5722}.viscollContainer .thumbnail img{height:auto;width:120px}.viscollContainer .thumbnail figcaption{width:120px}.viscollContainer .thumbnail.missing{cursor:not-allowed}.viscollContainer .thumbnail.missing:hover figcaption{background:rgba(0,0,0,0.2) !important}.viscollContainer .thumbnail.notLeaf{cursor:default;opacity:.3;border:2px solid;background:lightgray}.viscollContainer .thumbnail.notLeaf img{visibility:hidden}.viscollContainer .thumbnail.notLeaf i{top:3px;position:relative}.viscollContainer .thumbnail.notLeaf:hover figcaption{background:rgba(0,0,0,0.2) !important}.search-box{max-height:30px;transition:max-height .5s;display:none;min-width:calc(100% - 8px);position:absolute;bottom:7px;left:4px;margin:40px 0;background:#fff;border-top:2px solid #263238}.search-box.open{display:inline-block}.search-box form{height:30px;border-bottom:2px solid #263238}.search-box .search-results{overflow:auto}.show{display:block !important}.hide{display:none}.show-visibility{visibility:visible}.hide-visibility{visibility:hidden}.search-box.internal.results-open{max-height:-moz-calc(100% -  84px - 6px);max-height:-o-calc(100% -  84px - 6px);max-height:-webkit-calc(100% -  84px - 6px);max-height:calc(100% -  84px - 6px);transition:max-height .5s}.search-box.internal button-switch{margin-right:0}.search-box.internal button-switch[data-type="searchCaseSensitive"] .buttonSwitch-active,.search-box.internal button-switch[data-type="searchVirtualKeyboard"] .buttonSwitch-active,.search-box.internal button-switch[data-type="searchExactWord"] .buttonSwitch-active{background-color:#FFC107}.search-box.internal .buttonSwitch{width:30px;border-right:2px solid #263238;background-color:#fff}.search-box.internal .buttonSwitch .icon-evt_close{font-size:14px;font-weight:bold;left:4px}.search-box.internal .buttonSwitch.buttonSwitch-active .icon-evt_close{color:#263238}.search-box.internal .btn-left button-switch:first-child .buttonSwitch,.search-box.internal .btn-right button-switch:first-child .buttonSwitch{border-left:2px solid #263238}.search-box.internal .btn-left{float:left}.search-box.internal .btn-left button-switch[data-type=\'searchResultsHide\']{border-left:2px solid #263238}.search-box.internal .btn-right{float:right}.search-box.internal .btn-right button-switch:first-child .buttonSwitch{border:0}.search-box.internal .btn-right .buttonSwitch-disabled[title="Previous"]{border-left:2px solid}.search-box.internal input[type="text"]{font-family:Junicode;font-size:18px;height:27px;width:calc(100% - 230px);position:absolute;top:0.9px;padding:0 5px;border:transparent}.search-box.internal input[type="text"]:focus{outline:0}.search-box.internal .search-results{height:95%;padding:4%}.search-box.internal .search-results p{display:block;margin-top:0}.search-box.internal .search-results .token{padding-bottom:5px}.search-box.internal .search-results .icon{cursor:pointer}.search-box.internal .search-results .icon:before{content:\'\\25B6\';font-size:12px;position:relative;bottom:2px;left:3px}.search-box.internal .search-results .icon.active:before{content:\'\\25BC\'}.search-box.internal .search-results .search-info{text-align:center;background-color:#fff;position:absolute;z-index:1;width:calc(100% - 16px);top:30px;left:0;padding-top:15px}.search-box.internal .search-results .search-info p:first-child{margin-bottom:0}.search-box.internal .search-results .search-info+.token-results{padding-top:80px}.search-box.internal .search-results .result-token,.search-box.internal .search-results .result-doc{font-style:italic}.search-box.internal .search-results .result-token{font-weight:bold;color:#ad0808}.search-box.internal .search-results .results-number{font-size:16px;padding-left:5px}.search-box.internal .search-results .search-result{display:none;margin-bottom:30px}.search-box.internal .search-results .search-result .original-text{display:block;font-style:italic}.search-box.internal .search-results .search-result .original-text strong{color:#ad0808}.search-box.internal .search-results .search-result .resultInfo{font-size:17px;background-color:#ECEFF1;color:#000;padding:7px;position:relative;top:6px;border-radius:4px}.search-box.internal .search-results .search-result li{list-style:none;margin-bottom:25px}.search-box.internal .search-results .search-result li:not(:last-child){border-bottom:1px solid rgba(204,204,204,0.8);padding-bottom:25px}.search-box.internal .search-results .search-result.open{display:block;padding-left:35px}.search-box.internal .ui-keyboard-input-current{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.search-box.external{height:auto;position:absolute;right:4px;border:2px solid #263238;background-color:#fff}.search-box.external .searchBtnGroup{display:none}.search-box.external input{display:none}.search-box-index{display:block;background-color:grey}.search-box-index #indexProgressBar{width:1%;background-color:green;height:27px}.indexingInProgress .loading{position:absolute;top:0;left:0;z-index:9999;width:100%;height:100%;background:rgba(0,0,0,0.7) !important}.indexingInProgress .loading .fa{color:white !important}.ui-keyboard{width:325px;top:auto !important;left:30px !important;bottom:35px;padding:10px;text-align:left;border:2px solid #263238;background-color:#fff}.ui-keyboard .ui-keyboard-button{margin-right:6px;margin-bottom:3px;border-radius:2px;border:1px solid #7d7d7d;font-family:Junicode;font-size:15px;line-height:.8em}.ui-keyboard .ui-keyboard-button:hover{box-shadow:1px 2px 3px rgba(0,0,0,0.4) inset}.ui-keyboard .ui-keyboard-keyset{text-align:left;white-space:initial}.ui-keyboard .ui-keyboard-actionkey-wrapper{display:flex;justify-content:flex-end}.ui-keyboard .ui-keyboard-button-endrow{display:none}.results-open .ui-keyboard{top:35px !important;bottom:auto}.toc_doc{margin:0}.toc_doc.open{background-color:#ECEFF1}.toc_doc:not(:last-child){border-bottom:1px solid #ECEFF1}.toc_doc_head{cursor:pointer;display:block;padding:10px;padding-left:20px}.toc_doc_head:before{content:\'\\25B6\';font-size:12px;position:relative;bottom:2px;left:-5px}.toc_doc_head.open:before{content:\'\\25BC\'}.toc_doc_details{display:none;padding-left:20px;padding-bottom:7px}.toc_doc_details.open{display:inline-flex}.toc_doc_details div{display:block;margin-right:3em}.toc_doc_details .list_head{display:block;font-variant:small-caps}.toc_doc_details .list_head_sub{font-style:italic;margin-left:-20px}.toc_doc_details ul{margin:3px 0 5px 0;padding-left:20px}.toc_doc_details ul li{cursor:pointer}.toc_doc_details ul li span.indexLink:hover{text-decoration:underline}.diplomaticEdition .choice{position:relative;text-align:center}.diplomaticEdition .choice:before,.diplomaticEdition .choice:after{content:""}.diplomaticEdition .choice:hover .expan,.diplomaticEdition .choice.hover .expan{display:inline;min-width:20px;z-index:99;white-space:nowrap}.diplomaticEdition .choice .abbr{color:purple;text-decoration:underline;z-index:9}.diplomaticEdition .choice .abbr:hover,.diplomaticEdition .choice .abbr.hover{text-decoration:underline;color:#561c0a}.diplomaticEdition .choice .expan{font-size:80%;position:absolute;line-height:16px;display:none;border:1.5px solid black;border-radius:3px;padding:5px 2px;margin-top:30px;left:0;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067}.diplomaticEdition .choice .expan:before{content:url('+v+");left:15%;position:absolute;top:-12px}.diplomaticEdition .choice .expan,.diplomaticEdition .choice .expan *{background:#e5dac4 !important}.diplomaticEdition .choice .reg>.expan,.diplomaticEdition .choice .expan>.ex{font-size:100%;position:relative;border:none;border-radius:0;margin-top:0;padding:0;-moz-box-shadow:0px 0px 0px;-o-box-shadow:0px 0px 0px;-webkit-box-shadow:0px 0px 0px;-khtml-box-shadow:0px 0px 0px;-ms-box-shadow:0px 0px 0px;box-shadow:0px 0px 0px}.diplomaticEdition .choice .reg>.expan:before,.diplomaticEdition .choice .expan>.ex:before{content:none}.diplomaticEdition .choice .abbr{color:purple;z-index:9;text-decoration:underline}.diplomaticEdition .choice .corr,.diplomaticEdition .choice .reg{font-size:80%;position:absolute;line-height:16px;display:none;border:1.5px solid black;border-radius:3px;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067;padding:5px 8px;margin-top:30px}.diplomaticEdition .choice .corr:before,.diplomaticEdition .choice .reg:before{left:15%;position:absolute;top:-13px}.diplomaticEdition .choice .corr{left:3em !important}.diplomaticEdition .choice .corr:before{content:url("+b+")}.diplomaticEdition .choice .corr,.diplomaticEdition .choice .corr *{background:#f99069 !important}.diplomaticEdition .choice .reg:before{content:url("+v+')}.diplomaticEdition .choice .reg,.diplomaticEdition .choice .reg *{background:#e5dac4 !important}.diplomaticEdition .choice .orig{color:#69513a}.diplomaticEdition .choice .orig:hover,.diplomaticEdition .choice .orig.hover{color:#561c0a}.diplomaticEdition .choice:hover .reg,.diplomaticEdition .choice:hover .corr,.diplomaticEdition .choice.hover .reg,.diplomaticEdition .choice.hover .corr{display:inline;min-width:20px;text-align:center;z-index:9;white-space:nowrap;left:0px}.diplomaticEdition .choice:hover .corr,.diplomaticEdition .choice.hover .corr{-moz-transform:translate(-80%, 0);-o-transform:translate(-80%, 0);-webkit-transform:translate(-80%, 0);-khtml-transform:translate(-80%, 0);-ms-transform:translate(-80%, 0);transform:translate(-80%, 0)}.diplomaticEdition .choice:hover .orig,.diplomaticEdition .choice.hover .orig{text-decoration:underline}.diplomaticEdition .choice .sic{color:#934d4d}.diplomaticEdition .choice .sup{line-height:20px;vertical-align:20%}.diplomaticEdition .choice .under{line-height:20px;vertical-align:-20%}.diplomaticEdition .choice .corr{display:inline-table}.diplomaticEdition .choice .corr:before,.diplomaticEdition .choice .corr:after{content:""}.diplomaticEdition .choice .corr{font-size:80%;position:absolute;line-height:16px;display:none;background:#f99069;border:1.5px solid black;border-radius:3px;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067;padding:5px 8px;margin-top:30px}.diplomaticEdition .choice .corr:before{content:url('+b+');left:15%;position:absolute;top:-13px}.diplomaticEdition .choice .sic{color:#934d4d}.diplomaticEdition .choice .sic:hover,.diplomaticEdition .choice .sic.hover{color:#561c0a}.diplomaticEdition .choice:hover .corr,.diplomaticEdition .choice.hover .corr{display:inline;min-width:20px;text-align:center}.diplomaticEdition .choice:hover .sic,.diplomaticEdition .choice.hover .sic{text-decoration:underline}.diplomaticEdition .mapping[data-type="diplomatic"],.diplomaticEdition .mapping[data-type="orig"],.diplomaticEdition .mapping[data-type="diplomatic"]{display:inline}.diplomaticEdition .hi[data-rend="7init"]{font-size:200%;font-weight:bold}.diplomaticEdition .hi[data-rend="init3.1"]{font-size:180%;font-weight:bold}.diplomaticEdition .hi[data-rend="cap"]{text-transform:uppercase}.diplomaticEdition .hi[data-rend="double"]{font-size:120%}.diplomaticEdition .choice:before,.diplomaticEdition .choice:after{content:""}.diplomaticEdition .choice:hover .reg,.diplomaticEdition .choice.hover .reg{display:inline;min-width:20px;z-index:9;white-space:nowrap}.diplomaticEdition .choice:hover .orig,.diplomaticEdition .choice.hover .orig{color:#561c0a;text-decoration:underline}.diplomaticEdition .choice .corr{display:none}.diplomaticEdition .choice .orig{color:#69513a}.diplomaticEdition .choice .orig .sup{line-height:20px;vertical-align:20%}.diplomaticEdition .choice .orig .under{line-height:20px;vertical-align:-20%}.diplomaticEdition .reg{font-size:85%;position:absolute;line-height:16px;display:none;border:1.5px solid black;border-radius:3px;padding:5px 2px;margin-top:30px;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067;left:0}.diplomaticEdition .reg:before{content:url('+v+');left:15%;position:absolute;top:-12px}.diplomaticEdition .reg span{background:transparent}.diplomaticEdition .reg,.diplomaticEdition .reg *{background:#e5dac4 !important}.diplomaticEdition .add{background-color:#bdecb6}.diplomaticEdition .del{background-color:red;text-decoration:line-through}.diplomaticEdition .damage{background-color:rgba(193,193,193,0.7)}.diplomaticEdition .glyph .glyphname,.diplomaticEdition .glyph .mapping{display:none}.diplomaticEdition .char .charname,.diplomaticEdition .char .mapping{display:none}.diplomaticEdition .center,.diplomaticEdition [rend="center"]{text-align:center;width:92%;display:inline-table;background:#FFF}.diplomaticEdition .right,.diplomaticEdition [rend="right"]{text-align:right;display:inline-table;background:#FFF}.diplomaticEdition .left,.diplomaticEdition [rend="left"]{display:inline-table}.diplomaticEdition [data-rend="red"]{color:red}.diplomaticEdition .attachment{border:1px solid black;padding:5px 0px 0px 10px}.diplomaticEdition .lineN{color:grey;font-size:0.8em}.diplomaticEdition .subst{text-decoration:underline}.diplomaticEdition .zone{margin-bottom:5px}.interpretativeEdition .choice{position:relative;text-align:center}.interpretativeEdition .choice:before,.interpretativeEdition .choice:after{content:""}.interpretativeEdition .choice:hover .abbr,.interpretativeEdition .choice.hover .abbr{display:inline;min-width:20px;z-index:99;white-space:nowrap}.interpretativeEdition .choice .expan{color:purple;z-index:9}.interpretativeEdition .choice .expan:hover,.interpretativeEdition .choice .expan.hover{text-decoration:underline;color:#561c0a}.interpretativeEdition .choice .abbr{font-size:80%;position:absolute;line-height:16px;display:none;border:1.5px solid black;border-radius:3px;padding:5px 2px;margin-top:30px;left:0;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067}.interpretativeEdition .choice .abbr:before{content:url('+v+");left:15%;position:absolute;top:-12px}.interpretativeEdition .choice .abbr,.interpretativeEdition .choice .abbr *{background:#e5dac4 !important}.interpretativeEdition .choice .orig>.abbr{font-size:100%;position:relative;border:none;border-radius:0;margin-top:0;padding:0;-moz-box-shadow:0px 0px 0px;-o-box-shadow:0px 0px 0px;-webkit-box-shadow:0px 0px 0px;-khtml-box-shadow:0px 0px 0px;-ms-box-shadow:0px 0px 0px;box-shadow:0px 0px 0px}.interpretativeEdition .choice .orig>.abbr:before{content:none}.interpretativeEdition .choice .expan{color:purple;z-index:9;text-decoration:underline}.interpretativeEdition .choice .sic,.interpretativeEdition .choice .orig{font-size:80%;position:absolute;line-height:16px;display:none;border:1.5px solid black;border-radius:3px;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067;padding:5px 8px;margin-top:30px}.interpretativeEdition .choice .sic:before,.interpretativeEdition .choice .orig:before{left:15%;position:absolute;top:-13px}.interpretativeEdition .choice .sic{left:3em !important}.interpretativeEdition .choice .sic:before{content:url("+b+")}.interpretativeEdition .choice .sic,.interpretativeEdition .choice .sic *{background:#f99069 !important}.interpretativeEdition .choice .orig:before{content:url("+v+')}.interpretativeEdition .choice .orig,.interpretativeEdition .choice .orig *{background:#e5dac4 !important}.interpretativeEdition .choice .reg{color:#69513a}.interpretativeEdition .choice .reg:hover,.interpretativeEdition .choice .reg.hover{color:#561c0a}.interpretativeEdition .choice:hover .orig,.interpretativeEdition .choice:hover .sic,.interpretativeEdition .choice.hover .orig,.interpretativeEdition .choice.hover .sic{display:inline;min-width:20px;text-align:center;z-index:9;white-space:nowrap}.interpretativeEdition .choice:hover .sic,.interpretativeEdition .choice.hover .sic{-moz-transform:translate(-80%, 0);-o-transform:translate(-80%, 0);-webkit-transform:translate(-80%, 0);-khtml-transform:translate(-80%, 0);-ms-transform:translate(-80%, 0);transform:translate(-80%, 0)}.interpretativeEdition .choice:hover .reg,.interpretativeEdition .choice.hover .reg{text-decoration:underline}.interpretativeEdition .choice .sup{line-height:20px;vertical-align:20%}.interpretativeEdition .choice .under{line-height:20px;vertical-align:-20%}.interpretativeEdition .choice .sic{display:inline-table}.interpretativeEdition .choice .sic:before,.interpretativeEdition .choice .sic:after{content:""}.interpretativeEdition .choice .sic{font-size:80%;position:absolute;line-height:16px;display:none;background:#f99069;border:1.5px solid black;border-radius:3px;-moz-box-shadow:2px 2px 2px #7e7067;-o-box-shadow:2px 2px 2px #7e7067;-webkit-box-shadow:2px 2px 2px #7e7067;-khtml-box-shadow:2px 2px 2px #7e7067;-ms-box-shadow:2px 2px 2px #7e7067;box-shadow:2px 2px 2px #7e7067;padding:5px 8px;margin-top:30px}.interpretativeEdition .choice .sic:before{content:url('+b+');left:15%;position:absolute;top:-13px}.interpretativeEdition .choice .corr{color:#934d4d}.interpretativeEdition .choice .corr:hover,.interpretativeEdition .choice .corr.hover{color:#561c0a}.interpretativeEdition .choice:hover .sic,.interpretativeEdition .choice.hover .sic{display:inline;min-width:20px;text-align:center}.interpretativeEdition .choice:hover .corr,.interpretativeEdition .choice.hover .corr{text-decoration:underline}.interpretativeEdition .mapping[data-type="interpretative"],.interpretativeEdition .mapping[data-type="reg"],.interpretativeEdition .mapping[data-type="normalized"]{display:inline}.interpretativeEdition .attachment{border:1px solid black;padding:5px 0px 0px 10px}.interpretativeEdition .ex{font-style:italic}.interpretativeEdition .lineN{color:grey;font-size:0.8em}.interpretativeEdition .resp{font-weight:bold}.interpretativeEdition .red{color:red}.interpretativeEdition .hi[data-rend="7init"]{font-size:140%}.interpretativeEdition .hi[data-rend="init3.1"]{font-size:120%}.interpretativeEdition .hi[data-rend="cap"]{text-transform:uppercase}.interpretativeEdition .hi[data-rend="double"]{font-size:120%}.interpretativeEdition .ex{font-style:italic}.interpretativeEdition .zone{margin-bottom:5px}.interpretativeEdition .p{display:block}.interpretativeEdition .center,.interpretativeEdition [rend="center"]{text-align:center;width:92%;display:inline-table;background:#fff}.interpretativeEdition .right,.interpretativeEdition [rend="right"]{text-align:right;display:inline-table;background:#fff}.interpretativeEdition .left,.interpretativeEdition [rend="left"]{display:inline-table}.interpretativeEdition .subst{position:relative;margin:0px;padding:0px}.interpretativeEdition .del:before{content:"[["}.interpretativeEdition .del:after{content:"]]"}.interpretativeEdition .add:before{content:"|"}.interpretativeEdition .add:after{content:"|"}.highlight{border:1px solid #4c2f2f;background-color:#c67261;opacity:0.4;filter:alpha(opacity=40)}.selectedHighlight{filter:alpha(opacity=50);border:1px solid #4c2f2f;background-color:#9c4837;opacity:0.5}.nohighlight{display:none}div.hotspot{filter:alpha(opacity=50);border:1px solid #4c2f2f;background-color:#9c4837;opacity:0.5}div.hotspot:hover{cursor:help}a.hotspot{width:30px;height:30px}img.hotspot{width:30px !important;height:30px !important;display:block !important}div.hotspot-dida{background-color:#ffffff;color:#000000;border:2px solid #4e443c;border-radius:2px;padding:0;text-align:left;box-shadow:0px 1px 4px rgba(0,0,0,0.7)}div.hotspot-dida-title{height:25px;margin:0;text-align:center;width:100%;background:#263238;color:#fff;padding:0px 2px;opacity:1}div.hotspot-dida-body{font-size:16px;height:80%;overflow-y:auto;border:none !important;padding:6px !important}div#osd-img{color:#ECEFF1;background:#000;overflow:hidden;text-align:center;padding:0;height:100%}div#osd-img * img{display:block !important}.fa-times{float:right}.fa-times:hover{cursor:pointer}.leaf{stroke:#ffffff;stroke-width:2pt;left:50px;fill:none;stroke-linecap:round}.leaf:hover{stroke:#d3d3d3}.leaf:active{stroke:#000000}.missingLeaf{stroke:#D3D3D3;stroke-width:1pt;fill:none;stroke-linecap:round}.replacedLeaf{stroke:#000000;stroke-dasharray:0.25, 2;stroke-width:1pt;fill:none;stroke-linecap:round}.addedLeaf{stroke:#000000;stroke-dasharray:0.8, 2;stroke-width:0.8pt;fill:none;stroke-linecap:square}.addedLeaf2{stroke:#000000;stroke-dasharray:0.8, 2;stroke-width:1.8pt;fill:none}.notLeaf{stroke:transparent;stroke-width:0.8pt;fill:none;stroke-linecap:square}.glued{stroke:grey;stroke-width:0.5;stroke-linecap:round}@font-face{font-family:\'Junicode\';src:url('+o+") format(\"woff\");font-weight:normal;font-style:normal}@font-face{font-family:'Junicode-bold';src:url("+r+") format(\"woff\");font-weight:bold;font-style:normal}@font-face{font-family:'Junicode-italic';src:url("+a+") format(\"woff\");font-weight:normal;font-style:italic}@font-face{font-family:'evt';src:url("+s+");src:url("+l+') format("embedded-opentype"),url('+c+') format("truetype"),url('+u+') format("woff"),url('+d+") format(\"svg\");font-weight:normal;font-style:normal}@font-face{font-family:'evtbis-icons';src:url("+p+");src:url("+h+') format("embedded-opentype"),url('+f+') format("truetype"),url('+g+') format("woff"),url('+m+') format("svg");font-weight:normal;font-style:normal}[class^="icon-"],[class*=" icon-"]{font-family:"evt" !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[class^="iconbis-"],[class*=" iconbis-"]{font-family:"evtbis-icons" !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-evt_3dhop:before{content:"\\e800"}.icon-evt_add:before{content:"\\e900"}.icon-evt_advanced-search:before{content:"\\f013"}.icon-evt_align:before{content:"\\e937"}.icon-evt_book:before{content:"\\e901"}.icon-evt_bookmark-alt:before{content:"\\e902"}.icon-evt_bookmark-alt2:before{content:"\\e938"}.icon-evt_bookmark:before{content:"\\e903"}.icon-evt_bookreader-alt:before{content:"\\e939"}.icon-evt_bookreader:before{content:"\\e904"}.icon-evt_books:before{content:"\\e905"}.icon-evt_case-sensitive:before{content:"\\e93f"}.icon-evt_close:before{content:"\\e8f6"}.icon-evt_code:before{content:"\\e907"}.icon-evt_collation:before{content:"\\e908"}.icon-evt_color-legend:before{content:"\\e909"}.icon-evt_color-lens:before{content:"\\e90a"}.icon-evt_colors-fill:before{content:"\\e90b"}.icon-evt_copyright:before{content:"\\e90c"}.icon-evt_drop-down:before{content:"\\e90d"}.icon-evt_drop-up:before{content:"\\e90e"}.icon-evt_exact-match:before{content:"\\e940"}.icon-evt_filter:before{content:"\\e90f"}.icon-evt_find-in-page:before{content:"\\e910"}.icon-evt_font-size-minus-alt:before{content:"\\e93a"}.icon-evt_font-size-minus:before{content:"\\e914"}.icon-evt_font-size-plus-alt:before{content:"\\e915"}.icon-evt_font-size-plus:before{content:"\\e916"}.icon-evt_font-size-reset-alt:before{content:"\\e93b"}.icon-evt_font-size-reset:before{content:"\\e917"}.icon-evt_font-size:before{content:"\\e93d"}.icon-evt_fragment:before{content:"\\e918"}.icon-evt_heatmap-alt:before{content:"\\e919"}.icon-evt_heatmap:before{content:"\\e91a"}.icon-evt_help-alt:before{content:"\\e91b"}.icon-evt_help:before{content:"\\e91c"}.icon-evt_hotspot:before{content:"\\e91d"}.icon-evt_imgtxt:before{content:"\\e91e"}.icon-evt_info-alt-r:before{content:"\\e91f"}.icon-evt_info-alt-sq:before{content:"\\e920"}.icon-evt_info-alt:before{content:"\\e921"}.icon-evt_info:before{content:"\\e922"}.icon-evt_keyboard:before{content:"\\f11c"}.icon-evt_link:before{content:"\\e923"}.icon-evt_list-alt:before{content:"\\e924"}.icon-evt_list:before{content:"\\e925"}.icon-evt_mail:before{content:"\\e926"}.icon-evt_menu:before{content:"\\e927"}.icon-evt_more-horiz:before{content:"\\e928"}.icon-evt_more-vert:before{content:"\\e929"}.icon-evt_next:before{content:"\\f105"}.icon-evt_note:before{content:"\\e92a"}.icon-evt_paragraph:before{content:"\\e92b"}.icon-evt_pin-alt-on:before{content:"\\e92c"}.icon-evt_pin-off:before{content:"\\e92d"}.icon-evt_pin-on:before{content:"\\e92e"}.icon-evt_previous:before{content:"\\f104"}.icon-evt_search-results-close:before{content:"\\f103"}.icon-evt_search-results-open:before{content:"\\f102"}.icon-evt_search:before{content:"\\e92f"}.icon-evt_thumbnails:before{content:"\\e93e"}.icon-evt_txt:before{content:"\\e930"}.icon-evt_txttxt:before{content:"\\e931"}.icon-evt_viscoll:before{content:"\\e801"}.icon-evt_zoom-fit:before{content:"\\e932"}.icon-evt_zoom-in:before{content:"\\e935"}.icon-evt_zoom-out:before{content:"\\e934"}.icon-evt_zoom-reset:before{content:"\\e933"}.icon-evt_zoom-reset1:before{content:"\\e93c"}.icon-evt_zoom:before{content:"\\e936"}.iconbis-evt_srctxt:before{content:"\\e945"}.iconbis-evt_versions:before{content:"\\e944"}.iconbis-evt_quote-left:before{content:"\\e943"}.iconbis-evt_quote-right:before{content:"\\e941"}.iconbis-evt_fork:before{content:"\\e942"}.iconbis-evt_analogue:before{content:"\\e93f"}.iconbis-evt_schema:before{content:"\\e93f"}.fa-rotate-45{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.fw{display:block;width:100%}.fw[data-place="top-middle"]{text-align:center}.fw[data-place="top-right"]{text-align:right}.fw[data-place="top-left"]{text-align:left}[data-type="hot-spot"]{display:none}.bibl .editor{font-style:italic}.bibl .title{font-weight:bold}.del{text-decoration:none}div.div{display:block;margin:15px 0;background:inherit}.emph{font-style:italic;font-weight:bolder}.encodingError{font-variant:small-caps;background:url('+y+') repeat-x}.encodingError::before{content:"[ERROR]"}.figure{display:block;text-align:center;margin:10px 0px}.figure .desc{font-size:90%}.front .titlePage{text-align:center;font-weight:bold;margin-bottom:20px;font-size:110%;display:block}.head{display:block;font-weight:bold;margin-bottom:1.5rem}.head .ng-scope{font-weight:normal}.l{display:inline;background:inherit}.l.inApparatus{display:inline-block}.l.inApparatus::after{content:" // "}.l-block{display:block}.l[data-rend=\'indent\']:not(.l-hasLineN),.l-hasLineN[data-rend=\'indent\'] .lineContent{text-indent:1.5rem}.l .lineContent{display:inline-block}.l-hasLineN[data-rend=\'indent\']{text-indent:0 !important}.l-indent:not(.l-hasLineN){margin-left:34px}.l .lineN{text-align:right;color:grey;font-size:0.8em;margin-right:10px;height:100%;width:24px !important;display:inline-block}.lacuna,.fragment{font-variant:small-caps;font-size:60%;vertical-align:10%;margin-left:3px}.lacunaStart,.lacunaEnd{display:none}.lb .lineN{text-align:right;color:grey;font-size:0.8em;margin-right:10px;height:100%;width:24px !important;display:inline-block}.fragment{min-height:10px;height:10px;position:relative;display:block;padding:8px 0px 39px 0px;min-width:100%;width:109.5%;left:-5%;margin:0}.fragment-start{background:#bdbdbd;background:-moz-linear-gradient(top, #eceff1 0%, #bdbdbd 100%);background:-webkit-linear-gradient(top, #eceff1 0%, #bdbdbd 100%);background:linear-gradient(to bottom, #eceff1 0%, #bdbdbd 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'$box-witness-background-color\', endColorstr=\' #bdbdbd\', GradientType=0);margin-bottom:20px;-moz-box-shadow:inset 0px -10px 9px -8px #000;-o-box-shadow:inset 0px -10px 9px -8px #000;-webkit-box-shadow:inset 0px -10px 9px -8px #000;-khtml-box-shadow:inset 0px -10px 9px -8px #000;-ms-box-shadow:inset 0px -10px 9px -8px #000;box-shadow:inset 0px -10px 9px -8px #000}.fragment-start::after{background:linear-gradient(-45deg, #eceff1 8px, transparent 0),linear-gradient(45deg, #eceff1 8px, transparent 0);background-position:left-bottom;background-repeat:repeat-x;background-size:16px 16px;content:" ";display:block;position:absolute;bottom:0px;left:0px;width:100%;height:16px}.fragment-end{background:#bdbdbd;background:-moz-linear-gradient(top, #bdbdbd 0%, #eceff1 100%);background:-webkit-linear-gradient(top, #bdbdbd 0%, #eceff1 100%);background:linear-gradient(to bottom, #bdbdbd 0%, #eceff1 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\' #bdbdbd\', endColorstr=\'$box-witness-background-color\', GradientType=0);margin-top:20px;-moz-box-shadow:inset 0px 10px 9px -8px #000;-o-box-shadow:inset 0px 10px 9px -8px #000;-webkit-box-shadow:inset 0px 10px 9px -8px #000;-khtml-box-shadow:inset 0px 10px 9px -8px #000;-ms-box-shadow:inset 0px 10px 9px -8px #000;box-shadow:inset 0px 10px 9px -8px #000}.fragment-end::before{top:0px;background-position:left top;background:linear-gradient(-135deg, #eceff1 8px, transparent 0),linear-gradient(135deg, #eceff1 8px, transparent 0);background-position:left-top;background-repeat:repeat-x;background-size:16px 16px;content:" ";display:block;position:absolute;top:0px;left:0px;width:100%;height:16px}.lacuna{min-height:10px;height:10px;position:relative;display:block;padding:8px 0px 39px 0px;min-width:100%;width:109.5%;left:-5%;margin:20px 0;background:#bdbdbd;text-align:center;padding-top:20px}.lacuna::after{background:linear-gradient(-45deg, #eceff1 8px, transparent 0),linear-gradient(45deg, #eceff1 8px, transparent 0);background-position:left-bottom;background-repeat:repeat-x;background-size:16px 16px;content:" ";display:block;position:absolute;bottom:0px;left:0px;width:100%;height:16px}.lacuna::before{top:0px;background-position:left top;background:linear-gradient(-135deg, #eceff1 8px, transparent 0),linear-gradient(135deg, #eceff1 8px, transparent 0);background-position:left-top;background-repeat:repeat-x;background-size:16px 16px;content:" ";display:block;position:absolute;top:0px;left:0px;width:100%;height:16px}.lacunaApp::before{top:1px;position:relative}.list{margin-top:1.5%;margin-bottom:1.5%;margin-left:2%;display:block}.list .item{display:list-item;position:relative;left:20px}.listChange .change{display:list-item;margin-left:1.5rem}.msDesc ::before{font-weight:bold}.msDesc .handDesc,.msDesc .decoDesc{display:block;margin-bottom:8px}.msDesc .history:before,.msDesc .handDesc:before,.msDesc .decoDesc:before{content:"\\a";display:inline-block;white-space:pre}.msDesc .msIdentifier{display:block;margin-bottom:8px}.msDesc .msIdentifier .settlement{display:block}.msDesc .msIdentifier .repository{display:block}.msDesc .msIdentifier .idno{display:block}.msDesc .msContents .msItem .author,.msDesc .msContents .msItem .title,.msDesc .msContents .msItem .textLang,.msDesc .msContents .msItem .colophon{display:block}.msDesc .physDesc{display:block;margin-top:8px}.msDesc .history{display:block;margin-top:8px}.msDesc .quote{font-style:italic}.msDesc .quote::before{content:\'Â«\';font-weight:normal}.msDesc .quote::after{content:\'Â»\'}.omission{font-style:italic}.omission::before{content:"[om.]"}.p{display:block;margin-bottom:5px}.pb{display:block;text-align:center;font-size:80%}.pb::before{content:\'\\2014\';margin-right:5px}.pb::after{content:\' \\2014\';margin-left:5px}.speaker{font-variant:small-caps;font-weight:bold;font-size:90%}.speaker::after{content:":"}.stage{font-style:italic;font-size:90%;display:block;text-align:center}.witnesses-lem,.variance-lem{font-weight:bold}.witnesses-rdg,.variance-rdg{font-style:italic}[data-rend="italic"],.i{font-style:italic !important}[data-rend="bold"]{font-weight:bold !important}[data-rend="underline"]{text-decoration:underline !important}[data-rendition="pencil"]{font-weight:lighter;color:#a9a9a9;text-shadow:0px 0px 1px #bfbfbf}.address,.addrline{display:block;font-size:90%}.encodingdesc .editorialdecl{display:block}.encodingdesc .editorialdecl:before,.encodingdesc .editorialdecl>*:before{font-variant:small-caps;color:#666;font-size:90%}.encodingdesc .editorialdecl .correction,.encodingdesc .editorialdecl .hyphenation,.encodingdesc .editorialdecl .interpretation,.encodingdesc .editorialdecl .normalization,.encodingdesc .editorialdecl .punctuation,.encodingdesc .editorialdecl .quotation,.encodingdesc .editorialdecl .segmentation,.encodingdesc .editorialdecl .stdVals{display:block}.encodingdesc .projectDesc,.encodingdesc .refsDecl{display:block;margin-top:14px}.fileDesc *:before{font-variant:small-caps;color:#666;font-size:90%}.fileDesc .author{display:block}.fileDesc .author:before{content:""}.fileDesc .editor{display:block}.fileDesc .notesStmt{display:block}.fileDesc .notesStmt .note{display:block;margin-top:10px}.fileDesc .publicationStmt{display:block}.fileDesc .publicationStmt>*{display:block}.fileDesc .publicationStmt:before,.fileDesc .publicationStmt>*:before{font-variant:small-caps;color:#666;font-size:90%}.fileDesc .respStmt,.fileDesc .seriesStmt{display:block}.fileDesc .sourceDesc{display:block}.fileDesc .sourceDesc .listwit,.fileDesc .sourceDesc .listbibl{display:none}.fileDesc .titleStmt{margin-bottom:10px;margin-left:25%}.fileDesc .titleStmt .title{display:inline;text-align:center;font-weight:bold;font-size:1.2em;margin-bottom:10px}.fileDesc .titleStmt [data-type=\'sub\']{font-weight:bold;font-size:1em}.fileDesc .titleStmt [data-type=\'main\']:after{content:" -"}.funder,.sponsor,.principal{display:block;margin-top:14px}.funder:before,.sponsor:before,.principal:before{display:block;border-bottom:1px dotted #666;margin-bottom:5px}.funder .orgname,.sponsor .orgname,.principal .orgname{display:block}.interpGrp .interp{display:list-item;margin-left:25px}.profiledesc .langUsage .language{display:block}.profiledesc .particDesc .listPerson,.profiledesc .particDesc .person{display:block}.profiledesc .particDesc .listPerson *,.profiledesc .particDesc .person *{margin:0;display:inline}.profiledesc .particDesc .listPerson .head,.profiledesc .particDesc .person .head{display:block;font-variant:small-caps;margin:10px 0 5px 0}.profiledesc .particDesc .person,.profiledesc .particDesc .personGrp{margin-bottom:10px;display:block}.profiledesc .particDesc .person .state:before,.profiledesc .particDesc .personGrp .state:before{content:"- "}.profiledesc .particDesc .person .sex:before,.profiledesc .particDesc .personGrp .sex:before{content:" ("}.profiledesc .particDesc .person .sex:after,.profiledesc .particDesc .personGrp .sex:after{content:")"}.revisionDesc .change{display:list-item;margin-bottom:10px;margin-left:25px}.respStmt .name:not(:last-child):after,.respStmt .persName:not(:last-child):after{content:\', \'}.respStmt .name:last-child:after,.respStmt .persName:last-child:after{content:\'. \'}.variantEncoding{display:block}.fileDesc .listWit,.fileDesc .listPerson{display:none}.gi,.val{font-style:italic}.em{font-weight:bolder;font-style:italic}.gap[data-unit="chars"][data-quantity=\'1\']:before{content:"[."}.gap[data-unit="chars"][data-quantity=\'1\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'2\']:before{content:"[.."}.gap[data-unit="chars"][data-quantity=\'2\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'3\']:before{content:"[..."}.gap[data-unit="chars"][data-quantity=\'3\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'4\']:before{content:"[...."}.gap[data-unit="chars"][data-quantity=\'4\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'5\']:before{content:"[....."}.gap[data-unit="chars"][data-quantity=\'5\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'6\']:before{content:"[......"}.gap[data-unit="chars"][data-quantity=\'6\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'7\']:before{content:"[......."}.gap[data-unit="chars"][data-quantity=\'7\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'8\']:before{content:"[........"}.gap[data-unit="chars"][data-quantity=\'8\']:after{content:"]"}.gap[data-unit="chars"][data-quantity=\'unknown\']:before{content:"[..."}.gap[data-unit="chars"][data-quantity=\'unknown\']:after{content:"]"}#tdhop{font-family:Junicode, Times, serif;position:absolute;width:100%;height:100%;max-width:100%;max-height:100%;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}#tdhlg{left:85% !important;top:95% !important;position:absolute;width:105px;height:13px;overflow:hidden;cursor:pointer;color:#909090;text-align:center;text-decoration:none;font-family:verdana;font-style:italic;font-size:10px;line-height:13px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}#toolbar{position:absolute;left:10px;margin-top:10px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}#toolbar img{margin-bottom:2px;width:32px;height:32px;opacity:0.5;cursor:pointer;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.output-box{position:absolute;display:none;border-radius:5px;margin:0;height:48px;padding:0px 5px 2px 5px;cursor:default;background-color:rgba(125,125,125,0.5);color:#f8f8f8;text-decoration:none;text-align:center;font-family:verdana;font-style:italic;font-size:12px;line-height:20px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.output-text{padding:0px 5px 0px 5px;cursor:text;-webkit-user-select:text;-webkit-touch-callout:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.output-input{vertical-align:middle;cursor:pointer;height:15px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.output-table{margin:0;width:100%;color:#f8f8f8;text-align:center;font-style:italic;font-size:12px;line-height:15px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.output-table img{height:25px;cursor:pointer;background-color:rgba(125,125,125,0.25);border:1px outset;border-radius:5px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;user-drag:none;-webkit-user-drag:none}.output-table img:hover{background-color:rgba(125,125,125,0.8)}.output-box hr{margin:0 0 3px 0;border:0;height:1px;background-image:linear-gradient(to right, rgba(0,0,0,0), rgba(225,225,225,0.75), rgba(0,0,0,0))}#draw-canvas{width:100%;height:100%;background-repeat:no-repeat;background-position:center top;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;outline:none;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}input[type="range"].output-input{padding:0;width:125px}.output-input::-ms-tooltip{display:none}#measurebox{position:absolute;visibility:hidden;overflow:hidden;border-radius:5px;right:10;top:10;margin:0;width:105px;height:26px;cursor:default;color:#909090;text-decoration:none;text-align:center;font-family:verdana;font-style:italic;font-size:10px;line-height:13px;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}#measure-output{cursor:text;-webkit-user-select:text;-webkit-touch-callout:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#measure-box{position:absolute;top:485px;left:70px}#pickpoint-box{position:absolute;top:555px;left:70px}#sections-box{position:absolute;top:620px;left:70px}#lightcontroller{position:absolute}#arrows{display:block}.models{background-color:rgba(50,50,50,0.5);padding:1%;border-radius:10px;box-shadow:1px 1px 10px #f8f8f8;margin-bottom:2px;margin-left:3px}.move_{background-color:rgba(50,50,50,0.5);padding:1.5%;border-radius:6px;box-shadow:1px 1px 10px #f8f8f8}.up{transform:rotate(270deg)}.dawn{transform:rotate(90deg)}.left{transform:rotate(180deg)}#compassCanvass{font-family:Junicode, Times, serif}.dropbtn{border-radius:2px;font-family:Junicode, Times, serif;height:28px;min-width:80px;position:relative;left:0;display:inline-block;background:#eceff1;color:#263238;font-size:1em;text-align:left;overflow:visible;box-shadow:0px 2px 4px rgba(0,0,0,0.4);padding:3px}.dropdown{position:relative;display:inline-block;margin:0 4px;padding-right:24px}.dropdown-content{display:none;position:absolute;background-color:#f1f1f1;min-width:160px;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);z-index:1;color:#263238}.dropdown-content div{color:black;padding:12px 18px;text-decoration:none;display:block}.dropdown-content div:hover{background-color:#263238;color:#fff}.dropdown:hover .dropdown-content{display:block}.open_options{height:28px;width:24px;position:absolute;right:0;top:0;opacity:0.5;border-left:1px solid #b0bec5;border-radius:0 2px 2px 0;background:#b0bec5;text-align:center;cursor:pointer}.option_container{display:none;height:auto;max-height:170px;min-width:100%;width:auto;position:absolute;left:0;top:30px;overflow-y:auto;background:#eceff1;z-index:400;-o-box-shadow:0 2px 5px rgba(0,0,0,0.4);-khtml-box-shadow:0 2px 5px rgba(0,0,0,0.4);-ms-box-shadow:0 2px 5px rgba(0,0,0,0.4);box-shadow:0 2px 5px rgba(0,0,0,0.4)}[data-type="3D_Desc"] span.label-physDesc.projectInfo-sectionSubHeader.ng-binding{display:none}[data-type="3D_Desc"] .head[data-type="main"],[data-type="3D_Desc"] .head{font-weight:bolder;font-size:x-large;color:#a15517 !important}[data-type="3D_Desc"] .head[data-type="main"]:hover,[data-type="3D_Desc"] .head:hover{text-decoration:underline}[data-type="3D_Desc"] .objectName{font-weight:bolder;font-size:larger;color:#c0671e !important}[data-type="3D_Desc"] .object:hover .objectName{text-decoration:underline}[data-type="3D_Desc"] .object:hover{background-color:#ececec;opacity:90%;z-index:1}.object{display:block}#cover{display:none;position:fixed;z-index:20;width:100%;height:100%;top:0;left:0;padding-bottom:20px;background-color:rgba(50,50,50,0.5)}.panel{display:none;width:550px;font-size:80%;font-family:verdana;font-style:italic;color:#f8f8f8;text-align:center;background-color:rgba(50,50,50,0.97);border:2px solid #f8f8f8;border-radius:10px;box-shadow:1px 1px 10px #f8f8f8;-webkit-box-shadow:1px 1px 10px #f8f8f8;-moz-box-shadow:1px 1px 10px #f8f8f8;cursor:default;text-decoration:none;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none}.close,.close_on{position:relative;margin-left:99%;margin-top:-25px;width:25px;height:25px;background-color:#323232;border:2px solid #f8f8f8;border-radius:50%;box-shadow:1px -1px 10px #f8f8f8;-webkit-box-shadow:1px -1px 10px #f8f8f8;-moz-box-shadow:1px -1px 10px #f8f8f8;-webkit-user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;-ms-touch-action:none}.close,.close_on,:hover{cursor:pointer}.secondary-container{position:absolute}.btnGroup{display:inline}.btnGroup .fontSizeBtnGroup{position:absolute;font-size:1.6em;float:left;bottom:45px;left:147px;padding:10px;background:#263238 none repeat scroll 0% 0%;text-align:center;box-shadow:0px -1px 4px rgba(0,0,0,0.6)}.filters-in-box{text-align:center;position:absolute;bottom:44px;width:100%;height:auto;padding:5px;left:3px;right:2px;width:calc(100% - 21px);background:#fff;-moz-box-shadow:0px -7px 6px -4px #fff;-o-box-shadow:0px -7px 6px -4px #fff;-webkit-box-shadow:0px -7px 6px -4px #fff;-khtml-box-shadow:0px -7px 6px -4px #fff;-ms-box-shadow:0px -7px 6px -4px #fff;box-shadow:0px -7px 6px -4px #fff}.filters-in-box span.filter-group{display:inline}.filters-in-box span.filter-group::after{content:"-"}.filters-in-box span.filter-group:last-child::after{content:""}.filters-in-box span.filter-group span.filter-value{display:inline-block;background:#cf00ff;border-radius:2px;font-size:85%;margin:4px;padding:0px 5px;font-variant:small-caps;cursor:pointer;min-width:50px;text-align:center;-moz-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-o-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-webkit-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-khtml-box-shadow:0px 1px 3px rgba(0,0,0,0.3);-ms-box-shadow:0px 1px 3px rgba(0,0,0,0.3);box-shadow:0px 1px 3px rgba(0,0,0,0.3)}.filters-in-box span.filter-group span.filter-value:hover{opacity:0.9}.filters-in-box span.filter-group span.filter-value::after{content:"x";color:#333;font-weight:lighter;font-size:80%;top:-1px;position:relative}.pinnedTypeTitle{display:block;font-variant:small-caps;font-weight:bold;margin-bottom:0.5rem;margin-top:1rem}.alert-msg{background:rgba(0,0,0,0.1);display:block;font-size:90%;text-align:center;padding:10px}.alert-msg-error{background:rgba(255,0,0,0.1)}.globalMenu{width:auto;display:inline-flex;align-items:center;position:absolute;right:8px;top:0px;height:54px;padding:10px;font-size:100%}.globalMenu>button-switch:first-child{position:relative;top:-1px}.globalMenu button-switch{margin:0}.globalMenu button-switch .buttonSwitch{height:0;display:block !important;padding:0 3px;background:none;box-shadow:none;border-radius:0;width:auto}.globalMenu button-switch .buttonSwitch-label{font-variant:small-caps;font-size:80%;top:0;color:#ECEFF1}.globalMenu button-switch .buttonSwitch-icon{color:#ECEFF1;font-size:1em;top:-1px}.globalMenu button-switch .buttonSwitch:hover,.globalMenu button-switch .buttonSwitch:hover>*{color:#FFC107}.globalMenu button-switch.mode-view{margin:0px 1px}.globalMenu button-switch.mode-view[data-icon="reading-txt"]{margin-right:-2px}.globalMenu button-switch.mode-view .buttonSwitch{width:auto;padding:0}.globalMenu button-switch.mode-view .buttonSwitch-active .icon,.globalMenu button-switch.mode-view .buttonSwitch:hover .icon{color:#FFC107}.globalMenu button-switch.mode-view .buttonSwitch-icon{font-size:1.2em;margin-right:3px;top:0}.globalMenu button-switch.mode-view .buttonSwitch .iconbis-evt_versions,.globalMenu button-switch.mode-view .buttonSwitch .iconbis-evt_srctxt{font-size:0.85em;top:-4px}.globalMenu button-switch:last-child{margin-right:0}.globalMenu .viewModeMenu{display:flex}.global-loading-container,.global-msg-container{position:absolute;top:0;left:0;width:100%;height:100%;z-index:9999;background:#e5e5e5;font-size:60%}.global-loading-container .global-msg,.global-msg-container .global-msg{height:auto;text-align:center;padding:20px}.global-loading-container .global-msg h1,.global-msg-container .global-msg h1{font-size:2.5em}.popup-container{height:-moz-calc(100% - 99px);height:-o-calc(100% - 99px);height:-webkit-calc(100% - 99px);height:calc(100% - 99px);overflow-y:auto;position:absolute;width:100%;left:0;bottom:45px;background-color:#607d8b;border:1px solid #ffffff;border-left:none;border-right:none;z-index:999;top:54px}.popup-container.noNavBar{top:100px;bottom:0;border:none;left:4px;height:-moz-calc(100% - 99px - 4px - 1px);height:-o-calc(100% - 99px - 4px - 1px);height:-webkit-calc(100% - 99px - 4px - 1px);height:calc(100% - 99px - 4px - 1px)}.popup-container.noNavBar.thumb_cont{width:-moz-calc(50% - 8px);width:-o-calc(50% - 8px);width:-webkit-calc(50% - 8px);width:calc(50% - 8px)}.popup-container.noNavBar.viscoll_cont{top:99px;width:-moz-calc(100% - 7px);width:-o-calc(100% - 7px);width:-webkit-calc(100% - 7px);width:calc(100% - 7px);height:-moz-calc(100% - 99px - 1px);height:-o-calc(100% - 99px - 1px);height:-webkit-calc(100% - 99px - 1px);height:calc(100% - 99px - 1px)}.global-loading-container{display:block}.viewMode .loading,.global-loading-container .loading{background:rgba(0,0,0,0.1)}.viewMode .loading .loader,.global-loading-container .loading .loader{font-size:2.5em;color:#263238;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.viewMode box:last-child .box,.global-loading-container box:last-child .box{margin:0}pre{white-space:pre-wrap;font-size:80%}.colorLegend{padding:15px}.colorLegend-filter-name{display:block;margin:10px 0 5px;font-weight:bold;font-variant:small-caps;text-transform:uppercase}.colorLegend-filter-value{display:block}.colorLegend-filter-color{display:inline-block;min-height:15px;min-width:15px;margin-right:10px;vertical-align:top}.availableWitnesses-selector,.availableVersions-selector{position:absolute;z-index:9999;display:block;right:0;background:#fff;height:auto;top:50%;margin-right:9px;transform:translate(0, -50%);min-width:150px;max-height:80%;overflow-x:hidden;overflow-y:auto;-moz-box-shadow:0px 0px 4px 0px rgba(0,0,0,0.6);-o-box-shadow:0px 0px 4px 0px rgba(0,0,0,0.6);-webkit-box-shadow:0px 0px 4px 0px rgba(0,0,0,0.6);-khtml-box-shadow:0px 0px 4px 0px rgba(0,0,0,0.6);-ms-box-shadow:0px 0px 4px 0px rgba(0,0,0,0.6);box-shadow:0px 0px 4px 0px rgba(0,0,0,0.6)}.availableWitnesses-selector>span,.availableVersions-selector>span{display:block;padding:10px;border-bottom:1px solid #f0f0f0;cursor:pointer}.availableWitnesses-selector>span:hover,.availableVersions-selector>span:hover{background:#f0f0f0}.availableWitnesses-selector.left75,.availableVersions-selector.left75{position:absolute;right:auto;left:75%;transform:translate(-50%, -45%)}.mainMenu{position:absolute;text-align:left;background-color:white;padding:9px 0px;z-index:9999;max-width:340px;overflow:hidden;border-radius:3px;top:54px;right:4px;-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,0.26), 0 2px 10px 0 rgba(0,0,0,0.16);-o-box-shadow:0 2px 5px 0 rgba(0,0,0,0.26), 0 2px 10px 0 rgba(0,0,0,0.16);-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,0.26), 0 2px 10px 0 rgba(0,0,0,0.16);-khtml-box-shadow:0 2px 5px 0 rgba(0,0,0,0.26), 0 2px 10px 0 rgba(0,0,0,0.16);-ms-box-shadow:0 2px 5px 0 rgba(0,0,0,0.26), 0 2px 10px 0 rgba(0,0,0,0.16);box-shadow:0 2px 5px 0 rgba(0,0,0,0.26), 0 2px 10px 0 rgba(0,0,0,0.16)}.mainMenu ul{margin:0;list-style:none;padding:0;color:#4b4b4b}.mainMenu ul li>span{color:#444444;font-size:1.1rem;height:40px;padding-top:13px;padding-right:58px;padding-left:20px;display:block;cursor:pointer;box-sizing:border-box;white-space:nowrap}.mainMenu ul li>span .icon{margin-right:14px}.mainMenu ul li:hover{background-color:#f4f5f5;cursor:pointer}.mainMenu ul li.inactive *{background-color:#f5f5f5;color:#ccc;cursor:default}.mainMenu ul li a{color:#444444;text-decoration:none}.mainMenu img.flag{height:18px;width:18px;border-radius:100px;border:1px solid #4e443c;display:inline-block;margin:0px 4px;position:relative;top:2px;cursor:pointer;opacity:0.5}.mainMenu img.flag.active{cursor:default;opacity:1}.mainMenu img.flag:hover{opacity:1}.projectInfo-sectionHeader{font-weight:bold;display:block;margin:15px 0 5px;font-variant:small-caps;text-align:center}.projectInfo-sectionSubHeader{display:block;border-bottom:1px dotted #666;margin-bottom:5px;font-variant:small-caps;color:#000000;font-size:90%;display:block;margin-top:14px}.projectInfo-blockLabel,.projectInfo-inlineLabel{font-variant:small-caps;color:#666;font-size:90%}.projectInfo-blockLabel{display:block;margin-bottom:2px}.projectInfo-inlineLabel{display:inline}.projectInfo-inlineLabel+.p{display:inline}.p .projectInfo-inlineLabel{display:none}.hidden{display:none}.noPadding{padding:0 !important}.noPadding>*{padding:0 !important}.evtlb{display:block}.evtlb .l{display:inline !important}.zoneInImg{display:none}.zoneInImg.lineHover{border:1px solid #4c2f2f !important;background-color:#c67261 !important;opacity:0.4}.zoneInImg.lineSelected,.zoneInImg.lineSelected.lineHover{border:1px solid #4c2f2f !important;background-color:#9c4837 !important;opacity:0.5}.ITLactive.box-image img{display:none}.ITLactive.box-image .zoneInImg{display:block}.ITLactive .lineHover,.ITLactive .lineHover:after{cursor:pointer;background-color:rgba(230,206,160,0.8) !important;color:#000000}.ITLactive .lineSelected,.ITLactive .lineSelected:after{cursor:pointer;background-color:rgba(213,177,125,0.9) !important;color:#000000}.italic{font-style:italic}.highlighted{background:#ffc !important}.emptyText{padding:0 0.4rem}.emptyText::after{content:"\\00a0"}.front [data-type="footer"]{font-size:95%;padding:10px 0;border-top:1px solid}.evt_note{color:#fff}.evt_note span{padding:2px 5px 2px 3px !important;opacity:10 !important;border-radius:4px !important;font-size:13px !important;top:-8px !important;position:relative !important;text-align:center}.evt_note span.generic{color:#fff;background-color:maroon !important}evt-popover[data-n=""] .evt_note span.generic:before{content:"";padding:0px 4px 4px 4px !important;font-size:1px !important}evt-popover[data-n=""] .evt_note span.generic{margin-right:4px;font-size:10px !important;padding:0px 1px !important;border-radius:100px !important;background-color:#4e443c}.popover_trigger.active:hover{opacity:0.5}.popover_trigger{color:#263238 !important;opacity:10 !important}.evt_note span.comment{color:#fff;background-color:#570e69 !important}.evt_note span.critic{color:#fff;background-color:#18469b !important}.thumbnail{display:inline-block;padding:9px 3px;margin:3px;cursor:pointer}.thumbnail img{height:150px;width:100px;border:2px solid black}.thumbnail.active img{border-color:#FFC107}.thumbnail figcaption{color:white;position:relative;margin-top:-52px;background:rgba(0,0,0,0.2);font-size:0.7em;width:100px;text-align:center}.thumbnail:hover figcaption{background:rgba(0,0,0,0.7) !important}.thumbnail.active{cursor:default}.thumbnail.active figcaption{background:rgba(255,193,7,0.7) !important;color:#000}\n',""])},function(e,t,n){e.exports=n.p+"686a5a67443b412b6b9ac63e2db58bcd.woff"},function(e,t,n){e.exports=n.p+"fbfbf698296891092937591f6e5a7679.woff"},function(e,t,n){e.exports=n.p+"9b9ea5d869129fdbdaa612f564db94c8.woff"},function(e,t,n){e.exports=n.p+"c637cdc45040efa4bd0155d03f844bc2.ttf"},function(e,t,n){e.exports=n.p+"e7c0ddbf4605fa96030b85d8d82d06e4.woff"},function(e,t,n){e.exports=n.p+"4ff090fe95d14327ec8d67aa7957e2c5.svg"},function(e,t){e.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBkYAAAC8AAAAYGNtYXAXGtMIAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5Zm7NHGAAAAF4AAAHoGhlYWQPE/lPAAAJGAAAADZoaGVhCNEE4wAACVAAAAAkaG10eC47AIkAAAl0AAAAOGxvY2ELngl+AAAJrAAAAB5tYXhwABYAaAAACcwAAAAgbmFtZXs1ir4AAAnsAAABwnBvc3QAAwAAAAALsAAAACAAAwPXAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpRQPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6UX//f//AAAAAAAg6Tz//f//AAH/4xbIAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAAEAED/wAPAA8AAGQAiADgASwAAAS4BJy4BJy4BIyEiBhURFBYzITI2NRE0JicnHgEXIzUeARcTFAYjISImNRE0NjMwOgIxFRQWOwEBLgEjISIGFREUFhcRNDYzIS4BA5YRLRkaMxcnKQv+kCEvLyECYCEvDhyFFyUNmhEpF28JB/2gBwkJB3OKcxMN4P7bJykL/pAhLyUbCQcB5wcOAlsXMxoZLREcDi8h/SAhLy8hAfALKSc2FykRmg0lF/1/BwkJBwLgBwngDRMBlhwOLyH9IB0sBQMuBwkGCwAABgBA/8ADwAPAABcAGwAzADcATwBTAAABMzI2PQE0JisBNSMVIyIGHQEUFjsBETMDMxUjAzI2PQE0JisBESMRIyIGHQEUFjsBFTM1JzMVIwMyNj0BNCYrATUjFSMiBh0BFBY7AREzESczFSMDgBAUHBwUEIAQFBwcFBCAgICAsBQcHBQQgBAUHBwUEICAgICwFBwcFBCAEBQcHBQQgICAgAIAHBSgFBzAwBwUoBQc/cADAID+QBwUoBQcAkD9wBwUoBQcwMDAgAFAHBSgFBzAwBwUoBQc/cACQMCAAAIAAABSAyUDdwAPACAAAAEhIgYVERQWMyEyNjURNCYXERQGIyEiJjURNDYzITIWFQKA/iUmNjYmAdsmNTV/YUT+JUVgYEUB20RhAy42Jv4lJjY2JgHbJjZc/iVEYWFEAdtEYWFEAAAABQAA/8AEAAPAACEAJAAoADcAQQAAATIWFREUBiMhIiY9ASEiJjURNDY/AT4BOwEyFh0BPgE7AQUHMwEHMzUTNzUjFRQGKwERITU0NjcBESMVFAYrAREhA8kXICAX/dwXIP7JFyAXEOkQNxftFyARKBDu/smrq/6Tq6twtNsgF+4BJRcQAiLcIBbuAgAC5SEW/UkXICAXpCEWAYAXNxDpEBcgF7sKDXqrAYarq/6PtO7uFyD+k5IXNxD+NAKS7Rcg/pIAAAMAAP/ABAADwAAQACEAPgAAJRE0JiMhIgYVERQWMyEyNjUTERQGIyEiJjURNDYzITIWFScVIzU0JiMhIgYVERQWOwEVIyImNRE0NjMhMhYVA7cLB/2SBwsLBwJuBwtJNiX9kiY2NiYCbiU220oLB/2SBwsLB1xcJTY2JQJuJjYbAm4HCwsH/ZIHCwsHAm79kiU2NiUCbiY2NibcXFwHCwsH/ZIHC0o2JgJuJTY2JQAAAgAAAFIDtwN3ACIARQAAAREUDgIrASImPQE0NjsBMjY9ATQmKwEiJj0BNDY7ATIWFSERFA4CKwEiJj0BNDY7ATI2PQE0JisBIiY9ATQ2OwEyFhUBty5Qaj0kDxYWDyQ9ViEWgC5AQC7bLkACAC5Qaj0kDxYWDyQ9ViEWgC5AQC7bLkADCf5uPWpQLhYPSQ8WVT0SFyBALtsuQEAu/m49alAuFg9JDxZVPRIXIEAu2y5AQC4AAgAA/8ADgAPAABUAIwAAARUUBgcBDgEHIxc3Iz4BNwE+AT0BIxMuAS8BBxceARcjFzcjAoAdG/6WKy8CgsDAfwMbGQFqLjCAfgIvK0dbSBgcA3/AwIIDwHwmRxv+mCttPMDAIz4ZAWgtdUB8/MA8bSxGWkcZPiPAwAAAAAIAAABSA7cDdwAiAEUAAAEVFAYrASImNRE0PgI7ATIWHQEUBisBIgYdARQWOwEyFhUhFRQGKwEiJjURND4COwEyFh0BFAYrASIGHQEUFjsBMhYVAbdALtsuQC5Qaj0kDxYWDyQ9ViAXgC5AAgBALtsuQC5Qaj0kDxYWDyQ9ViAXgC5AAZvbLUFBLQGSPWpQLhYPSQ8VVj0SFyBALtstQUEtAZI9alAuFg9JDxVWPRIXIEAuAAYABf/EBQ8DvAAQACsAMAA1AEIARwAAEyIGFREUFjMhMjY1ETQmIyEHIREzPgE/AT4BPQEzFRQGDwEOAQczBycVIREXFSE1IR0BITUhBRceARczByczLgEvAQUVITUhfDFGRjEEHDFGRjH75CECUEcCHhvmERNRHx3mDxIBUHpv/bBXAaj+WAGo/lgDbS0cHQJSenpRAhEQLvzNAaj+WAO8STT9AjRJSTQC/jRJkP2oJEEZ1xApF0pKJkUb1g8lFXJomwL9rlVVr0lJUisZQSRychUlDyoaXV0AAAAHAAT/xAUOA7wAEAAUADUAVgBbAGAAZQAAEyIGFREUFjMhMjY1ETQmIyEHIREhATMyFh0BFAYrASIGHQEUFjsBMhYdARQGKwEiJj0BNDYzITMyFh0BFAYrASIGHQEUFjsBMhYdARQGKwEiJj0BNDYzBRUhNSEdASE1IR0BITUhezFGRjEEHDFGRjH75DcCS/21AyUVCQwMCRUiMhMNSRolJRp+GiVjRQEmFQkMDAkVIjITDUkbJCQbfholY0X8CwGo/lgBqP5YAaj+WAO8STT9AjRJSTQC/jRJiv0DAmIMCCcIDC8gCg0RIxl2GSMjGdpBXQwIJwgMLyAKDREjGXYZIyMZ2kFdGkVFsDs7oUREAAEAAAABAAB6KNKzXw889QALBAAAAAAA1XLaaQAAAADVctppAAD/wAUPA8AAAAAIAAIAAAAAAAAAAQAAA8D/wAAABRQAAAAABQ8AAQAAAAAAAAAAAAAAAAAAAA4EAAAAAAAAAAAAAAACAAAABAAAQAQAAEADJQAABAAAAAQAAAADtwAAA4AAAAO3AAAFFAAFBRQABAAAAAAACgAUAB4AjAD6AS4BkAHoAkICgALaA0gD0AAAAAEAAAAOAGYABwAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAMAAAAAQAAAAAAAgAHAI0AAQAAAAAAAwAMAEUAAQAAAAAABAAMAKIAAQAAAAAABQALACQAAQAAAAAABgAMAGkAAQAAAAAACgAaAMYAAwABBAkAAQAYAAwAAwABBAkAAgAOAJQAAwABBAkAAwAYAFEAAwABBAkABAAYAK4AAwABBAkABQAWAC8AAwABBAkABgAYAHUAAwABBAkACgA0AOBldnRiaXMtaWNvbnMAZQB2AHQAYgBpAHMALQBpAGMAbwBuAHNWZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBldnRiaXMtaWNvbnMAZQB2AHQAYgBpAHMALQBpAGMAbwBuAHNldnRiaXMtaWNvbnMAZQB2AHQAYgBpAHMALQBpAGMAbwBuAHNSZWd1bGFyAFIAZQBnAHUAbABhAHJldnRiaXMtaWNvbnMAZQB2AHQAYgBpAHMALQBpAGMAbwBuAHNGb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e,t){e.exports="data:font/woff;base64,d09GRgABAAAAAAwcAAsAAAAAC9AAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIGRmNtYXAAAAFoAAAAVAAAAFQXGtMIZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAB6AAAAegbs0cYGhlYWQAAAlkAAAANgAAADYPE/lPaGhlYQAACZwAAAAkAAAAJAjRBONobXR4AAAJwAAAADgAAAA4LjsAiWxvY2EAAAn4AAAAHgAAAB4Lngl+bWF4cAAAChgAAAAgAAAAIAAWAGhuYW1lAAAKOAAAAcIAAAHCezWKvnBvc3QAAAv8AAAAIAAAACAAAwAAAAMD1wGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6UUDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOlF//3//wAAAAAAIOk8//3//wAB/+MWyAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAABABA/8ADwAPAABkAIgA4AEsAAAEuAScuAScuASMhIgYVERQWMyEyNjURNCYnJx4BFyM1HgEXExQGIyEiJjURNDYzMDoCMRUUFjsBAS4BIyEiBhURFBYXETQ2MyEuAQOWES0ZGjMXJykL/pAhLy8hAmAhLw4chRclDZoRKRdvCQf9oAcJCQdzinMTDeD+2ycpC/6QIS8lGwkHAecHDgJbFzMaGS0RHA4vIf0gIS8vIQHwCyknNhcpEZoNJRf9fwcJCQcC4AcJ4A0TAZYcDi8h/SAdLAUDLgcJBgsAAAYAQP/AA8ADwAAXABsAMwA3AE8AUwAAATMyNj0BNCYrATUjFSMiBh0BFBY7AREzAzMVIwMyNj0BNCYrAREjESMiBh0BFBY7ARUzNSczFSMDMjY9ATQmKwE1IxUjIgYdARQWOwERMxEnMxUjA4AQFBwcFBCAEBQcHBQQgICAgLAUHBwUEIAQFBwcFBCAgICAsBQcHBQQgBAUHBwUEICAgIACABwUoBQcwMAcFKAUHP3AAwCA/kAcFKAUHAJA/cAcFKAUHMDAwIABQBwUoBQcwMAcFKAUHP3AAkDAgAACAAAAUgMlA3cADwAgAAABISIGFREUFjMhMjY1ETQmFxEUBiMhIiY1ETQ2MyEyFhUCgP4lJjY2JgHbJjU1f2FE/iVFYGBFAdtEYQMuNib+JSY2NiYB2yY2XP4lRGFhRAHbRGFhRAAAAAUAAP/ABAADwAAhACQAKAA3AEEAAAEyFhURFAYjISImPQEhIiY1ETQ2PwE+ATsBMhYdAT4BOwEFBzMBBzM1Ezc1IxUUBisBESE1NDY3AREjFRQGKwERIQPJFyAgF/3cFyD+yRcgFxDpEDcX7RcgESgQ7v7Jq6v+k6urcLTbIBfuASUXEAIi3CAW7gIAAuUhFv1JFyAgF6QhFgGAFzcQ6RAXIBe7Cg16qwGGq6v+j7Tu7hcg/pOSFzcQ/jQCku0XIP6SAAADAAD/wAQAA8AAEAAhAD4AACURNCYjISIGFREUFjMhMjY1ExEUBiMhIiY1ETQ2MyEyFhUnFSM1NCYjISIGFREUFjsBFSMiJjURNDYzITIWFQO3Cwf9kgcLCwcCbgcLSTYl/ZImNjYmAm4lNttKCwf9kgcLCwdcXCU2NiUCbiY2GwJuBwsLB/2SBwsLBwJu/ZIlNjYlAm4mNjYm3FxcBwsLB/2SBwtKNiYCbiU2NiUAAAIAAABSA7cDdwAiAEUAAAERFA4CKwEiJj0BNDY7ATI2PQE0JisBIiY9ATQ2OwEyFhUhERQOAisBIiY9ATQ2OwEyNj0BNCYrASImPQE0NjsBMhYVAbcuUGo9JA8WFg8kPVYhFoAuQEAu2y5AAgAuUGo9JA8WFg8kPVYhFoAuQEAu2y5AAwn+bj1qUC4WD0kPFlU9EhcgQC7bLkBALv5uPWpQLhYPSQ8WVT0SFyBALtsuQEAuAAIAAP/AA4ADwAAVACMAAAEVFAYHAQ4BByMXNyM+ATcBPgE9ASMTLgEvAQcXHgEXIxc3IwKAHRv+lisvAoLAwH8DGxkBai4wgH4CLytHW0gYHAN/wMCCA8B8Jkcb/pgrbTzAwCM+GQFoLXVAfPzAPG0sRlpHGT4jwMAAAAACAAAAUgO3A3cAIgBFAAABFRQGKwEiJjURND4COwEyFh0BFAYrASIGHQEUFjsBMhYVIRUUBisBIiY1ETQ+AjsBMhYdARQGKwEiBh0BFBY7ATIWFQG3QC7bLkAuUGo9JA8WFg8kPVYgF4AuQAIAQC7bLkAuUGo9JA8WFg8kPVYgF4AuQAGb2y1BQS0Bkj1qUC4WD0kPFVY9EhcgQC7bLUFBLQGSPWpQLhYPSQ8VVj0SFyBALgAGAAX/xAUPA7wAEAArADAANQBCAEcAABMiBhURFBYzITI2NRE0JiMhByERMz4BPwE+AT0BMxUUBg8BDgEHMwcnFSERFxUhNSEdASE1IQUXHgEXMwcnMy4BLwEFFSE1IXwxRkYxBBwxRkYx++QhAlBHAh4b5hETUR8d5g8SAVB6b/2wVwGo/lgBqP5YA20tHB0CUnp6UQIREC78zQGo/lgDvEk0/QI0SUk0Av40SZD9qCRBGdcQKRdKSiZFG9YPJRVyaJsC/a5VVa9JSVIrGUEkcnIVJQ8qGl1dAAAABwAE/8QFDgO8ABAAFAA1AFYAWwBgAGUAABMiBhURFBYzITI2NRE0JiMhByERIQEzMhYdARQGKwEiBh0BFBY7ATIWHQEUBisBIiY9ATQ2MyEzMhYdARQGKwEiBh0BFBY7ATIWHQEUBisBIiY9ATQ2MwUVITUhHQEhNSEdASE1IXsxRkYxBBwxRkYx++Q3Akv9tQMlFQkMDAkVIjITDUkaJSUafholY0UBJhUJDAwJFSIyEw1JGyQkG34aJWNF/AsBqP5YAaj+WAGo/lgDvEk0/QI0SUk0Av40SYr9AwJiDAgnCAwvIAoNESMZdhkjIxnaQV0MCCcIDC8gCg0RIxl2GSMjGdpBXRpFRbA7O6FERAABAAAAAQAAeijSs18PPPUACwQAAAAAANVy2mkAAAAA1XLaaQAA/8AFDwPAAAAACAACAAAAAAAAAAEAAAPA/8AAAAUUAAAAAAUPAAEAAAAAAAAAAAAAAAAAAAAOBAAAAAAAAAAAAAAAAgAAAAQAAEAEAABAAyUAAAQAAAAEAAAAA7cAAAOAAAADtwAABRQABQUUAAQAAAAAAAoAFAAeAIwA+gEuAZAB6AJCAoAC2gNIA9AAAAABAAAADgBmAAcAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADAAAAAEAAAAAAAIABwCNAAEAAAAAAAMADABFAAEAAAAAAAQADACiAAEAAAAAAAUACwAkAAEAAAAAAAYADABpAAEAAAAAAAoAGgDGAAMAAQQJAAEAGAAMAAMAAQQJAAIADgCUAAMAAQQJAAMAGABRAAMAAQQJAAQAGACuAAMAAQQJAAUAFgAvAAMAAQQJAAYAGAB1AAMAAQQJAAoANADgZXZ0YmlzLWljb25zAGUAdgB0AGIAaQBzAC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwZXZ0YmlzLWljb25zAGUAdgB0AGIAaQBzAC0AaQBjAG8AbgBzZXZ0YmlzLWljb25zAGUAdgB0AGIAaQBzAC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByZXZ0YmlzLWljb25zAGUAdgB0AGIAaQBzAC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiA+DQo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8bWV0YWRhdGE+DQo8anNvbj4NCjwhW0NEQVRBWw0Kew0KCSJmb250RmFtaWx5IjogImV2dGJpcy1pY29ucyIsDQoJIm1ham9yVmVyc2lvbiI6IDEsDQoJIm1pbm9yVmVyc2lvbiI6IDAsDQoJInZlcnNpb24iOiAiVmVyc2lvbiAxLjAiLA0KCSJmb250SWQiOiAiZXZ0YmlzLWljb25zIiwNCgkicHNOYW1lIjogImV2dGJpcy1pY29ucyIsDQoJInN1YkZhbWlseSI6ICJSZWd1bGFyIiwNCgkiZnVsbE5hbWUiOiAiZXZ0YmlzLWljb25zIiwNCgkiZGVzY3JpcHRpb24iOiAiRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4iDQp9DQpdXT4NCjwvanNvbj4NCjwvbWV0YWRhdGE+DQo8ZGVmcz4NCjxmb250IGlkPSJldnRiaXMtaWNvbnMiIGhvcml6LWFkdi14PSIxMDI0Ij4NCjxmb250LWZhY2UgdW5pdHMtcGVyLWVtPSIxMDI0IiBhc2NlbnQ9Ijk2MCIgZGVzY2VudD0iLTY0IiAvPg0KPG1pc3NpbmctZ2x5cGggaG9yaXotYWR2LXg9IjEwMjQiIC8+DQo8Z2x5cGggdW5pY29kZT0iJiN4MjA7IiBob3Jpei1hZHYteD0iNTEyIiBkPSIiIC8+DQo8Z2x5cGggdW5pY29kZT0iJiN4ZTkzYzsiIGdseXBoLW5hbWU9ImZpbGVzLWVtcHR5IiBkYXRhLXRhZ3M9ImZpbGVzLWVtcHR5LCBmaWxlcywgZG9jdW1lbnRzLCBwYXBlcnMsIHBhZ2VzIiBkPSJNOTE3LjgwNiA2MDIuOTI0Yy0yMi4yMSAzMC4yOTItNTMuMTc0IDY1LjctODcuMTc4IDk5LjcwNHMtNjkuNDEyIDY0Ljk2NC05OS43MDQgODcuMTc4Yy01MS41NzQgMzcuODItNzYuNTkyIDQyLjE5NC05MC45MjQgNDIuMTk0aC0zNjhjLTQ0LjExNCAwLTgwLTM1Ljg4OC04MC04MHYtNzM2YzAtNDQuMTEyIDM1Ljg4Ni04MCA4MC04MGg2MDhjNDQuMTEyIDAgODAgMzUuODg4IDgwIDgwdjQ5NmMwIDE0LjMzMi00LjM3MiAzOS4zNS00Mi4xOTQgOTAuOTI0ek03ODUuMzc0IDY1Ny4zNzRjMzAuNy0zMC43IDU0LjgtNTguMzk4IDcyLjU4LTgxLjM3NGgtMTUzLjk1NHYxNTMuOTQ2YzIyLjk4Mi0xNy43OCA1MC42NzgtNDEuODc4IDgxLjM3NC03Mi41NzJ2MHpNODk2IDE2YzAtOC42NzItNy4zMjgtMTYtMTYtMTZoLTYwOGMtOC42NzIgMC0xNiA3LjMyOC0xNiAxNnY3MzZjMCA4LjY3MiA3LjMyOCAxNiAxNiAxNiAwIDAgMzY3Ljk1NiAwLjAwMiAzNjggMHYtMjI0YzAtMTcuNjcyIDE0LjMyNC0zMiAzMi0zMmgyMjR2LTQ5NnpNNjAyLjkyNCA5MTcuODA0Yy01MS41NzQgMzcuODIyLTc2LjU5MiA0Mi4xOTYtOTAuOTI0IDQyLjE5NmgtMzY4Yy00NC4xMTIgMC04MC0zNS44ODgtODAtODB2LTczNmMwLTM4LjYzMiAyNy41MjgtNzAuOTU4IDY0LTc4LjM5djgxNC4zOWMwIDguNjcyIDcuMzI4IDE2IDE2IDE2aDQ4Ni44NzZjLTkuNjQ2IDcuOTItMTkuMDI4IDE1LjI2LTI3Ljk1MiAyMS44MDR6IiAvPg0KPGdseXBoIHVuaWNvZGU9IiYjeGU5M2Q7IiBnbHlwaC1uYW1lPSJlcXVhbGl6ZXIyIiBkYXRhLXRhZ3M9ImVxdWFsaXplciwgc2xpZGVycywgc2V0dGluZ3MsIHByZWZlcmVuY2VzLCBkYXNoYm9hcmQsIGNvbnRyb2wiIGQ9Ik04OTYgNTEyaDE2YzI2LjQgMCA0OCAyMS42IDQ4IDQ4djE2MGMwIDI2LjQtMjEuNiA0OC00OCA0OGgtMTZ2MTkyaC0xMjh2LTE5MmgtMTZjLTI2LjQgMC00OC0yMS42LTQ4LTQ4di0xNjBjMC0yNi40IDIxLjYtNDggNDgtNDhoMTZ2LTU3NmgxMjh2NTc2ek03NjggNzA0aDEyOHYtMTI4aC0xMjh2MTI4ek01OTIgMTI4YzI2LjQgMCA0OCAyMS42IDQ4IDQ4djE2MGMwIDI2LjQtMjEuNiA0OC00OCA0OGgtMTZ2NTc2aC0xMjh2LTU3NmgtMTZjLTI2LjQgMC00OC0yMS42LTQ4LTQ4di0xNjBjMC0yNi40IDIxLjYtNDggNDgtNDhoMTZ2LTE5MmgxMjh2MTkyaDE2ek00NDggMzIwaDEyOHYtMTI4aC0xMjh2MTI4ek0yNzIgNTEyYzI2LjQgMCA0OCAyMS42IDQ4IDQ4djE2MGMwIDI2LjQtMjEuNiA0OC00OCA0OGgtMTZ2MTkyaC0xMjh2LTE5MmgtMTZjLTI2LjQgMC00OC0yMS42LTQ4LTQ4di0xNjBjMC0yNi40IDIxLjYtNDggNDgtNDhoMTZ2LTU3NmgxMjh2NTc2aDE2ek0xMjggNzA0aDEyOHYtMTI4aC0xMjh2MTI4eiIgLz4NCjxnbHlwaCB1bmljb2RlPSImI3hlOTNlOyIgZ2x5cGgtbmFtZT0ic3F1YXJlLW8iIGRhdGEtdGFncz0ic3F1YXJlLW8iIGhvcml6LWFkdi14PSI4MDUiIGQ9Ik02NDAgODEzLjcxNGgtNDc1LjQyOWMtNTAuMjg2IDAtOTEuNDI5LTQxLjE0My05MS40MjktOTEuNDI5di00NzUuNDI5YzAtNTAuMjg2IDQxLjE0My05MS40MjkgOTEuNDI5LTkxLjQyOWg0NzUuNDI5YzUwLjI4NiAwIDkxLjQyOSA0MS4xNDMgOTEuNDI5IDkxLjQyOXY0NzUuNDI5YzAgNTAuMjg2LTQxLjE0MyA5MS40MjktOTEuNDI5IDkxLjQyOXpNODA0LjU3MSA3MjIuMjg2di00NzUuNDI5YzAtOTAuODU3LTczLjcxNC0xNjQuNTcxLTE2NC41NzEtMTY0LjU3MWgtNDc1LjQyOWMtOTAuODU3IDAtMTY0LjU3MSA3My43MTQtMTY0LjU3MSAxNjQuNTcxdjQ3NS40MjljMCA5MC44NTcgNzMuNzE0IDE2NC41NzEgMTY0LjU3MSAxNjQuNTcxaDQ3NS40MjljOTAuODU3IDAgMTY0LjU3MS03My43MTQgMTY0LjU3MS0xNjQuNTcxeiIgLz4NCjxnbHlwaCB1bmljb2RlPSImI3hlOTNmOyIgZ2x5cGgtbmFtZT0iY29weSwgZmlsZXMtbyIgZGF0YS10YWdzPSJjb3B5LCBmaWxlcy1vIiBkPSJNOTY5LjE0MyA3NDAuNTcxYzMwLjI4NiAwIDU0Ljg1Ny0yNC41NzEgNTQuODU3LTU0Ljg1N3YtNjk0Ljg1N2MwLTMwLjI4Ni0yNC41NzEtNTQuODU3LTU0Ljg1Ny01NC44NTdoLTU0OC41NzFjLTMwLjI4NiAwLTU0Ljg1NyAyNC41NzEtNTQuODU3IDU0Ljg1N3YxNjQuNTcxaC0zMTAuODU3Yy0zMC4yODYgMC01NC44NTcgMjQuNTcxLTU0Ljg1NyA1NC44NTd2Mzg0YzAgMzAuMjg2IDE3LjcxNCA3Mi41NzEgMzguODU3IDkzLjcxNGwyMzMuMTQzIDIzMy4xNDNjMjEuMTQzIDIxLjE0MyA2My40MjkgMzguODU3IDkzLjcxNCAzOC44NTdoMjM3LjcxNGMzMC4yODYgMCA1NC44NTctMjQuNTcxIDU0Ljg1Ny01NC44NTd2LTE4Ny40MjljMjIuMjg2IDEzLjE0MyA1MC44NTcgMjIuODU3IDczLjE0MyAyMi44NTdoMjM3LjcxNHpNNjU4LjI4NiA2MTguODU3bC0xNzAuODU3LTE3MC44NTdoMTcwLjg1N3YxNzAuODU3ek0yOTIuNTcxIDgzOC4yODZsLTE3MC44NTctMTcwLjg1N2gxNzAuODU3djE3MC44NTd6TTQwNC41NzEgNDY4LjU3MWwxODAuNTcxIDE4MC41NzF2MjM3LjcxNGgtMjE5LjQyOXYtMjM3LjcxNGMwLTMwLjI4Ni0yNC41NzEtNTQuODU3LTU0Ljg1Ny01NC44NTdoLTIzNy43MTR2LTM2NS43MTRoMjkyLjU3MXYxNDYuMjg2YzAgMzAuMjg2IDE3LjcxNCA3Mi41NzEgMzguODU3IDkzLjcxNHpNOTUwLjg1NyA5LjE0M3Y2NTguMjg2aC0yMTkuNDI5di0yMzcuNzE0YzAtMzAuMjg2LTI0LjU3MS01NC44NTctNTQuODU3LTU0Ljg1N2gtMjM3LjcxNHYtMzY1LjcxNGg1MTJ6IiAvPg0KPGdseXBoIHVuaWNvZGU9IiYjeGU5NDA7IiBnbHlwaC1uYW1lPSJjbG9uZSIgZGF0YS10YWdzPSJjbG9uZSIgZD0iTTk1MC44NTcgMjcuNDI5djYyMS43MTRjMCA5LjcxNC04LjU3MSAxOC4yODYtMTguMjg2IDE4LjI4NmgtNjIxLjcxNGMtOS43MTQgMC0xOC4yODYtOC41NzEtMTguMjg2LTE4LjI4NnYtNjIxLjcxNGMwLTkuNzE0IDguNTcxLTE4LjI4NiAxOC4yODYtMTguMjg2aDYyMS43MTRjOS43MTQgMCAxOC4yODYgOC41NzEgMTguMjg2IDE4LjI4NnpNMTAyNCA2NDkuMTQzdi02MjEuNzE0YzAtNTAuMjg2LTQxLjE0My05MS40MjktOTEuNDI5LTkxLjQyOWgtNjIxLjcxNGMtNTAuMjg2IDAtOTEuNDI5IDQxLjE0My05MS40MjkgOTEuNDI5djYyMS43MTRjMCA1MC4yODYgNDEuMTQzIDkxLjQyOSA5MS40MjkgOTEuNDI5aDYyMS43MTRjNTAuMjg2IDAgOTEuNDI5LTQxLjE0MyA5MS40MjktOTEuNDI5ek04MDQuNTcxIDg2OC41NzF2LTkxLjQyOWgtNzMuMTQzdjkxLjQyOWMwIDkuNzE0LTguNTcxIDE4LjI4Ni0xOC4yODYgMTguMjg2aC02MjEuNzE0Yy05LjcxNCAwLTE4LjI4Ni04LjU3MS0xOC4yODYtMTguMjg2di02MjEuNzE0YzAtOS43MTQgOC41NzEtMTguMjg2IDE4LjI4Ni0xOC4yODZoOTEuNDI5di03My4xNDNoLTkxLjQyOWMtNTAuMjg2IDAtOTEuNDI5IDQxLjE0My05MS40MjkgOTEuNDI5djYyMS43MTRjMCA1MC4yODYgNDEuMTQzIDkxLjQyOSA5MS40MjkgOTEuNDI5aDYyMS43MTRjNTAuMjg2IDAgOTEuNDI5LTQxLjE0MyA5MS40MjktOTEuNDI5eiIgLz4NCjxnbHlwaCB1bmljb2RlPSImI3hlOTQxOyIgZ2x5cGgtbmFtZT0icXVvdGUtcmlnaHQiIGRhdGEtdGFncz0icXVvdGUtcmlnaHQiIGhvcml6LWFkdi14PSI5NTEiIGQ9Ik00MzguODU3IDc3Ny4xNDN2LTQwMi4yODZjMC0xNjEuMTQzLTEzMS40MjktMjkyLjU3MS0yOTIuNTcxLTI5Mi41NzFoLTM2LjU3MWMtMjAgMC0zNi41NzEgMTYuNTcxLTM2LjU3MSAzNi41NzF2NzMuMTQzYzAgMjAgMTYuNTcxIDM2LjU3MSAzNi41NzEgMzYuNTcxaDM2LjU3MWM4MC41NzEgMCAxNDYuMjg2IDY1LjcxNCAxNDYuMjg2IDE0Ni4yODZ2MTguMjg2YzAgMzAuMjg2LTI0LjU3MSA1NC44NTctNTQuODU3IDU0Ljg1N2gtMTI4Yy02MC41NzEgMC0xMDkuNzE0IDQ5LjE0My0xMDkuNzE0IDEwOS43MTR2MjE5LjQyOWMwIDYwLjU3MSA0OS4xNDMgMTA5LjcxNCAxMDkuNzE0IDEwOS43MTRoMjE5LjQyOWM2MC41NzEgMCAxMDkuNzE0LTQ5LjE0MyAxMDkuNzE0LTEwOS43MTR6TTk1MC44NTcgNzc3LjE0M3YtNDAyLjI4NmMwLTE2MS4xNDMtMTMxLjQyOS0yOTIuNTcxLTI5Mi41NzEtMjkyLjU3MWgtMzYuNTcxYy0yMCAwLTM2LjU3MSAxNi41NzEtMzYuNTcxIDM2LjU3MXY3My4xNDNjMCAyMCAxNi41NzEgMzYuNTcxIDM2LjU3MSAzNi41NzFoMzYuNTcxYzgwLjU3MSAwIDE0Ni4yODYgNjUuNzE0IDE0Ni4yODYgMTQ2LjI4NnYxOC4yODZjMCAzMC4yODYtMjQuNTcxIDU0Ljg1Ny01NC44NTcgNTQuODU3aC0xMjhjLTYwLjU3MSAwLTEwOS43MTQgNDkuMTQzLTEwOS43MTQgMTA5LjcxNHYyMTkuNDI5YzAgNjAuNTcxIDQ5LjE0MyAxMDkuNzE0IDEwOS43MTQgMTA5LjcxNGgyMTkuNDI5YzYwLjU3MSAwIDEwOS43MTQtNDkuMTQzIDEwOS43MTQtMTA5LjcxNHoiIC8+DQo8Z2x5cGggdW5pY29kZT0iJiN4ZTk0MjsiIGdseXBoLW5hbWU9ImZvcmsiIGRhdGEtdGFncz0iZm9yayIgaG9yaXotYWR2LXg9Ijg5NiIgZD0iTTY0MCA5NjB2LTEyNGMwLTUxLjI2NC0yMC05OS40ODgtNTYuMTI4LTEzNS42MTZsLTM2Mi4xMTItMzYwLjEyOGMtNTcuMjQ4LTU3LjEyLTg4Ljc2OC0xMzIuMTI4LTkyLjI1Ni0yMTIuMjU2aC0xMjkuNTA0bDE5Mi0xOTIgMTkyIDE5MmgtMTI2LjYyNGMzLjM2IDQ2LjAxNiAyMS44ODggODguNzM2IDU0Ljc1MiAxMjEuNzZsMzYyLjExMiAzNjBjNjAuNTEyIDYwLjQ4IDkzLjc2IDE0MC43MzYgOTMuNzYgMjI2LjI0djEyNGgtMTI4ek03NjYuNDk2IDEyOGMtMy40ODggODAuMTI4LTM1LjEzNiAxNTUuMTM2LTkyLjM4NCAyMTIuNTEybC03MS4zNiA3MC44OC05MC43NTItOTAuMjcyIDcxLjc0NC03MS4zNmMzMi45OTItMzIuODY0IDUxLjQ4OC03NS43NDQgNTQuODgtMTIxLjc2aC0xMjYuNjI0bDE5Mi0xOTIgMTkyIDE5MmgtMTI5LjUwNHoiIC8+DQo8Z2x5cGggdW5pY29kZT0iJiN4ZTk0MzsiIGdseXBoLW5hbWU9InF1b3RlLWxlZnQiIGRhdGEtdGFncz0icXVvdGUtbGVmdCIgaG9yaXotYWR2LXg9Ijk1MSIgZD0iTTQzOC44NTcgNDExLjQyOXYtMjE5LjQyOWMwLTYwLjU3MS00OS4xNDMtMTA5LjcxNC0xMDkuNzE0LTEwOS43MTRoLTIxOS40MjljLTYwLjU3MSAwLTEwOS43MTQgNDkuMTQzLTEwOS43MTQgMTA5LjcxNHY0MDIuMjg2YzAgMTYxLjE0MyAxMzEuNDI5IDI5Mi41NzEgMjkyLjU3MSAyOTIuNTcxaDM2LjU3MWMyMCAwIDM2LjU3MS0xNi41NzEgMzYuNTcxLTM2LjU3MXYtNzMuMTQzYzAtMjAtMTYuNTcxLTM2LjU3MS0zNi41NzEtMzYuNTcxaC0zNi41NzFjLTgwLjU3MSAwLTE0Ni4yODYtNjUuNzE0LTE0Ni4yODYtMTQ2LjI4NnYtMTguMjg2YzAtMzAuMjg2IDI0LjU3MS01NC44NTcgNTQuODU3LTU0Ljg1N2gxMjhjNjAuNTcxIDAgMTA5LjcxNC00OS4xNDMgMTA5LjcxNC0xMDkuNzE0ek05NTAuODU3IDQxMS40Mjl2LTIxOS40MjljMC02MC41NzEtNDkuMTQzLTEwOS43MTQtMTA5LjcxNC0xMDkuNzE0aC0yMTkuNDI5Yy02MC41NzEgMC0xMDkuNzE0IDQ5LjE0My0xMDkuNzE0IDEwOS43MTR2NDAyLjI4NmMwIDE2MS4xNDMgMTMxLjQyOSAyOTIuNTcxIDI5Mi41NzEgMjkyLjU3MWgzNi41NzFjMjAgMCAzNi41NzEtMTYuNTcxIDM2LjU3MS0zNi41NzF2LTczLjE0M2MwLTIwLTE2LjU3MS0zNi41NzEtMzYuNTcxLTM2LjU3MWgtMzYuNTcxYy04MC41NzEgMC0xNDYuMjg2LTY1LjcxNC0xNDYuMjg2LTE0Ni4yODZ2LTE4LjI4NmMwLTMwLjI4NiAyNC41NzEtNTQuODU3IDU0Ljg1Ny01NC44NTdoMTI4YzYwLjU3MSAwIDEwOS43MTQtNDkuMTQzIDEwOS43MTQtMTA5LjcxNHoiIC8+DQo8Z2x5cGggdW5pY29kZT0iJiN4ZTk0NDsiIGdseXBoLW5hbWU9InZlcnNpb25zIiBkYXRhLXRhZ3M9InZlcnNpb25zIiBob3Jpei1hZHYteD0iMTMwMCIgZD0iTTEyNC4yODMgOTU1LjgxN2MtNjUuODgzIDAtMTE4LjkzNi01NS42NDctMTE4LjkzNi0xMjQuODAxdi03NjYuMDEwYzAtNjkuMTUzIDUzLjA1Mi0xMjQuODQ0IDExOC45MzYtMTI0Ljg0NGgxMDUxLjcwNmM2NS44ODMgMCAxMTguOTM2IDU1LjY5IDExOC45MzYgMTI0Ljg0NHY3NjYuMDEwYzAgNjkuMTUzLTUzLjA1MiAxMjQuODAxLTExOC45MzYgMTI0LjgwMWgtMTA1MS43MDZ6TTkwLjk0OCA4MTIuNDNoNTkxLjcwM3YtNjAwLjMyOGg3MS42NzJjMi4yMTcgNDcuNjY2IDIyLjIyNSA5Mi4yODggNTguNjA1IDEyNi4yNjdsMjMwLjE1MiAyMTQuMjM5YzIyLjk1OSAyMS40OTEgMzUuNjYzIDUwLjE0NiAzNS42NjMgODAuNjQydjczLjc4NWg4MS4zMzJ2LTczLjc4NWMwLTUwLjg2NS0yMS4xNDMtOTguNTctNTkuNTk3LTEzNC41NDdsLTIzMC4xMDktMjE0LjE1M2MtMjAuODg1LTE5LjY0NS0zMi42NjYtNDUuMDc1LTM0LjgwMS03Mi40NDhoODAuNDY5bC0xMjEuOTk3LTExNC4yMzUtMTExLjM4OSAxMDQuMjc0di0xNTUuMTZoLTU5MS43MDN2NzY1LjQ0OXpNMTc3Ljg0MyA2MzguMTY2di04NS41NThoNDI0LjM4MnY4NS41NThoLTQyNC4zODJ6TTE3Ny44NDMgNDYzLjI1NnYtNzMuMTM4aDQyNC4zODJ2NzMuMTM4aC00MjQuMzgyek0xMDU1LjA2OSAzODAuNjc0bDQ1LjMyMy00Mi4xNzVjMzYuMzgtMzQuMTMyIDU2LjUxOC03OC43MyA1OC43MzUtMTI2LjM5Nmg4Mi4yOGwtMTIxLjk5Ny0xMTQuMjM1LTEyMi4wNDEgMTE0LjIzNWg4MC40NjljLTIuMTU2IDI3LjM3My0xMy44NzggNTIuODk5LTM0Ljg0NCA3Mi40NDhsLTQ1LjYyNSA0Mi40MzQgNTcuNyA1My42ODl6TTE3Ny44NDMgMzAwLjc2NXYtOTIuNTQ0aDQyNC4zODJ2OTIuNTQ0aC00MjQuMzgyeiIgLz4NCjxnbHlwaCB1bmljb2RlPSImI3hlOTQ1OyIgZ2x5cGgtbmFtZT0ic3JjLVR4dCIgZGF0YS10YWdzPSJzcmMtVHh0IiBob3Jpei1hZHYteD0iMTMwMCIgZD0iTTEyMy4wNzYgOTU1LjgxN2MtNjUuODgzIDAtMTE4Ljg5My01NS42NDctMTE4Ljg5My0xMjQuODAxdi03NjYuMDEwYzAtNjkuMTUzIDUzLjAwOS0xMjQuODQ0IDExOC44OTMtMTI0Ljg0NGgxMDUxLjc0OWM2NS44ODMgMCAxMTguOTM2IDU1LjY5IDExOC45MzYgMTI0Ljg0NHY3NjYuMDEwYzAgNjkuMTUzLTUzLjA1MiAxMjQuODAxLTExOC45MzYgMTI0LjgwMWgtMTA1MS43NDl6TTY4LjQ4MSA4MTguMDM2aDU4Ni44M3YtNzY1LjQwNmgtNTg2Ljgzdjc2NS40MDZ6TTg3My4yNTkgNjYzLjA5MmgyMS4wNDRjMTEuNDg4IDAgMjEuMDAxLTguOTU0IDIxLjAwMS0xOS43OTR2LTM5LjYzMWMwLTEwLjgzOS05LjUxMy0xOS44MzctMjEuMDAxLTE5LjgzN2gtMjEuMDQ0Yy00Ni4yODIgMC04NC4wMDUtMzUuNjM3LTg0LjAwNS03OS4zMDV2LTkuODc1YzAtMTYuNDE1IDE0LjEyNy0yOS43NTUgMzEuNTI0LTI5Ljc1NWg3My41MjZjMzQuNzk0IDAgNjMuMDA0LTI2LjY0IDYzLjAwNC01OS40Njh2LTExOC44OTNjMC0zMi44MjgtMjguMjEtNTkuNDY4LTYzLjAwNC01OS40NjhoLTEyNi4wNTFjLTM0Ljc5NCAwLTYzLjA0NyAyNi42NC02My4wNDcgNTkuNDY4djIxNy45OTFjMCA4Ny4zMzYgNzUuNDkgMTU4LjU2NyAxNjguMDU0IDE1OC41Njd6TTExNjcuMzY0IDY2My4wOTJoMjEuMDQ0YzExLjQ4OCAwIDIxLjAwMS04Ljk1NCAyMS4wMDEtMTkuNzk0di0zOS42MzFjMC0xMC44MzktOS41MTMtMTkuODM3LTIxLjAwMS0xOS44MzdoLTIxLjA0NGMtNDYuMjgyIDAtODQuMDA1LTM1LjYzNy04NC4wMDUtNzkuMzA1di05Ljg3NWMwLTE2LjQxNSAxNC4xMjctMjkuNzU1IDMxLjUyNC0yOS43NTVoNzMuNTI2YzM0Ljc5NCAwIDYzLjAwNC0yNi42NCA2My4wMDQtNTkuNDY4di0xMTguODkzYzAtMzIuODI4LTI4LjIxLTU5LjQ2OC02My4wMDQtNTkuNDY4aC0xMjYuMDUxYy0zNC43OTQgMC02My4wNDcgMjYuNjQtNjMuMDQ3IDU5LjQ2OHYyMTcuOTkxYzAgODcuMzM2IDc1LjQ5IDE1OC41NjcgMTY4LjA1NCAxNTguNTY3ek0xNTMuNzM3IDYzNy4yNjF2LTY5LjI1N2g0MjQuNDI1djY5LjI1N2gtNDI0LjQyNXpNMTUzLjczNyA0NjAuNzU1di01OC41MTloNDI0LjQyNXY1OC41MTloLTQyNC40MjV6TTE1My43MzcgMjk5Ljg1OXYtNjguMTM2aDQyNC40MjV2NjguMTM2aC00MjQuNDI1eiIgLz4NCjwvZm9udD48L2RlZnM+PC9zdmc+"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAPCAYAAAACsSQRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAADpSURBVHjarJAxTgMxEEXfd5xISISCloKOZq9At0fZvSmROIELItp0iGJToJVYDUXWlmPWRQJfGslj/3kzY/FbKiLKikhyC8VujhWwMrPveM7ezhq4CsADazMbJZmZjcB6vndFHb4ygTezoyQDmEGStJ29U7ZigrhsZA8MEZB2PeUC7rJVJvLOgO/7fgsM+cd9vL9SfO4Q/XE9ATfAV2EE4PD2Ajo1fXh6PhusaZr7EMIITA7YLAL2uwRIeeYLIXy2bXsLbFQFVFRO1HXdoy4B1EC6FLAEctcASr+7BlCCdNjvjD/K8Q/6GQAMElhJBofFoAAAAABJRU5ErkJggg=="},function(e,t,n){e.exports=n.p+"7af6f8c96c4d5318575915053890fed9.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAKJJREFUeNrs1zkKgDAURdHnR2u3ZuOCXZK1gnZCHGLAIhd5fwHhEMhwm2kYN51mXhe9Td92Kp0v6wUZdwHScAmQiDuAVJwkBRl3e0hIuHld8sDauOwOEnCPQAruFkjCXYA0XAIk4g4gFSdJQcYVXdS13+og44p2sPZbHWRcFkj55QQZ5yZxk7hJ3CRuEjeJm8RN4iZxk7hJft8kOwAAAP//AwAqiPK1D4qBLwAAAABJRU5ErkJggg=="},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t){
/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",(function(){return function(e,n,i){var o=i.ngAnimateChildren;t.isString(o)&&0===o.length?n.data("$$ngAnimateChildren",!0):e.$watch(o,(function(e){n.data("$$ngAnimateChildren",!!e)}))}})).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e((function(){n.offsetWidth;t()}))}}]).config(["$provide","$animateProvider",function(n,i){var o=t.noop,r=t.forEach,a=i.$$selectors,s=t.isArray,l=t.isString,c=t.isObject,u="$$ngAnimateState",d={running:!0};function p(e){for(var t=0;t<e.length;t++){var n=e[t];if(1==n.nodeType)return n}}function h(e){return e&&t.element(e)}function f(e){return t.element(p(e))}function g(e,t){return p(e)==p(t)}n.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(e,n,m,v,b,y,x,w,A){b.data(u,d);var _=x.$watch((function(){return A.totalPendingRequests}),(function(e,t){0===e&&(_(),x.$$postDigest((function(){x.$$postDigest((function(){d.running=!1}))})))})),E=0,S=i.classNameFilter(),T=S?function(e){return S.test(e)}:function(){return!0};function C(e,t){var n=e.data(u)||{};return t&&(n.running=!0,n.structural=!0,e.data(u,n)),n.disabled||n.running&&n.structural}function k(e){var t,i=n.defer();return i.promise.$$cancelFn=function(){t&&t()},x.$$postDigest((function(){t=e((function(){i.resolve()}))})),i.promise}function L(e){if(c(e))return e.tempClasses&&l(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e}function I(e,n,i,l){var c=e[0];if(c){var u,d;l&&(l.to=l.to||{},l.from=l.from||{}),s(i)&&(u=i[0],d=i[1],u?d?i=u+" "+d:(i=u,n="addClass"):(i=d,n="removeClass"));var p="setClass"==n,h=p||"addClass"==n||"removeClass"==n||"animate"==n,f=e.attr("class")+" "+i;if(T(f)){var g=o,b=[],y=[],x=o,w=[],A=[],_=(" "+f).replace(/\s+/g,".");return r(function(e){if(e){var t=[],n={},i=e.substr(1).split(".");(v.transitions||v.animations)&&t.push(m.get(a[""]));for(var o=0;o<i.length;o++){var r=i[o],s=a[r];s&&!n[r]&&(t.push(m.get(s)),n[r]=!0)}return t}}(_),(function(e){!E(e,n)&&p&&(E(e,"addClass"),E(e,"removeClass"))})),{node:c,event:n,className:i,isClassBased:h,isSetClassOperation:p,applyStyles:function(){l&&e.css(t.extend(l.from||{},l.to||{}))},before:function(e){g=e,S(y,b,(function(){g=o,e()}))},after:function(e){x=e,S(A,w,(function(){x=o,e()}))},cancel:function(){b&&(r(b,(function(e){(e||o)(!0)})),g(!0)),w&&(r(w,(function(e){(e||o)(!0)})),x(!0))}}}}function E(e,t){var n=e[t],i=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(n||i)return"leave"==t&&(i=n,n=null),A.push({event:t,fn:n}),y.push({event:t,fn:i}),!0}function S(t,n,a){var s=[];r(t,(function(e){e.fn&&s.push(e)}));var c=0;r(s,(function(t,r){var p=function(){!function(e){if(n){if((n[e]||o)(),++c<s.length)return;n=null}a()}(r)};switch(t.event){case"setClass":n.push(t.fn(e,u,d,p,l));break;case"animate":n.push(t.fn(e,i,l.from,l.to,p));break;case"addClass":n.push(t.fn(e,u||i,p,l));break;case"removeClass":n.push(t.fn(e,d||i,p,l));break;default:n.push(t.fn(e,p,l))}})),n&&0===n.length&&a()}}return{animate:function(e,t,n,i,r){return i=i||"ng-inline-animate",(r=L(r)||{}).from=n?t:null,r.to=n||t,k((function(t){return D("animate",i,f(e),null,null,o,r,t)}))},enter:function(n,i,r,a){return a=L(a),n=t.element(n),i=h(i),r=h(r),C(n,!0),e.enter(n,i,r),k((function(e){return D("enter","ng-enter",f(n),i,r,o,a,e)}))},leave:function(n,i){return i=L(i),P(n=t.element(n)),C(n,!0),k((function(t){return D("leave","ng-leave",f(n),null,null,(function(){e.leave(n)}),i,t)}))},move:function(n,i,r,a){return a=L(a),n=t.element(n),i=h(i),r=h(r),P(n),C(n,!0),e.move(n,i,r),k((function(e){return D("move","ng-move",f(n),i,r,o,a,e)}))},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(n,i,o,a){a=L(a);if(C(n=f(n=t.element(n))))return e.$$setClassImmediately(n,i,o,a);var l,c=n.data("$$animateClasses"),d=!!c;return c||((c={}).classes={}),l=c.classes,i=s(i)?i:i.split(" "),r(i,(function(e){e&&e.length&&(l[e]=!0)})),o=s(o)?o:o.split(" "),r(o,(function(e){e&&e.length&&(l[e]=!1)})),d?(a&&c.options&&(c.options=t.extend(c.options||{},a)),c.promise):(n.data("$$animateClasses",c={classes:l,options:a}),c.promise=k((function(t){var i=n.parent(),o=p(n),a=o.parentNode;if(a&&!a.$$NG_REMOVED&&!o.$$NG_REMOVED){var s=n.data("$$animateClasses");n.removeData("$$animateClasses");var l=n.data(u)||{},c=function(e,t,n){var i={};r(n=n||{},(function(e,t){r(t.split(" "),(function(t){i[t]=e}))}));var o=Object.create(null);r((e.attr("class")||"").split(/\s+/),(function(e){o[e]=!0}));var a=[],s=[];return r(t.classes,(function(e,t){var n=o[t],r=i[t]||{};!1===e?(n||"addClass"==r.event)&&s.push(t):!0===e&&(n&&"removeClass"!=r.event||a.push(t))})),a.length+s.length>0&&[a.join(" "),s.join(" ")]}(n,s,l.active);return c?D("setClass",c,n,i,null,(function(){c[0]&&e.$$addClassImmediately(n,c[0]),c[1]&&e.$$removeClassImmediately(n,c[1])}),s.options,t):t()}t()})))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)O(t);else{var n=t.data(u)||{};n.disabled=!0,t.data(u,n)}break;case 1:d.disabled=!e;break;default:e=!d.disabled}return!!e}};function D(e,n,i,a,s,l,c,p){var h=o,f=I(i,e,n,c);if(!f)return N(),D(),P(),R(),h;e=f.event,n=f.className;var m=t.element._data(f.node);if(m=m&&m.events,a||(a=s?s.parent():i.parent()),function(e,n){if(d.disabled)return!0;if(g(e,b))return d.running;var i,o,r;do{if(0===n.length)break;var a=g(n,b),s=a?d:n.data(u)||{};if(s.disabled)return!0;if(a&&(r=!0),!1!==i){var l=n.data("$$ngAnimateChildren");t.isDefined(l)&&(i=l)}o=o||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!r||!i&&o}(i,a))return N(),D(),P(),R(),h;var v=i.data(u)||{},x=v.active||{},w=v.totalActive||0,A=v.last,_=!1;if(w>0){var S=[];if(f.isClassBased){if("setClass"==A.event)S.push(A),O(i,n);else if(x[n]){var T=x[n];T.event==e?_=!0:(S.push(T),O(i,n))}}else if("leave"==e&&x["ng-leave"])_=!0;else{for(var C in x)S.push(x[C]);v={},O(i,!0)}S.length>0&&r(S,(function(e){e.cancel()}))}if(!f.isClassBased||f.isSetClassOperation||"animate"==e||_||(_="addClass"==e==i.hasClass(n)),_)return N(),D(),P(),M(),h;x=v.active||{},w=v.totalActive||0,"leave"==e&&i.one("$destroy",(function(e){var n=t.element(this),i=n.data(u);if(i){var o=i.active["ng-leave"];o&&(o.cancel(),O(n,"ng-leave"))}})),i.addClass("ng-animate"),c&&c.tempClasses&&r(c.tempClasses,(function(e){i.addClass(e)}));var k=E++;return w++,x[n]=f,i.data(u,{last:f,active:x,index:k,totalActive:w}),D(),f.before((function(t){var o=i.data(u);t=t||!o||!o.active[n]||f.isClassBased&&o.active[n].event!=e,N(),!0===t?R():(P(),f.after(R))})),f.cancel;function L(t){var o="$animate:"+t;m&&m[o]&&m[o].length>0&&y((function(){i.triggerHandler(o,{event:e,className:n})}))}function D(){L("before")}function P(){L("after")}function M(){L("close"),p()}function N(){N.hasBeenRun||(N.hasBeenRun=!0,l())}function R(){if(!R.hasBeenRun){f&&f.applyStyles(),R.hasBeenRun=!0,c&&c.tempClasses&&r(c.tempClasses,(function(e){i.removeClass(e)}));var e=i.data(u);e&&(f&&f.isClassBased?O(i,n):(y((function(){var e=i.data(u)||{};k==e.index&&O(i,n)})),i.data(u,e))),M()}}}function P(e){var n=p(e);if(n){var i=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName("ng-animate"):n.querySelectorAll(".ng-animate");r(i,(function(e){var n=(e=t.element(e)).data(u);n&&n.active&&r(n.active,(function(e){e.cancel()}))}))}}function O(e,t){if(g(e,b))d.disabled||(d.running=!1,d.structural=!1);else if(t){var n=e.data(u)||{},i=!0===t;!i&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),!i&&n.totalActive||(e.removeClass("ng-animate"),e.removeData(u))}}}]),i.register("",["$window","$sniffer","$timeout","$$animateReflow",function(n,i,a,c){var u,d,h,f,g="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(g="-webkit-",u="WebkitTransition",d="webkitTransitionEnd transitionend"):(u="transition",d="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(g="-webkit-",h="WebkitAnimation",f="webkitAnimationEnd animationend"):(h="animation",f="animationend");var m,v={},b=0,y=[];function x(){m||(m=c((function(){y=[],m=null,v={}})))}function w(e,t){m&&m(),y.push(t),m=c((function(){r(y,(function(e){e()})),y=[],m=null,v={}}))}var A=null,_=0,E=[];function S(e,n){var i=p(e);e=t.element(i),E.push(e);var o=Date.now()+n;o<=_||(a.cancel(A),_=o,A=a((function(){r(E,(function(e){var t=e.data("$$ngAnimateCSS3Data");t&&r(t.closeAnimationFns,(function(e){e()}))})),E=[]}),n,!1))}function T(e,t){var i=t?v[t]:null;if(!i){var o=0,a=0,s=0,l=0;r(e,(function(e){if(1==e.nodeType){var t=n.getComputedStyle(e)||{},i=t[u+"Duration"];o=Math.max(C(i),o);var r=t[u+"Delay"];a=Math.max(C(r),a);t[h+"Delay"];l=Math.max(C(t[h+"Delay"]),l);var c=C(t[h+"Duration"]);c>0&&(c*=parseInt(t[h+"IterationCount"],10)||1),s=Math.max(c,s)}})),i={total:0,transitionDelay:a,transitionDuration:o,animationDelay:l,animationDuration:s},t&&(v[t]=i)}return i}function C(e){var t=0,n=l(e)?e.split(/\s*,\s*/):[];return r(n,(function(e){t=Math.max(parseFloat(e)||0,t)})),t}function k(e,t,n,i){var o=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,r=function(e){var t=e.parent(),n=t.data("$$ngAnimateKey");return n||(t.data("$$ngAnimateKey",++b),n=b),n+"-"+p(e).getAttribute("class")}(t),a=r+" "+n,s=v[a]?++v[a].total:0,l={};if(s>0){var c=n+"-stagger",u=r+" "+c,d=!v[u];d&&t.addClass(c),l=T(t,u),d&&t.removeClass(c)}t.addClass(n);var h=t.data("$$ngAnimateCSS3Data")||{},f=T(t,a),g=f.transitionDuration,m=f.animationDuration;if(o&&0===g&&0===m)return t.removeClass(n),!1;var y=i||o&&g>0,x=m>0&&l.animationDelay>0&&0===l.animationDuration,w=h.closeAnimationFns||[];t.data("$$ngAnimateCSS3Data",{stagger:l,cacheKey:a,running:h.running||0,itemIndex:s,blockTransition:y,closeAnimationFns:w});var A=p(t);return y&&(L(A,!0),i&&t.css(i)),x&&I(A,!0),!0}function L(e,t){e.style[u+"Property"]=t?"none":""}function I(e,t){e.style[h+"PlayState"]=t?"paused":""}function D(e,t,n,i){if(k(0,t,n,i))return function(e){e&&M(t,n)}}function P(e,t,n,i,o){if(t.data("$$ngAnimateCSS3Data"))return function(e,t,n,i,o){var s=p(t),l=t.data("$$ngAnimateCSS3Data");if(-1!=s.getAttribute("class").indexOf(n)&&l){var c="",u="";r(n.split(" "),(function(e,t){var n=(t>0?" ":"")+e;c+=n+"-active",u+=n+"-pending"}));var h=[],m=l.itemIndex,v=l.stagger,b=0;if(m>0){var y=0;v.transitionDelay>0&&0===v.transitionDuration&&(y=v.transitionDelay*m);var x=0;v.animationDelay>0&&0===v.animationDuration&&(x=v.animationDelay*m,h.push(g+"animation-play-state")),b=Math.round(100*Math.max(y,x))/100}b||(t.addClass(c),l.blockTransition&&L(s,!1));var w=l.cacheKey+" "+c,A=T(t,w),_=Math.max(A.transitionDuration,A.animationDuration);if(0===_)return t.removeClass(c),M(t,n),void i();!b&&o&&(A.transitionDuration||(t.css("transition",A.animationDuration+"s linear all"),h.push("transition")),t.css(o));var E=Math.max(A.transitionDelay,A.animationDelay),C=1e3*E;if(h.length>0){var k=s.getAttribute("style")||"";";"!==k.charAt(k.length-1)&&(k+=";"),s.setAttribute("style",k+" ")}var D,P=Date.now(),O=f+" "+d,N=1e3*(b+1.5*(E+_));return b>0&&(t.addClass(u),D=a((function(){D=null,A.transitionDuration>0&&L(s,!1),A.animationDuration>0&&I(s,!1),t.addClass(c),t.removeClass(u),o&&(0===A.transitionDuration&&t.css("transition",A.animationDuration+"s linear all"),t.css(o),h.push("transition"))}),1e3*b,!1)),t.on(O,B),l.closeAnimationFns.push((function(){R(),i()})),l.running++,S(t,N),R}function R(){t.off(O,B),t.removeClass(c),t.removeClass(u),D&&a.cancel(D),M(t,n);var e=p(t);for(var i in h)e.style.removeProperty(h[i])}function B(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),o=parseFloat(t.elapsedTime.toFixed(3));Math.max(n-P,0)>=C&&o>=_&&i()}i()}(0,t,n,i,o);M(t,n),i()}function O(e,t,n,i,r){var a=D(0,t,n,r.from);if(!a)return x(),void i();var s=a;return w(0,(function(){s=P(0,t,n,i,r.to)})),function(e){(s||o)(e)}}function M(e,t){e.removeClass(t);var n=e.data("$$ngAnimateCSS3Data");n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData("$$ngAnimateCSS3Data"))}return{animate:function(e,t,n,i,o,r){return(r=r||{}).from=n,r.to=i,O(0,e,t,o,r)},enter:function(e,t,n){return O(0,e,"ng-enter",t,n=n||{})},leave:function(e,t,n){return O(0,e,"ng-leave",t,n=n||{})},move:function(e,t,n){return O(0,e,"ng-move",t,n=n||{})},beforeSetClass:function(e,t,n,i,o){o=o||{};var r=D(0,e,N(n,"-remove")+" "+N(t,"-add"),o.from);if(r)return w(0,i),r;x(),i()},beforeAddClass:function(e,t,n,i){i=i||{};var o=D(0,e,N(t,"-add"),i.from);if(o)return w(0,n),o;x(),n()},beforeRemoveClass:function(e,t,n,i){i=i||{};var o=D(0,e,N(t,"-remove"),i.from);if(o)return w(0,n),o;x(),n()},setClass:function(e,t,n,i,o){return o=o||{},P(0,e,(n=N(n,"-remove"))+" "+(t=N(t,"-add")),i,o.to)},addClass:function(e,t,n,i){return i=i||{},P(0,e,N(t,"-add"),n,i.to)},removeClass:function(e,t,n,i){return i=i||{},P(0,e,N(t,"-remove"),n,i.to)}};function N(e,t){var n="";return e=s(e)?e:e.split(/\s+/),r(e,(function(e,i){e&&e.length>0&&(n+=(i>0?" ":"")+e+t)})),n}}])}])}(window,window.angular)},function(e,t){
/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){var i,o={},r={},a=!1,s=t.copy,l=t.isUndefined;return n.addPollFn((function(){var t=n.cookies();i!=t&&(i=t,s(t,r),s(t,o),a&&e.$apply())}))(),a=!0,e.$watch((function(){var e,i,a,s;for(e in r)l(o[e])&&n.cookies(e,void 0);for(e in o)i=o[e],t.isString(i)||(i=""+i,o[e]=i),i!==r[e]&&(n.cookies(e,i),s=!0);if(s)for(e in s=!1,a=n.cookies(),o)o[e]!==a[e]&&(l(a[e])?delete o[e]:o[e]=a[e],s=!0)})),o}]).factory("$cookieStore",["$cookies",function(e){return{get:function(n){var i=e[n];return i?t.fromJson(i):i},put:function(n,i){e[n]=t.toJson(i)},remove:function(t){delete e[t]}}}])}(window,window.angular)},function(e,t){
/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";t.module("ngMessages",[]).directive("ngMessages",["$compile","$animate","$templateRequest",function(e,n,i){return{restrict:"AE",controller:function(){this.$renderNgMessageClasses=t.noop;var e=[];this.registerMessage=function(t,n){for(var i=0;i<e.length;i++)if(e[i].type==n.type){if(t!=i){var o=e[t];e[t]=e[i],t<e.length?e[i]=o:e.splice(0,i)}return}e.splice(t,0,n)},this.renderMessages=function(n,i){var o;n=n||{},t.forEach(e,(function(e){var t;o&&!i||(null===(t=n[e.type])||!1===t||!t)?e.detach():(e.attach(),o=!0)})),this.renderElementClasses(o)}},require:"ngMessages",link:function(o,r,a,s){s.renderElementClasses=function(e){e?n.setClass(r,"ng-active","ng-inactive"):n.setClass(r,"ng-inactive","ng-active")};var l,c=t.isString(a.ngMessagesMultiple)||t.isString(a.multiple),u=a.ngMessages||a.for;o.$watchCollection(u,(function(e){l=e,s.renderMessages(e,c)}));var d=a.ngMessagesInclude||a.include;d&&i(d).then((function(n){var i,a=t.element("<div/>").html(n);t.forEach(a.children(),(function(n){n=t.element(n),i?i.after(n):r.prepend(n),i=n,e(n)(o)})),s.renderMessages(l,c)}))}}}]).directive("ngMessage",["$animate",function(e){return{require:"^ngMessages",transclude:"element",terminal:!0,restrict:"AE",link:function(t,n,i,o,r){for(var a,s,l=n[0],c=l.parentNode,u=0,d=0;u<c.childNodes.length;u++){var p=c.childNodes[u];if(8==p.nodeType&&p.nodeValue.indexOf("ngMessage")>=0){if(p===l){a=d;break}d++}}o.registerMessage(a,{type:i.ngMessage||i.when,attach:function(){s||r(t,(function(t){e.enter(t,null,n),s=t}))},detach:function(t){s&&(e.leave(s),s=null)}})}}}])}(window,window.angular)},function(e,t){
/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";var i=t.$$minErr("$resource"),o=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;function r(e,t){if(!function(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&o.test("."+e)}(t))throw i("badmember",'Dotted member path "@{0}" is invalid.',t);for(var n=t.split("."),r=0,a=n.length;r<a&&void 0!==e;r++){var s=n[r];e=null!==e?e[s]:void 0}return e}function a(e,n){for(var i in n=n||{},t.forEach(n,(function(e,t){delete n[t]})),e)!e.hasOwnProperty(i)||"$"===i.charAt(0)&&"$"===i.charAt(1)||(n[i]=e[i]);return n}t.module("ngResource",["ng"]).provider("$resource",(function(){var e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$q",function(n,o){var s=t.noop,l=t.forEach,c=t.extend,u=t.copy,d=t.isFunction;function p(e){return function(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function h(t,n){this.template=t,this.defaults=c({},e.defaults,n),this.urlParams={}}return h.prototype={setUrlParams:function(e,n,o){var r,a,s=this,c=o||s.template,u=s.urlParams={};l(c.split(/\W/),(function(e){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(c)&&(u[e]=!0)})),c=c.replace(/\\:/g,":"),n=n||{},l(s.urlParams,(function(e,i){r=n.hasOwnProperty(i)?n[i]:s.defaults[i],t.isDefined(r)&&null!==r?(a=p(r),c=c.replace(new RegExp(":"+i+"(\\W|$)","g"),(function(e,t){return a+t}))):c=c.replace(new RegExp("(/?):"+i+"(\\W|$)","g"),(function(e,t,n){return"/"==n.charAt(0)?n:t+n}))})),s.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/"),c=c.replace(/\/\.(?=\w+($|\?))/,"."),e.url=c.replace(/\/\\\./,"/."),l(n,(function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)}))}},function p(f,g,m,v){var b=new h(f,v);function y(e,t){var n={};return t=c({},g,t),l(t,(function(t,i){d(t)&&(t=t()),n[i]=t&&t.charAt&&"@"==t.charAt(0)?r(e,t.substr(1)):t})),n}function x(e){return e.resource}function w(e){a(e||{},this)}return m=c({},e.defaults.actions,m),w.prototype.toJSON=function(){var e=c({},this);return delete e.$promise,delete e.$resolved,e},l(m,(function(e,r){var p=/^(POST|PUT|PATCH)$/i.test(e.method);w[r]=function(h,f,g,m){var v,A,_,E={};switch(arguments.length){case 4:_=m,A=g;case 3:case 2:if(!d(f)){E=h,v=f,A=g;break}if(d(h)){A=h,_=f;break}A=f,_=g;case 1:d(h)?A=h:p?v=h:E=h;break;case 0:break;default:throw i("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var S=this instanceof w,T=S?v:e.isArray?[]:new w(v),C={},k=e.interceptor&&e.interceptor.response||x,L=e.interceptor&&e.interceptor.responseError||void 0;l(e,(function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(C[t]=u(e))})),p&&(C.data=v),b.setUrlParams(C,c({},y(v,e.params||{}),E),e.url);var I=n(C).then((function(n){var o=n.data,s=T.$promise;if(o){if(t.isArray(o)!==!!e.isArray)throw i("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2}",r,e.isArray?"array":"object",t.isArray(o)?"array":"object");e.isArray?(T.length=0,l(o,(function(e){"object"==typeof e?T.push(new w(e)):T.push(e)}))):(a(o,T),T.$promise=s)}return T.$resolved=!0,n.resource=T,n}),(function(e){return T.$resolved=!0,(_||s)(e),o.reject(e)}));return I=I.then((function(e){var t=k(e);return(A||s)(t,e.headers),t}),L),S?I:(T.$promise=I,T.$resolved=!1,T)},w.prototype["$"+r]=function(e,t,n){d(e)&&(n=t,t=e,e={});var i=w[r].call(this,e,this,t,n);return i.$promise||i}})),w.bind=function(e){return p(f,c({},g,e),m)},w}}]}))}(window,window.angular)},function(e,t){
/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";var i=t.module("ngRoute",["ng"]).provider("$route",(function(){function e(e,n){return t.extend(new(t.extend((function(){}),{prototype:e})),n)}var n={};function i(e,t){var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},o=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,(function(e,t,n,i){var r="?"===i?i:null,a="*"===i?i:null;return o.push({name:n,optional:!!r}),t=t||"",(r?"":t)+"(?:"+(r?t:"")+(a?"(.+?)":"([^/]+)")+(r||"")+")"+(r||"")})).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i}this.when=function(e,o){if(n[e]=t.extend({reloadOnSearch:!0},o,e&&i(e,o)),e){var r="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";n[r]=t.extend({redirectTo:e},i(r,o))}return this},this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(i,r,a,s,l,c,u){var d,p,h=!1,f={routes:n,reload:function(){h=!0,i.$evalAsync((function(){g(),m()}))},updateParams:function(e){if(!this.current||!this.current.$$route)throw o("norout","Tried updating route when with no current route");var n={},i=this;t.forEach(Object.keys(e),(function(t){i.current.pathParams[t]||(n[t]=e[t])})),e=t.extend({},this.current.params,e),r.path(v(this.current.$$route.originalPath,e)),r.search(t.extend({},r.search(),n))}};return i.$on("$locationChangeStart",g),i.$on("$locationChangeSuccess",m),f;function g(o){var a,s,l=f.current;t.forEach(n,(function(n,i){!s&&(a=function(e,t){var n=t.keys,i={};if(!t.regexp)return null;var o=t.regexp.exec(e);if(!o)return null;for(var r=1,a=o.length;r<a;++r){var s=n[r-1],l=o[r];s&&l&&(i[s.name]=l)}return i}(r.path(),n))&&((s=e(n,{params:t.extend({},r.search(),a),pathParams:a})).$$route=n)})),d=s||n.null&&e(n.null,{params:{},pathParams:{}}),(p=d&&l&&d.$$route===l.$$route&&t.equals(d.pathParams,l.pathParams)&&!d.reloadOnSearch&&!h)||!l&&!d||i.$broadcast("$routeChangeStart",d,l).defaultPrevented&&o&&o.preventDefault()}function m(){var e=f.current,n=d;p?(e.params=n.params,t.copy(e.params,a),i.$broadcast("$routeUpdate",e)):(n||e)&&(h=!1,f.current=n,n&&n.redirectTo&&(t.isString(n.redirectTo)?r.path(v(n.redirectTo,n.params)).search(n.params).replace():r.url(n.redirectTo(n.pathParams,r.path(),r.search())).replace()),s.when(n).then((function(){if(n){var e,i,o=t.extend({},n.resolve);return t.forEach(o,(function(e,n){o[n]=t.isString(e)?l.get(e):l.invoke(e,null,null,n)})),t.isDefined(e=n.template)?t.isFunction(e)&&(e=e(n.params)):t.isDefined(i=n.templateUrl)&&(t.isFunction(i)&&(i=i(n.params)),i=u.getTrustedResourceUrl(i),t.isDefined(i)&&(n.loadedTemplateUrl=i,e=c(i))),t.isDefined(e)&&(o.$template=e),s.all(o)}})).then((function(o){n==f.current&&(n&&(n.locals=o,t.copy(n.params,a)),i.$broadcast("$routeChangeSuccess",n,e))}),(function(t){n==f.current&&i.$broadcast("$routeChangeError",n,e,t)})))}function v(e,n){var i=[];return t.forEach((e||"").split(":"),(function(e,t){if(0===t)i.push(e);else{var o=e.match(/(\w+)(.*)/),r=o[1];i.push(n[r]),i.push(o[2]||""),delete n[r]}})),i.join("")}}]})),o=t.$$minErr("ngRoute");function r(e,n,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(o,r,a,s,l){var c,u,d,p=a.autoscroll,h=a.onload||"";function f(){d&&(i.cancel(d),d=null),c&&(c.$destroy(),c=null),u&&((d=i.leave(u)).then((function(){d=null})),u=null)}function g(){var a=e.current&&e.current.locals,s=a&&a.$template;if(t.isDefined(s)){var d=o.$new(),g=e.current,m=l(d,(function(e){i.enter(e,null,u||r).then((function(){!t.isDefined(p)||p&&!o.$eval(p)||n()})),f()}));u=m,(c=g.scope=d).$emit("$viewContentLoaded"),c.$eval(h)}else f()}o.$on("$routeChangeSuccess",g),g()}}}function a(e,t,n){return{restrict:"ECA",priority:-400,link:function(i,o){var r=n.current,a=r.locals;o.html(a.$template);var s=e(o.contents());if(r.controller){a.$scope=i;var l=t(r.controller,a);r.controllerAs&&(i[r.controllerAs]=l),o.data("$ngControllerController",l),o.children().data("$ngControllerController",l)}s(i)}}}i.provider("$routeParams",(function(){this.$get=function(){return{}}})),i.directive("ngView",r),i.directive("ngView",a),r.$inject=["$route","$anchorScroll","$animate"],a.$inject=["$compile","$controller","$route"]}(window,window.angular)},function(e,t){
/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";var i=t.$$minErr("$sanitize");var o=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,r=/^<\/\s*([\w:-]+)[^>]*>/,a=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,s=/^</,l=/^<\//,c=/<!--(.*?)-->/g,u=/<!DOCTYPE([^>]*?)>/i,d=/<!\[CDATA\[(.*?)]]>/g,p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^\#-~| |!])/g,f=E("area,br,col,hr,img,wbr"),g=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=E("rp,rt"),v=t.extend({},m,g),b=t.extend({},g,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=t.extend({},m,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=E("script,style"),w=t.extend({},f,b,y,v),A=E("background,cite,href,longdesc,src,usemap"),_=t.extend({},A,E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"));function E(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}var S=document.createElement("pre"),T=/^(\s*)([\s\S]*?)(\s*)$/;function C(e){if(!e)return"";var t=T.exec(e),n=t[1],i=t[3],o=t[2];return o&&(S.innerHTML=o.replace(/</g,"&lt;"),o="textContent"in S?S.textContent:S.innerText),n+o+i}function k(e){return e.replace(/&/g,"&amp;").replace(p,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(h,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function L(e,n){var i=!1,o=t.bind(e,e.push);return{start:function(e,r,a){e=t.lowercase(e),!i&&x[e]&&(i=e),i||!0!==w[e]||(o("<"),o(e),t.forEach(r,(function(i,r){var a=t.lowercase(r),s="img"===e&&"src"===a||"background"===a;!0!==_[a]||!0===A[a]&&!n(i,s)||(o(" "),o(r),o('="'),o(k(i)),o('"'))})),o(a?"/>":">"))},end:function(e){e=t.lowercase(e),i||!0!==w[e]||(o("</"),o(e),o(">")),e==i&&(i=!1)},chars:function(e){i||o(k(e))}}}t.module("ngSanitize",[]).provider("$sanitize",(function(){this.$get=["$$sanitizeUri",function(e){return function(n){var p=[];return function(e,n){"string"!=typeof e&&(e=null==e?"":""+e);var p,h,g,m,w=[],A=e;w.last=function(){return w[w.length-1]};for(;e;){if(m="",h=!0,w.last()&&x[w.last()]?(e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+w.last()+"[^>]*>","i"),(function(e,t){return t=t.replace(c,"$1").replace(d,"$1"),n.chars&&n.chars(C(t)),""})),E("",w.last())):(0===e.indexOf("\x3c!--")?(p=e.indexOf("--",4))>=0&&e.lastIndexOf("--\x3e",p)===p&&(n.comment&&n.comment(e.substring(4,p)),e=e.substring(p+3),h=!1):u.test(e)?(g=e.match(u))&&(e=e.replace(g[0],""),h=!1):l.test(e)?(g=e.match(r))&&(e=e.substring(g[0].length),g[0].replace(r,E),h=!1):s.test(e)&&((g=e.match(o))?(g[4]&&(e=e.substring(g[0].length),g[0].replace(o,_)),h=!1):(m+="<",e=e.substring(1))),h&&(p=e.indexOf("<"),m+=p<0?e:e.substring(0,p),e=p<0?"":e.substring(p),n.chars&&n.chars(C(m)))),e==A)throw i("badparse","The sanitizer was unable to parse the following block of html: {0}",e);A=e}function _(e,i,o,r){if(i=t.lowercase(i),b[i])for(;w.last()&&y[w.last()];)E("",w.last());v[i]&&w.last()==i&&E("",i),(r=f[i]||!!r)||w.push(i);var s={};o.replace(a,(function(e,t,n,i,o){var r=n||i||o||"";s[t]=C(r)})),n.start&&n.start(i,s,r)}function E(e,i){var o,r=0;if(i=t.lowercase(i))for(r=w.length-1;r>=0&&w[r]!=i;r--);if(r>=0){for(o=w.length-1;o>=r;o--)n.end&&n.end(w[o]);w.length=r}}E()}(n,L(p,(function(t,n){return!/^unsafe/.test(e(t,n))}))),p.join("")}}]})),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,i=/^mailto:/;return function(o,r){if(!o)return o;for(var a,s,l,c=o,u=[];a=c.match(n);)s=a[0],a[2]==a[3]&&(s="mailto:"+s),l=a.index,d(c.substr(0,l)),p(s,a[0].replace(i,"")),c=c.substring(l+a[0].length);return d(c),e(u.join(""));function d(e){var n,i;e&&u.push((n=e,L(i=[],t.noop).chars(n),i.join("")))}function p(e,n){u.push("<a "),t.isDefined(r)&&(u.push('target="'),u.push(r),u.push('" ')),u.push('href="'),u.push(e),u.push('">'),d(n),u.push("</a>")}}}])}(window,window.angular)},function(e,t){!function(e){function t(e){this.parser=new e.ActiveXObject("Microsoft.XMLDOM")}function n(e){this.parser=new e.DOMParser}function i(e,t){return{response:function(n){return n&&function(e){var t=e.headers("content-type"),n="text/xml".indexOf("/xml");return t.indexOf("/xml")>=n}(n)?(n.xml=t(n.data),n):e.when(n)}}}t.prototype.parse=function(e){var t,n=this.parser;if(n.async=!1,n.loadXML(e),0===(t=n.parseError).errorCode)return n;throw new Error("Cannot parse XML: "+t.reason)},n.prototype.parse=function(e){return this.parser.parseFromString(e,"text/xml")},e&&e.module("xml",[]).config(["$provide",function(e){e.factory("xmlHttpInterceptor",["$q","xmlFilter",i])}]).factory("xmlParser",["$window",function(e){if(e.DOMParser)return new n(e);if(e.ActiveXObject)return new t(e);throw new Error("Cannot parser XML in this environment.")}]).filter("xml",["xmlParser",function(t){return function(n){var i=t.parse(n);return e.element(i)}}])}(angular)},function(e,t){
/**
 * @license AngularJS v1.3.15
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t,n){"use strict";var i=t.module("ngTouch",[]);function o(e,n,o){i.directive(e,["$parse","$swipe",function(i,r){return function(a,s,l){var c,u,d=i(l[e]);var p=["touch"];t.isDefined(l.ngSwipeDisableMouse)||p.push("mouse"),r.bind(s,{start:function(e,t){c=e,u=!0},cancel:function(e){u=!1},end:function(e,t){(function(e){if(!c)return!1;var t=Math.abs(e.y-c.y),i=(e.x-c.x)*n;return u&&t<75&&i>0&&i>30&&t/i<.3})(e)&&a.$apply((function(){s.triggerHandler(o),d(a,{$event:t})}))}},p)}}])}i.factory("$swipe",[function(){var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};function n(e){var t=e.touches&&e.touches.length?e.touches:[e],n=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:n.clientX,y:n.clientY}}function i(n,i){var o=[];return t.forEach(n,(function(t){var n=e[t][i];n&&o.push(n)})),o.join(" ")}return{bind:function(e,t,o){var r,a,s,l,c=!1;o=o||["mouse","touch"],e.on(i(o,"start"),(function(e){s=n(e),c=!0,r=0,a=0,l=s,t.start&&t.start(s,e)}));var u=i(o,"cancel");u&&e.on(u,(function(e){c=!1,t.cancel&&t.cancel(e)})),e.on(i(o,"move"),(function(e){if(c&&s){var i=n(e);if(r+=Math.abs(i.x-l.x),a+=Math.abs(i.y-l.y),l=i,!(r<10&&a<10))return a>r?(c=!1,void(t.cancel&&t.cancel(e))):(e.preventDefault(),void(t.move&&t.move(i,e)))}})),e.on(i(o,"end"),(function(e){c&&(c=!1,t.end&&t.end(n(e),e))}))}}}]),i.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),i.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,i){var o,r,a;function s(e,t,n){for(var i=0;i<e.length;i+=2)if(o=e[i],r=e[i+1],a=t,s=n,Math.abs(o-a)<25&&Math.abs(r-s)<25)return e.splice(i,i+2),!0;var o,r,a,s;return!1}function l(e){if(!(Date.now()-o>2500)){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,i=t[0].clientY;n<1&&i<1||a&&a[0]===n&&a[1]===i||(a&&(a=null),"label"===e.target.tagName.toLowerCase()&&(a=[n,i]),s(r,n,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur()))}}function c(e){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,o=t[0].clientY;r.push(i,o),n((function(){for(var e=0;e<r.length;e+=2)if(r[e]==i&&r[e+1]==o)return void r.splice(e,e+2)}),2500,!1)}return function(n,a,u){var d,p,h,f,g=e(u.ngClick),m=!1;function v(){m=!1,a.removeClass("ng-click-active")}a.on("touchstart",(function(e){m=!0,3==(d=e.target?e.target:e.srcElement).nodeType&&(d=d.parentNode),a.addClass("ng-click-active"),p=Date.now();var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].originalEvent||t[0];h=n.clientX,f=n.clientY})),a.on("touchmove",(function(e){v()})),a.on("touchcancel",(function(e){v()})),a.on("touchend",(function(e){var n=Date.now()-p,g=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],b=g[0].originalEvent||g[0],y=b.clientX,x=b.clientY,w=Math.sqrt(Math.pow(y-h,2)+Math.pow(x-f,2));m&&n<750&&w<12&&(!function(e,t){r||(i[0].addEventListener("click",l,!0),i[0].addEventListener("touchstart",c,!0),r=[]),o=Date.now(),s(r,e,t)}(y,x),d&&d.blur(),t.isDefined(u.disabled)&&!1!==u.disabled||a.triggerHandler("click",[e])),v()})),a.onclick=function(e){},a.on("click",(function(e,t){n.$apply((function(){g(n,{$event:t||e})}))})),a.on("mousedown",(function(e){a.addClass("ng-click-active")})),a.on("mousemove mouseup",(function(e){a.removeClass("ng-click-active")}))}}]),o("ngSwipeLeft",-1,"swipeleft"),o("ngSwipeRight",1,"swiperight")}(window,window.angular)},function(e,t,n){var i,o,r;
/*! angularjs-slider - v6.7.0 - 
 (c) Rafal Zajac <rzajac@gmail.com>, Valentin Hervieu <valentin@hervi.eu>, Jussi Saarivirta <jusasi@gmail.com>, Angelin Sirbu <angelin.sirbu@gmail.com> - 
 https://github.com/angular-slider/angularjs-slider - 
 2019-02-23 */!function(a,s){"use strict";o=[n(11)],void 0===(r="function"==typeof(i=function(e){var t=e.module("rzModule",[]).factory("RzSliderOptions",(function(){var t={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,restrictedRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,showOuterSelectionBars:!1,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,reversedControls:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,labelOverlapSeparator:" - ",customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null,ariaLabel:null,ariaLabelledBy:null,ariaLabelHigh:null,ariaLabelledByHigh:null},n={},i={options:function(t){e.extend(n,t)},getOptions:function(i){return e.extend({},t,n,i)}};return i})).factory("rzThrottle",["$timeout",function(e){return function(t,n,i){var o,r,a,s=Date.now||function(){return(new Date).getTime()},l=null,c=0;i=i||{};var u=function(){c=s(),l=null,a=t.apply(o,r),o=r=null};return function(){var d=s(),p=n-(d-c);return o=this,r=arguments,p<=0?(e.cancel(l),l=null,c=d,a=t.apply(o,r),o=r=null):l||!1===i.trailing||(l=e(u,p)),a}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(t,n,i,o,r,a){var s=function(e,t){this.scope=e,this.lowValue=0,this.highValue=0,this.sliderElem=t,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return s.prototype={init:function(){var t,n,o=this,r=function(){o.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.updateRestrictionBar(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",r),e.element(i).on("resize",r),this.initHasRun=!0,t=a((function(){o.onLowHandleChange()}),o.options.interval),n=a((function(){o.onHighHandleChange()}),o.options.interval),this.scope.$on("rzSliderForceRender",(function(){o.resetLabelsValue(),t(),o.range&&n(),o.resetSlider()})),this.scope.$watchCollection("rzSliderOptions()",(function(e,t){e!==t&&(o.applyOptions(),o.syncLowValue(),o.range&&o.syncHighValue(),o.resetSlider())})),this.scope.$watch("rzSliderModel",(function(e,n){o.internalChange||e!==n&&t()})),this.scope.$watch("rzSliderHigh",(function(e,t){o.internalChange||e!==t&&(null!=e&&n(),(o.range&&null==e||!o.range&&null!=e)&&(o.applyOptions(),o.resetSlider()))})),this.scope.$on("$destroy",(function(){o.unbindEvents(),e.element(i).off("resize",r),o.currentFocusElement=null}))},findStepIndex:function(t){for(var n=0,i=0;i<this.options.stepsArray.length;i++){var o=this.options.stepsArray[i];if(o===t){n=i;break}if(e.isDate(o)){if(o.getTime()===t.getTime()){n=i;break}}else if(e.isObject(o)&&(e.isDate(o.value)&&o.value.getTime()===t.getTime()||o.value===t)){n=i;break}}return n},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(t){var n=this.options.stepsArray[t];return e.isDate(n)?n:e.isObject(n)?n.value:n},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var t;t=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=r.getOptions(t),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(e.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return String(e)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return this.options.bindIndexForStepsArray?this.getStepValue(e):e},this.getLegend=function(t){var n=this.options.stepsArray[t];return e.isObject(n)?n.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.updateRestrictionBar(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){e.forEach(this.sliderElem.children(),(function(t,n){var i=e.element(t);switch(n){case 0:this.leftOutSelBar=i;break;case 1:this.rightOutSelBar=i;break;case 2:this.fullBar=i;break;case 3:this.selBar=i;break;case 4:this.restrictedBar=i;break;case 5:this.minH=i;break;case 6:this.maxH=i;break;case 7:this.flrLab=i;break;case 8:this.ceilLab=i;break;case 9:this.minLab=i;break;case 10:this.maxLab=i;break;case 11:this.cmbLab=i;break;case 12:this.ticks=i}}),this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var e=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,e||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,e||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,e||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.alwaysHide(this.leftOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.alwaysHide(this.restrictedBar,!this.options.restrictedRange),this.alwaysHide(this.rightOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.range&&this.options.showOuterSelectionBars&&this.fullBar.addClass("rz-transparent"),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(e,t){e.rzAlwaysHide=t,t?this.hideEl(e):this.showEl(e)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(e,t,n,i){i=void 0===i||i;var o="",r=!1,a=t.hasClass("no-label-injection");i?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(e=this.getStepValue(e)),o=String(this.customTrFn(e,this.options.id,n))):o=String(e),(void 0===t.rzsv||t.rzsv.length!==o.length||t.rzsv.length>0&&0===t.rzsd)&&(r=!0,t.rzsv=o),a||t.html(o),this.scope[n+"Label"]=o,r&&this.getDimension(t)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.options.ariaLabel?this.minH.attr("aria-label",this.options.ariaLabel):this.options.ariaLabelledBy&&this.minH.attr("aria-labelledby",this.options.ariaLabelledBy),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"),this.options.ariaLabelHigh?this.maxH.attr("aria-label",this.options.ariaLabelHigh):this.options.ariaLabelledByHigh&&this.maxH.attr("aria-labelledby",this.options.ariaLabelledByHigh))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var e=this.getDimension(this.minH);if(this.handleHalfDim=e/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-e,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var n=this;t((function(){n.updateTicksScale()}))}},updateTicksScale:function(){if(this.options.showTicks){var t=this.options.ticksArray||this.getTicksArray(),n=this.options.vertical?"translateY":"translateX",i=this;this.options.rightToLeft&&t.reverse(),this.scope.ticks=t.map((function(t){var o=null;e.isObject(t)&&(o=t.legend,t=t.value);var r=i.valueToPosition(t);i.options.vertical&&(r=i.maxPos-r);var a=n+"("+Math.round(r)+"px)",s={legend:o,selected:i.isTickSelected(t),style:{"-webkit-transform":a,"-moz-transform":a,"-o-transform":a,"-ms-transform":a,transform:a}};return s.selected&&i.options.getSelectionBarColor&&(s.style["background-color"]=i.getSelectionBarColor()),!s.selected&&i.options.getTickColor&&(s.style["background-color"]=i.getTickColor(t)),i.options.ticksTooltip&&(s.tooltip=i.options.ticksTooltip(t),s.tooltipPlacement=i.options.vertical?"right":"top"),!0!==i.options.showTicksValues&&t%i.options.showTicksValues!=0||(s.value=i.getDisplayValue(t,"tick-value"),i.options.ticksValuesTooltip&&(s.valueTooltip=i.options.ticksValuesTooltip(t),s.valueTooltipPlacement=i.options.vertical?"right":"top")),i.getLegend&&(o=i.getLegend(t,i.options.id))&&(s.legend=o),s}))}},getTicksArray:function(){var e=this.step,t=[];this.intermediateTicks&&(e=this.options.showTicks);for(var n=this.minValue;n<=this.maxValue;n+=e)t.push(n);return t},isTickSelected:function(e){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var t=this.options.showSelectionBarFromValue;if(this.lowValue>t&&e>=t&&e<=this.lowValue)return!0;if(this.lowValue<t&&e<=t&&e>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(e>=this.lowValue)return!0}else if(this.options.showSelectionBar&&e<=this.lowValue)return!0;return!!(this.range&&e>=this.lowValue&&e<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var e=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,e)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var e=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,e)},updateHandles:function(e,t){"lowValue"===e?this.updateLowHandle(t):this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(e,t){var n=this[e].rzsd,i=t-n/2+this.handleHalfDim,o=this.barDimension-n;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===e||!this.options.rightToLeft&&"maxLab"===e?Math.min(i,o):Math.min(Math.max(i,0),o):i},updateLowHandle:function(e){if(this.setPosition(this.minH,e),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",e)),this.options.getPointerColor){var t=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:t}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(e){if(this.setPosition(this.maxH,e),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",e)),this.options.getPointerColor){var t=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:t}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var e=!1,t=!1,n=this.isLabelBelowFloorLab(this.minLab),i=this.isLabelAboveCeilLab(this.minLab),o=this.isLabelAboveCeilLab(this.maxLab),r=this.isLabelBelowFloorLab(this.cmbLab),a=this.isLabelAboveCeilLab(this.cmbLab);if(n?(e=!0,this.hideEl(this.flrLab)):(e=!1,this.showEl(this.flrLab)),i?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range){var s=this.cmbLabelShown?a:o,l=this.cmbLabelShown?r:n;s?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),l?this.hideEl(this.flrLab):e||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(e){var t=this.options.rightToLeft,n=e.rzsp,i=e.rzsd,o=this.flrLab.rzsp,r=this.flrLab.rzsd;return t?n+i>=o-2:n<=o+r+2},isLabelAboveCeilLab:function(e){var t=this.options.rightToLeft,n=e.rzsp,i=e.rzsd,o=this.ceilLab.rzsp,r=this.ceilLab.rzsd;return t?n<=o+r+2:n+i>=o-2},updateRestrictionBar:function(){var e=0,t=0;if(this.options.restrictedRange){var n=this.valueToPosition(this.options.restrictedRange.from),i=this.valueToPosition(this.options.restrictedRange.to);t=Math.abs(i-n),e=this.options.rightToLeft?i+this.handleHalfDim:n+this.handleHalfDim,this.setDimension(this.restrictedBar,t),this.setPosition(this.restrictedBar,e)}},updateSelectionBar:function(){var e=0,t=0,n=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,i=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)t=Math.abs(this.maxH.rzsp-this.minH.rzsp),e=i;else if(null!==this.options.showSelectionBarFromValue){var o=this.options.showSelectionBarFromValue,r=this.valueToPosition(o);(this.options.rightToLeft?this.lowValue<=o:this.lowValue>o)?(t=this.minH.rzsp-r,e=r+this.handleHalfDim):(t=r-this.minH.rzsp,e=this.minH.rzsp+this.handleHalfDim)}else n?(t=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,e=this.minH.rzsp+this.handleHalfDim):(t=this.minH.rzsp+this.handleHalfDim,e=0);if(this.setDimension(this.selBar,t),this.setPosition(this.selBar,e),this.range&&this.options.showOuterSelectionBars&&(this.options.rightToLeft?(this.setDimension(this.rightOutSelBar,e),this.setPosition(this.rightOutSelBar,0),this.setDimension(this.leftOutSelBar,this.getDimension(this.fullBar)-(e+t)),this.setPosition(this.leftOutSelBar,e+t)):(this.setDimension(this.leftOutSelBar,e),this.setPosition(this.leftOutSelBar,0),this.setDimension(this.rightOutSelBar,this.getDimension(this.fullBar)-(e+t)),this.setPosition(this.rightOutSelBar,e+t))),this.options.getSelectionBarColor){var a=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:a}}else if(this.options.selectionBarGradient){var s=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,l=s-e>0^n,c=this.options.vertical?l?"bottom":"top":l?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+c+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(s+t+e+(l?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=s-e+(l?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(e){return"max"===e?this.options.getPointerColor(this.scope.rzSliderHigh,e):this.options.getPointerColor(this.scope.rzSliderModel,e)},getTickColor:function(e){return this.options.getTickColor(e)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var e=this.getDisplayValue(this.lowValue,"model"),t=this.getDisplayValue(this.highValue,"high"),n="";n=this.options.mergeRangeLabelsIfSame&&e===t?e:this.options.rightToLeft?t+this.options.labelOverlapSeparator+e:e+this.options.labelOverlapSeparator+t,this.translateFn(n,this.cmbLab,"cmb",!1);var i=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,i),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(e,t){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.customTrFn(e,this.options.id,t)},roundStep:function(e,t){var n=t||this.step,i=parseFloat((e-this.minValue)/n).toPrecision(12);return i=Math.round(+i)*n,+(this.minValue+i).toFixed(this.precision)},hideEl:function(e){return e.css({visibility:"hidden"})},showEl:function(e){return e.rzAlwaysHide?e:e.css({visibility:"visible"})},setPosition:function(e,t){e.rzsp=t;var n={};return n[this.positionProperty]=Math.round(t)+"px",e.css(n),t},getDimension:function(e){var t=e[0].getBoundingClientRect();return this.options.vertical?e.rzsd=(t.bottom-t.top)*this.options.scale:e.rzsd=(t.right-t.left)*this.options.scale,e.rzsd},setDimension:function(e,t){e.rzsd=t;var n={};return n[this.dimensionProperty]=Math.round(t)+"px",e.css(n),t},sanitizeValue:function(e){return Math.min(Math.max(e,this.minValue),this.maxValue)},valueToPosition:function(e){var t=this.linearValueToPosition;this.options.customValueToPosition?t=this.options.customValueToPosition:this.options.logScale&&(t=this.logValueToPosition);var n=t(e=this.sanitizeValue(e),this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(n=1-n),n*this.maxPos},linearValueToPosition:function(e,t,n){return(e-t)/(n-t)},logValueToPosition:function(e,t,n){return((e=Math.log(e))-(t=Math.log(t)))/((n=Math.log(n))-t)},positionToValue:function(e){var t=e/this.maxPos;this.options.rightToLeft&&(t=1-t);var n=this.linearPositionToValue;return this.options.customPositionToValue?n=this.options.customPositionToValue:this.options.logScale&&(n=this.logPositionToValue),n(t,this.minValue,this.maxValue)||0},linearPositionToValue:function(e,t,n){return e*(n-t)+t},logPositionToValue:function(e,t,n){t=Math.log(t);var i=e*((n=Math.log(n))-t)+t;return Math.exp(i)},getEventAttr:function(e,t){return void 0===e.originalEvent?e[t]:e.originalEvent[t]},getEventXY:function(e,t){var n=this.options.vertical?"clientY":"clientX";if(void 0!==e[n])return e[n];var i=this.getEventAttr(e,"touches");if(void 0!==t)for(var o=0;o<i.length;o++)if(i[o].identifier===t)return i[o][n];return i[0][n]},getEventPosition:function(e,t){var n=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(e,t)+n:this.getEventXY(e,t)-n)*this.options.scale-this.handleHalfDim},getEventNames:function(e){var t={moveEvent:"",endEvent:""};return this.getEventAttr(e,"touches")?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t},getNearestHandle:function(e){if(!this.range)return this.minH;var t=this.getEventPosition(e),n=Math.abs(t-this.minH.rzsp),i=Math.abs(t-this.maxH.rzsp);return n<i?this.minH:n>i?this.maxH:this.options.rightToLeft?t>this.minH.rzsp?this.minH:this.maxH:t<this.minH.rzsp?this.minH:this.maxH},focusElement:function(e){e[0].focus()},bindEvents:function(){var t,n,i;this.options.draggableRange?(t="rzSliderDrag",n=this.onDragStart,i=this.onDragMove):(t="lowValue",n=this.onStart,i=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",e.bind(this,n,null,t)),this.selBar.on("mousedown",e.bind(this,i,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",e.bind(this,n,null,t)),this.maxH.on("mousedown",e.bind(this,n,null,t))):(this.minH.on("mousedown",e.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",e.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",e.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",e.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",e.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",e.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",e.bind(this,n,null,t)),this.selBar.on("touchstart",e.bind(this,i,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",e.bind(this,n,null,t)),this.maxH.on("touchstart",e.bind(this,n,null,t))):(this.minH.on("touchstart",e.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",e.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",e.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",e.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",e.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",e.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",e.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",e.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(t,i,o){var r,a,s=this.getEventNames(o);o.stopPropagation(),o.preventDefault(),this.calcViewDimensions(),t?this.tracking=i:(t=this.getNearestHandle(o),this.tracking=t===this.minH?"lowValue":"highValue"),t.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(t),r=e.bind(this,this.dragging.active?this.onDragMove:this.onMove,t),a=e.bind(this,this.onEnd,r),n.on(s.moveEvent,r),n.on(s.endEvent,a),this.endHandlerToBeRemovedOnEnd=a,this.callOnStart();var l=this.getEventAttr(o,"changedTouches");l&&(this.touchId||(this.isDragging=!0,this.touchId=l[0].identifier))},onMove:function(t,n,i){var o,r=this.getEventAttr(n,"changedTouches");if(r)for(var a=0;a<r.length;a++)if(r[a].identifier===this.touchId){o=r[a];break}if(!r||o){var s,l=this.getEventPosition(n,o?o.identifier:void 0),c=this.options.rightToLeft?this.minValue:this.maxValue,u=this.options.rightToLeft?this.maxValue:this.minValue;l<=0?s=u:l>=this.maxPos?s=c:(s=this.positionToValue(l),s=i&&e.isNumber(this.options.showTicks)?this.roundStep(s,this.options.showTicks):this.roundStep(s)),this.positionTrackingHandle(s)}},onEnd:function(e,t){var i=this.getEventAttr(t,"changedTouches");if(!i||i[0].identifier===this.touchId){this.isDragging=!1,this.touchId=null,this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1;var o=this.getEventNames(t);n.off(o.moveEvent,e),n.off(o.endEvent,this.endHandlerToBeRemovedOnEnd),this.endHandlerToBeRemovedOnEnd=null,this.callOnEnd()}},onTickClick:function(e,t){this.onMove(e,t,!0)},onPointerFocus:function(t,n){this.tracking=n,t.one("blur",e.bind(this,this.onPointerBlur,t)),t.on("keydown",e.bind(this,this.onKeyboardEvent)),t.on("keyup",e.bind(this,this.onKeyUp)),this.firstKeyDown=!0,t.addClass("rz-active"),this.currentFocusElement={pointer:t,ref:n}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(e){e.off("keydown"),e.off("keyup"),e.removeClass("rz-active"),this.isDragging||(this.tracking="",this.currentFocusElement=null)},getKeyActions:function(e){var t=e+this.step,n=e-this.step,i=e+this.valueRange/10,o=e-this.valueRange/10;this.options.reversedControls&&(t=e-this.step,n=e+this.step,i=e-this.valueRange/10,o=e+this.valueRange/10);var r={UP:t,DOWN:n,LEFT:n,RIGHT:t,PAGEUP:i,PAGEDOWN:o,HOME:this.options.reversedControls?this.maxValue:this.minValue,END:this.options.reversedControls?this.minValue:this.maxValue};return this.options.rightToLeft&&(r.LEFT=t,r.RIGHT=n,this.options.vertical&&(r.UP=n,r.DOWN=t)),r},onKeyboardEvent:function(e){var n=this[this.tracking],i=e.keyCode||e.which,o=this.getKeyActions(n)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[i]];if(null!=o&&""!==this.tracking){e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var r=this;t((function(){var e=r.roundStep(r.sanitizeValue(o));if(r.options.draggableRangeOnly){var t,n,i=r.highValue-r.lowValue;"lowValue"===r.tracking?(t=e,(n=e+i)>r.maxValue&&(t=(n=r.maxValue)-i)):(n=e,(t=e-i)<r.minValue&&(n=(t=r.minValue)+i)),r.positionTrackingBar(t,n)}else r.positionTrackingHandle(e)}))}},onDragStart:function(e,t,n){var i=this.getEventPosition(n);this.dragging={active:!0,value:this.positionToValue(i),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-i:i-this.minH.rzsp,highLimit:this.options.rightToLeft?i-this.maxH.rzsp:this.maxH.rzsp-i},this.onStart(e,t,n)},getValue:function(e,t,n,i){var o=this.options.rightToLeft,r=null;return r="min"===e?n?i?o?this.minValue:this.maxValue-this.dragging.difference:o?this.maxValue-this.dragging.difference:this.minValue:o?this.positionToValue(t+this.dragging.lowLimit):this.positionToValue(t-this.dragging.lowLimit):n?i?o?this.minValue+this.dragging.difference:this.maxValue:o?this.maxValue:this.minValue+this.dragging.difference:o?this.positionToValue(t+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(t-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(r)},onDragMove:function(e,t){var n,i,o,r,a,s,l,c,u=this.getEventPosition(t);if(this.options.rightToLeft?(o=this.dragging.lowLimit,r=this.dragging.highLimit,l=this.maxH,c=this.minH):(o=this.dragging.highLimit,r=this.dragging.lowLimit,l=this.minH,c=this.maxH),a=u<=r,s=u>=this.maxPos-o,a){if(0===l.rzsp)return;n=this.getValue("min",u,!0,!1),i=this.getValue("max",u,!0,!1)}else if(s){if(c.rzsp===this.maxPos)return;i=this.getValue("max",u,!0,!0),n=this.getValue("min",u,!0,!0)}else n=this.getValue("min",u,!1),i=this.getValue("max",u,!1);this.positionTrackingBar(n,i)},positionTrackingBar:function(e,t){null!=this.options.minLimit&&e<this.options.minLimit&&(t=(e=this.options.minLimit)+this.dragging.difference),null!=this.options.maxLimit&&t>this.options.maxLimit&&(e=(t=this.options.maxLimit)-this.dragging.difference),this.lowValue=e,this.highValue=t,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(e)),this.updateHandles("highValue",this.valueToPosition(t))},positionTrackingHandle:function(e){var t=!1;e=this.applyMinMaxLimit(e),e=this.applyRestrictedRange(e),this.range&&(this.options.pushRange?(e=this.applyPushRange(e),t=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&e>this.highValue?e=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&e<this.lowValue&&(e=this.applyMinMaxRange(this.lowValue))),e=this.applyMinMaxRange(e),"lowValue"===this.tracking&&e>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),t=!0):"highValue"===this.tracking&&e<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),t=!0))),this[this.tracking]!==e&&(this[this.tracking]=e,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(e)),this.updateAriaAttributes(),t=!0),t&&this.applyModel(!0)},applyMinMaxLimit:function(e){return null!=this.options.minLimit&&e<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&e>this.options.maxLimit?this.options.maxLimit:e},applyMinMaxRange:function(e){var t="lowValue"===this.tracking?this.highValue:this.lowValue,n=Math.abs(e-t);return null!=this.options.minRange&&n<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&n>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:e},applyRestrictedRange:function(e){if(null!=this.options.restrictedRange&&e>this.options.restrictedRange.from&&e<this.options.restrictedRange.to){var t=(this.options.restrictedRange.to-this.options.restrictedRange.from)/2;if("lowValue"===this.tracking)return e>this.options.restrictedRange.from+t?this.options.restrictedRange.to:this.options.restrictedRange.from;if("highValue"===this.tracking)return e<this.options.restrictedRange.to-t?this.options.restrictedRange.from:this.options.restrictedRange.to}return e},applyPushRange:function(e){var t="lowValue"===this.tracking?this.highValue-e:e-this.lowValue,n=null!==this.options.minRange?this.options.minRange:this.options.step,i=this.options.maxRange;return t<n?("lowValue"===this.tracking?(this.highValue=Math.min(e+n,this.maxValue),e=this.highValue-n,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(e-n,this.minValue),e=this.lowValue+n,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==i&&t>i&&("lowValue"===this.tracking?(this.highValue=e+i,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=e-i,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),e},applyModel:function(e){this.internalChange=!0,this.scope.$apply(),e&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var e=this,t="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync((function(){e.options.onStart(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)}))}},callOnChange:function(){if(this.options.onChange){var e=this,t="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync((function(){e.options.onChange(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)}))}},callOnEnd:function(){if(this.options.onEnd){var e=this,t="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync((function(){e.options.onEnd(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)}))}this.scope.$emit("slideEnded")}},s}]).directive("rzslider",["RzSlider",function(e){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(e,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(t,n){t.slider=new e(t,n)}}}]);return t.run(["$templateCache",function(e){e.put("rzSliderTpl.html",'<div class=rzslider><span class="rz-bar-wrapper rz-left-out-selection"><span class=rz-bar></span></span> <span class="rz-bar-wrapper rz-right-out-selection"><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-restricted" ng-style=restrictionStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class="rz-bubble rz-model-value"></span> <span class="rz-bubble rz-model-high"></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),t.name})?i.apply(t,o):i)||(e.exports=r)}()},function(e,t,n){var i=n(64);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*! angularjs-slider - v6.7.0 - \n (c) Rafal Zajac <rzajac@gmail.com>, Valentin Hervieu <valentin@hervi.eu>, Jussi Saarivirta <jusasi@gmail.com>, Angelin Sirbu <angelin.sirbu@gmail.com> - \n https://github.com/angular-slider/angularjs-slider - \n 2019-02-23 */.rzslider{position:relative;display:inline-block;width:100%;height:4px;margin:35px 0 15px 0;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rzslider.with-legend{margin-bottom:40px}.rzslider[disabled]{cursor:not-allowed}.rzslider[disabled] .rz-pointer{cursor:not-allowed;background-color:#d8e0f3}.rzslider[disabled] .rz-draggable{cursor:not-allowed}.rzslider[disabled] .rz-selection{background:#8b91a2}.rzslider[disabled] .rz-tick{cursor:not-allowed}.rzslider[disabled] .rz-tick.rz-selected{background:#8b91a2}.rzslider span{position:absolute;display:inline-block;white-space:nowrap}.rzslider .rz-base{width:100%;height:100%;padding:0}.rzslider .rz-bar-wrapper{left:0;z-index:1;width:100%;height:32px;padding-top:16px;margin-top:-16px;box-sizing:border-box}.rzslider .rz-draggable{cursor:move}.rzslider .rz-bar{left:0;z-index:1;width:100%;height:4px;background:#d8e0f3;border-radius:2px}.rzslider .rz-bar-wrapper.rz-transparent .rz-bar{background:transparent}.rzslider .rz-bar-wrapper.rz-left-out-selection .rz-bar{background:#df002d}.rzslider .rz-bar-wrapper.rz-right-out-selection .rz-bar{background:#03a688}.rzslider .rz-selection{z-index:2;background:#0db9f0;border-radius:2px}.rzslider .rz-restricted{z-index:3;background:#ff0000;border-radius:2px}.rzslider .rz-pointer{top:-14px;z-index:3;width:32px;height:32px;cursor:pointer;background-color:#0db9f0;border-radius:16px}.rzslider .rz-pointer:after{position:absolute;top:12px;left:12px;width:8px;height:8px;background:#ffffff;border-radius:4px;content:''}.rzslider .rz-pointer:hover:after{background-color:#ffffff}.rzslider .rz-pointer.rz-active{z-index:4}.rzslider .rz-pointer.rz-active:after{background-color:#451aff}.rzslider .rz-bubble{bottom:16px;padding:1px 3px;color:#55637d;cursor:default}.rzslider .rz-bubble.rz-limit{color:#55637d}.rzslider .rz-ticks{position:absolute;top:-3px;left:0;z-index:1;width:100%;height:0;margin:0;list-style:none;box-sizing:border-box}.rzslider .rz-ticks-values-under .rz-tick-value{top:auto;bottom:-32px}.rzslider .rz-tick{position:absolute;top:0;left:0;width:10px;height:10px;margin-left:11px;text-align:center;cursor:pointer;background:#d8e0f3;border-radius:50%}.rzslider .rz-tick.rz-selected{background:#0db9f0}.rzslider .rz-tick-value{position:absolute;top:-30px;transform:translate(-50%, 0)}.rzslider .rz-tick-legend{position:absolute;top:24px;max-width:50px;white-space:normal;transform:translate(-50%, 0)}.rzslider.rz-vertical{position:relative;width:4px;height:100%;padding:0;margin:0 20px;vertical-align:baseline}.rzslider.rz-vertical .rz-base{width:100%;height:100%;padding:0}.rzslider.rz-vertical .rz-bar-wrapper{top:auto;left:0;width:32px;height:100%;padding:0 0 0 16px;margin:0 0 0 -16px}.rzslider.rz-vertical .rz-bar{bottom:0;left:auto;width:4px;height:100%}.rzslider.rz-vertical .rz-pointer{top:auto;bottom:0;left:-14px !important}.rzslider.rz-vertical .rz-bubble{bottom:0;left:16px !important;margin-left:3px}.rzslider.rz-vertical .rz-ticks{top:0;left:-3px;z-index:1;width:0;height:100%}.rzslider.rz-vertical .rz-tick{margin-top:11px;margin-left:auto;vertical-align:middle}.rzslider.rz-vertical .rz-tick-value{top:auto;left:24px;transform:translate(0, -28%)}.rzslider.rz-vertical .rz-tick-legend{top:auto;right:24px;max-width:none;white-space:nowrap;transform:translate(0, -28%)}.rzslider.rz-vertical .rz-ticks-values-under .rz-tick-value{right:24px;bottom:auto;left:auto}\n",""])},function(e,t,n){var i,o;i=[n(11)],void 0!==(o=function(e){return function(e){function t(t){return"ActiveXObject"in t||e.isDefined(XSLTProcessor)&&e.isDefined(XMLSerializer)}function n(e){var t;return(t=e.getElementsByTagName("parsererror")[0])?t.textContent?t.textContent.split("\n",1)[0]:"unknown parser error":null}function i(e,i,o,r){if(!o||!r)return"No"+(o?"":" XML")+(o||r?"":" &")+(r?"":" XSLT");if(!t(e))return"XSL transformation is not supported by your browser";var a,s,l,c;if("ActiveXObject"in e){if((l=new ActiveXObject("Msxml2.DOMDocument")).loadXML(o),0!==l.parseError.errorCode)return("XML parse error ("+l.parseError.errorCode+"): "+l.parseError.reason).trim();if((c=new ActiveXObject("Msxml2.FreeThreadedDOMDocument")).loadXML(r),0!==c.parseError.errorCode)return("XSLT parse error ("+c.parseError.errorCode+"): "+c.parseError.reason).trim();var u=new ActiveXObject("Msxml2.XSLTemplate");try{u.stylesheet=c}catch(d){return"XSLT error: "+d.message}(a=u.createProcessor()).input=l,a.transform(),s=a.output}else{var d;if(d=n(l=(new DOMParser).parseFromString(o,"text/xml")))return"XML parse error: "+d;if(d=n(c=(new DOMParser).parseFromString(r,"text/xml")))return"XSLT parse error: "+d;(a=new XSLTProcessor).importStylesheet(c),s=(new XMLSerializer).serializeToString(a.transformToFragment(l,i))}return s||"(empty)"}return e.module("ngXslt",[]).filter("xslt",["$window","$document",function(e,t){return i.bind(this,e,t[0])}])}(e)}.apply(t,i))&&(e.exports=o)},function(e,t,n){angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(e,t,n,i){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(o,r,a){var s,l,c,u,d,p,h,f,g,m,v,b,y,x,w,A,_,E;return E=angular.element(t),x=null,w=null,c=null,u=null,v=!0,_=!1,A=null,l=!1,m=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight},b=function(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+y(e)},y=function(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset},g=function(){var t,i,a;return u===E?(t=m(u)+y(u[0].document.documentElement),a=b(r)+m(r)):(t=m(u),i=0,void 0!==b(u)&&(i=b(u)),a=b(r)-i+m(r)),_&&(a=m((r[0].ownerDocument||r[0].document).documentElement)),a-t<=m(u)*x+1?(c=!0,w?o.$$phase||e.$$phase?o.infiniteScroll():o.$apply(o.infiniteScroll):void 0):(l&&n.cancel(l),c=!1)},null!=i&&(g=function(e,t){var i,o,r;return r=null,o=0,i=function(){return o=(new Date).getTime(),n.cancel(r),r=null,e.call()},function(){var a,s;return a=(new Date).getTime(),(s=t-(a-o))<=0?(n.cancel(r),r=null,o=a,e.call()):r?void 0:r=n(i,s,1)}}(g,i)),o.$on("$destroy",(function(){if(u.unbind("scroll",g),null!=A&&(A(),A=null),l)return n.cancel(l)})),h=function(e){return x=parseFloat(e)||0},o.$watch("infiniteScrollDistance",h),h(o.infiniteScrollDistance),p=function(e){if((w=!e)&&c)return c=!1,g()},o.$watch("infiniteScrollDisabled",p),p(o.infiniteScrollDisabled),f=function(e){return _=e},o.$watch("infiniteScrollUseDocumentBottom",f),f(o.infiniteScrollUseDocumentBottom),(s=function(e){if(null!=u&&u.unbind("scroll",g),u=e,null!=e)return u.bind("scroll",g)})(E),o.infiniteScrollListenForEvent&&(A=e.$on(o.infiniteScrollListenForEvent,g)),d=function(e){if(null!=e&&0!==e.length){if(e.nodeType&&1===e.nodeType?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=angular.element(document.querySelector(e))),null!=e)return s(e);throw new Error("invalid infinite-scroll-container attribute.")}},o.$watch("infiniteScrollContainer",d),d(o.infiniteScrollContainer||[]),null!=a.infiniteScrollParent&&s(angular.element(r.parent())),null!=a.infiniteScrollImmediateCheck&&(v=o.$eval(a.infiniteScrollImmediateCheck)),l=n((function(){return v&&g(),n.cancel(l)}))}}}]),e.exports===t&&(e.exports="infinite-scroll")},function(e,t,n){var i;
/*!
 * angular-translate - v2.18.2 - 2020-01-04
 * 
 * Copyright (c) 2020 The angular-translate team, Pascal Precht; Licensed MIT
 */void 0===(i=function(){return function(){function e(e){"use strict";var t=e.storageKey(),n=e.storage(),i=function(){var i=e.preferredLanguage();angular.isString(i)?e.use(i):n.put(t,e.use())};i.displayName="fallbackFromIncorrectStorageValue",n?n.get(t)?e.use(n.get(t)).catch(i):i():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(e,t,n,i){"use strict";var o,r,a,s,l,c,u,d,p,h,f,g,m,v,b,y,x={},w=[],A=e,_=[],E="translate-cloak",S=!1,T=!1,C=".",k=!1,L=!1,I=0,D=!0,P="default",O={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return t}return n.join("-")},"iso639-1":function(e){return(e||"").split("_").join("-").split("-")[0].toLowerCase()}},M=function(){if(angular.isFunction(i.getLocale))return i.getLocale();var e,n,o=t.$get().navigator,r=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(o.languages))for(e=0;e<o.languages.length;e++)if((n=o.languages[e])&&n.length)return n;for(e=0;e<r.length;e++)if((n=o[r[e]])&&n.length)return n;return null};M.displayName="angular-translate/service: getFirstBrowserLanguage";var N=function(){var e=M()||"";return O[P]&&(e=O[P](e)),e};N.displayName="angular-translate/service: getLocale";var R=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},B=function(){return this.toString().replace(/^\s+|\s+$/g,"")},z=function(e){return angular.isString(e)?e.toLowerCase():e},$=function(e){if(e){for(var t,n=[],i=z(e),o=0,a=w.length;o<a;o++)n.push(z(w[o]));if((o=R(n,i))>-1)return w[o];if(r)for(var s in r)if(r.hasOwnProperty(s)){var l=!1,c=Object.prototype.hasOwnProperty.call(r,s)&&z(s)===z(e);if("*"===s.slice(-1)&&(l=z(s.slice(0,-1))===z(e.slice(0,s.length-1))),(c||l)&&(t=r[s],R(n,z(t))>-1))return t}var u=e.split("_");return u.length>1&&R(n,z(u[0]))>-1?u[0]:void 0}},H=function(e,t){if(!e&&!t)return x;if(e&&!t){if(angular.isString(e))return x[e]}else angular.isObject(x[e])||(x[e]={}),angular.extend(x[e],V(t));return this};this.translations=H,this.cloakClassName=function(e){return e?(E=e,this):E},this.nestedObjectDelimeter=function(e){return e?(C=e,this):C};var V=function(e,t,n,i){var o,r,a;for(o in t||(t=[]),n||(n={}),e)Object.prototype.hasOwnProperty.call(e,o)&&(a=e[o],angular.isObject(a)?V(a,t.concat(o),n,o):(r=t.length?""+t.join(C)+C+o:o,t.length&&o===i&&(n[""+t.join(C)]="@:"+r),n[r]=a));return n};V.displayName="flatObject",this.addInterpolation=function(e){return _.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return h=e,this},this.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},this.preferredLanguage=function(e){return e?(j(e),this):o};var j=function(e){return e&&(o=e),o};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(m=e,this):m},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return F(e),this};var F=function(e){return e?(angular.isString(e)?(s=!0,a=[e]):angular.isArray(e)&&(s=!1,a=e),angular.isString(o)&&R(a,o)<0&&a.push(o),this):s?a[0]:a};this.use=function(e){if(e){if(!x[e]&&!f)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return l=e,this}return l},this.resolveClientLocale=function(){return N()};var U=function(e){return e?(A=e,this):d?d+A:A};this.storageKey=U,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return f=e,g=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return u=e,this},this.storagePrefix=function(e){return e?(d=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return p=e,this},this.usePostCompiling=function(e){return S=!!e,this},this.forceAsyncReload=function(e){return T=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},P=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():N();return o=w.length&&$(t)||t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(w=e,t&&(r=t),this):w},this.useLoaderCache=function(e){return!1===e?b=void 0:!0===e?b=!0:void 0===e?b="$translationCache":e&&(b=e),this},this.directivePriority=function(e){return void 0===e?I:(I=e,this)},this.statefulFilter=function(e){return void 0===e?D:(D=e,this)},this.postProcess=function(e){return y=e||void 0,this},this.keepContent=function(e){return L=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,n,i){var r,d,P,O=t.get(h||"$translateDefaultInterpolation"),M=!1,z={},W={},q=function(e,t,n,s,c,p){!l&&o&&(l=o);var h=c&&c!==l?$(c)||c:l;if(c&&re(c),angular.isArray(e))return function(e){for(var o={},r=[],a=function(e){var r=i.defer(),a=function(t){o[e]=t,r.resolve([e,t])};return q(e,t,n,s,c,p).then(a,a),r.promise},l=0,u=e.length;l<u;l++)r.push(a(e[l]));return i.all(r).then((function(){return o}))}(e);var f=i.defer();if(!e)throw new TypeError("translationId must be a not empty string");e=B.apply(e);var g=function(){var e=W[h]||W[o];if(d=0,u&&!e){var t=r.get(A);if(e=W[t],a&&a.length){var n=R(a,t);d=0===n?1:0,R(a,o)<0&&a.push(o)}}return e}();if(g){var m=function(){c||(h=l),ne(e,t,n,s,h,p).then(f.resolve,f.reject)};m.displayName="promiseResolved",g.finally(m).catch(angular.noop)}else ne(e,t,n,s,h,p).then(f.resolve,f.reject);return f.promise},Q=function(e){return m&&(e=[m,e].join(" ")),v&&(e=[e,v].join(" ")),e},G=function(e){l=e,u&&r.put(q.storageKey(),l),n.$emit("$translateChangeSuccess",{language:e}),O.setLocale(l);var t=function(e,t){z[t].setLocale(l)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(z,t),n.$emit("$translateChangeEnd",{language:e})},Y=function(e){if(!e)throw"No language key specified for loading.";var o=i.defer();n.$emit("$translateLoadingStart",{language:e}),M=!0;var r=b;"string"==typeof r&&(r=t.get(r));var a=angular.extend({},g,{key:e,$http:angular.extend({},{cache:r},g.$http)}),s=function(t){var i={};n.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,(function(e){angular.extend(i,V(e))})):angular.extend(i,V(t)),M=!1,o.resolve({key:e,table:i}),n.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var l=function(e){n.$emit("$translateLoadingError",{language:e}),o.reject(e),n.$emit("$translateLoadingEnd",{language:e})};return l.displayName="onLoaderError",t.get(f)(a).then(s,l),o.promise};if(u&&(!(r=t.get(u)).get||!r.put))throw new Error("Couldn't use storage '"+u+"', missing get() or put() method!");if(_.length){var Z=function(e){var n=t.get(e);n.setLocale(o||l),z[n.getInterpolationIdentifier()]=n};Z.displayName="interpolationFactoryAdder",angular.forEach(_,Z)}var X=function(e,t,n,o,r){var a=i.defer(),s=function(i){if(Object.prototype.hasOwnProperty.call(i,t)&&null!==i[t]){o.setLocale(e);var s=i[t];if("@:"===s.substr(0,2))X(e,s.substr(2),n,o,r).then(a.resolve,a.reject);else{var c=o.interpolate(i[t],n,"service",r,t);c=oe(t,i[t],c,n,e),a.resolve(c)}o.setLocale(l)}else a.reject()};return s.displayName="fallbackTranslationResolver",function(e){var t=i.defer();if(Object.prototype.hasOwnProperty.call(x,e))t.resolve(x[e]);else if(W[e]){var n=function(e){H(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",W[e].then(n,t.reject)}else t.reject();return t.promise}(e).then(s,a.reject),a.promise},K=function(e,t,n,i,o){var r,a=x[e];if(a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){if(i.setLocale(e),r=i.interpolate(a[t],n,"filter",o,t),r=oe(t,a[t],r,n,e,o),!angular.isString(r)&&angular.isFunction(r.$$unwrapTrustedValue)){var s=r.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return K(e,s.substr(2),n,i,o)}else if("@:"===r.substr(0,2))return K(e,r.substr(2),n,i,o);i.setLocale(l)}return r},J=function(e,n,i,o){return p?t.get(p)(e,l,n,i,o):e},ee=function(e,t,n,o,r,s){var l=i.defer();if(e<a.length){var c=a[e];X(c,t,n,o,s).then((function(e){l.resolve(e)}),(function(){return ee(e+1,t,n,o,r,s).then(l.resolve,l.reject)}))}else if(r)l.resolve(r);else{var u=J(t,n,r);p&&u?l.resolve(u):l.reject(Q(t))}return l.promise},te=function(e,t,n,i,o){var r;if(e<a.length){var s=a[e];(r=K(s,t,n,i,o))||""===r||(r=te(e+1,t,n,i))}return r},ne=function(e,t,n,o,r,s){var l=i.defer(),c=r?x[r]:x,u=n?z[n]:O;if(c&&Object.prototype.hasOwnProperty.call(c,e)&&null!==c[e]){var h=c[e];if("@:"===h.substr(0,2))q(h.substr(2),t,n,o,r,s).then(l.resolve,l.reject);else{var f=u.interpolate(h,t,"service",s,e);f=oe(e,h,f,t,r),l.resolve(f)}}else{var g;p&&!M&&(g=J(e,t,o)),r&&a&&a.length?function(e,t,n,i,o){return ee(P>0?P:d,e,t,n,i,o)}(e,t,u,o,s).then((function(e){l.resolve(e)}),(function(e){l.reject(Q(e))})):p&&!M&&g?o?l.resolve(o):l.resolve(g):o?l.resolve(o):l.reject(Q(e))}return l.promise},ie=function(e,t,n,i,o){var r,s=i?x[i]:x,l=O;if(z&&Object.prototype.hasOwnProperty.call(z,n)&&(l=z[n]),s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){var c=s[e];"@:"===c.substr(0,2)?r=ie(c.substr(2),t,n,i,o):(r=l.interpolate(c,t,"filter",o,e),r=oe(e,c,r,t,i,o))}else{var u;p&&!M&&(u=J(e,t,o)),i&&a&&a.length?(d=0,r=function(e,t,n,i){return te(P>0?P:d,e,t,n,i)}(e,t,l,o)):r=p&&!M&&u?u:Q(e)}return r},oe=function(e,n,i,o,r,a){var s=y;return s&&("string"==typeof s&&(s=t.get(s)),s)?s(e,n,i,o,r,a):i},re=function(e){x[e]||!f||W[e]||(W[e]=Y(e).then((function(e){return H(e.key,e.table),e})))};q.preferredLanguage=function(e){return e&&j(e),o},q.cloakClassName=function(){return E},q.nestedObjectDelimeter=function(){return C},q.fallbackLanguage=function(e){if(null!=e){if(F(e),f&&a&&a.length)for(var t=0,n=a.length;t<n;t++)W[a[t]]||(W[a[t]]=Y(a[t]));q.use(q.use())}return s?a[0]:a},q.useFallbackLanguage=function(e){if(null!=e)if(e){var t=R(a,e);t>-1&&(P=t)}else P=0},q.proposedLanguage=function(){return c},q.storage=function(){return r},q.negotiateLocale=$,q.use=function(e){if(!e)return l;var t=i.defer();t.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:e});var o=$(e);return w.length>0&&!o?i.reject(e):(o&&(e=o),c=e,!T&&x[e]||!f||W[e]?W[e]?W[e].then((function(e){return c===e.key&&G(e.key),t.resolve(e.key),e}),(function(e){return!l&&a&&a.length>0&&a[0]!==e?q.use(a[0]).then(t.resolve,t.reject):t.reject(e)})):(t.resolve(e),G(e)):(W[e]=Y(e).then((function(n){return H(n.key,n.table),t.resolve(n.key),c===e&&G(n.key),n}),(function(e){return n.$emit("$translateChangeError",{language:e}),t.reject(e),n.$emit("$translateChangeEnd",{language:e}),i.reject(e)})),W[e].finally((function(){!function(e){c===e&&(c=void 0),W[e]=void 0}(e)})).catch(angular.noop)),t.promise)},q.resolveClientLocale=function(){return N()},q.storageKey=function(){return U()},q.isPostCompilingEnabled=function(){return S},q.isForceAsyncReloadEnabled=function(){return T},q.isKeepContent=function(){return L},q.refresh=function(e){if(!f)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:e});var t=i.defer(),o={};function r(e){var t=Y(e);return W[e]=t,t.then((function(t){x[e]={},H(e,t.table),o[e]=!0}),angular.noop),t}if(t.promise.then((function(){for(var e in x)x.hasOwnProperty(e)&&(e in o||delete x[e]);l&&G(l)}),angular.noop).finally((function(){n.$emit("$translateRefreshEnd",{language:e})})),e)x[e]?r(e).then(t.resolve,t.reject):t.reject();else{var s=a&&a.slice()||[];l&&-1===s.indexOf(l)&&s.push(l),i.all(s.map(r)).then(t.resolve,t.reject)}return t.promise},q.instant=function(e,t,n,i,r){var s=i&&i!==l?$(i)||i:l;if(null===e||angular.isUndefined(e))return e;if(i&&re(i),angular.isArray(e)){for(var c={},u=0,d=e.length;u<d;u++)c[e[u]]=q.instant(e[u],t,n,i,r);return c}if(angular.isString(e)&&e.length<1)return e;e&&(e=B.apply(e));var h,f,g=[];o&&g.push(o),s&&g.push(s),a&&a.length&&(g=g.concat(a));for(var b=0,y=g.length;b<y;b++){var w=g[b];if(x[w]&&void 0!==x[w][e]&&(h=ie(e,t,n,s,r)),void 0!==h)break}return h||""===h||(m||v?h=Q(e):(h=O.interpolate(e,t,"filter",r),p&&!M&&(f=J(e,t,r)),p&&!M&&f&&(h=f))),h},q.versionInfo=function(){return"2.18.2"},q.loaderCache=function(){return b},q.directivePriority=function(){return I},q.statefulFilter=function(){return D},q.isReady=function(){return k};var ae=i.defer();ae.promise.then((function(){k=!0})),q.onReady=function(e){var t=i.defer();return angular.isFunction(e)&&t.promise.then(e),k?t.resolve():ae.promise.then(t.resolve),t.promise},q.getAvailableLanguageKeys=function(){return w.length>0?w:null},q.getTranslationTable=function(e){return(e=e||q.use())&&x[e]?angular.copy(x[e]):null};var se=n.$on("$translateReady",(function(){ae.resolve(),se(),se=null})),le=n.$on("$translateChangeEnd",(function(){ae.resolve(),le(),le=null}));if(f){if(angular.equals(x,{})&&q.use()&&q.use(q.use()),a&&a.length)for(var ce=function(e){return H(e.key,e.table),n.$emit("$translateChangeEnd",{language:e.key}),e},ue=0,de=a.length;ue<de;ue++){var pe=a[ue];!T&&x[pe]||(W[pe]=Y(pe).then(ce))}}else n.$emit("$translateReady",{language:q.use()});return q}]}function n(e,t){"use strict";var n={setLocale:function(e){},getInterpolationIdentifier:function(){return"default"},useSanitizeValueStrategy:function(e){return t.useStrategy(e),this},interpolate:function(n,i,o,r,a){var s;return i=i||{},i=t.sanitize(i,"params",r,o),angular.isNumber(n)?s=""+n:angular.isString(n)?(s=e(n)(i),s=t.sanitize(s,"text",r,o)):s="",s}};return n}function i(e,t,n,i,o){"use strict";var r=function(){return this.toString().replace(/^\s+|\s+$/g,"")},a=function(e){return angular.isString(e)?e.toLowerCase():e};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(s,l){var c=l.translateValues?l.translateValues:void 0,u=l.translateInterpolation?l.translateInterpolation:void 0,d=l.translateSanitizeStrategy?l.translateSanitizeStrategy:void 0,p=s[0].outerHTML.match(/translate-value-+/i),h="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",f="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(s,g,m){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=function e(t){return t.translateNamespace?t.translateNamespace:t.$parent?e(t.$parent):void 0}(s);var v={},b=function(e){if(angular.isFunction(b._unwatchOld)&&(b._unwatchOld(),b._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var n=r.apply(g.text()).replace(/\n/g," "),i=n.match(h);if(angular.isArray(i)){s.preText=i[1],s.postText=i[3],v.translate=t(i[2])(s.$parent);var o=n.match(f);angular.isArray(o)&&o[2]&&o[2].length&&(b._unwatchOld=s.$watch(o[2],(function(e){v.translate=e,E()})))}else v.translate=n||void 0}else v.translate=e;E()},y=function(e){m.$observe(e,(function(t){v[e]=t,E()}))};!function(e,t,n){if(t.translateValues&&angular.extend(e,i(t.translateValues)(s.$parent)),p)for(var o in n)Object.prototype.hasOwnProperty.call(t,o)&&"translateValue"===o.substr(0,14)&&"translateValues"!==o&&(e[a(o.substr(14,1))+o.substr(15)]=n[o])}(s.interpolateParams,m,l);var x=!0;for(var w in m.$observe("translate",(function(e){void 0===e?b(""):""===e&&x||(v.translate=e,E()),x=!1})),m)m.hasOwnProperty(w)&&"translateAttr"===w.substr(0,13)&&w.length>13&&y(w);if(m.$observe("translateDefault",(function(e){s.defaultText=e,E()})),d&&m.$observe("translateSanitizeStrategy",(function(e){s.sanitizeStrategy=i(e)(s.$parent),E()})),c&&m.$observe("translateValues",(function(e){e&&s.$parent.$watch((function(){angular.extend(s.interpolateParams,i(e)(s.$parent))}))})),p){var A=function(e){m.$observe(e,(function(t){var n=a(e.substr(14,1))+e.substr(15);s.interpolateParams[n]=t}))};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&"translateValue"===_.substr(0,14)&&"translateValues"!==_&&A(_)}var E=function(){for(var e in v)v.hasOwnProperty(e)&&void 0!==v[e]&&S(e,v[e],s,s.interpolateParams,s.defaultText,s.translateNamespace)},S=function(t,n,i,o,r,a){n?(a&&"."===n.charAt(0)&&(n=a+n),e(n,o,u,r,i.translateLanguage,i.sanitizeStrategy).then((function(e){T(e,i,!0,t)}),(function(e){T(e,i,!1,t)}))):T(n,i,!1,t)},T=function(t,i,o,r){if(o||void 0!==i.defaultText&&(t=i.defaultText),"translate"===r){(o||!o&&!e.isKeepContent()&&void 0===m.translateKeepContent)&&g.empty().append(i.preText+t+i.postText);var a=e.isPostCompilingEnabled(),s=void 0!==l.translateCompile,c=s&&"false"!==l.translateCompile;(a&&!s||c)&&n(g.contents())(i)}else{var u=m.$attr[r];"data-"===u.substr(0,5)&&(u=u.substr(5)),u=u.substr(15),g.attr(u,t)}};(c||p||m.translateDefault)&&s.$watch("interpolateParams",E,!0),s.$on("translateLanguageChanged",E);var C=o.$on("$translateChangeSuccess",E);g.text().length?m.translate?b(m.translate):b(""):m.translate&&b(m.translate),E(),s.$on("$destroy",C)}}}}function o(e,t){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(n,i,o){var a,s,l,c={},u=function(){angular.forEach(a,(function(t,r){t&&(c[r]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),e(t,s,o.translateInterpolation,void 0,n.translateLanguage,l).then((function(e){i.attr(r,e)}),(function(e){i.attr(r,e)})))})),angular.forEach(c,(function(e,t){a[t]||(i.removeAttr(t),delete c[t])}))};r(n,o.translateAttr,(function(e){a=e}),u),r(n,o.translateValues,(function(e){s=e}),u),r(n,o.translateSanitizeStrategy,(function(e){l=e}),u),o.translateValues&&n.$watch(o.translateValues,u,!0),n.$on("translateLanguageChanged",u);var d=t.$on("$translateChangeSuccess",u);u(),n.$on("$destroy",d)}}}function r(e,t,n,i){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,(function(e){n(e),i()}),!0),n(e.$eval(t)))}function a(e,t){"use strict";return{compile:function(n){var i=function(t){t.addClass(e.cloakClassName())},o=function(t){t.removeClass(e.cloakClassName())};return i(n),function(n,r,a){var s=o.bind(this,r),l=i.bind(this,r);a.translateCloak&&a.translateCloak.length?(a.$observe("translateCloak",(function(t){e(t).then(s,l)})),t.$on("$translateChangeSuccess",(function(){e(a.translateCloak).then(s,l)}))):e.onReady(s)}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=function e(t){return t.translateNamespace?t.translateNamespace:t.$parent?e(t.$parent):void 0}(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",(function(t){e.translateLanguage=t})),e.$watch("translateLanguage",(function(){e.$broadcast("translateLanguageChanged")}))}}}}function c(e,t){"use strict";var n=function(n,i,o,r){if(!angular.isObject(i)){var a=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};i=e(i)(a)}return t.instant(n,i,o,r)};return t.statefulFilter()&&(n.$stateful=!0),n}function u(e){"use strict";return e("translations")}return e.$inject=["$translate"],t.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],i.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],o.$inject=["$translate","$rootScope"],a.$inject=["$translate","$rootScope"],c.$inject=["$parse","$translate"],u.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",(function(){"use strict";var e,t,n,i=null,o=!1,r=!1;(n={sanitize:function(e,t){return"text"===t&&(e=s(e)),e},escape:function(e,t){return"text"===t&&(e=a(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=c(e,s)),e},escapeParameters:function(e,t){return"params"===t&&(e=c(e,a)),e},sce:function(e,t,n){return"text"===t?e=l(e):"params"===t&&"filter"!==n&&(e=c(e,a)),e},sceParameters:function(e,t){return"params"===t&&(e=c(e,l)),e}}).escaped=n.escapeParameters,this.addStrategy=function(e,t){return n[e]=t,this},this.removeStrategy=function(e){return delete n[e],this},this.useStrategy=function(e){return o=!0,i=e,this},this.$get=["$injector","$log",function(a,s){var l,c={};return a.has("$sanitize")&&(e=a.get("$sanitize")),a.has("$sce")&&(t=a.get("$sce")),{useStrategy:(l=this,function(e){l.useStrategy(e)}),sanitize:function(e,t,l,u){return i||o||r||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),r=!0),l||null===l||(l=i),l?(u||(u="service"),function(e,t,i,o){return angular.forEach(o,(function(o){if(angular.isFunction(o))e=o(e,t,i);else if(angular.isFunction(n[o]))e=n[o](e,t,i);else{if(!angular.isString(n[o]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+o+"'");if(!c[n[o]])try{c[n[o]]=a.get(n[o])}catch(e){throw c[n[o]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+o+"'")}e=c[n[o]](e,t,i)}})),e}(e,t,u,angular.isArray(l)?l:[l])):e}}}];var a=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},s=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},l=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return t.trustAsHtml(e)},c=function(e,t,n){if(angular.isDate(e))return e;if(angular.isObject(e)){var i=angular.isArray(e)?[]:{};if(n){if(n.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(e),angular.forEach(e,(function(e,o){angular.isFunction(e)||(i[o]=c(e,t,n))})),n.splice(-1,1),i}return angular.isNumber(e)||!0===e||!1===e||angular.isUndefined(e)||null===e?e:t(e)}})),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",t),t.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",i),i.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",o),o.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",a),a.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",l),l.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",c),c.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",u),u.displayName="$translationCache","pascalprecht.translate"}()}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i;
/*!
 * angular-translate - v2.18.2 - 2020-01-04
 * 
 * Copyright (c) 2020 The angular-translate team, Pascal Precht; Licensed MIT
 */void 0===(i=function(){return function(){function e(e,t){"use strict";return function(n){if(!n||!(angular.isArray(n.files)||angular.isString(n.prefix)&&angular.isString(n.suffix)))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");n.files||(n.files=[{prefix:n.prefix,suffix:n.suffix}]);for(var i=function(i){if(!i||!angular.isString(i.prefix)||!angular.isString(i.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var o=[i.prefix,n.key,i.suffix].join("");return angular.isObject(n.fileMap)&&n.fileMap[o]&&(o=n.fileMap[o]),t(angular.extend({url:o,method:"GET"},n.$http)).then((function(e){return e.data}),(function(){return e.reject(n.key)}))},o=[],r=n.files.length,a=0;a<r;a++)o.push(i({prefix:n.files[a].prefix,key:n.key,suffix:n.files[a].suffix}));return e.all(o).then((function(e){for(var t=e.length,n={},i=0;i<t;i++)for(var o in e[i])n[o]=e[i][o];return n}))}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}()}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,o;i=[n(11)],void 0!==(o=function(e){return function(e){function t(t,n){isFinite(n)?0!==n&&(n=n||2):e.isString(n)||(n=2);for(var i=t.replace(/>\s*</gm,"><").replace(/</g,"~::~<").replace(/\s*xmlns([=:])/g,"~::~xmlns$1").split("~::~"),o=i.length,r=!1,a=0,s="",l=function(e){var t="";if(isNaN(parseInt(e)))t=e;else for(var n=0;e>n;n++)t+=" ";for(var i=["\n"],o=0;100>o;o++)i.push(i[o]+t);return i}(n),c=0;o>c;c++)-1!==i[c].indexOf("<!")?(s+=l[a]+i[c],r=!0,(-1!==i[c].indexOf("--\x3e")||-1!==i[c].indexOf("]>")||-1!==i[c].indexOf("!DOCTYPE"))&&(r=!1)):-1!==i[c].indexOf("--\x3e")||-1!==i[c].indexOf("]>")?(s+=i[c],r=!1):/^<\w/.test(i[c-1])&&/^<\/\w/.test(i[c])&&/^<[\w:\-\.,]+/.exec(i[c-1])==/^<\/[\w:\-\.,]+/.exec(i[c])[0].replace("/","")?(s+=i[c],r||a--):s+=-1!==i[c].search(/<\w/)&&-1===i[c].indexOf("</")&&-1===i[c].indexOf("/>")?r?i[c]:l[a++]+i[c]:-1!==i[c].search(/<\w/)&&-1!==i[c].indexOf("</")?r?i[c]:l[a]+i[c]:i[c].search(/<\//)>-1?r?i[c]:l[--a]+i[c]:-1!==i[c].indexOf("/>")?r?i[c]:l[a]+i[c]:-1!==i[c].indexOf("<?")||-1!==i[c].indexOf("xmlns:")||-1!==i[c].indexOf("xmlns=")?l[a]+i[c]:i[c];return s.trim()}return e.module("prettyXml",[]).filter("prettyXml",(function(){return t}))}(e)}.apply(t,i))&&(e.exports=o)},function(e,t,n){
/**
 *  angular-simple-logger
 *
 * @version: 0.1.7
 * @author: Nicholas McCready
 * @date: Tue Jan 26 2016 10:15:01 GMT-0500 (EST)
 * @license: MIT
 */
var i=n(11);i.module("nemLogging",[]),i.module("nemLogging").provider("nemDebug",(function(){var e;return e=n(71),this.$get=function(){return e},this.debug=e,this}));var o=[].slice;i.module("nemLogging").provider("nemSimpleLogger",["nemDebugProvider",function(e){var t,n,i,r,a,s,l,c,u,d,p,h;for(p=e.debug,i={},t={},u=c=0,d=(r=["debug","info","warn","error","log"]).length;c<d;u=++c)t[h=r[u]]=u;return s=function(e,t,n){if(e>=t)return n()},a=function(e){var t,n,i;if(t=!1,!e)return t;for(n=0,i=r.length;n<i&&(t=null!=e[h=r[n]]&&"function"==typeof e[h]);n++);return t},l=function(e,t){var n,o,a,s;for(null==i[e]&&(i[e]=p(e)),n=i[e],s={},o=0,a=r.length;o<a;o++)s[h=r[o]]="debug"===h?n:t[h];return s},n=function(){function e(e){var n,i,l,c,u,d,p;if(this.$log=e,this.spawn=(u=this.spawn,d=this,function(){return u.apply(d,arguments)}),!this.$log)throw"internalLogger undefined";if(!a(this.$log))throw"@$log is invalid";for(this.doLog=!0,c={},p=this,n=function(e){return c[e]=function(){var n;if(n=1<=arguments.length?o.call(arguments,0):[],p.doLog)return s(t[e],p.currentLevel,(function(){var t;return(t=p.$log)[e].apply(t,n)}))},p[e]=c[e]},i=0,l=r.length;i<l;i++)n(r[i]);this.LEVELS=t,this.currentLevel=t.error}return e.prototype.spawn=function(t){if("string"==typeof t){if(!a(this.$log))throw"@$log is invalid";if(!p)throw"nemDebug is undefined this is probably the light version of this library sep debug logggers is not supported!";return l(t,this.$log)}return new e(t||this.$log)},e}(),this.decorator=["$log",function(e){var i;return(i=new n(e)).currentLevel=t.debug,i}],this.$get=["$log",function(e){return new n(e)}],this}])},function(e,t,n){(function(i){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(73)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))})),e.splice(r,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(72))},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){var i;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,r=o-(i||o);e.diff=r,e.prev=i,e.curr=o,i=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;l++;var o=t.formatters[i];if("function"==typeof o){var r=a[l];n=o.call(e,r),a.splice(l,1),l--}return n})),t.formatArgs.call(e,a);var c=n.log||t.log||console.log.bind(console);c.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(74),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,i=6e4,o=60*i,r=24*o;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?a(s=e,r,"day")||a(s,o,"hour")||a(s,i,"minute")||a(s,n,"second")||s+" ms":function(e){if(e>=r)return Math.round(e/r)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var i,o;!function(r,a,s){var l,c,u=r.L,d={};d.version="0.7.7","object"==typeof e.exports?e.exports=d:void 0===(o="function"==typeof(i=d)?i.call(t,n,t,e):i)||(e.exports=o),d.noConflict=function(){return r.L=u,this},r.L=d,d.Util={extend:function(e){var t,n,i,o,r=Array.prototype.slice.call(arguments,1);for(n=0,i=r.length;n<i;n++)for(t in o=r[n]||{})o.hasOwnProperty(t)&&(e[t]=o[t]);return e},bind:function(e,t){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,n||arguments)}},stamp:(l=0,c="_leaflet_id",function(e){return e[c]=e[c]||++l,e[c]}),invokeEach:function(e,t,n){var i,o;if("object"==typeof e){for(i in o=Array.prototype.slice.call(arguments,3),e)t.apply(n,[i,e[i]].concat(o));return!0}return!1},limitExecByInterval:function(e,t,n){var i,o;return function r(){var a=arguments;i?o=!0:(i=!0,setTimeout((function(){i=!1,o&&(r.apply(n,a),o=!1)}),t),e.apply(n,a))}},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return d.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=d.extend({},e.options,t),e.options},getParamString:function(e,t,n){var i=[];for(var o in e)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,(function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i}))},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var t,n,i=["webkit","moz","o","ms"];for(t=0;t<i.length&&!n;t++)n=r[i[t]+e];return n}var t=0;function n(e){var n=+new Date,i=Math.max(0,16-(n-t));return t=n+i,r.setTimeout(e,i)}var i=r.requestAnimationFrame||e("RequestAnimationFrame")||n,o=r.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){r.clearTimeout(e)};d.Util.requestAnimFrame=function(e,t,o,a){if(e=d.bind(e,t),!o||i!==n)return i.call(r,e,a);e()},d.Util.cancelAnimFrame=function(e){e&&o.call(r,e)}}(),d.extend=d.Util.extend,d.bind=d.Util.bind,d.stamp=d.Util.stamp,d.setOptions=d.Util.setOptions,d.Class=function(){},d.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;for(var o in i.constructor=t,t.prototype=i,this)this.hasOwnProperty(o)&&"prototype"!==o&&(t[o]=this[o]);e.statics&&(d.extend(t,e.statics),delete e.statics),e.includes&&(d.Util.extend.apply(null,[i].concat(e.includes)),delete e.includes),e.options&&i.options&&(e.options=d.extend({},i.options,e.options)),d.extend(i,e),i._initHooks=[];var r=this;return t.__super__=r.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=i._initHooks.length;e<t;e++)i._initHooks[e].call(this)}},t},d.Class.include=function(e){d.extend(this.prototype,e)},d.Class.mergeOptions=function(e){d.extend(this.prototype.options,e)},d.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var p,h,f,g="_leaflet_events";d.Mixin={},d.Mixin.Events={addEventListener:function(e,t,n){if(d.Util.invokeEach(e,this.addEventListener,this,t,n))return this;var i,o,r,a,s,l,c,u=this[g]=this[g]||{},p=n&&n!==this&&d.stamp(n);for(i=0,o=(e=d.Util.splitWords(e)).length;i<o;i++)r={action:t,context:n||this},a=e[i],p?(l=(s=a+"_idx")+"_len",(c=u[s]=u[s]||{})[p]||(c[p]=[],u[l]=(u[l]||0)+1),c[p].push(r)):(u[a]=u[a]||[],u[a].push(r));return this},hasEventListeners:function(e){var t=this[g];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,n){if(!this[g])return this;if(!e)return this.clearAllEventListeners();if(d.Util.invokeEach(e,this.removeEventListener,this,t,n))return this;var i,o,r,a,s,l,c,u,p=this[g],h=n&&n!==this&&d.stamp(n);for(i=0,o=(e=d.Util.splitWords(e)).length;i<o;i++)if(c=(l=(r=e[i])+"_idx")+"_len",u=p[l],t){if(a=h&&u?u[h]:p[r]){for(s=a.length-1;s>=0;s--)a[s].action!==t||n&&a[s].context!==n||(a.splice(s,1)[0].action=d.Util.falseFn);n&&u&&0===a.length&&(delete u[h],p[c]--)}}else delete p[r],delete p[l],delete p[c];return this},clearAllEventListeners:function(){return delete this[g],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var n,i,o,r,a,s=d.Util.extend({},t,{type:e,target:this}),l=this[g];if(l[e])for(i=0,o=(n=l[e].slice()).length;i<o;i++)n[i].action.call(n[i].context,s);for(a in r=l[e+"_idx"])if(n=r[a].slice())for(i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,s);return this},addOneTimeEventListener:function(e,t,n){if(d.Util.invokeEach(e,this.addOneTimeEventListener,this,t,n))return this;var i=d.bind((function(){this.removeEventListener(e,t,n).removeEventListener(e,i,n)}),this);return this.addEventListener(e,t,n).addEventListener(e,i,n)}},d.Mixin.Events.on=d.Mixin.Events.addEventListener,d.Mixin.Events.off=d.Mixin.Events.removeEventListener,d.Mixin.Events.once=d.Mixin.Events.addOneTimeEventListener,d.Mixin.Events.fire=d.Mixin.Events.fireEvent,function(){var e="ActiveXObject"in r,t=e&&!a.addEventListener,n=navigator.userAgent.toLowerCase(),i=-1!==n.indexOf("webkit"),o=-1!==n.indexOf("chrome"),s=-1!==n.indexOf("phantom"),l=-1!==n.indexOf("android"),c=-1!==n.search("android [23]"),u=-1!==n.indexOf("gecko"),p=typeof orientation!=void 0+"",h=!r.PointerEvent&&r.MSPointerEvent,f=r.PointerEvent&&r.navigator.pointerEnabled||h,g="devicePixelRatio"in r&&r.devicePixelRatio>1||"matchMedia"in r&&r.matchMedia("(min-resolution:144dpi)")&&r.matchMedia("(min-resolution:144dpi)").matches,m=a.documentElement,v=e&&"transition"in m.style,b="WebKitCSSMatrix"in r&&"m11"in new r.WebKitCSSMatrix&&!c,y="MozPerspective"in m.style,x="OTransition"in m.style,w=!r.L_DISABLE_3D&&(v||b||y||x)&&!s,A=!r.L_NO_TOUCH&&!s&&(f||"ontouchstart"in r||r.DocumentTouch&&a instanceof r.DocumentTouch);d.Browser={ie:e,ielt9:t,webkit:i,gecko:u&&!i&&!r.opera&&!e,android:l,android23:c,chrome:o,ie3d:v,webkit3d:b,gecko3d:y,opera3d:x,any3d:w,mobile:p,mobileWebkit:p&&i,mobileWebkit3d:p&&b,mobileOpera:p&&r.opera,touch:A,msPointer:h,pointer:f,retina:g}}(),d.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},d.Point.prototype={clone:function(){return new d.Point(this.x,this.y)},add:function(e){return this.clone()._add(d.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(d.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){var t=(e=d.point(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=d.point(e)).x===this.x&&e.y===this.y},contains:function(e){return e=d.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+d.Util.formatNum(this.x)+", "+d.Util.formatNum(this.y)+")"}},d.point=function(e,t,n){return e instanceof d.Point?e:d.Util.isArray(e)?new d.Point(e[0],e[1]):null==e?e:new d.Point(e,t,n)},d.Bounds=function(e,t){if(e)for(var n=t?[e,t]:e,i=0,o=n.length;i<o;i++)this.extend(n[i])},d.Bounds.prototype={extend:function(e){return e=d.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new d.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new d.Point(this.min.x,this.max.y)},getTopRight:function(){return new d.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"==typeof e[0]||e instanceof d.Point?d.point(e):d.bounds(e))instanceof d.Bounds?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=d.bounds(e);var t=this.min,n=this.max,i=e.min,o=e.max,r=o.x>=t.x&&i.x<=n.x,a=o.y>=t.y&&i.y<=n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},d.bounds=function(e,t){return!e||e instanceof d.Bounds?e:new d.Bounds(e,t)},d.Transformation=function(e,t,n,i){this._a=e,this._b=t,this._c=n,this._d=i},d.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new d.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},d.DomUtil={get:function(e){return"string"==typeof e?a.getElementById(e):e},getStyle:function(e,t){var n=e.style[t];if(!n&&e.currentStyle&&(n=e.currentStyle[t]),(!n||"auto"===n)&&a.defaultView){var i=a.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n},getViewportOffset:function(e){var t,n=0,i=0,o=e,r=a.body,s=a.documentElement;do{if(n+=o.offsetTop||0,i+=o.offsetLeft||0,n+=parseInt(d.DomUtil.getStyle(o,"borderTopWidth"),10)||0,i+=parseInt(d.DomUtil.getStyle(o,"borderLeftWidth"),10)||0,t=d.DomUtil.getStyle(o,"position"),o.offsetParent===r&&"absolute"===t)break;if("fixed"===t){n+=r.scrollTop||s.scrollTop||0,i+=r.scrollLeft||s.scrollLeft||0;break}if("relative"===t&&!o.offsetLeft){var l=d.DomUtil.getStyle(o,"width"),c=d.DomUtil.getStyle(o,"max-width"),u=o.getBoundingClientRect();"none"===l&&"none"===c||(i+=u.left+o.clientLeft),n+=u.top+(r.scrollTop||s.scrollTop||0);break}o=o.offsetParent}while(o);o=e;do{if(o===r)break;n-=o.scrollTop||0,i-=o.scrollLeft||0,o=o.parentNode}while(o);return new d.Point(i,n)},documentIsLtr:function(){return d.DomUtil._docIsLtrCached||(d.DomUtil._docIsLtrCached=!0,d.DomUtil._docIsLtr="ltr"===d.DomUtil.getStyle(a.body,"direction")),d.DomUtil._docIsLtr},create:function(e,t,n){var i=a.createElement(e);return i.className=t,n&&n.appendChild(i),i},hasClass:function(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=d.DomUtil._getClass(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){if(void 0!==e.classList)for(var n=d.Util.splitWords(t),i=0,o=n.length;i<o;i++)e.classList.add(n[i]);else if(!d.DomUtil.hasClass(e,t)){var r=d.DomUtil._getClass(e);d.DomUtil._setClass(e,(r?r+" ":"")+t)}},removeClass:function(e,t){void 0!==e.classList?e.classList.remove(t):d.DomUtil._setClass(e,d.Util.trim((" "+d.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t},_getClass:function(e){return void 0===e.className.baseVal?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(e){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}},testProp:function(e){for(var t=a.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1},getTranslateString:function(e){var t=d.Browser.webkit3d,n=(t?",0":"")+")";return"translate"+(t?"3d":"")+"("+e.x+"px,"+e.y+"px"+n},getScaleString:function(e,t){return d.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e)))+(" scale("+e+") ")},setPosition:function(e,t,n){e._leaflet_pos=t,!n&&d.Browser.any3d?e.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},d.DomUtil.TRANSFORM=d.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),d.DomUtil.TRANSITION=d.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),d.DomUtil.TRANSITION_END="webkitTransition"===d.DomUtil.TRANSITION||"OTransition"===d.DomUtil.TRANSITION?d.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in a)d.extend(d.DomUtil,{disableTextSelection:function(){d.DomEvent.on(r,"selectstart",d.DomEvent.preventDefault)},enableTextSelection:function(){d.DomEvent.off(r,"selectstart",d.DomEvent.preventDefault)}});else{var e=d.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);d.extend(d.DomUtil,{disableTextSelection:function(){if(e){var t=a.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(a.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}d.extend(d.DomUtil,{disableImageDrag:function(){d.DomEvent.on(r,"dragstart",d.DomEvent.preventDefault)},enableImageDrag:function(){d.DomEvent.off(r,"dragstart",d.DomEvent.preventDefault)}})}(),d.LatLng=function(e,t,n){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,void 0!==n&&(this.alt=parseFloat(n))},d.extend(d.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),d.LatLng.prototype={equals:function(e){return!!e&&(e=d.latLng(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=d.LatLng.MAX_MARGIN)},toString:function(e){return"LatLng("+d.Util.formatNum(this.lat,e)+", "+d.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=d.latLng(e);var t=d.LatLng.DEG_TO_RAD,n=(e.lat-this.lat)*t,i=(e.lng-this.lng)*t,o=this.lat*t,r=e.lat*t,a=Math.sin(n/2),s=Math.sin(i/2),l=a*a+s*s*Math.cos(o)*Math.cos(r);return 12756274*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))},wrap:function(e,t){var n=this.lng;return n=(n+(t=t||180))%(t-(e=e||-180))+(n<e||n===t?t:e),new d.LatLng(this.lat,n)}},d.latLng=function(e,t){return e instanceof d.LatLng?e:d.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new d.LatLng(e[0],e[1],e[2]):null:null==e?e:"object"==typeof e&&"lat"in e?new d.LatLng(e.lat,"lng"in e?e.lng:e.lon):void 0===t?null:new d.LatLng(e,t)},d.LatLngBounds=function(e,t){if(e)for(var n=t?[e,t]:e,i=0,o=n.length;i<o;i++)this.extend(n[i])},d.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=d.latLng(e);return(e=null!==t?t:d.latLngBounds(e))instanceof d.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new d.LatLng(e.lat,e.lng),this._northEast=new d.LatLng(e.lat,e.lng)):e instanceof d.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,o=Math.abs(t.lng-n.lng)*e;return new d.LatLngBounds(new d.LatLng(t.lat-i,t.lng-o),new d.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new d.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new d.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new d.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof d.LatLng?d.latLng(e):d.latLngBounds(e);var t,n,i=this._southWest,o=this._northEast;return e instanceof d.LatLngBounds?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=o.lat&&t.lng>=i.lng&&n.lng<=o.lng},intersects:function(e){e=d.latLngBounds(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),o=e.getNorthEast(),r=o.lat>=t.lat&&i.lat<=n.lat,a=o.lng>=t.lng&&i.lng<=n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return!!e&&(e=d.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},d.latLngBounds=function(e,t){return!e||e instanceof d.LatLngBounds?e:new d.LatLngBounds(e,t)},d.Projection={},d.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=d.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),o=e.lng*t,r=i*t;return r=Math.log(Math.tan(Math.PI/4+r/2)),new d.Point(o,r)},unproject:function(e){var t=d.LatLng.RAD_TO_DEG,n=e.x*t,i=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new d.LatLng(i,n)}},d.Projection.LonLat={project:function(e){return new d.Point(e.lng,e.lat)},unproject:function(e){return new d.LatLng(e.y,e.x)}},d.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return d.point(t,t)}},d.CRS.Simple=d.extend({},d.CRS,{projection:d.Projection.LonLat,transformation:new d.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),d.CRS.EPSG3857=d.extend({},d.CRS,{code:"EPSG:3857",projection:d.Projection.SphericalMercator,transformation:new d.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){return this.projection.project(e).multiplyBy(6378137)}}),d.CRS.EPSG900913=d.extend({},d.CRS.EPSG3857,{code:"EPSG:900913"}),d.CRS.EPSG4326=d.extend({},d.CRS,{code:"EPSG:4326",projection:d.Projection.LonLat,transformation:new d.Transformation(1/360,.5,-1/360,.5)}),d.Map=d.Class.extend({includes:d.Mixin.Events,options:{crs:d.CRS.EPSG3857,fadeAnimation:d.DomUtil.TRANSITION&&!d.Browser.android23,trackResize:!0,markerZoomAnimation:d.DomUtil.TRANSITION&&d.Browser.any3d},initialize:function(e,t){t=d.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=d.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&void 0!==t.zoom&&this.setView(d.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=void 0===t?this.getZoom():t,this._resetView(d.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),o=this.getSize().divideBy(2),r=(e instanceof d.Point?e:this.latLngToContainerPoint(e)).subtract(o).multiplyBy(1-1/i),a=this.containerPointToLatLng(o.add(r));return this.setView(a,t,{zoom:n})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():d.latLngBounds(e);var n=d.point(t.paddingTopLeft||t.padding||[0,0]),i=d.point(t.paddingBottomRight||t.padding||[0,0]),o=this.getBoundsZoom(e,!1,n.add(i));o=t.maxZoom?Math.min(t.maxZoom,o):o;var r=i.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),o),s=this.project(e.getNorthEast(),o),l=this.unproject(a.add(s).divideBy(2).add(r),o);return this.setView(l,o,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(d.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=d.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,e);return n.equals(i)?this:this.panTo(i,t)},addLayer:function(e){var t=d.stamp(e);return this._layers[t]||(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&e instanceof d.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e)),this},removeLayer:function(e){var t=d.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&e instanceof d.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return!!e&&d.stamp(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=d.extend({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=t.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(e.animate&&e.pan?this.panBy(r):(e.pan&&this._rawPanBy(r),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=void 0}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new d.LatLngBounds(t,n)},getMinZoom:function(){return void 0===this.options.minZoom?void 0===this._layersMinZoom?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=d.latLngBounds(e);var i,o=this.getMinZoom()-(t?1:0),r=this.getMaxZoom(),a=this.getSize(),s=e.getNorthWest(),l=e.getSouthEast(),c=!0;n=d.point(n||[0,0]);do{o++,i=this.project(l,o).subtract(this.project(s,o)).add(n),c=t?i.x<a.x||i.y<a.y:a.contains(i)}while(c&&o<=r);return c&&t?null:t?o:o-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new d.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new d.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(d.latLng(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(d.point(e),t)},layerPointToLatLng:function(e){var t=d.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(d.latLng(e))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return d.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return d.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(d.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(d.latLng(e)))},mouseEventToContainerPoint:function(e){return d.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=d.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;d.DomUtil.addClass(e,"leaflet-container"+(d.Browser.touch?" leaflet-touch":"")+(d.Browser.retina?" leaflet-retina":"")+(d.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=d.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(d.DomUtil.addClass(e.markerPane,t),d.DomUtil.addClass(e.shadowPane,t),d.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return d.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){for(var t=0,n=(e=e?d.Util.isArray(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_resetView:function(e,t,n,i){var o=this._zoom!==t;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),n?this._initialTopLeftPoint._add(this._getMapPanePos()):d.DomUtil.setPosition(this._mapPane,new d.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(e){d.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,n=-1/0,i=this._getZoomSpan();for(e in this._zoomBoundLayers){var o=this._zoomBoundLayers[e];isNaN(o.options.minZoom)||(t=Math.min(t,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}void 0===e?this._layersMaxZoom=this._layersMinZoom=void 0:(this._layersMaxZoom=n,this._layersMinZoom=t),i!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(d.DomEvent){e=e||"on",d.DomEvent[e](this._container,"click",this._onMouseClick,this);var t,n,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(t=0,n=i.length;t<n;t++)d.DomEvent[e](this._container,i[t],this._fireMouseEvent,this);this.options.trackResize&&d.DomEvent[e](r,"resize",this._onResize,this)}},_onResize:function(){d.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=d.Util.requestAnimFrame((function(){this.invalidateSize({debounceMoveend:!0})}),this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||d.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!d.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&d.DomEvent.preventDefault(e);var n=this.mouseEventToContainerPoint(e),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(t,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return d.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewTopLeftPoint(n,t).add(this._getMapPanePos());return this.project(e,t)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),o=this.getSize().divideBy(2),r=new d.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,t);return this.unproject(i.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new d.Bounds(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=this.project(t.getNorthWest(),n).subtract(e.min),o=this.project(t.getSouthEast(),n).subtract(e.max),r=this._rebound(i.x,-o.x),a=this._rebound(i.y,-o.y);return new d.Point(r,a)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),d.map=function(e,t){return new d.Map(e,t)},d.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=d.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),o=this.R_MAJOR,r=this.R_MINOR,a=e.lng*t*o,s=i*t,l=r/o,c=Math.sqrt(1-l*l),u=c*Math.sin(s);u=Math.pow((1-u)/(1+u),.5*c);var p=Math.tan(.5*(.5*Math.PI-s))/u;return s=-o*Math.log(p),new d.Point(a,s)},unproject:function(e){for(var t,n=d.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,r=e.x*n/i,a=o/i,s=Math.sqrt(1-a*a),l=Math.exp(-e.y/i),c=Math.PI/2-2*Math.atan(l),u=15,p=.1;Math.abs(p)>1e-7&&--u>0;)t=s*Math.sin(c),c+=p=Math.PI/2-2*Math.atan(l*Math.pow((1-t)/(1+t),.5*s))-c;return new d.LatLng(c*n,r)}},d.CRS.EPSG3395=d.extend({},d.CRS,{code:"EPSG:3395",projection:d.Projection.Mercator,transformation:(p=d.Projection.Mercator.R_MAJOR,h=.5/(Math.PI*p),new d.Transformation(h,.5,-h,.5))}),d.TileLayer=d.Class.extend({includes:d.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:d.Browser.mobile,updateWhenIdle:d.Browser.mobile},initialize:function(e,t){(t=d.setOptions(this,t)).detectRetina&&d.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=d.latLngBounds(t.bounds)),this._url=e;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=d.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var n,i,o,r=e.children,a=-t(1/0,-1/0);for(i=0,o=r.length;i<o;i++)r[i]!==this._container&&(n=parseInt(r[i].style.zIndex,10),isNaN(n)||(a=t(a,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(d.Browser.ielt9)for(e in t)d.DomUtil.setOpacity(t[e],this.options.opacity);else d.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=d.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){this._bgBuffer=d.DomUtil.create("div","leaflet-tile-container",this._container),this._tileContainer=d.DomUtil.create("div","leaflet-tile-container",this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&t>n&&(i=Math.round(e.getZoomScale(t)/e.getZoomScale(n)*i)),i},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),n=e.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=d.bounds(t.min.divideBy(i)._floor(),t.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(e){var t,n,i,o=[],r=e.getCenter();for(t=e.min.y;t<=e.max.y;t++)for(n=e.min.x;n<=e.max.x;n++)i=new d.Point(n,t),this._tileShouldBeLoaded(i)&&o.push(i);var s=o.length;if(0!==s){o.sort((function(e,t){return e.distanceTo(r)-t.distanceTo(r)}));var l=a.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=s,n=0;n<s;n++)this._addTile(o[n],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var n=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=n.x)||e.y<0||e.y>=n.y)return!1}if(t.bounds){var i=this._getTileSize(),o=e.multiplyBy(i),r=o.add([i,i]),a=this._map.unproject(o),s=this._map.unproject(r);if(t.continuousWorld||t.noWrap||(a=a.wrap(),s=s.wrap()),!t.bounds.intersects([a,s]))return!1}return!0},_removeOtherTiles:function(e){var t,n,i,o;for(o in this._tiles)t=o.split(":"),n=parseInt(t[0],10),i=parseInt(t[1],10),(n<e.min.x||n>e.max.x||i<e.min.y||i>e.max.y)&&this._removeTile(o)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(d.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),d.Browser.android||(t.onload=null,t.src=d.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var n=this._getTilePos(e),i=this._getTile();d.DomUtil.setPosition(i,n,d.Browser.chrome),this._tiles[e.x+":"+e.y]=i,this._loadTile(i,e),i.parentNode!==this._tileContainer&&t.appendChild(i)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),n=this._getTileSize();return e.multiplyBy(n).subtract(t)},getTileUrl:function(e){return d.Util.template(this._url,d.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=d.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=d.Util.falseFn,d.Browser.ielt9&&void 0!==this.options.opacity&&d.DomUtil.setOpacity(e,this.options.opacity),d.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&d.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(d.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==d.Util.emptyImageUrl&&(d.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),d.tileLayer=function(e,t){return new d.TileLayer(e,t)},d.TileLayer.WMS=d.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var n=d.extend({},this.defaultWmsParams),i=t.tileSize||this.options.tileSize;for(var o in t.detectRetina&&d.Browser.retina?n.width=n.height=2*i:n.width=n.height=i,t)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=t[o]);this.wmsParams=n,d.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,d.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,n=this.options.tileSize,i=e.multiplyBy(n),o=i.add([n,n]),r=this._crs.project(t.unproject(i,e.z)),a=this._crs.project(t.unproject(o,e.z)),s=this._wmsVersion>=1.3&&this._crs===d.CRS.EPSG4326?[a.y,r.x,r.y,a.x].join(","):[r.x,a.y,a.x,r.y].join(","),l=d.Util.template(this._url,{s:this._getSubdomain(e)});return l+d.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+s},setParams:function(e,t){return d.extend(this.wmsParams,e),t||this.redraw(),this}}),d.tileLayer.wms=function(e,t){return new d.TileLayer.WMS(e,t)},d.TileLayer.Canvas=d.TileLayer.extend({options:{async:!1},initialize:function(e){d.setOptions(this,e)},redraw:function(){for(var e in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=d.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=d.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),d.tileLayer.canvas=function(e){return new d.TileLayer.Canvas(e)},d.ImageOverlay=d.Class.extend({includes:d.Mixin.Events,options:{opacity:1},initialize:function(e,t,n){this._url=e,this._bounds=d.latLngBounds(t),d.setOptions(this,n)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&d.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=d.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&d.Browser.any3d?d.DomUtil.addClass(this._image,"leaflet-zoom-animated"):d.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),d.extend(this._image,{galleryimg:"no",onselectstart:d.Util.falseFn,onmousemove:d.Util.falseFn,onload:d.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,n=this._image,i=t.getZoomScale(e.zoom),o=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),a=t._latLngToNewLayerPoint(o,e.zoom,e.center),s=t._latLngToNewLayerPoint(r,e.zoom,e.center)._subtract(a),l=a._add(s._multiplyBy(.5*(1-1/i)));n.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);d.DomUtil.setPosition(e,t),e.style.width=n.x+"px",e.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){d.DomUtil.setOpacity(this._image,this.options.opacity)}}),d.imageOverlay=function(e,t,n){return new d.ImageOverlay(e,t,n)},d.Icon=d.Class.extend({options:{className:""},initialize:function(e){d.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n,i=this._getIconUrl(e);if(!i){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}return n=t&&"IMG"===t.tagName?this._createImg(i,t):this._createImg(i),this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var n,i=this.options,o=d.point(i[t+"Size"]);!(n="shadow"===t?d.point(i.shadowAnchor||i.iconAnchor):d.point(i.iconAnchor))&&o&&(n=o.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+i.className,n&&(e.style.marginLeft=-n.x+"px",e.style.marginTop=-n.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},_createImg:function(e,t){return(t=t||a.createElement("img")).src=e,t},_getIconUrl:function(e){return d.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),d.icon=function(e){return new d.Icon(e)},d.Icon.Default=d.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];d.Browser.retina&&"icon"===e&&(e+="-2x");var n=d.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+e+".png"}}),d.Icon.Default.imagePath=function(){var e,t,n,i,o=a.getElementsByTagName("script"),r=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,t=o.length;e<t;e++)if((n=o[e].src).match(r))return((i=n.split(r)[0])?i+"/":"")+"images"}(),d.Marker=d.Class.extend({includes:d.Mixin.Events,options:{icon:new d.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){d.setOptions(this,t),this._latlng=d.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=d.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var e=this.options,t=this._map,n=t.options.zoomAnimation&&t.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",i=e.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,e.title&&(i.title=e.title),e.alt&&(i.alt=e.alt)),d.DomUtil.addClass(i,n),e.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),e.riseOnHover&&d.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var r=e.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&d.DomUtil.addClass(r,n),this._shadow=r,e.opacity<1&&this._updateOpacity();var s=this._map._panes;o&&s.markerPane.appendChild(this._icon),r&&a&&s.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&d.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){d.DomUtil.setPosition(this._icon,e),this._shadow&&d.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.addClass(e,"leaflet-clickable"),d.DomEvent.on(e,"click",this._onMouseClick,this),d.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var n=0;n<t.length;n++)d.DomEvent.on(e,t[n],this._fireMouseEvent,this);d.Handler.MarkerDrag&&(this.dragging=new d.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&d.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&d.DomEvent.preventDefault(e),"mousedown"!==e.type?d.DomEvent.stopPropagation(e):d.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){d.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&d.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),d.marker=function(e,t){return new d.Marker(e,t)},d.DivIcon=d.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:a.createElement("div"),n=this.options;return!1!==n.html?t.innerHTML=n.html:t.innerHTML="",n.bgPos&&(t.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),d.divIcon=function(e){return new d.DivIcon(e)},d.Map.mergeOptions({closePopupOnClick:!0}),d.Popup=d.Class.extend({includes:d.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){d.setOptions(this,e),this._source=t,this._animated=d.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&d.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&d.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),d.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&d.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=d.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",n=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=d.DomUtil.create("div",n);this.options.closeButton&&((e=this._closeButton=d.DomUtil.create("a",t+"-close-button",i)).href="#close",e.innerHTML="&#215;",d.DomEvent.disableClickPropagation(e),d.DomEvent.on(e,"click",this._onCloseButtonClick,this));var o=this._wrapper=d.DomUtil.create("div",t+"-content-wrapper",i);d.DomEvent.disableClickPropagation(o),this._contentNode=d.DomUtil.create("div",t+"-content",o),d.DomEvent.disableScrollPropagation(this._contentNode),d.DomEvent.on(o,"contextmenu",d.DomEvent.stopPropagation),this._tipContainer=d.DomUtil.create("div",t+"-tip-container",i),this._tip=d.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,o=this.options.maxHeight;o&&i>o?(t.height=o+"px",d.DomUtil.addClass(e,"leaflet-popup-scrolled")):d.DomUtil.removeClass(e,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,n=d.point(this.options.offset);t&&d.DomUtil.setPosition(this._container,e),this._containerBottom=-n.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);d.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,n=this._containerWidth,i=new d.Point(this._containerLeft,-t-this._containerBottom);this._animated&&i._add(d.DomUtil.getPosition(this._container));var o=e.layerPointToContainerPoint(i),r=d.point(this.options.autoPanPadding),a=d.point(this.options.autoPanPaddingTopLeft||r),s=d.point(this.options.autoPanPaddingBottomRight||r),l=e.getSize(),c=0,u=0;o.x+n+s.x>l.x&&(c=o.x+n-l.x+s.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+t+s.y>l.y&&(u=o.y+t-l.y+s.y),o.y-u-a.y<0&&(u=o.y-a.y),(c||u)&&e.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(e){this._close(),d.DomEvent.stop(e)}}),d.popup=function(e,t){return new d.Popup(e,t)},d.Map.include({openPopup:function(e,t,n){if(this.closePopup(),!(e instanceof d.Popup)){var i=e;e=new d.Popup(n).setLatLng(t).setContent(i)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),d.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var n=d.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(d.Popup.prototype.options.offset),t&&t.offset&&(n=n.add(t.offset)),t=d.extend({offset:n},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof d.Popup?(d.setOptions(e,t),this._popup=e,e._source=this):this._popup=new d.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),d.LayerGroup=d.Class.extend({initialize:function(e){var t,n;if(this._layers={},e)for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return d.stamp(e)}}),d.layerGroup=function(e){return new d.LayerGroup(e)},d.FeatureGroup=d.LayerGroup.extend({includes:d.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),"off"in e&&e.off(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new d.LatLngBounds;return this.eachLayer((function(t){e.extend(t instanceof d.Marker?t.getLatLng():t.getBounds())})),e},_propagateEvent:function(e){e=d.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),d.featureGroup=function(e){return new d.FeatureGroup(e)},d.Path=d.Class.extend({includes:[d.Mixin.Events],statics:{CLIP_PADDING:(f=((d.Browser.mobile?1280:2e3)/Math.max(r.outerWidth,r.outerHeight)-1)/2,Math.max(0,Math.min(.5,f)))},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){d.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,d.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return d.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),d.Map.include({_updatePathViewport:function(){var e=d.Path.CLIP_PADDING,t=this.getSize(),n=d.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),i=n.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new d.Bounds(n,i)}}),d.Path.SVG_NS="http://www.w3.org/2000/svg",d.Browser.svg=!(!a.createElementNS||!a.createElementNS(d.Path.SVG_NS,"svg").createSVGRect),d.Path=d.Path.extend({statics:{SVG:d.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,n=e.firstChild;return t&&n!==t&&e.insertBefore(t,n),this},getPathString:function(){},_createElement:function(e){return a.createElementNS(d.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&d.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){!d.Browser.svg&&d.Browser.vml||d.DomUtil.addClass(this._path,"leaflet-clickable"),d.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)d.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this._map&&this.hasEventListeners(e.type)){var t=this._map,n=t.mouseEventToContainerPoint(e),i=t.containerPointToLayerPoint(n),o=t.layerPointToLatLng(i);this.fire(e.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:e}),"contextmenu"===e.type&&d.DomEvent.preventDefault(e),"mousemove"!==e.type&&d.DomEvent.stopPropagation(e)}}}),d.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=d.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&d.Browser.any3d?(d.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):d.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),n=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(n)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max,i=n.x-t.x,o=n.y-t.y,r=this._pathRoot,a=this._panes.overlayPane;d.Browser.mobileWebkit&&a.removeChild(r),d.DomUtil.setPosition(r,t),r.setAttribute("width",i),r.setAttribute("height",o),r.setAttribute("viewBox",[t.x,t.y,i,o].join(" ")),d.Browser.mobileWebkit&&a.appendChild(r)}}}),d.Path.include({bindPopup:function(e,t){return e instanceof d.Popup?this._popup=e:(this._popup&&!t||(this._popup=new d.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),d.Browser.vml=!d.Browser.svg&&function(){try{var e=a.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}(),d.Path=d.Browser.svg||!d.Browser.vml?d.Path:d.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return a.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return a.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return a.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");d.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&d.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(e||((e=this._stroke=this._createElement("stroke")).endcap="round",i.appendChild(e)),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=d.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",n.lineCap&&(e.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(e.joinstyle=n.lineJoin)):e&&(i.removeChild(e),this._stroke=null),n.fill?(t||(t=this._fill=this._createElement("fill"),i.appendChild(t)),t.color=n.fillColor||n.color,t.opacity=n.fillOpacity):t&&(i.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),d.Map.include(d.Browser.svg||!d.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=a.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),d.Browser.canvas=!!a.createElement("canvas").getContext,d.Path=d.Path.SVG&&!r.L_PREFER_CANVAS||!d.Browser.canvas?d.Path:d.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return d.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!d.Path._updateRequest&&(d.Path._updateRequest=d.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){d.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color),e.lineCap&&(this._ctx.lineCap=e.lineCap),e.lineJoin&&(this._ctx.lineJoin=e.lineJoin)},_drawPath:function(){var e,t,n,i,o,r;for(this._ctx.beginPath(),e=0,n=this._parts.length;e<n;e++){for(t=0,i=this._parts[e].length;t<i;t++)o=this._parts[e][t],r=(0===t?"move":"line")+"To",this._ctx[r](o.x,o.y);this instanceof d.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill(t.fillRule||"evenodd")),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e){this._containsPoint(e.layerPoint)&&this.fire(e.type,e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),d.Map.include(d.Path.SVG&&!r.L_PREFER_CANVAS||!d.Browser.canvas?{}:{_initPathRoot:function(){var e,t=this._pathRoot;t||((t=this._pathRoot=a.createElement("canvas")).style.position="absolute",(e=this._canvasCtx=t.getContext("2d")).lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(t),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max.subtract(t),i=this._pathRoot;d.DomUtil.setPosition(i,t),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-t.x,-t.y)}}}),d.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,t){var n=e.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,this._simplifyDPStep(e,i,t,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(e[o]);return r},_simplifyDPStep:function(e,t,n,i,o){var r,a,s,l=0;for(a=i+1;a<=o-1;a++)(s=this._sqClosestPointOnSegment(e[a],e[i],e[o],!0))>l&&(r=a,l=s);l>n&&(t[r]=1,this._simplifyDPStep(e,t,n,i,r),this._simplifyDPStep(e,t,n,r,o))},_reducePoints:function(e,t){for(var n=[e[0]],i=1,o=0,r=e.length;i<r;i++)this._sqDist(e[i],e[o])>t&&(n.push(e[i]),o=i);return o<r-1&&n.push(e[r-1]),n},clipSegment:function(e,t,n,i){var o,r,a,s=i?this._lastCode:this._getBitCode(e,n),l=this._getBitCode(t,n);for(this._lastCode=l;;){if(!(s|l))return[e,t];if(s&l)return!1;o=s||l,r=this._getEdgeIntersection(e,t,o,n),a=this._getBitCode(r,n),o===s?(e=r,s=a):(t=r,l=a)}},_getEdgeIntersection:function(e,t,n,i){var o=t.x-e.x,r=t.y-e.y,a=i.min,s=i.max;return 8&n?new d.Point(e.x+o*(s.y-e.y)/r,s.y):4&n?new d.Point(e.x+o*(a.y-e.y)/r,a.y):2&n?new d.Point(s.x,e.y+r*(s.x-e.x)/o):1&n?new d.Point(a.x,e.y+r*(a.x-e.x)/o):void 0},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},_sqClosestPointOnSegment:function(e,t,n,i){var o,r=t.x,a=t.y,s=n.x-r,l=n.y-a,c=s*s+l*l;return c>0&&((o=((e.x-r)*s+(e.y-a)*l)/c)>1?(r=n.x,a=n.y):o>0&&(r+=s*o,a+=l*o)),s=e.x-r,l=e.y-a,i?s*s+l*l:new d.Point(r,a)}},d.Polyline=d.Path.extend({initialize:function(e,t){d.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;e<t;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,n="";e<t;e++)n+=this._getPathPartStr(this._parts[e]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(d.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,n,i=1/0,o=this._parts,r=null,a=0,s=o.length;a<s;a++)for(var l=o[a],c=1,u=l.length;c<u;c++){t=l[c-1],n=l[c];var p=d.LineUtil._sqClosestPointOnSegment(e,t,n,!0);p<i&&(i=p,r=d.LineUtil._sqClosestPointOnSegment(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getBounds:function(){return new d.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var n,i,o=t?e:[];for(n=0,i=e.length;n<i;n++){if(d.Util.isArray(e[n])&&"number"!=typeof e[n][0])return;o[n]=d.latLng(e[n])}return o},_initEvents:function(){d.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,n=d.Path.VML,i=0,o=e.length,r="";i<o;i++)t=e[i],n&&t._round(),r+=(i?"L":"M")+t.x+" "+t.y;return r},_clipPoints:function(){var e,t,n,i=this._originalPoints,o=i.length;if(this.options.noClip)this._parts=[i];else{this._parts=[];var r=this._parts,a=this._map._pathViewport,s=d.LineUtil;for(e=0,t=0;e<o-1;e++)(n=s.clipSegment(i[e],i[e+1],a,e))&&(r[t]=r[t]||[],r[t].push(n[0]),n[1]===i[e+1]&&e!==o-2||(r[t].push(n[1]),t++))}},_simplifyPoints:function(){for(var e=this._parts,t=d.LineUtil,n=0,i=e.length;n<i;n++)e[n]=t.simplify(e[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),d.Path.prototype._updatePath.call(this))}}),d.polyline=function(e,t){return new d.Polyline(e,t)},d.PolyUtil={},d.PolyUtil.clipPolygon=function(e,t){var n,i,o,r,a,s,l,c,u,p=[1,4,2,8],h=d.LineUtil;for(i=0,l=e.length;i<l;i++)e[i]._code=h._getBitCode(e[i],t);for(r=0;r<4;r++){for(c=p[r],n=[],i=0,o=(l=e.length)-1;i<l;o=i++)a=e[i],s=e[o],a._code&c?s._code&c||((u=h._getEdgeIntersection(s,a,c,t))._code=h._getBitCode(u,t),n.push(u)):(s._code&c&&((u=h._getEdgeIntersection(s,a,c,t))._code=h._getBitCode(u,t),n.push(u)),n.push(a));e=n}return e},d.Polygon=d.Polyline.extend({options:{fill:!0},initialize:function(e,t){d.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,n,i;if(e&&d.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,n=this._holes.length;t<n;t++)(i=this._holes[t]=this._convertLatLngs(this._holes[t]))[0].equals(i[i.length-1])&&i.pop();(e=this._latlngs).length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){var e,t,n,i;if(d.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(e=0,n=this._holes.length;e<n;e++)for(this._holePoints[e]=[],t=0,i=this._holes[e].length;t<i;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])},setLatLngs:function(e){return e&&d.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):d.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;n<i;n++){var o=d.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&t.push(o)}this._parts=t}},_getPathPartStr:function(e){return d.Polyline.prototype._getPathPartStr.call(this,e)+(d.Browser.svg?"z":"x")}}),d.polygon=function(e,t){return new d.Polygon(e,t)},function(){function e(e){return d.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var n=0,i=t.length;for(this.eachLayer((function(e){n<i?e.setLatLngs(t[n++]):this.removeLayer(e)}),this);n<i;)this.addLayer(new e(t[n++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer((function(t){e.push(t.getLatLngs())})),e}})}d.MultiPolyline=e(d.Polyline),d.MultiPolygon=e(d.Polygon),d.multiPolyline=function(e,t){return new d.MultiPolyline(e,t)},d.multiPolygon=function(e,t){return new d.MultiPolygon(e,t)}}(),d.Rectangle=d.Polygon.extend({initialize:function(e,t){d.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=d.latLngBounds(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),d.rectangle=function(e,t){return new d.Rectangle(e,t)},d.Circle=d.Path.extend({initialize:function(e,t,n){d.Path.prototype.initialize.call(this,n),this._latlng=d.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=d.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,n=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var e=this._getLngRadius(),t=this._mRadius/40075017*360,n=this._latlng;return new d.LatLngBounds([n.lat-t,n.lng-e],[n.lat+t,n.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":d.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(d.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,n=this._point;return n.x-t>e.max.x||n.y-t>e.max.y||n.x+t<e.min.x||n.y+t<e.min.y}}),d.circle=function(e,t,n){return new d.Circle(e,t,n)},d.CircleMarker=d.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){d.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){d.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return d.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),d.circleMarker=function(e,t){return new d.CircleMarker(e,t)},d.Polyline.include(d.Path.CANVAS?{_containsPoint:function(e,t){var n,i,o,r,a,s,l=this.options.weight/2;for(d.Browser.touch&&(l+=10),n=0,r=this._parts.length;n<r;n++)for(i=0,o=(a=(s=this._parts[n]).length)-1;i<a;o=i++)if((t||0!==i)&&d.LineUtil.pointToSegmentDistance(e,s[o],s[i])<=l)return!0;return!1}}:{}),d.Polygon.include(d.Path.CANVAS?{_containsPoint:function(e){var t,n,i,o,r,a,s,l,c=!1;if(d.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(l=(t=this._parts[o]).length)-1;r<l;a=r++)n=t[r],i=t[a],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c}}:{}),d.Circle.include(d.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,n=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+n}}:{}),d.CircleMarker.include(d.Path.CANVAS?{_updateStyle:function(){d.Path.prototype._updateStyle.call(this)}}:{}),d.GeoJSON=d.FeatureGroup.extend({initialize:function(e,t){d.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,o=d.Util.isArray(e)?e:e.features;if(o){for(t=0,n=o.length;t<n;t++)((i=o[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[t]);return this}var r=this.options;if(!r.filter||r.filter(e)){var a=d.GeoJSON.geometryToLayer(e,r.pointToLayer,r.coordsToLatLng,r);return a.feature=d.GeoJSON.asFeature(e),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(e,a),this.addLayer(a)}},resetStyle:function(e){var t=this.options.style;t&&(d.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),d.extend(d.GeoJSON,{geometryToLayer:function(e,t,n,i){var o,r,a,s,l="Feature"===e.type?e.geometry:e,c=l.coordinates,u=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return o=n(c),t?t(e,o):new d.Marker(o);case"MultiPoint":for(a=0,s=c.length;a<s;a++)o=n(c[a]),u.push(t?t(e,o):new d.Marker(o));return new d.FeatureGroup(u);case"LineString":return r=this.coordsToLatLngs(c,0,n),new d.Polyline(r,i);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(c,1,n),new d.Polygon(r,i);case"MultiLineString":return r=this.coordsToLatLngs(c,1,n),new d.MultiPolyline(r,i);case"MultiPolygon":return r=this.coordsToLatLngs(c,2,n),new d.MultiPolygon(r,i);case"GeometryCollection":for(a=0,s=l.geometries.length;a<s;a++)u.push(this.geometryToLayer({geometry:l.geometries[a],type:"Feature",properties:e.properties},t,n,i));return new d.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new d.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,n){var i,o,r,a=[];for(o=0,r=e.length;o<r;o++)i=t?this.coordsToLatLngs(e[o],t-1,n):(n||this.coordsToLatLng)(e[o]),a.push(i);return a},latLngToCoords:function(e){var t=[e.lng,e.lat];return void 0!==e.alt&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(d.GeoJSON.latLngToCoords(e[n]));return t},getFeature:function(e,t){return e.feature?d.extend({},e.feature,{geometry:t}):d.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var m={toGeoJSON:function(){return d.GeoJSON.getFeature(this,{type:"Point",coordinates:d.GeoJSON.latLngToCoords(this.getLatLng())})}};d.Marker.include(m),d.Circle.include(m),d.CircleMarker.include(m),d.Polyline.include({toGeoJSON:function(){return d.GeoJSON.getFeature(this,{type:"LineString",coordinates:d.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),d.Polygon.include({toGeoJSON:function(){var e,t,n,i=[d.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(e=0,t=this._holes.length;e<t;e++)(n=d.GeoJSON.latLngsToCoords(this._holes[e])).push(n[0]),i.push(n);return d.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function e(e){return function(){var t=[];return this.eachLayer((function(e){t.push(e.toGeoJSON().geometry.coordinates)})),d.GeoJSON.getFeature(this,{type:e,coordinates:t})}}d.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),d.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),d.LayerGroup.include({toGeoJSON:function(){var t,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return e("MultiPoint").call(this);var o=n&&"GeometryCollection"===n.type;return this.eachLayer((function(e){e.toGeoJSON&&(t=e.toGeoJSON(),i.push(o?t.geometry:d.GeoJSON.asFeature(t)))})),o?d.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),d.geoJson=function(e,t){return new d.GeoJSON(e,t)},d.DomEvent={addListener:function(e,t,n,i){var o,r,a,s=d.stamp(n),l="_leaflet_"+t+s;return e[l]?this:(o=function(t){return n.call(i||e,t||d.DomEvent._getEvent())},d.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,o,s):(d.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,o,s),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?(r=o,a="mouseenter"===t?"mouseover":"mouseout",o=function(t){if(d.DomEvent._checkMouse(e,t))return r(t)},e.addEventListener(a,o,!1)):"click"===t&&d.Browser.android?(r=o,o=function(e){return d.DomEvent._filterClick(e,r)},e.addEventListener(t,o,!1)):e.addEventListener(t,o,!1):"attachEvent"in e&&e.attachEvent("on"+t,o),e[l]=o,this))},removeListener:function(e,t,n){var i=d.stamp(n),o="_leaflet_"+t+i,r=e[o];return r?(d.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,i):d.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,i):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",r,!1),e.removeEventListener(t,r,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",r,!1):e.removeEventListener(t,r,!1):"detachEvent"in e&&e.detachEvent("on"+t,r),e[o]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,d.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=d.DomEvent.stopPropagation;return d.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=d.DomEvent.stopPropagation,n=d.Draggable.START.length-1;n>=0;n--)d.DomEvent.on(e,d.Draggable.START[n],t);return d.DomEvent.on(e,"click",d.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return d.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new d.Point(e.clientX,e.clientY);var n=t.getBoundingClientRect();return new d.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){d.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(e){return!1}return n!==e},_getEvent:function(){var e=r.event;if(!e)for(var t=arguments.callee.caller;t&&(!(e=t.arguments[0])||r.Event!==e.constructor);)t=t.caller;return e},_filterClick:function(e,t){var n=e.timeStamp||e.originalEvent.timeStamp,i=d.DomEvent._lastClick&&n-d.DomEvent._lastClick;if(!(i&&i>100&&i<500||e.target._simulatedClick&&!e._simulated))return d.DomEvent._lastClick=n,t(e);d.DomEvent.stop(e)}},d.DomEvent.on=d.DomEvent.addListener,d.DomEvent.off=d.DomEvent.removeListener,d.Draggable=d.Class.extend({includes:d.Mixin.Events,statics:{START:d.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=d.Draggable.START.length-1;e>=0;e--)d.DomEvent.on(this._dragStartTarget,d.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=d.Draggable.START.length-1;e>=0;e--)d.DomEvent.off(this._dragStartTarget,d.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!e.shiftKey&&(1===e.which||1===e.button||e.touches)&&(d.DomEvent.stopPropagation(e),!d.Draggable._disabled&&(d.DomUtil.disableImageDrag(),d.DomUtil.disableTextSelection(),!this._moving))){var t=e.touches?e.touches[0]:e;this._startPoint=new d.Point(t.clientX,t.clientY),this._startPos=this._newPos=d.DomUtil.getPosition(this._element),d.DomEvent.on(a,d.Draggable.MOVE[e.type],this._onMove,this).on(a,d.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new d.Point(t.clientX,t.clientY).subtract(this._startPoint);(n.x||n.y)&&(d.Browser.touch&&Math.abs(n.x)+Math.abs(n.y)<3||(d.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=d.DomUtil.getPosition(this._element).subtract(n),d.DomUtil.addClass(a.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,d.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))}},_updatePosition:function(){this.fire("predrag"),d.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var e in d.DomUtil.removeClass(a.body,"leaflet-dragging"),this._lastTarget&&(d.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),d.Draggable.MOVE)d.DomEvent.off(a,d.Draggable.MOVE[e],this._onMove).off(a,d.Draggable.END[e],this._onUp);d.DomUtil.enableImageDrag(),d.DomUtil.enableTextSelection(),this._moved&&this._moving&&(d.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),d.Handler=d.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),d.Map.mergeOptions({dragging:!0,inertia:!d.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:d.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),d.Map.Drag=d.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new d.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-t+n)%e+t-n,r=(i+t+n)%e-t-n,a=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),o)t.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,s=n.easeLinearity,l=r.multiplyBy(s/a),c=l.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,c),p=l.multiplyBy(u/c),h=u/(n.inertiaDeceleration*s),f=p.multiplyBy(-h/2).round();f.x&&f.y?(f=t._limitOffset(f,t.options.maxBounds),d.Util.requestAnimFrame((function(){t.panBy(f,{duration:h,easeLinearity:s,noMoveStart:!0})}))):t.fire("moveend")}}}),d.Map.addInitHook("addHandler","dragging",d.Map.Drag),d.Map.mergeOptions({doubleClickZoom:!0}),d.Map.DoubleClickZoom=d.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(n):t.setZoomAround(e.containerPoint,n)}}),d.Map.addInitHook("addHandler","doubleClickZoom",d.Map.DoubleClickZoom),d.Map.mergeOptions({scrollWheelZoom:!0}),d.Map.ScrollWheelZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),d.DomEvent.on(this._map._container,"MozMousePixelScroll",d.DomEvent.preventDefault),this._delta=0},removeHooks:function(){d.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),d.DomEvent.off(this._map._container,"MozMousePixelScroll",d.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=d.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d.bind(this._performZoom,this),n),d.DomEvent.preventDefault(e),d.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,n=e.getZoom();t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(n+t):e.setZoomAround(this._lastMousePos,n+t))}}),d.Map.addInitHook("addHandler","scrollWheelZoom",d.Map.ScrollWheelZoom),d.extend(d.DomEvent,{_touchstart:d.Browser.msPointer?"MSPointerDown":d.Browser.pointer?"pointerdown":"touchstart",_touchend:d.Browser.msPointer?"MSPointerUp":d.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,t,n){var i,o,r=!1,s=this._touchstart,l=this._touchend,c=[];function u(e){var t;if(d.Browser.pointer?(c.push(e.pointerId),t=c.length):t=e.touches.length,!(t>1)){var n=Date.now(),a=n-(i||n);o=e.touches?e.touches[0]:e,r=a>0&&a<=250,i=n}}function p(e){if(d.Browser.pointer){var n=c.indexOf(e.pointerId);if(-1===n)return;c.splice(n,1)}if(r){if(d.Browser.pointer){var a,s={};for(var l in o)a=o[l],s[l]="function"==typeof a?a.bind(o):a;o=s}o.type="dblclick",t(o),i=null}}e["_leaflet_"+s+n]=u,e["_leaflet_"+l+n]=p;var h=d.Browser.pointer?a.documentElement:e;return e.addEventListener(s,u,!1),h.addEventListener(l,p,!1),d.Browser.pointer&&h.addEventListener(d.DomEvent.POINTER_CANCEL,p,!1),this},removeDoubleTapListener:function(e,t){var n="_leaflet_";return e.removeEventListener(this._touchstart,e[n+this._touchstart+t],!1),(d.Browser.pointer?a.documentElement:e).removeEventListener(this._touchend,e[n+this._touchend+t],!1),d.Browser.pointer&&a.documentElement.removeEventListener(d.DomEvent.POINTER_CANCEL,e[n+this._touchend+t],!1),this}}),d.extend(d.DomEvent,{POINTER_DOWN:d.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:d.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:d.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:d.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,n,i){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,n,i);case"touchend":return this.addPointerListenerEnd(e,t,n,i);case"touchmove":return this.addPointerListenerMove(e,t,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,t,n,i){var o=this._pointers,r=function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&d.DomEvent.preventDefault(e);for(var t=!1,i=0;i<o.length;i++)if(o[i].pointerId===e.pointerId){t=!0;break}t||o.push(e),e.touches=o.slice(),e.changedTouches=[e],n(e)};if(e["_leaflet_touchstart"+i]=r,e.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocumentListener){var s=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}};a.documentElement.addEventListener(this.POINTER_UP,s,!1),a.documentElement.addEventListener(this.POINTER_CANCEL,s,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,n,i){var o=this._pointers;function r(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o[t]=e;break}e.touches=o.slice(),e.changedTouches=[e],n(e)}}return e["_leaflet_touchmove"+i]=r,e.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(e,t,n,i){var o=this._pointers,r=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}e.touches=o.slice(),e.changedTouches=[e],n(e)};return e["_leaflet_touchend"+i]=r,e.addEventListener(this.POINTER_UP,r,!1),e.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(e,t,n){var i=e["_leaflet_"+t+n];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,i,!1),e.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}}),d.Map.mergeOptions({touchZoom:d.Browser.touch&&!d.Browser.android23,bounceAtZoomLimits:!0}),d.Map.TouchZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]),o=t._getCenterLayerPoint();this._startCenter=n.add(i)._divideBy(2),this._startDist=n.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=o.subtract(this._startCenter),t._panAnim&&t._panAnim.stop(),d.DomEvent.on(a,"touchmove",this._onTouchMove,this).on(a,"touchend",this._onTouchEnd,this),d.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var n=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!t.options.bounceAtZoomLimits&&(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1)||(this._moved||(d.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),d.DomEvent.preventDefault(e)))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),n=e.layerPointToLatLng(t),i=e.getScaleZoom(this._scale);e._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var e=this._map;this._zooming=!1,d.DomUtil.removeClass(e._mapPane,"leaflet-touching"),d.Util.cancelAnimFrame(this._animRequest),d.DomEvent.off(a,"touchmove",this._onTouchMove).off(a,"touchend",this._onTouchEnd);var t=this._getScaleOrigin(),n=e.layerPointToLatLng(t),i=e.getZoom(),o=e.getScaleZoom(this._scale)-i,r=o>0?Math.ceil(o):Math.floor(o),s=e._limitZoom(i+r),l=e.getZoomScale(s)/this._scale;e._animateZoom(n,s,t,l)}else this._zooming=!1},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),d.Map.addInitHook("addHandler","touchZoom",d.Map.TouchZoom),d.Map.mergeOptions({tap:!0,tapTolerance:15}),d.Map.Tap=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(d.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],n=t.target;this._startPos=this._newPos=new d.Point(t.clientX,t.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&d.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(d.bind((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))}),this),1e3),d.DomEvent.on(a,"touchmove",this._onMove,this).on(a,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),d.DomEvent.off(a,"touchmove",this._onMove,this).off(a,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],n=t.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&d.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new d.Point(t.clientX,t.clientY)},_simulateEvent:function(e,t){var n=a.createEvent("MouseEvents");n._simulated=!0,t.target._simulatedClick=!0,n.initMouseEvent(e,!0,!0,r,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}),d.Browser.touch&&!d.Browser.pointer&&d.Map.addInitHook("addHandler","tap",d.Map.Tap),d.Map.mergeOptions({boxZoom:!0}),d.Map.BoxZoom=d.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){d.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){d.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){if(this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button)return!1;d.DomUtil.disableTextSelection(),d.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),d.DomEvent.on(a,"mousemove",this._onMouseMove,this).on(a,"mouseup",this._onMouseUp,this).on(a,"keydown",this._onKeyDown,this)},_onMouseMove:function(e){this._moved||(this._box=d.DomUtil.create("div","leaflet-zoom-box",this._pane),d.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(e),o=i.subtract(t),r=new d.Point(Math.min(i.x,t.x),Math.min(i.y,t.y));d.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),d.DomUtil.enableTextSelection(),d.DomUtil.enableImageDrag(),d.DomEvent.off(a,"mousemove",this._onMouseMove).off(a,"mouseup",this._onMouseUp).off(a,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,n=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(n)){var i=new d.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(n));t.fitBounds(i),t.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),d.Map.addInitHook("addHandler","boxZoom",d.Map.BoxZoom),d.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),d.Map.Keyboard=d.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),d.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;d.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=a.body,t=a.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),r.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,n,i=this._panKeys={},o=this.keyCodes;for(t=0,n=o.left.length;t<n;t++)i[o.left[t]]=[-1*e,0];for(t=0,n=o.right.length;t<n;t++)i[o.right[t]]=[e,0];for(t=0,n=o.down.length;t<n;t++)i[o.down[t]]=[0,e];for(t=0,n=o.up.length;t<n;t++)i[o.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,n,i=this._zoomKeys={},o=this.keyCodes;for(t=0,n=o.zoomIn.length;t<n;t++)i[o.zoomIn[t]]=e;for(t=0,n=o.zoomOut.length;t<n;t++)i[o.zoomOut[t]]=-e},_addHooks:function(){d.DomEvent.on(a,"keydown",this._onKeyDown,this)},_removeHooks:function(){d.DomEvent.off(a,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,n=this._map;if(t in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[t]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(t in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[t])}d.DomEvent.stop(e)}}),d.Map.addInitHook("addHandler","keyboard",d.Map.Keyboard),d.Handler.MarkerDrag=d.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new d.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),d.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),d.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,n=d.DomUtil.getPosition(e._icon),i=e._map.layerPointToLatLng(n);t&&d.DomUtil.setPosition(t,n),e._latlng=i,e.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),d.Control=d.Class.extend({options:{position:"topright"},initialize:function(e){d.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return d.DomUtil.addClass(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this},removeFrom:function(e){var t=this.getPosition();return e._controlCorners[t].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),d.control=function(e){return new d.Control(e)},d.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=d.DomUtil.create("div",t+"control-container",this._container);function i(i,o){var r=t+i+" "+t+o;e[i+o]=d.DomUtil.create("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),d.Control.Zoom=d.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=d.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",n,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,n,i,o,r){var a=d.DomUtil.create("a",n,i);a.innerHTML=e,a.href="#",a.title=t;var s=d.DomEvent.stopPropagation;return d.DomEvent.on(a,"click",s).on(a,"mousedown",s).on(a,"dblclick",s).on(a,"click",d.DomEvent.preventDefault).on(a,"click",o,r).on(a,"click",this._refocusOnMap,r),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";d.DomUtil.removeClass(this._zoomInButton,t),d.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&d.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&d.DomUtil.addClass(this._zoomInButton,t)}}),d.Map.mergeOptions({zoomControl:!0}),d.Map.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new d.Control.Zoom,this.addControl(this.zoomControl))})),d.control.zoom=function(e){return new d.Control.Zoom(e)},d.Control.Attribution=d.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){d.setOptions(this,e),this._attributions={}},onAdd:function(e){for(var t in this._container=d.DomUtil.create("div","leaflet-control-attribution"),d.DomEvent.disableClickPropagation(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){if(e)return this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this},removeAttribution:function(e){if(e)return this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),d.Map.mergeOptions({attributionControl:!0}),d.Map.addInitHook((function(){this.options.attributionControl&&(this.attributionControl=(new d.Control.Attribution).addTo(this))})),d.control.attribution=function(e){return new d.Control.Attribution(e)},d.Control.Scale=d.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t=d.DomUtil.create("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale",t),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),t},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=d.DomUtil.create("div",t+"-line",n)),e.imperial&&(this._iScale=d.DomUtil.create("div",t+"-line",n))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180)*(e.getNorthEast().lng-e.getSouthWest().lng)/180,i=this._map.getSize(),o=this.options,r=0;i.x>0&&(r=n*(o.maxWidth/i.x)),this._updateScales(o,r)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=t<1e3?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,n,i,o=3.2808399*e,r=this._iScale;o>5280?(t=o/5280,n=this._getRoundNum(t),r.style.width=this._getScaleWidth(n/t)+"px",r.innerHTML=n+" mi"):(i=this._getRoundNum(o),r.style.width=this._getScaleWidth(i/o)+"px",r.innerHTML=i+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),d.control.scale=function(e){return new d.Control.Scale(e)},d.Control.Layers=d.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,n){for(var i in d.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=d.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=d.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),d.Browser.touch?d.DomEvent.on(t,"click",d.DomEvent.stopPropagation):d.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var n=this._form=d.DomUtil.create("form",e+"-list");if(this.options.collapsed){d.Browser.android||d.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._layersLink=d.DomUtil.create("a",e+"-toggle",t);i.href="#",i.title="Layers",d.Browser.touch?d.DomEvent.on(i,"click",d.DomEvent.stop).on(i,"click",this._expand,this):d.DomEvent.on(i,"focus",this._expand,this),d.DomEvent.on(n,"click",(function(){setTimeout(d.bind(this._onInputClick,this),0)}),this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=d.DomUtil.create("div",e+"-base",n),this._separator=d.DomUtil.create("div",e+"-separator",n),this._overlaysList=d.DomUtil.create("div",e+"-overlays",n),t.appendChild(n)},_addLayer:function(e,t,n){var i=d.stamp(e);this._layers[i]={layer:e,name:t,overlay:n},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,n=!1,i=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),i=i||t.overlay,n=n||!t.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(e){var t=this._layers[d.stamp(e.layer)];if(t){this._handlingClick||this._update();var n=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)}},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';t&&(n+=' checked="checked"'),n+="/>";var i=a.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=a.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=a.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers",i),t.layerId=d.stamp(e.layer),d.DomEvent.on(t,"click",this._onInputClick,this);var o=a.createElement("span");return o.innerHTML=" "+e.name,n.appendChild(t),n.appendChild(o),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),n},_onInputClick:function(){var e,t,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,e=0;e<o;e++)t=i[e],n=this._layers[t.layerId],t.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!t.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){d.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),d.control.layers=function(e,t,n){return new d.Control.Layers(e,t,n)},d.PosAnimation=d.Class.extend({includes:d.Mixin.Events,run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[d.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",d.DomEvent.on(e,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this),d.DomUtil.setPosition(e,t),d.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(d.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(d.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),d.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();e?(this._el._leaflet_pos=e,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,t,n,i=this._el,o=r.getComputedStyle(i);if(d.Browser.any3d){if(!(n=o[d.DomUtil.TRANSFORM].match(this._transformRe)))return;e=parseFloat(n[1]),t=parseFloat(n[2])}else e=parseFloat(o.left),t=parseFloat(o.top);return new d.Point(e,t,!0)},_onTransitionEnd:function(){d.DomEvent.off(this._el,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[d.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),d.Map.include({setView:function(e,t,n){if((t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(d.latLng(e),t,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&!0!==n)&&(void 0!==n.animate&&(n.zoom=d.extend({animate:n.animate},n.zoom),n.pan=d.extend({animate:n.animate},n.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(e,t),this},panBy:function(e,t){if(t=t||{},!(e=d.point(e).round()).x&&!e.y)return this;if(this._panAnim||(this._panAnim=new d.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){d.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){d.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)}}),d.PosAnimation=d.DomUtil.TRANSITION?d.PosAnimation:d.PosAnimation.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=d.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=d.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;e<t?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));d.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){d.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),d.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),d.DomUtil.TRANSITION&&d.Map.addInitHook((function(){this._zoomAnimated=this.options.zoomAnimation&&d.DomUtil.TRANSITION&&d.Browser.any3d&&!d.Browser.android23&&!d.Browser.mobileOpera,this._zoomAnimated&&d.DomEvent.on(this._mapPane,d.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)})),d.Map.include(d.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/i),r=this._getCenterLayerPoint()._add(o);return!(!0!==n.animate&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,r,i,null,!0),!0)},_animateZoom:function(e,t,n,i,o,r,a){a||(this._animatingZoom=!0),d.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,d.Draggable&&(d.Draggable._disabled=!0),d.Util.requestAnimFrame((function(){this.fire("zoomanim",{center:e,zoom:t,origin:n,scale:i,delta:o,backwards:r}),setTimeout(d.bind(this._onZoomTransitionEnd,this),250)}),this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,d.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),d.Util.requestAnimFrame((function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),d.Draggable&&(d.Draggable._disabled=!1)}),this))}}:{}),d.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,n=d.DomUtil.TRANSFORM,i=e.delta?d.DomUtil.getTranslateString(e.delta):t.style[n],o=d.DomUtil.getScaleString(e.scale,e.origin);t.style[n]=e.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),d.Util.falseFn(t.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[d.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,n=this._getLoadedTilesPercentage(t),i=this._getLoadedTilesPercentage(e);if(t&&n>.5&&i<.5)return e.style.visibility="hidden",void this._stopLoadingImages(e);t.style.visibility="hidden",t.style[d.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(e){var t,n,i=e.getElementsByTagName("img"),o=0;for(t=0,n=i.length;t<n;t++)i[t].complete&&o++;return o/n},_stopLoadingImages:function(e){var t,n,i,o=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,n=o.length;t<n;t++)(i=o[t]).complete||(i.onload=d.Util.falseFn,i.onerror=d.Util.falseFn,i.src=d.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),d.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=d.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=d.bind(this._handleGeolocationResponse,this),n=d.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,i=new d.LatLng(t,n),o=180*e.coords.accuracy/40075017,r=o/Math.cos(d.LatLng.DEG_TO_RAD*t),a=d.latLngBounds([t-o,n-r],[t+o,n+r]),s=this._locateOptions;if(s.setView){var l=Math.min(this.getBoundsZoom(a),s.maxZoom);this.setView(i,l)}var c={latlng:i,bounds:a,timestamp:e.timestamp};for(var u in e.coords)"number"==typeof e.coords[u]&&(c[u]=e.coords[u]);this.fire("locationfound",c)}})}(window,document)},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(2)(!1);var i=n(13),o=i(n(78)),r=i(n(79));t.push([e.i,".leaflet-map-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-pane,.leaflet-tile-container,.leaflet-overlay-pane,.leaflet-shadow-pane,.leaflet-marker-pane,.leaflet-popup-pane,.leaflet-overlay-pane svg,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden;-ms-touch-action:none;touch-action:none}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container img{max-width:none !important}.leaflet-container img.leaflet-image-layer{max-width:15000px !important}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-tile-pane{z-index:2}.leaflet-objects-pane{z-index:3}.leaflet-overlay-pane{z-index:4}.leaflet-shadow-pane{z-index:5}.leaflet-marker-pane{z-index:6}.leaflet-popup-pane{z-index:7}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:7;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile,.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity 0.2s linear;-moz-transition:opacity 0.2s linear;-o-transition:opacity 0.2s linear;transition:opacity 0.2s linear}.leaflet-fade-anim .leaflet-tile-loaded,.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform 0.25s cubic-bezier(0, 0, 0.25, 1);-moz-transition:-moz-transform 0.25s cubic-bezier(0, 0, 0.25, 1);-o-transition:-o-transform 0.25s cubic-bezier(0, 0, 0.25, 1);transition:transform 0.25s cubic-bezier(0, 0, 0.25, 1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile,.leaflet-touching .leaflet-zoom-animated{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-clickable{cursor:pointer}.leaflet-container{cursor:-webkit-grab;cursor:-moz-grab}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-container,.leaflet-dragging .leaflet-clickable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078A8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,0.5)}.leaflet-container{font:12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif}.leaflet-bar{box-shadow:0 1px 5px rgba(0,0,0,0.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:black}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:bold 18px 'Lucida Console', Monaco, monospace;text-indent:1px}.leaflet-control-zoom-out{font-size:20px}.leaflet-touch .leaflet-control-zoom-in{font-size:22px}.leaflet-touch .leaflet-control-zoom-out{font-size:24px}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0,0,0,0.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url("+o+");width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url("+r+');background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255,255,255,0.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;-moz-box-sizing:content-box;box-sizing:content-box;background:#fff;background:rgba(255,255,255,0.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,0.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 19px;line-height:1.4}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{margin:0 auto;width:40px;height:20px;position:relative;overflow:hidden}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;box-shadow:0 3px 14px rgba(0,0,0,0.4)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;text-align:center;width:18px;height:14px;font:16px/14px Tahoma, Verdana, sans-serif;color:#c3c3c3;text-decoration:none;font-weight:bold;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}\n',""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAVbSURBVEiJrZZfSFt3FMe/v3tvbmLUZleNKSHE/LGRiNbGRovTtrA9lcFkpcOnMvawwhhjrb3soQ8djGFhXMQNRqEvY3R9kJVuPpRRWQebcdKYxkaHqcHchKJ2rVo1WhNz//z2UOLUadVuv9fvOedzfuec3x9CKcV+1qVLlwgAdHV17cuR7AfU29tb43a73wWAVCr1Q0dHx8T/Curu7i5ubGw843K5ms1mMwBgdXUV6XQ6HI1Gb3Z2dj7/z6C+vr6T1dXVp6xWa+l2+uzs7PLk5OTP7e3tv70S6Pr1647q6uoOt9vtYRjmpcnouo5UKiVPTk72nj17dmpPIEmS+IaGhnaPx3O8tLSU3ahRSotyudzrAGAymf4ghGQ36svLy5osywOxWKxPFMX8jqBbt241ejyed+x2e9nWjPL5fK2iKC2UUiMAEELWDAbDEM/z41ttZ2Zmnsmy/OPp06ejm0DXrl2rqK2tPeNyuQ7zPL9pi5qmVaytrZ3Qdf3gdiVhGOYvo9H4O8uyc1sSI+l0enR8fPzmuXPn5sjt27ff8nq9bwiCYNpSJsPa2lqzqqr1AF7eJEDnOG7MaDSGCSHKRmFhYSGXTCZ/Zd1u93dOp3NJEAS9ICqK4snlcm/puu4EQHaBAADRdf2gqqo1hJBllmUXCsLjx4+L7t69e4Ztamqaffjw4QepVOr5oUOHDKqqvqkoShAAvwfA1sVrmlataVqlqqqzvb29lnA43KwoymeEUoqenp7XdF3vW11dPX7s2DHi9XpfgfHPSiaTuHfvHjWbzQMMw7SfP39+kUSj0ZOU0qsA/EtLSwiHwygpKUFraysOHDiwL0Amk8Hg4CBWVlbQ3NwMi8UCAHFCyIesw+H43uFwuAwGg9lkMsHj8SCfzyMUCkFRFNhsNux2YDVNQzQaRSgUgsvlwtGjR2EyvZitbDbL9Pf3H2YDgcD8xMREk67rCZvN5iSEkLKyMrjdbsiyjJGREVgslh13NzU1hf7+fui6jra2NlitVhBCQCmlo6OjoYGBASWbzX5BKKW4cuWKhRDyk67rJ4LBIFNRUbEeaHZ2FpFIBDabDS0tLSgqKipkiqGhITx58gTBYBBWq3XdZ25uDpFIhLIsO8jzfPuFCxeekTt37rQCuAqgfmVlBfF4HOXl5Thy5Ah4/sXgUUoRj8chyzIaGhoAALFYDB6PB36/H4S8OAH5fB4PHjzA/Pw8/H4/SkpKACAB4CPW6/XeqKysrOI4rpjnedjtdmSzWUSjURgMBgiCAEIIrFYrHA4HxsfHsbi4iNbWVtjt9nWILMsYGhpCeXk5ampqYDQaC3AyPDxcSy5evPg2IaTL6XTO+3y+NkIIAwCKoiCRSEBVVTQ1Ne3Yo0wmg+HhYXAcB5/PB4PBUJBoMpkclGW5lFJ6mVBKIYpiMYDLHMedCgQCnCAI/oL1wsICEokEHA4H6uvr1ydQ13WMjY1hamoKPp8PgiBshE/ev38/oyjKLwA+lyTp+abbWxTFOgDfCIKAQCAQ4DiutNCjdDqNp0+fIhAIAABGRkZQWVkJl8u1Xj5N01Zjsdjw3NwcBfCxJEl/FmL/6z0SRZEAeJ8QIvp8vsWqqqqWgpbL5RCPxwEAfr9//awAwPT0dDgejxfput4D4FtJkjYF3vGFFUWxHMCXRqPxcDAYtBYXF1dtZ5fNZmcikcijbDY7DuBTSZLmt7Pb9c8gimIbIeQrm82Wqaura2EYxggAlFI1Ho8PTk9PmymlnZIkhV4WZ0+/IFEUOQCdDMO8V19fn2NZ1hCLxaimaTcAdEuSpO4WY1//OlEUnQC+BkABfCJJ0qO9+v4NmO9xnZob3WcAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAArPSURBVGiB3Zp7TFvXHce/916/eBhCDInJwDjGBhvjQHi5SclaKRL5Z1Wl/rEq/WNr11TJmkpMw900pLVrplJ1cadFarp0zdZmmpZpf3SqNrUKfSnKgwI2sQPGBmNjAsUOxCW8bGzfe8/+SEAkMfa1A5m075/2+f3O+Z7X595zLkUIwf+T6EdRSWdnp7izs1P8KOqitnqE3n///QMajeYZAPD7/R8fPXr00lbWt2WGTp48qdRoNC/s2bNHXVhYyALA/Py86Pr16wG/3//hq6++GtqKejfdUGdnJ6XT6Q4bDIZWjUaTNLnf76fcbvdlr9d7vqura1MbsKmGTp8+XadWqw/v3bu3UCQS8anKsixLX7t2bT4QCJw/fvy4c7PasCmGTpw4Ia+qqnrRZDIZSkpK2ExiZ2dnRYODg+7R0dE/v/baa4sP25aHNnT27Nkf6HS6QwaD4aF2TLfbzXu93gtHjhz5z8PkydrQqVOnKtVq9Y/q6uqUubm5GY3KRopEIiKn0xkKBAJ/bW9v92WTI2NDnZ2dYoPB8ILRaGwoKyvjsqk0naamphiXyzXgdrs/7OrqSmQSm5GhM2fOHNBoNM/U1dVJKYoSFEgIEcVisWYAkEql/RRFCRpNQgjldDpjfr//42PHjglmlyBDJ0+eVO7evfsndXV1FatMEaJEIqGOx+MHCCFyAKAoalEikVwSi8UBoTnm5+dFTqdzYnx8/C9C2JXS0CpT9Hr9gcrKypTb8HrxPJ+/srJygOf53cn+p2l6XCaTXaJpekloTp/PR3s8nkvp2LWhoXfffbderVYfbmhoKEjHlPVtjcVidSzLNhFCUj67URSVEIlENqlU6gQgKD/LsvTAwMBCIBA4/8orrziS5r3f0IkTJ+Q6ne6IyWQy7NixQ/CCZFm2NB6PP8Hz/HahMQBA0/R3EonkokgkCgqNmZmZEQ8ODrq9Xu/Z+9l1j6EPPvjgKZ1Od6impoYSmpzneVksFtvHcZxBaEwyMQzjlkqlPTRNrwiNGR4eJl6v98JLL73079XfKEIITp06VVlRUfHj+vr6nZkwJR6P6xOJxH5CiCxTA8lEUdSKWCy+KpFIPEJjIpGIyOFw3JyYmDjX3t7uo86dO3fUaDQ2lJeXCzbCcdz2WCz2BM/zpdk1PbVomg5KpdKLDMN8JzRmcnJS5HK5Bhi9Xv9RcXHx7V27dqUd6rtMMcfj8YOEkIKHa3bKeuQsy9bwPC9mGCZEUVTaTWNsbKzQbrc/RXV0dBAAMYVCcfnpp5+eKC4uTmrsfqY8KqVj161bt2SffPJJRTgcbgUgZVpbW3sIIQei0Wij0+ksmZubW9DpdEsUdWdf4Hk+PxqNHmRZtgWA9NFZWZOU4zgdy7LFd0crDgCEEHz66aelX3zxxfcjkUg9gAmapg8zV65c8fX09PwpHo/zhJC22dnZ2oGBARQUFCwVFBTUxOPxQ4QQxf/AyD0ihBSxLFtDCCFerzdy/vz5PcFg8CAhRAqgSy6XP/fmm2+O3LNtd3R0VFEU9R6AgyKRiNfr9fS+ffsgFj+S8420SiQS6Onpgcfj4VmWpQF8SQh5+Z133hldLSNaH/Dss8+GGYYJ3Lhxg9jtdnpoaAiTk5NoampCdXX1IzewXiMjI7DZbJifn4dMJqPNZjNRqVQBjuPC68utjhA1MDDwPIDfASgG7vSGw+HA2NgYAEClUmH//v0oKip6pEbm5uZw9epV3LhxAwCg1WpRX1+/ftbcAvCLhoaGjwAQyuFwGDmOOwOgNVnCcDiMvr4+zM3NQSaTwWg0orm5GTS9tUd6PM+jv78fLpcLKysrKCoqQktLCxSKDZfzZYZhjjFarfYfKpWqmabppAslNzcXWq0WMpkMwWAQU1NTCAQCyM/Px7Zt27bEzMTEBD7//HP4fD5QFIWGhgaYzWbk5uZuGMNxXPHXX39tYkwm07nh4eGZ3Nxcz/bt27+XrDBFUVAoFNBoNIhEIggGg/D5fLh9+zaUSuWmbRqRSAQXL15EX18flpeXoVKp8OSTT0KpVGIVI8nk8/n6uru7xYuLi3WrHDr07bffmvx+f295eTktkUiSwlMsFkOlUqGkpAQzMzMIBoPwer0AAKVS+VBmHA4HvvrqK4RCIeTl5aG1tRU1NTUpO2t5eXn6s88+Gx4fHzcDmKVp+jBFCMEbb7whW1xc/BWAXwJgKysrbS0tLY9TFCXaKBnP8xgaGoLb7QbHcSgtLcW+ffsyNhYKhdDT04NgMAiGYWAwGFBbW5tyjRJC2L6+vis+n68Jd3bqt+Vy+Vuvv/76yoYcysvLi5nNZmm6Bi4sLMBmsyEUCkEsFkOv1+Oxxx5LOw0TiQS++eYbeDweJBIJKJVKNDU1oaAg9SNiKBRCb28vu7y8LEISDt1jqLu7ezuAt0Oh0IsjIyNUPB5HeXk5mpubIZWmfuqZmJiA3W7HysoKCgsLU7LrPqagsbERFRUVKfPHYjH09/djcnISEokE1dXVUCqV/wLQ3tbWNvmAoe7u7ucBnMRdDrEsC6/Xu5bAZDKhqqoq5eJMxy4BTHlAhBCMjo5icHAQqx2s0+kgEq2thiUAvwFwqq2tjaUuXLhQA+CPAL6fLOHCwgJcLhcWFxeFsADAg+yqra0FAAwNDQllygN55HI5jEZjqil5HcBPmerq6r/t2LFjL8MwOclKSaVSlJWVQSKRIBQKwefzIRqNYufOnRsu3GTsmp6eFswUlmVht9ths9mQSCRQVVUFo9EImWzjF2OO4+ROp1NPdXR0JAAsaLVat0ajeXzDCNyZxx6PBzdv3kROTg727t0LtVqdKgTRaBR2ux0A0NjYiJycpP22pkAggGvXrq11ml6vT7t+p6en+10uVykhpIzq6OhoA/AegEqxWOxsamrKl8vllakShMNhDA8Pr1VqNpuRn5+fstJ0WlpaQm9v71pn1dTUpJ2S0Wh02mazTUajUTMAH4CXKUIILBaLDMAqh+iSkpIre/bsaWEYZsN5wfM8/H4/AoEAKIqCwWCAyWRKuWkkEyEEg4ODcLvdIIRArVZDo9Gk5ZDb7b4yNTW1xiEAb1mt1ns5ZLFYqnBntA5SFDVlNBqDu3btak7VoOXlZXg8HoTDYeTn56OlpUUwXEOhEPr6+rC0tASFQgG9Xo+8vLyUMeFweNDhcEg5jqsC8CWAl61Wa3IOrTP2HIDfA9iZk5PT29TUVJ6Tk7MrXeNGRkYghF0bMCWlkUQiMWe324cWFhZaAcwA+LnVav37/eU2PAq2WCyFALoAHAMQLSsrsxkMhpSPQ+nYJYApSeX3+y+PjY3VANgG4AyATqvVOp+sbNrbB4vF0nw3SQPDMKP19fUxhUJhShWTjF0AMmEKAGBxcdFns9mWEolEHYABAMesVmt/qhhB1ykWi4UBcBzAbwHICwoKLjc2NtaKxeINX18JIZicnMTY2Bh4/s6xGk3T0Gq1KC8vT7l5cBwXuX79et/s7OzjAKIAfg3gtNVqTXvBltGFl8ViKQXwBwA/BPCdVqsd1mg0Sd90V7XKLgAZMwXAPwH8zGq1Cj7Iz+qO1WKxZMyudErGFKvV2p1pnqwvjbNhVzKlYko27Xroa/1s2LWqdEzJRpv2JUkm7BLKlGy0qZ/GCGFXJkzJRlvyNVYydkkkktxMmZKNtuzzsvvZBYADEEEGTMlGW/4B4Dp2ARkyJRv9F9vsxWD/43R9AAAAAElFTkSuQmCC"},function(module,exports){
/*!
*  ui-leaflet 1.0.3 2017-01-26
*  ui-leaflet - An AngularJS directive to easily interact with Leaflet maps
*  git: https://github.com/angular-ui/ui-leaflet
*/
!function(angular){"use strict";angular.module("ui-leaflet",["nemLogging"]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletMapEvents",function(e,t,n,i,o){return{restrict:"EA",replace:!0,scope:{center:"=",lfCenter:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude></div></div>',controller:["$scope",function(t){this._leafletMap=e.defer(),this.getMap=function(){return this._leafletMap.promise},this.getLeafletScope=function(){return t}}],link:function(e,r,a,s){var l=i.isDefined,c=n.setDefaults(e.defaults,a.id),u=o.getAvailableMapEvents(),d=o.addEvents;function p(){isNaN(a.width)?r.css("width",a.width):r.css("width",a.width+"px")}function h(){isNaN(a.height)?r.css("height",a.height):r.css("height",a.height+"px")}e.mapId=a.id,t.setDirectiveControls({},a.id),l(a.width)&&(p(),e.$watch((function(){return r[0].getAttribute("width")}),(function(){p(),f.invalidateSize()}))),l(a.height)&&(h(),e.$watch((function(){return r[0].getAttribute("height")}),(function(){h(),f.invalidateSize()})));var f=new L.Map(r[0],n.getMapCreationDefaults(a.id));if(s._leafletMap.resolve(f),l(a.center)||l(a.lfCenter)||f.setView([c.center.lat,c.center.lng],c.center.zoom),!l(a.tiles)&&!l(a.layers)){var g=L.tileLayer(c.tileLayer,c.tileLayerOptions);g.addTo(f),t.setTiles(g,a.id)}if(l(f.zoomControl)&&l(c.zoomControlPosition)&&f.zoomControl.setPosition(c.zoomControlPosition),l(f.zoomControl)&&!1===c.zoomControl&&f.zoomControl.removeFrom(f),l(f.zoomsliderControl)&&l(c.zoomsliderControl)&&!1===c.zoomsliderControl&&f.zoomsliderControl.removeFrom(f),!l(a.eventBroadcast)){d(f,u,"eventName",e,"broadcast")}f.whenReady((function(){t.setMap(f,a.id)})),e.$on("$destroy",(function(){n.reset(),f.remove(),t.unresolveMap(a.id)})),e.$on("invalidateSize",(function(){f.invalidateSize()}))}}}]),angular.module("ui-leaflet").factory("leafletBoundsHelpers",["leafletLogger","leafletHelpers",function(e,t){var n=t.isArray,i=t.isNumber,o=t.isFunction,r=t.isDefined,a=e;function s(e){return angular.isDefined(e)&&angular.isDefined(e.southWest)&&angular.isDefined(e.northEast)&&angular.isNumber(e.southWest.lat)&&angular.isNumber(e.southWest.lng)&&angular.isNumber(e.northEast.lat)&&angular.isNumber(e.northEast.lng)}return{createLeafletBounds:function(e){if(s(e))return L.latLngBounds([e.southWest.lat,e.southWest.lng],[e.northEast.lat,e.northEast.lng])},isValidBounds:s,createBoundsFromArray:function(e){if(n(e)&&2===e.length&&n(e[0])&&n(e[1])&&2===e[0].length&&2===e[1].length&&i(e[0][0])&&i(e[0][1])&&i(e[1][0])&&i(e[1][1]))return{northEast:{lat:e[0][0],lng:e[0][1]},southWest:{lat:e[1][0],lng:e[1][1]}};a.error("[AngularJS - Leaflet] The bounds array is not valid.")},createBoundsFromLeaflet:function(e){if(r(e)&&o(e.getNorthEast)&&o(e.getSouthWest)){var t=e.getNorthEast(),n=e.getSouthWest();return{northEast:{lat:t.lat,lng:t.lng},southWest:{lat:n.lat,lng:n.lng}}}a.error("[AngularJS - Leaflet] The leaflet bounds is not valid object.")}}}]),angular.module("ui-leaflet").factory("leafletControlHelpers",["$rootScope","leafletLogger","leafletHelpers","leafletLayerHelpers","leafletMapDefaults",function(e,t,n,i,o){var r=n.isDefined,a=n.isObject,s=n.get,l=i.createLayer,c={},u=n.errorHeader+" [Controls] ",d=t,p=function(e,t,n){var i=o.getDefaults(n);if(!s(i,"controls.layers.visible"))return!1;var l=!1;return a(e)&&Object.keys(e).forEach((function(t){var n=e[t];r(n.layerOptions)&&!1===n.layerOptions.showOnSelector||(l=!0)})),a(t)&&Object.keys(t).forEach((function(e){var n=t[e];r(n.layerParams)&&!1===n.layerParams.showOnSelector||(l=!0)})),l},h={draw:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.Draw)||(d.error(u+" Draw plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Draw(e)}},scale:{isPluginLoaded:function(){return!0},checkValidParams:function(){return!0},createControl:function(e){return new L.control.scale(e)}},fullscreen:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.Fullscreen)||(d.error(u+" Fullscreen plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Fullscreen(e)}},search:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.Search)||(d.error(u+" Search plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Search(e)}},custom:{},minimap:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.MiniMap)||(d.error(u+" Minimap plugin is not loaded."),!1)},checkValidParams:function(e){return!!r(e.layer)||(d.warn(u+' minimap "layer" option should be defined.'),!1)},createControl:function(e){var t=l(e.layer);if(r(t))return new L.Control.MiniMap(t,e);d.warn(u+' minimap control "layer" could not be created.')}}};return{layersControlMustBeVisible:p,isValidControlType:function(e){return-1!==Object.keys(h).indexOf(e)},createControl:function(e,t){if(h[e].checkValidParams(t))return h[e].createControl(t)},updateLayersControl:function(e,t,n,i,a,l){var u,d=c[t],h=p(i,a,t);if(r(d)&&n){for(u in l.baselayers)d.removeLayer(l.baselayers[u]);for(u in l.overlays)d.removeLayer(l.overlays[u]);e.removeControl(d),delete c[t]}if(h){for(u in d=function(e){var t=o.getDefaults(e),n={collapsed:t.controls.layers.collapsed,position:t.controls.layers.position,autoZIndex:!1};return angular.extend(n,t.controls.layers.options),s(t,"controls.layers.control")?t.controls.layers.control.apply(this,[[],[],n]):new L.control.layers([],[],n)}(t),c[t]=d,i){!(r(i[u].layerOptions)&&!1===i[u].layerOptions.showOnSelector)&&r(l.baselayers[u])&&d.addBaseLayer(l.baselayers[u],i[u].name)}for(u in a){!(r(a[u].layerParams)&&!1===a[u].layerParams.showOnSelector)&&r(l.overlays[u])&&d.addOverlay(l.overlays[u],a[u].name)}e.addControl(d)}return h}}}]),angular.module("ui-leaflet").service("leafletData",["leafletLogger","$q","leafletHelpers",function(e,t,n){var i=n.getDefer,o=n.getUnresolvedDefer,r=n.setResolvedDefer,a={},s=this,l=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];l.forEach((function(e){a[e]={}})),this.unresolveMap=function(e){var t=n.obtainEffectiveMapId(a.map,e);l.forEach((function(e){a[e][t]=void 0}))},l.forEach((function(e){var t,n=(t=e).charAt(0).toUpperCase()+t.slice(1);s["set"+n]=function(t,n){o(a[e],n).resolve(t),r(a[e],n)},s["get"+n]=function(t){return i(a[e],t).promise}}))}]),angular.module("ui-leaflet").service("leafletDirectiveControlsHelpers",["leafletLogger","leafletData","leafletHelpers",function(e,t,n){var i=n.isDefined,o=n.isString,r=n.isObject,a=n.errorHeader,s=e,l=a+"[leafletDirectiveControlsHelpers";return{extend:function(e,n,a,c){var u=l+".extend] ",d={};if(i(n)){if(o(n)&&i(a)&&i(c))d[n]={create:a,clean:c};else{if(!r(n)||i(a)||i(c))return void s.error(u+"incorrect arguments");d=n}t.getDirectiveControls(e).then((function(n){angular.extend(n,d),t.setDirectiveControls(n,e)}))}else s.error(u+"thingToAddName cannot be undefined")}}}]),angular.module("ui-leaflet").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(e,t){var n=e,i=t,o=function(e,t){return this.lat=e,this.lng=t,this},r=function(e){if(n.isUndefined(e))return!1;if(n.isArray(e)){if(2===e.length&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0}else if(n.isDefined(e.type)&&"Point"===e.type&&n.isArray(e.coordinates)&&2===e.coordinates.length&&n.isNumber(e.coordinates[0])&&n.isNumber(e.coordinates[1]))return!0;return i.all(["lat","lng"],(function(t){return n.isDefined(e[t])&&n.isNumber(e[t])}))};return{getLat:function(e){return Array.isArray(e)&&2===e.length?e[1]:n.isDefined(e.type)&&"Point"===e.type?+e.coordinates[1]:+e.lat},getLng:function(e){return Array.isArray(e)&&2===e.length?e[0]:n.isDefined(e.type)&&"Point"===e.type?+e.coordinates[0]:+e.lng},validateCoords:r,getCoords:function(e){if(e&&r(e)){var t=null;if(Array.isArray(e)&&2===e.length)t=new o(e[1],e[0]);else{if(!n.isDefined(e.type)||"Point"!==e.type)return e;t=new o(e.coordinates[1],e.coordinates[0])}return angular.extend(e,t)}}}}]),angular.module("ui-leaflet").service("leafletHelpers",["$q","$log",function(e,t){var n=angular.copy,i=function(e,t){if(e){for(var n=e[(t=t.split(".")).shift()];n&&t.length;)n=n[t.shift()];return n}};function o(e,t){var n,i=Object.keys(e);if(angular.isDefined(t))n=t;else{if(0!==i.length&&(1!==i.length||"main"!==i[0]))throw new Error("[AngularJS - Leaflet] - You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call. Where one of the following mapIds "+Object.keys(e).join(",")+" are available.");n="main"}return n}function r(t,n){var i,r=o(t,n);return angular.isDefined(t[r])&&!0!==t[r].resolvedDefer?i=t[r].defer:(i=e.defer(),t[r]={defer:i,resolvedDefer:!1}),i}var a=function(e){return angular.isDefined(e)&&null!==e},s=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,c=/^((?:x|data)[\:\-_])/i,u=function(e){return e.replace(s,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(l,"Moz$1")};return{camelCase:u,directiveNormalize:function(e){return u(e.replace(c,""))},copy:n,clone:n,errorHeader:"[AngularJS - Leaflet] ",getObjectValue:i,get:i,getObjectArrayPath:function(e){return e.split(".").reduce((function(e,t){return e+'["'+t+'"]'}))},getObjectDotPath:function(e){return e.reduce((function(e,t){return e+"."+t}))},defaultTo:function(e,t){return a(e)?e:t},isTruthy:function(e){return"true"===e||!0===e},isEmpty:function(e){return 0===Object.keys(e).length},isUndefinedOrEmpty:function(e){return angular.isUndefined(e)||null===e||0===Object.keys(e).length},isDefined:a,isUndefined:function(e){return!a(e)},isNumber:angular.isNumber,isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isFunction:angular.isFunction,equals:angular.equals,isValidCenter:function(e){return angular.isDefined(e)&&angular.isNumber(e.lat)&&angular.isNumber(e.lng)&&angular.isNumber(e.zoom)},isValidPoint:function(e){return!!angular.isDefined(e)&&(angular.isArray(e)?2===e.length&&angular.isNumber(e[0])&&angular.isNumber(e[1]):angular.isNumber(e.lat)&&angular.isNumber(e.lng))},isSameCenterOnMap:function(e,t){var n=t.getCenter(),i=t.getZoom();return!(!e.lat||!e.lng||n.lat.toFixed(4)!==e.lat.toFixed(4)||n.lng.toFixed(4)!==e.lng.toFixed(4)||i!==e.zoom)},safeApply:function(e,t){var n=e.$root.$$phase;"$apply"===n||"$digest"===n?e.$eval(t):e.$evalAsync(t)},obtainEffectiveMapId:o,getDefer:function(e,t){var n=o(e,t);return angular.isDefined(e[n])&&!1!==e[n].resolvedDefer?e[n].defer:r(e,t)},getUnresolvedDefer:r,setResolvedDefer:function(e,t){e[o(e,t)].resolvedDefer=!0},rangeIsSupported:function(){var e=document.createElement("input");return e.setAttribute("type","range"),"range"===e.type},FullScreenControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.Fullscreen)}},MiniMapControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.MiniMap)}},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)},is:function(e){return!!this.isLoaded()&&e instanceof L.AwesomeMarkers.Icon},equal:function(e,t){return!!this.isLoaded()&&(!!this.is(e)&&angular.equals(e,t))}},VectorMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.VectorMarkers)&&angular.isDefined(L.VectorMarkers.Icon)},is:function(e){return!!this.isLoaded()&&e instanceof L.VectorMarkers.Icon},equal:function(e,t){return!!this.isLoaded()&&(!!this.is(e)&&angular.equals(e,t))}},DomMarkersPlugin:{isLoaded:function(){return!(!angular.isDefined(L.DomMarkers)||!angular.isDefined(L.DomMarkers.Icon))},is:function(e){return!!this.isLoaded()&&e instanceof L.DomMarkers.Icon},equal:function(e,t){return!!this.isLoaded()&&(!!this.is(e)&&angular.equals(e,t))}},PolylineDecoratorPlugin:{isLoaded:function(){return!!angular.isDefined(L.PolylineDecorator)},is:function(e){return!!this.isLoaded()&&e instanceof L.PolylineDecorator},equal:function(e,t){return!!this.isLoaded()&&(!!this.is(e)&&angular.equals(e,t))}},MakiMarkersPlugin:{isLoaded:function(){return!(!angular.isDefined(L.MakiMarkers)||!angular.isDefined(L.MakiMarkers.Icon))},is:function(e){return!!this.isLoaded()&&e instanceof L.MakiMarkers.Icon},equal:function(e,t){return!!this.isLoaded()&&(!!this.is(e)&&angular.equals(e,t))}},ExtraMarkersPlugin:{isLoaded:function(){return!(!angular.isDefined(L.ExtraMarkers)||!angular.isDefined(L.ExtraMarkers.Icon))},is:function(e){return!!this.isLoaded()&&e instanceof L.ExtraMarkers.Icon},equal:function(e,t){return!!this.isLoaded()&&(!!this.is(e)&&angular.equals(e,t))}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(e){return!!this.isLoaded()&&e instanceof L.MarkerClusterGroup}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(e){return!!this.isLoaded()&&e instanceof L.MarkerClusterGroup}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(e){return!!this.isLoaded()&&e instanceof L.Google}},LeafletProviderPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.Provider)},is:function(e){return!!this.isLoaded()&&e instanceof L.TileLayer.Provider}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return angular.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(e){return!!this.isLoaded()&&e instanceof L.BingLayer}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(e){return!!this.isLoaded()&&e instanceof L.GeoJSON.WFS}},AGSBaseLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.basemapLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.basemapLayer}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(e){return!!this.isLoaded()&&e instanceof lvector.AGS}},AGSFeatureLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.featureLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.featureLayer}},AGSTiledMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.tiledMapLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.tiledMapLayer}},AGSDynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.dynamicMapLayer}},AGSImageMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.imageMapLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.imageMapLayer}},AGSClusteredLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.clusteredFeatureLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.clusteredFeatureLayer}},AGSHeatmapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.heatmapFeatureLayer},is:function(e){return!!this.isLoaded()&&e instanceof L.esri.heatmapFeatureLayer}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(e){return!!this.isLoaded()&&e instanceof L.Yandex}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(e){return!!this.isLoaded()&&e instanceof L.TileLayer.GeoJSON}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(e){return this.isLoaded()?e instanceof L.UtfGrid:(t.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(e){return e instanceof L.DivIcon},equal:function(e,t){return!!this.is(e)&&angular.equals(e,t)}},Icon:{is:function(e){return e instanceof L.Icon},equal:function(e,t){return!!this.is(e)&&angular.equals(e,t)}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]),angular.module("ui-leaflet").service("leafletIterators",["leafletLogger","leafletHelpers",function(e,t){var n,i,o,r=t,a=t.errorHeader+"leafletIterators: ",s=Object.keys,l=r.isFunction,c=r.isObject,u=e,d=Math.pow(2,53)-1,p=function(e){return e};i=s,n=function(e){var t=arguments.length;if(t<2||null===e)return e;for(var n=1;n<t;n++)for(var r=arguments[n],a=i(r),s=a.length,l=0;l<s;l++){var c=a[l];o&&void 0!==e[c]||(e[c]=r[c])}return e};var h;h=function(e){return e=n({},e),function(t){return function(e,t){var n=s(t),i=n.length;if(null===e)return!i;for(var o=Object(e),r=0;r<i;r++){var a=n[r];if(t[a]!==o[a]||!(a in o))return!1}return!0}(t,e)}};var f,g;f=g=function(e,t,n){t=function(e,t,n){return null===e?p:l(e)?function(e,t,n){if(void 0===t)return e;switch(null===n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}}(e,t,n):c(e)?h(e):(i=e,function(e){return null===e?void 0:e[i]});var i}(t,n);for(var i=!function(e){var t=null!==e&&e.length;return r.isNumber(t)&&t>=0&&t<=d}(e)&&s(e),o=(i||e).length,a=0;a<o;a++){var u=i?i[a]:a;if(!t(e[u],u,e))return!1}return!0};var m=function(e,t,n,i){return!(n||r.isDefined(e)&&r.isDefined(t))||!r.isFunction(t)&&(i=r.defaultTo(t,"cb"),u.error(a+i+" is not a function"),!0)},v=function(e,t){!function(e,t,n){if(!m(void 0,n,!0,"internalCb")&&!m(e,t))for(var i in e)e.hasOwnProperty(i)&&n(e[i],i)}(e,t,(function(e,n){t(e,n)}))};return{each:v,forEach:v,every:f,all:g}}]),angular.module("ui-leaflet").factory("leafletLayerHelpers",["$rootScope","$q","leafletLogger","leafletHelpers","leafletIterators",function($rootScope,$q,leafletLogger,leafletHelpers,leafletIterators){var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isArray=leafletHelpers.isArray,isDefined=leafletHelpers.isDefined,errorHeader=leafletHelpers.errorHeader,$it=leafletIterators,$log=leafletLogger,utfGridCreateLayer=function(e){if(Helpers.UTFGridPlugin.isLoaded()){var t=new L.UtfGrid(e.url,e.pluginOptions);return t.on("mouseover",(function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseover",e)})),t.on("mouseout",(function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseout",e)})),t.on("click",(function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridClick",e)})),t.on("mousemove",(function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMousemove",e)})),t}$log.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.")},layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer(e.url,e.options)}},mapbox:{mustHaveKey:!0,createLayer:function(e){var t=3;isDefined(e.options.version)&&4===e.options.version&&(t=e.options.version);var n=3===t?"//{s}.tiles.mapbox.com/v3/"+e.key+"/{z}/{x}/{y}.png":"//api.tiles.mapbox.com/v4/"+e.key+"/{z}/{x}/{y}.png?access_token="+e.apiKey;return L.tileLayer(n,e.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.GeoJSONPlugin.isLoaded())return new L.TileLayer.GeoJSON(e.url,e.pluginOptions,e.options)}},geoJSONShape:{mustHaveUrl:!1,createLayer:function(e){return new L.GeoJSON(e.data,e.options)}},geoJSONAwesomeMarker:{mustHaveUrl:!1,createLayer:function(e){return new L.geoJson(e.data,{pointToLayer:function(t,n){return L.marker(n,{icon:L.AwesomeMarkers.icon(e.icon)})}})}},geoJSONVectorMarker:{mustHaveUrl:!1,createLayer:function(e){return new L.geoJson(e.data,{pointToLayer:function(t,n){return L.marker(n,{icon:L.VectorMarkers.icon(e.icon)})}})}},utfGrid:{mustHaveUrl:!0,createLayer:utfGridCreateLayer},cartodbTiles:{mustHaveKey:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){return e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json",utfGridCreateLayer(e)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png",n=L.tileLayer(t,e.options);e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json";var i=utfGridCreateLayer(e);return L.layerGroup([n,i])}},wms:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wms(e.url,e.options)}},wmts:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wmts(e.url,e.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(e){var t=[];return $it.each(e.options.layers,(function(e){t.push(createLayer(e))})),e.options.loadedDefer=function(){var t=[];if(isDefined(e.options.layers))for(var n=0;n<e.options.layers.length;n++){var i=e.options.layers[n].layerOptions.loadedDefer;isDefined(i)&&t.push(i)}return t},L.layerGroup(t)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"SATELLITE";if(Helpers.GoogleLayerPlugin.isLoaded())return new L.Google(t,e.options)}},here:{mustHaveUrl:!1,createLayer:function(e){var t=e.provider||"HERE.terrainDay";if(Helpers.LeafletProviderPlugin.isLoaded())return new L.TileLayer.Provider(t,e.options)}},china:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"";if(Helpers.ChinaLayerPlugin.isLoaded())return L.tileLayer.chinaProvider(t,e.options)}},agsBase:{mustHaveLayer:!0,createLayer:function(e){if(Helpers.AGSBaseLayerPlugin.isLoaded())return L.esri.basemapLayer(e.layer,e.options)}},ags:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSLayerPlugin.isLoaded()){var t=angular.copy(e.options);angular.extend(t,{url:e.url});var n=new lvector.AGS(t);return n.onAdd=function(e){this.setMap(e)},n.onRemove=function(){this.setMap(null)},n}}},agsFeature:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSFeatureLayerPlugin.isLoaded()){e.options.url=e.url;var t=L.esri.featureLayer(e.options),n=function(){isDefined(e.options.loadedDefer)&&e.options.loadedDefer.resolve()};return t.on("loading",(function(){e.options.loadedDefer=$q.defer(),t.off("load",n),t.on("load",n)})),t}$log.warn(errorHeader+" The esri plugin is not loaded.")}},agsTiled:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSTiledMapLayerPlugin.isLoaded())return e.options.url=e.url,L.esri.tiledMapLayer(e.options);$log.warn(errorHeader+" The esri plugin is not loaded.")}},agsDynamic:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSDynamicMapLayerPlugin.isLoaded())return e.options.url=e.url,L.esri.dynamicMapLayer(e.options);$log.warn(errorHeader+" The esri plugin is not loaded.")}},agsImage:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSImageMapLayerPlugin.isLoaded())return e.options.url=e.url,L.esri.imageMapLayer(e.options);$log.warn(errorHeader+" The esri plugin is not loaded.")}},agsClustered:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSClusteredLayerPlugin.isLoaded()){if(Helpers.MarkerClusterPlugin.isLoaded())return L.esri.clusteredFeatureLayer(e.url,e.options);$log.warn(errorHeader+" The markercluster plugin is not loaded.")}else $log.warn(errorHeader+" The esri clustered layer plugin is not loaded.")}},agsHeatmap:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSHeatmapLayerPlugin.isLoaded()){if(Helpers.HeatLayerPlugin.isLoaded())return L.esri.heatmapFeatureLayer(e.url,e.options);$log.warn(errorHeader+" The heatlayer plugin is not loaded.")}else $log.warn(errorHeader+" The esri heatmap layer plugin is not loaded.")}},markercluster:{mustHaveUrl:!1,createLayer:function(e){if(Helpers.MarkerClusterPlugin.isLoaded())return new L.MarkerClusterGroup(e.options);$log.warn(errorHeader+" The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(e){if(Helpers.BingLayerPlugin.isLoaded())return new L.BingLayer(e.key,e.options)}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.WebGLHeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(e.options);return isDefined(e.data)&&t.setData(e.data),t}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.HeatLayerPlugin.isLoaded()){var t=new L.heatLayer;return isArray(e.data)&&t.setLatLngs(e.data),isObject(e.options)&&t.setOptions(e.options),t}}},yandex:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"map";if(Helpers.YandexLayerPlugin.isLoaded())return new L.Yandex(t,e.options)}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(e){return L.imageOverlay(e.url,e.bounds,e.options)}},iip:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.iip(e.url,e.options)}},custom:{createLayer:function(e){if(e.layer instanceof L.Class)return angular.copy(e.layer);$log.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(e){return cartodb.createLayer(e.map,e.url)}}};function isValidLayerType(e){return isString(e.type)?-1===Object.keys(layerTypes).indexOf(e.type)?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[e.type].mustHaveUrl&&!isString(e.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[e.type].mustHaveData&&!isDefined(e.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[e.type].mustHaveLayer&&!isDefined(e.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have an layer defined"),!1):layerTypes[e.type].mustHaveBounds&&!isDefined(e.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have bounds defined"),!1):!(layerTypes[e.type].mustHaveKey&&!isDefined(e.key))||($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have key defined"),!1):($log.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function createLayer(e){if(isValidLayerType(e)){if(isString(e.name)){for(var t in isObject(e.layerParams)||(e.layerParams={}),isObject(e.layerOptions)||(e.layerOptions={}),e.layerParams)e.layerOptions[t]=e.layerParams[t];var n={url:e.url,data:e.data,options:e.layerOptions,layer:e.layer,icon:e.icon,type:e.layerType,bounds:e.bounds,key:e.key,apiKey:e.apiKey,pluginOptions:e.pluginOptions,user:e.user};return layerTypes[e.type].createLayer(n)}$log.error("[AngularJS - Leaflet] A base layer must have a name")}}function safeAddLayer(e,t){t&&"function"==typeof t.addTo?t.addTo(e):e.addLayer(t)}function safeRemoveLayer(e,t,n){if(isDefined(n)&&isDefined(n.loadedDefer))if(angular.isFunction(n.loadedDefer)){var i=n.loadedDefer();$log.debug("Loaded Deferred",i);var o=i.length;if(o>0)for(var r=function(){0===--o&&e.removeLayer(t)},a=0;a<i.length;a++)i[a].promise.then(r);else e.removeLayer(t)}else n.loadedDefer.promise.then((function(){e.removeLayer(t)}));else e.removeLayer(t)}return{createLayer:createLayer,safeAddLayer:safeAddLayer,safeRemoveLayer:safeRemoveLayer}}]),angular.module("ui-leaflet").factory("leafletLegendHelpers",["$http","$q","$log","leafletHelpers",function(e,t,n,i){var o={},r=i.isDefined,a=function(t){var n=o[t],i=n[0];e(i.c).then((function(e){n.shift(),i.d.resolve(e),n.length>0&&a(t)}),(function(e){n.shift(),i.d.reject(e),n.length>0&&a(t)}))},s=function(e,t,n,i){if(e.innerHTML="",t.error)e.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"</div>";else if("arcgis"===n)for(var o=0;o<t.layers.length;o++){var r=t.layers[o];e.innerHTML+='<div class="info-title" data-layerid="'+r.layerId+'">'+r.layerName+"</div>";for(var a=0;a<r.legend.length;a++){var s=r.legend[a];e.innerHTML+='<div class="inline" data-layerid="'+r.layerId+'"><img src="data:'+s.contentType+";base64,"+s.imageData+'" /></div><div class="info-label" data-layerid="'+r.layerId+'">'+s.label+"</div>"}}else"image"===n&&(e.innerHTML='<img src="'+i+'"/>')};return{getOnAddLegend:function(e,t,n,i){return function(){var o=L.DomUtil.create("div",t);return L.Browser.touch?L.DomEvent.on(o,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(o),L.DomEvent.on(o,"mousewheel",L.DomEvent.stopPropagation)),s(o,e,n,i),o}},getOnAddArrayLegend:function(e,t){return function(){for(var n=L.DomUtil.create("div",t),i=0;i<e.colors.length;i++)n.innerHTML+='<div class="outline"><i style="background:'+e.colors[i]+'"></i></div><div class="info-label">'+e.labels[i]+"</div>";return L.Browser.touch?L.DomEvent.on(n,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(n),L.DomEvent.on(n,"mousewheel",L.DomEvent.stopPropagation)),n}},updateLegend:s,addLegendURL:function(e,n){var i=t.defer();return r(o[e])||(o[e]=[]),o[e].push({c:n,d:i}),1===o[e].length&&a(e),i.promise}}}]),angular.module("ui-leaflet").factory("leafletMapDefaults",["$q","leafletHelpers",function(e,t){var n=t.isDefined,i=t.isObject,o=t.obtainEffectiveMapId,r={};return{reset:function(){r={}},getDefaults:function(e){var t=o(r,e);return r[t]},getMapCreationDefaults:function(e){var t=o(r,e),i=r[t],a={maxZoom:i.maxZoom,keyboard:i.keyboard,dragging:i.dragging,zoomControl:i.zoomControl,doubleClickZoom:i.doubleClickZoom,scrollWheelZoom:i.scrollWheelZoom,tap:i.tap,touchZoom:i.touchZoom,attributionControl:i.attributionControl,worldCopyJump:i.worldCopyJump,crs:i.crs};if(n(i.minZoom)&&(a.minZoom=i.minZoom),n(i.zoomAnimation)&&(a.zoomAnimation=i.zoomAnimation),n(i.fadeAnimation)&&(a.fadeAnimation=i.fadeAnimation),n(i.markerZoomAnimation)&&(a.markerZoomAnimation=i.markerZoomAnimation),i.map)for(var s in i.map)a[s]=i.map[s];return a},setDefaults:function(e,t){var a={keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},nominatim:{server:" http://nominatim.openstreetmap.org/search"},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}};n(e)&&(a.doubleClickZoom=n(e.doubleClickZoom)?e.doubleClickZoom:a.doubleClickZoom,a.scrollWheelZoom=n(e.scrollWheelZoom)?e.scrollWheelZoom:a.doubleClickZoom,a.tap=n(e.tap)?e.tap:a.tap,a.touchZoom=n(e.touchZoom)?e.touchZoom:a.doubleClickZoom,a.zoomControl=n(e.zoomControl)?e.zoomControl:a.zoomControl,a.zoomsliderControl=n(e.zoomsliderControl)?e.zoomsliderControl:a.zoomsliderControl,a.attributionControl=n(e.attributionControl)?e.attributionControl:a.attributionControl,a.tileLayer=n(e.tileLayer)?e.tileLayer:a.tileLayer,a.zoomControlPosition=n(e.zoomControlPosition)?e.zoomControlPosition:a.zoomControlPosition,a.keyboard=n(e.keyboard)?e.keyboard:a.keyboard,a.dragging=n(e.dragging)?e.dragging:a.dragging,n(e.controls)&&angular.extend(a.controls,e.controls),i(e.crs)?a.crs=e.crs:n(L.CRS[e.crs])&&(a.crs=L.CRS[e.crs]),n(e.center)&&angular.copy(e.center,a.center),n(e.tileLayerOptions)&&angular.copy(e.tileLayerOptions,a.tileLayerOptions),n(e.maxZoom)&&(a.maxZoom=e.maxZoom),n(e.minZoom)&&(a.minZoom=e.minZoom),n(e.zoomAnimation)&&(a.zoomAnimation=e.zoomAnimation),n(e.fadeAnimation)&&(a.fadeAnimation=e.fadeAnimation),n(e.markerZoomAnimation)&&(a.markerZoomAnimation=e.markerZoomAnimation),n(e.worldCopyJump)&&(a.worldCopyJump=e.worldCopyJump),n(e.map)&&(a.map=e.map),n(e.path)&&(a.path=e.path));var s=o(r,t);return r[s]=a,a}}}]),angular.module("ui-leaflet").service("leafletMarkersHelpers",["$rootScope","$timeout","leafletHelpers","leafletLogger","$compile","leafletGeoJsonHelpers",function(e,t,n,i,o,r){var a=n.isDefined,s=n.defaultTo,l=n.MarkerClusterPlugin,c=n.AwesomeMarkersPlugin,u=n.VectorMarkersPlugin,d=n.MakiMarkersPlugin,p=n.ExtraMarkersPlugin,h=n.DomMarkersPlugin,f=n.safeApply,g=n,m=n.isString,v=n.isNumber,b=n.isObject,y={},x=r,w=n.errorHeader,A=i,_=function(e){var t="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach((function(n){t+=n+": "+s(e[n],"undefined")+" \n"})),"[leafletMarker] : \n"+t},E=function(t){if(a(t)&&a(t.type)&&"awesomeMarker"===t.type)return c.isLoaded()||A.error(w+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(t);if(a(t)&&a(t.type)&&"vectorMarker"===t.type)return u.isLoaded()||A.error(w+" The VectorMarkers Plugin is not loaded."),new L.VectorMarkers.icon(t);if(a(t)&&a(t.type)&&"makiMarker"===t.type)return d.isLoaded()||A.error(w+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(t);if(a(t)&&a(t.type)&&"extraMarker"===t.type)return p.isLoaded()||A.error(w+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(t);if(a(t)&&a(t.type)&&"div"===t.type)return new L.divIcon(t);if(a(t)&&a(t.type)&&"dom"===t.type){h.isLoaded()||A.error(w+"The DomMarkers Plugin is not loaded.");var n=angular.isFunction(t.getMarkerScope)?t.getMarkerScope():e,i=o(t.template)(n),r=angular.copy(t);return r.element=i[0],new L.DomMarkers.icon(r)}if(a(t)&&a(t.type)&&"icon"===t.type)return t.icon;return a(t)&&a(t.iconUrl)?new L.Icon(t):new L.Icon.Default({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},S=function(e,t,n){if(e.closePopup(),a(n)&&a(n.overlays))for(var i in n.overlays)if((n.overlays[i]instanceof L.LayerGroup||n.overlays[i]instanceof L.FeatureGroup)&&n.overlays[i].hasLayer(e))return void n.overlays[i].removeLayer(e);if(a(y))for(var o in y)y[o].hasLayer(e)&&y[o].removeLayer(e);t.hasLayer(e)&&t.removeLayer(e)},T=function(e,n,i){(e._popup._contentNode.innerText||e._popup._contentNode.textContent).length<1&&t((function(){T(e,n,i)}));var o=e._popup._contentNode.offsetWidth;return e._popup._updateLayout(),e._popup._updatePosition(),e._popup.options.autoPan&&function(e,t){var n=e._popup._container.offsetHeight,i=new L.Point(e._popup._containerLeft,-n-e._popup._containerBottom);null!==t.layerPointToContainerPoint(i)&&e._popup._adjustPan()}(e,i),o},C=function(t,n,i){var r=angular.isFunction(n.getMessageScope)?n.getMessageScope():e;if(!a(n.compileMessage)||n.compileMessage){if(!a(t._popup)||!a(t._popup._contentNode))return A.error(w+"Popup is invalid or does not have any content."),!1;!function(e,t){o(e._popup._contentNode)(t)}(t,r),T(t,n,i)}},k=function(t,n){var i=angular.isFunction(n.getMessageScope)?n.getMessageScope():e,r=angular.isFunction(n.getLabelScope)?n.getLabelScope():i,s=!a(n.compileMessage)||n.compileMessage;g.LabelPlugin.isLoaded()&&a(n.label)&&(a(n.label.options)&&!0===n.label.options.noHide&&t.showLabel(),s&&a(t.label)&&o(t.label._container)(r))},I=function(e,t,n,i,o,r,s){if(a(t)){if(!x.validateCoords(e))return A.warn("There are problems with lat-lng data, please verify your marker model"),void S(n,s,r);var l=e===t;if(a(e.iconAngle)&&t.iconAngle!==e.iconAngle&&n.setIconAngle(e.iconAngle),m(e.layer)||m(t.layer)&&(a(r.overlays[t.layer])&&r.overlays[t.layer].hasLayer(n)&&(r.overlays[t.layer].removeLayer(n),n.closePopup()),s.hasLayer(n)||s.addLayer(n)),(v(e.opacity)||v(parseFloat(e.opacity)))&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),m(e.layer)&&t.layer!==e.layer){if(m(t.layer)&&a(r.overlays[t.layer])&&r.overlays[t.layer].hasLayer(n)&&r.overlays[t.layer].removeLayer(n),n.closePopup(),s.hasLayer(n)&&s.removeLayer(n),!a(r.overlays[e.layer]))return void A.error(w+"You must use a name of an existing layer");var c=r.overlays[e.layer];if(!(c instanceof L.LayerGroup||c instanceof L.FeatureGroup))return void A.error(w+'A marker can only be added to a layer of type "group" or "featureGroup"');c.addLayer(n),s.hasLayer(n)&&!0===e.focus&&n.openPopup()}if(!0!==e.draggable&&!0===t.draggable&&a(n.dragging)&&n.dragging.disable(),!0===e.draggable&&!0!==t.draggable&&(n.dragging?n.dragging.enable():L.Handler.MarkerDrag&&(n.dragging=new L.Handler.MarkerDrag(n),n.options.draggable=!0,n.dragging.enable())),b(e.icon)||b(t.icon)&&(n.setIcon(E()),n.closePopup(),n.unbindPopup(),m(e.message)&&n.bindPopup(e.message,e.popupOptions)),b(e.icon)&&b(t.icon)&&!angular.equals(e.icon,t.icon)){var u=!1;n.dragging&&(u=n.dragging.enabled()),n.setIcon(E(e.icon)),u&&n.dragging.enable(),n.closePopup(),n.unbindPopup(),m(e.message)&&(n.bindPopup(e.message,e.popupOptions),s.hasLayer(n)&&!0===e.focus&&n.openPopup())}!m(e.message)&&m(t.message)&&(n.closePopup(),n.unbindPopup()),g.LabelPlugin.isLoaded()&&(a(e.label)&&a(e.label.message)?"label"in t&&"message"in t.label&&!angular.equals(e.label.message,t.label.message)?n.updateLabelContent(e.label.message):!angular.isFunction(n.getLabel)||angular.isFunction(n.getLabel)&&!a(n.getLabel())?(n.bindLabel(e.label.message,e.label.options),k(n,e)):k(n,e):"label"in e&&!("message"in e.label)||angular.isFunction(n.unbindLabel)&&n.unbindLabel()),m(e.message)&&!m(t.message)&&n.bindPopup(e.message,e.popupOptions),m(e.message)&&m(t.message)&&e.message!==t.message&&n.setPopupContent(e.message);var d=!1;!0!==e.focus&&!0===t.focus&&(n.closePopup(),d=!0),(!0===e.focus&&(!a(t.focus)||!1===t.focus)||l&&!0===e.focus)&&(n.openPopup(),d=!0),t.zIndexOffset!==e.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset);var p=n.getLatLng();m(e.layer)&&g.MarkerClusterPlugin.is(r.overlays[e.layer])?d?e.lat===t.lat&&e.lng===t.lng||(r.overlays[e.layer].removeLayer(n),n.setLatLng([e.lat,e.lng]),r.overlays[e.layer].addLayer(n)):p.lat!==e.lat||p.lng!==e.lng||e.lat!==t.lat||e.lng!==t.lng?(r.overlays[e.layer].removeLayer(n),n.setLatLng([e.lat,e.lng]),r.overlays[e.layer].addLayer(n)):b(e.icon)&&b(t.icon)&&!angular.equals(e.icon,t.icon)&&(r.overlays[e.layer].removeLayer(n),r.overlays[e.layer].addLayer(n)):p.lat===e.lat&&p.lng===e.lng||n.setLatLng([e.lat,e.lng])}};return{resetMarkerGroup:function(e){a(y[e])&&y.splice(e,1)},resetMarkerGroups:function(){y={}},deleteMarker:S,manageOpenPopup:C,manageOpenLabel:k,createMarker:function(e){if(a(e)&&x.validateCoords(e)){var t=x.getCoords(e);if(a(t)){var n={icon:E(e.icon),title:a(e.title)?e.title:"",draggable:!!a(e.draggable)&&e.draggable,clickable:!a(e.clickable)||e.clickable,riseOnHover:!!a(e.riseOnHover)&&e.riseOnHover,zIndexOffset:a(e.zIndexOffset)?e.zIndexOffset:0,iconAngle:a(e.iconAngle)?e.iconAngle:0};for(var i in e)e.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(n[i]=e[i]);var o=new L.marker(t,n);return m(e.message)||o.unbindPopup(),o}A.error(w+"Unable to get coordinates from markerData.")}else A.error(w+"The marker definition is not valid.")},addMarkerToGroup:function(e,t,n,i){m(t)?l.isLoaded()?(a(y[t])||(y[t]=new L.MarkerClusterGroup(n),i.addLayer(y[t])),y[t].addLayer(e)):A.error(w+"The MarkerCluster plugin is not loaded."):A.error(w+"The marker group you have specified is invalid.")},listenMarkerEvents:function(e,t,n,i,o){e.on("popupopen",(function(){f(n,(function(){(a(e._popup)||a(e._popup._contentNode))&&(t.focus=!0,C(e,t,o))}))})),e.on("popupclose",(function(){f(n,(function(){t.focus=!1}))})),e.on("add",(function(){f(n,(function(){"label"in t&&k(e,t)}))}))},updateMarker:I,addMarkerWatcher:function(e,t,n,i,o,r){var l=g.getObjectArrayPath("markers."+t);r=s(r,!0);var c=n.$watch(l,(function(t,n){if(!a(t))return S(e,o,i),void c();I(t,n,e,0,0,i,o)}),r)},string:_,log:function(e,t){(t?console:A).debug(_(e))},getModelFromModels:function(e,t,n){if(a(e)){if(t)return n?e[n][t]:e[t];A.error(w+"marker id missing in getMarker")}},getLayerModels:function(e,t){if(a(e))return t?e[t]:e}}}]),angular.module("ui-leaflet").factory("leafletPathsHelpers",["$rootScope","leafletLogger","leafletHelpers",function(e,t,n){var i=n.isDefined,o=n.isArray,r=n.isNumber,a=n.isValidPoint,s=t,l=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"];function c(e){return e.filter((function(e){return a(e)})).map((function(e){return u(e)}))}function u(e){return o(e)?new L.LatLng(e[0],e[1]):new L.LatLng(e.lat,e.lng)}function d(e){return e.map((function(e){return c(e)}))}var p=function(e,t){for(var n={},o=0;o<l.length;o++){var r=l[o];i(t[r])&&(n[r]=t[r])}e.setStyle(t)},h=function(e){if(!o(e))return!1;for(var t=0;t<e.length;t++){var n=e[t];if(!a(n))return!1}return!0},f={polyline:{isValid:function(e){var t=e.latlngs;return h(t)},createPath:function(e){return new L.Polyline([],e)},setPath:function(e,t){e.setLatLngs(c(t.latlngs)),p(e,t)}},multiPolyline:{isValid:function(e){var t=e.latlngs;if(!o(t))return!1;for(var n in t){var i=t[n];if(!h(i))return!1}return!0},createPath:function(e){return new L.multiPolyline([[[0,0],[1,1]]],e)},setPath:function(e,t){e.setLatLngs(d(t.latlngs)),p(e,t)}},polygon:{isValid:function(e){var t=e.latlngs;return h(t)},createPath:function(e){return new L.Polygon([],e)},setPath:function(e,t){e.setLatLngs(c(t.latlngs)),p(e,t)}},multiPolygon:{isValid:function(e){var t=e.latlngs;if(!o(t))return!1;for(var n in t){var i=t[n];if(!h(i))return!1}return!0},createPath:function(e){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],e)},setPath:function(e,t){e.setLatLngs(d(t.latlngs)),p(e,t)}},rectangle:{isValid:function(e){var t=e.latlngs;if(!o(t)||2!==t.length)return!1;for(var n in t){var i=t[n];if(!a(i))return!1}return!0},createPath:function(e){return new L.Rectangle([[0,0],[1,1]],e)},setPath:function(e,t){e.setBounds(new L.LatLngBounds(c(t.latlngs))),p(e,t)}},circle:{isValid:function(e){var t=e.latlngs;return a(t)&&r(e.radius)},createPath:function(e){return new L.Circle([0,0],1,e)},setPath:function(e,t){e.setLatLng(u(t.latlngs)),i(t.radius)&&e.setRadius(t.radius),p(e,t)}},circleMarker:{isValid:function(e){var t=e.latlngs;return a(t)&&r(e.radius)},createPath:function(e){return new L.CircleMarker([0,0],e)},setPath:function(e,t){e.setLatLng(u(t.latlngs)),i(t.radius)&&e.setRadius(t.radius),p(e,t)}}};return{setPathOptions:function(e,t,n){i(t)||(t="polyline"),f[t].setPath(e,n)},createPath:function(e,t,n){i(t.type)||(t.type="polyline");var o=function(e,t){for(var n={},o=0;o<l.length;o++){var r=l[o];i(e[r])?n[r]=e[r]:i(t.path[r])&&(n[r]=t.path[r])}return n}(t,n),r=function(e){var t={};return e.latlngs&&(t.latlngs=e.latlngs),e.radius&&(t.radius=e.radius),t}(t);if(f[t.type].isValid(r))return f[t.type].createPath(o);s.error("[AngularJS - Leaflet] Invalid data passed to the "+t.type+" path")}}}]),angular.module("ui-leaflet").service("leafletWatchHelpers",(function(){var e=function(e,t,n,i,o){var r=e[t](n,(function(e,t){o(e,t),i.doWatch||r()}),i.isDeep);return r};return{maybeWatch:function(t,n,i,o){return e(t,"$watch",n,i,o)},maybeWatchCollection:function(t,n,i,o){return e(t,"$watchCollection",n,i,o)}}})),angular.module("ui-leaflet").service("leafletLogger",["nemSimpleLogger",function(e){return e.spawn()}]),angular.module("ui-leaflet").factory("nominatimService",["$q","$http","leafletHelpers","leafletMapDefaults",function(e,t,n,i){var o=n.isDefined;return{query:function(n,r){var a=i.getDefaults(r).nominatim.server,s=e.defer();return t.get(a,{params:{format:"json",limit:1,q:n}}).success((function(e){e.length>0&&o(e[0].boundingbox)?s.resolve(e[0]):s.reject("[Nominatim] Invalid address")})),s.promise}}}]),angular.module("ui-leaflet").directive("bounds",["leafletLogger","$timeout","$http","leafletHelpers","nominatimService","leafletBoundsHelpers",function(e,t,n,i,o,r){var a=e;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(e,n,s,l){var c=i.isDefined,u=r.createLeafletBounds,d=l[0].getLeafletScope(),p=l[0],h=i.errorHeader+" [Bounds] ";p.getMap().then((function(n){var i;d.$on("boundsChanged",(function(e){var i=e.currentScope,o=n.getBounds();if(!function(e){return 0===e._southWest.lat&&0===e._southWest.lng&&0===e._northEast.lat&&0===e._northEast.lng}(o)&&!i.settingBoundsFromScope){i.settingBoundsFromLeaflet=!0;var r={northEast:{lat:o._northEast.lat,lng:o._northEast.lng},southWest:{lat:o._southWest.lat,lng:o._southWest.lng},options:o.options};angular.equals(i.bounds,r)||(i.bounds=r),t((function(){i.settingBoundsFromLeaflet=!1}))}})),d.$watch("bounds",(function(r){if(!e.settingBoundsFromLeaflet){if(c(r.address)&&r.address!==i)return e.settingBoundsFromScope=!0,o.query(r.address,s.id).then((function(e){var t=e.boundingbox,i=[[t[0],t[2]],[t[1],t[3]]];n.fitBounds(i)}),(function(e){a.error(h+" "+e+".")})),i=r.address,void t((function(){e.settingBoundsFromScope=!1}));var l=u(r);l&&!n.getBounds().equals(l)&&(e.settingBoundsFromScope=!0,n.fitBounds(l,r.options),t((function(){e.settingBoundsFromScope=!1})))}}),!0)}))}}}]);var centerDirectiveTypes=["center","lfCenter"],centerDirectives={};centerDirectiveTypes.forEach((function(e){centerDirectives[e]=["leafletLogger","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletMapEvents",function(t,n,i,o,r,a,s,l){var c,u=a.isDefined,d=a.isNumber,p=a.isSameCenterOnMap,h=a.safeApply,f=a.isValidCenter,g=s.isValidBounds,m=a.isUndefinedOrEmpty,v=a.errorHeader,b=t;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){c=n.defer(),this.getCenter=function(){return c.promise}},link:function(t,n,a,y){var x=y.getLeafletScope(),w=x[e];y.getMap().then((function(t){var n,y,A,_,E=r.getDefaults(a.id);if(-1!==a[e].search("-"))return b.error(v+' The "center" variable can\'t use a "-" on its key name: "'+a[e]+'".'),void t.setView([E.center.lat,E.center.lng],E.center.zoom);if(n=x.bounds,y=w,u(n)&&g(n)&&m(y))t.fitBounds(s.createLeafletBounds(x.bounds),x.bounds.options),w=t.getCenter(),h(x,(function(n){angular.extend(n[e],{lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom(),autoDiscover:!1})})),h(x,(function(e){var n=t.getBounds();e.bounds={northEast:{lat:n._northEast.lat,lng:n._northEast.lng},southWest:{lat:n._southWest.lat,lng:n._southWest.lng}}}));else{if(!u(w))return b.error(v+' The "center" property is not defined in the main scope'),void t.setView([E.center.lat,E.center.lng],E.center.zoom);u(w.lat)&&u(w.lng)||u(w.autoDiscover)||angular.copy(E.center,w)}if("yes"===a.urlHashCenter){var S=function(){var e,t=i.search();if(u(t.c)){var n=t.c.split(":");3===n.length&&(e={lat:parseFloat(n[0]),lng:parseFloat(n[1]),zoom:parseInt(n[2],10)})}return e};A=S(),x.$on("$locationChangeSuccess",(function(n){var i=n.currentScope,o=S();u(o)&&!p(o,t)&&angular.extend(i[e],{lat:o.lat,lng:o.lng,zoom:o.zoom})}))}x.$watch(e,(function(e){if(!x.settingCenterFromLeaflet){if(u(A)&&(angular.copy(A,e),A=void 0),f(e)||!0===e.autoDiscover)return!0===e.autoDiscover?(d(e.zoom)||t.setView([E.center.lat,E.center.lng],E.center.zoom),void(d(e.zoom)&&e.zoom>E.center.zoom?t.locate({setView:!0,maxZoom:e.zoom}):u(E.maxZoom)?t.locate({setView:!0,maxZoom:E.maxZoom}):t.locate({setView:!0}))):void(_&&p(e,t)||(x.settingCenterFromScope=!0,t.setView([e.lat,e.lng],e.zoom),l.notifyCenterChangedToBounds(x,t),o((function(){x.settingCenterFromScope=!1}))));b.warn(v+" invalid 'center'")}}),!0),t.whenReady((function(){_=!0})),t.on("moveend",(function(){c.resolve(),l.notifyCenterUrlHashChanged(x,t,a,i.search()),p(w,t)||x.settingCenterFromScope||(x.settingCenterFromLeaflet=!0,h(x,(function(n){x.settingCenterFromScope||angular.extend(n[e],{lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom(),autoDiscover:!1}),l.notifyCenterChangedToBounds(x,t),o((function(){x.settingCenterFromLeaflet=!1}))})))})),!0===w.autoDiscover&&t.on("locationerror",(function(){b.warn(v+" The Geolocation API is unauthorized on this page."),f(w)?(t.setView([w.lat,w.lng],w.zoom),l.notifyCenterChangedToBounds(x,t)):(t.setView([E.center.lat,E.center.lng],E.center.zoom),l.notifyCenterChangedToBounds(x,t))}))}))}}}]})),centerDirectiveTypes.forEach((function(e){angular.module("ui-leaflet").directive(e,centerDirectives[e])})),angular.module("ui-leaflet").directive("controls",["leafletLogger","leafletHelpers","leafletControlHelpers",function(e,t,n){var i=e;return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(e,o,r,a){if(a){var s=n.createControl,l=n.isValidControlType,c=a.getLeafletScope(),u=t.isDefined,d=t.isArray,p={},h=t.errorHeader+" [Controls] ";a.getMap().then((function(e){c.$watchCollection("controls",(function(t){for(var n in p)u(t[n])||(e.hasControl(p[n])&&e.removeControl(p[n]),delete p[n]);for(var o in t){var r,a=u(t[o].type)?t[o].type:o;if(!l(a))return void i.error(h+" Invalid control type: "+a+".");if("custom"!==a)r=s(a,t[o]),e.addControl(r),p[o]=r;else{var c=t[o];if(d(c))for(var f in c){var g=c[f];e.addControl(g),p[o]=u(p[o])?p[o].concat([g]):[g]}else e.addControl(c),p[o]=c}}}))}))}}}}]),angular.module("ui-leaflet").directive("decorations",["leafletLogger","leafletHelpers",function(e,t){var n=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,i,o,r){var a=r.getLeafletScope(),s=t.PolylineDecoratorPlugin,l=t.isDefined,c={};function u(e,t){if(l(e)&&l(t)&&l(t.coordinates)&&l(t.patterns))return e.setPaths(t.coordinates),e.setPatterns(t.patterns),e}r.getMap().then((function(e){a.$watch("decorations",(function(t){for(var i in c)l(t[i])&&angular.equals(t[i],c)||(e.removeLayer(c[i]),delete c[i]);for(var o in t){var r=t[o],a=(l(d=r)&&l(d.coordinates)&&(s.isLoaded()||n.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(d.coordinates));l(a)&&(c[o]=a,e.addLayer(a),u(a,r))}var d}),!0)}))}}}]),angular.module("ui-leaflet").directive("eventBroadcast",["leafletLogger","$rootScope","leafletHelpers","leafletMapEvents","leafletIterators",function(e,t,n,i,o){var r=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,a,s){var l=n.isObject,c=n.isDefined,u=s.getLeafletScope(),d=u.eventBroadcast,p=i.getAvailableMapEvents(),h=i.addEvents;s.getMap().then((function(e){var t=[],n="broadcast";c(d.map)?l(d.map)?("emit"!==d.map.logic&&"broadcast"!==d.map.logic?r.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):n=d.map.logic,l(d.map.enable)&&d.map.enable.length>=0?o.each(d.map.enable,(function(e){-1===t.indexOf(e)&&-1!==p.indexOf(e)&&t.push(e)})):r.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.")):r.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model."):t=p,h(e,t,"eventName",u,n)}))}}}]),angular.module("ui-leaflet").directive("geojson",["leafletLogger","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators","leafletGeoJsonEvents",function(e,t,n,i,o,r,a,s){var l=o.maybeWatch,c=i.watchOptions,u=r.extend,d=i,p=a;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,o,r){var a=i.isDefined,h=r.getLeafletScope(),f={},g=!1;r.getMap().then((function(e){var t=h.geojsonWatchOptions||c,r=d.isDefined(o.geojsonNested)&&d.isTruthy(o.geojsonNested),m=function(){if(f){var t=function(t){a(t)&&e.hasLayer(t)&&e.removeLayer(t)};r?p.each(f,(function(e){t(e)})):t(f)}},v=function(t,r){var l=angular.copy(t);if(a(l)&&a(l.data)){var c=function(e,t){return angular.isFunction(e.onEachFeature)?e.onEachFeature:function(n,r){i.LabelPlugin.isLoaded()&&a(n.properties.description)&&r.bindLabel(n.properties.description),s.bindEvents(o.id,r,null,n,h,t,{resetStyleOnMouseout:e.resetStyleOnMouseout,mapId:o.id})}}(l,r);a(l.options)||(l.options={style:l.style,filter:l.filter,onEachFeature:c,pointToLayer:l.pointToLayer});var u=L.geoJson(l.data,l.options);r&&d.isString(r)?f[r]=u:f=u,u.addTo(e),g||(g=!0,n.setGeoJSON(f,o.id))}},b=function(e){if(m(),r){if(!e||!Object.keys(e).length)return;p.each(e,(function(e,t){v(e,t)}))}else v(e)};u(o.id,"geojson",b,m),l(h,"geojson",t,(function(e){b(e)}))}))}}}]),angular.module("ui-leaflet").directive("layercontrol",["$filter","leafletLogger","leafletData","leafletHelpers",function(e,t,n,i){var o=t;return{restrict:"E",scope:{icons:"=?",autoHideOpacity:"=?",showGroups:"=?",title:"@",baseTitle:"@",overlaysTitle:"@"},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(e,t,r){o.debug("[Angular Directive - Layers] layers",e,t);var a=i.safeApply,s=i.isDefined;angular.extend(e,{baselayer:"",oldGroup:"",layerProperties:{},groupProperties:{},rangeIsSupported:i.rangeIsSupported(),changeBaseLayer:function(t,o){i.safeApply(e,(function(i){i.baselayer=t,n.getMap().then((function(o){n.getLayers().then((function(n){if(!o.hasLayer(n.baselayers[t])){for(var r in i.layers.baselayers)i.layers.baselayers[r].icon=i.icons.unradio,o.hasLayer(n.baselayers[r])&&o.removeLayer(n.baselayers[r]);o.addLayer(n.baselayers[t]),i.layers.baselayers[t].icon=e.icons.radio}}))}))})),o.preventDefault()},moveLayer:function(t,n,i){var o=Object.keys(e.layers.baselayers).length;if(n>=1+o&&n<=e.overlaysArray.length+o){var r;for(var s in e.layers.overlays)if(e.layers.overlays[s].index===n){r=e.layers.overlays[s];break}r&&a(e,(function(){r.index=t.index,t.index=n}))}i.stopPropagation(),i.preventDefault()},initIndex:function(t,n){var i=Object.keys(e.layers.baselayers).length;t.index=s(t.index)?t.index:n+i+1},initGroup:function(t){e.groupProperties[t]=e.groupProperties[t]?e.groupProperties[t]:{}},toggleOpacity:function(t,n){if(n.visible){if(e.autoHideOpacity&&!e.layerProperties[n.name].opacityControl)for(var i in e.layerProperties)e.layerProperties[i].opacityControl=!1;e.layerProperties[n.name].opacityControl=!e.layerProperties[n.name].opacityControl}t.stopPropagation(),t.preventDefault()},toggleLegend:function(t){e.layerProperties[t.name].showLegend=!e.layerProperties[t.name].showLegend},showLegend:function(t){return t.legend&&e.layerProperties[t.name].showLegend},unsafeHTML:function(e){return r.trustAsHtml(e)},getOpacityIcon:function(t){return t.visible&&e.layerProperties[t.name].opacityControl?e.icons.close:e.icons.open},getGroupIcon:function(t){return t.visible?e.icons.check:e.icons.uncheck},changeOpacity:function(t){var i=e.layerProperties[t.name].opacity;n.getMap().then((function(o){n.getLayers().then((function(n){var r;for(var a in e.layers.overlays)if(e.layers.overlays[a]===t){r=n.overlays[a];break}o.hasLayer(r)&&(r.setOpacity&&r.setOpacity(i/100),r.getLayers&&r.eachLayer&&r.eachLayer((function(e){e.setOpacity&&e.setOpacity(i/100)})))}))}))},changeGroupVisibility:function(t){if(s(e.groupProperties[t])){var n=e.groupProperties[t].visible;for(var i in e.layers.overlays){var o=e.layers.overlays[i];o.group===t&&(o.visible=n)}}}});var l=t.get(0);L.Browser.touch?L.DomEvent.on(l,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(l),L.DomEvent.on(l,"mousewheel",L.DomEvent.stopPropagation))}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><h4 ng-if="title">{{ title }}</h4><div class="lf-baselayers"><h5 class="lf-title" ng-if="baseTitle">{{ baseTitle }}</h5><div class="lf-row" ng-repeat="(key, layer) in baselayersArray"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label></div></div><div class="lf-overlays"><h5 class="lf-title" ng-if="overlaysTitle">{{ overlaysTitle }}</h5><div class="lf-container"><div class="lf-row" ng-repeat="layer in (o = (overlaysArray | orderBy:\'index\':order))" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol-group" ng-if="showGroups &amp;&amp; layer.group &amp;&amp; layer.group != o[$index-1].group"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-change="changeGroupVisibility(layer.group)" ng-model="groupProperties[layer.group].visible"/> <i class="lf-icon lf-icon-check" ng-class="getGroupIcon(groupProperties[layer.group])"></i><div class="lf-text">{{ layer.group }}</div></label><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"></i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"></i> <i class="lf-icon lf-toggle-legend" ng-class="icons.toggleLegend" ng-if="layer.legend" ng-click="toggleLegend(layer)"></i> <i class="lf-icon lf-open" ng-class="getOpacityIcon(layer)" ng-click="toggleOpacity($event, layer)"></i></div><div class="lf-legend" ng-if="showLegend(layer)" ng-bind-html="unsafeHTML(layer.legend)"></div><div class="lf-opacity clearfix" ng-if="layer.visible &amp;&amp; layerProperties[layer.name].opacityControl"><label ng-if="rangeIsSupported" class="pull-left" style="width: 50%">0</label><label ng-if="rangeIsSupported" class="pull-left text-right" style="width: 50%">100</label><input ng-if="rangeIsSupported" class="clearfix" type="range" min="0" max="100" class="lf-opacity-control" ng-model="layerProperties[layer.name].opacity" ng-change="changeOpacity(layer)"/><h6 ng-if="!rangeIsSupported">Range is not supported in this browser</h6></div></div></div></div></div>',link:function(e,t,o,r){var a=i.isDefined,s=r.getLeafletScope(),l=s.layers;e.$watch("icons",(function(){var t={uncheck:"fa fa-square-o",check:"fa fa-check-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up",toggleLegend:"fa fa-pencil-square-o"};a(e.icons)?(angular.extend(t,e.icons),angular.extend(e.icons,t)):e.icons=t})),o.order=!a(o.order)||"normal"!==o.order&&"reverse"!==o.order?"normal":o.order,e.order="normal"===o.order,e.orderNumber="normal"===o.order?-1:1,e.layers=l,r.getMap().then((function(t){s.$watch("layers.baselayers",(function(i){var o={};n.getLayers().then((function(n){var r;for(r in i){var a=i[r];a.icon=e.icons[t.hasLayer(n.baselayers[r])?"radio":"unradio"],o[r]=a}e.baselayersArray=o}))})),s.$watch("layers.overlays",(function(t){var i=[],o={};n.getLayers().then((function(n){var r;for(r in t){var s=t[r];s.icon=e.icons[s.visible?"check":"uncheck"],i.push(s),a(e.layerProperties[s.name])||(e.layerProperties[s.name]={opacity:a(s.layerOptions.opacity)?100*s.layerOptions.opacity:100,opacityControl:!1,showLegend:!0}),a(s.group)&&(a(e.groupProperties[s.group])||(e.groupProperties[s.group]={visible:!1}),o[s.group]=a(o[s.group])?o[s.group]:{count:0,visibles:0},o[s.group].count++,s.visible&&o[s.group].visibles++),a(s.index)&&n.overlays[r].setZIndex&&n.overlays[r].setZIndex(t[r].index)}for(r in o)e.groupProperties[r].visible=o[r].visibles===o[r].count;e.overlaysArray=i}))}),!0)}))}}}]),angular.module("ui-leaflet").directive("layers",["leafletLogger","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(e,t,n,i,o,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(e){e._leafletLayers=t.defer(),this.getLayers=function(){return e._leafletLayers.promise}}],link:function(e,t,a,s){var l=i.isDefined,c={},u=s.getLeafletScope(),d=u.layers,p=o.createLayer,h=o.safeAddLayer,f=o.safeRemoveLayer,g=r.updateLayersControl,m=!1;s.getMap().then((function(t){e._leafletLayers.resolve(c),n.setLayers(c,a.id),c.baselayers={},c.overlays={};var i=a.id,o=!1;for(var r in d.baselayers){var s=p(d.baselayers[r]);l(s)?(c.baselayers[r]=s,!0===d.baselayers[r].top&&(h(t,c.baselayers[r]),o=!0)):delete d.baselayers[r]}for(r in!o&&Object.keys(c.baselayers).length>0&&h(t,c.baselayers[Object.keys(d.baselayers)[0]]),d.overlays){d.overlays[r].type;var v=p(d.overlays[r]);l(v)?(c.overlays[r]=v,!0===d.overlays[r].visible&&h(t,c.overlays[r])):delete d.overlays[r]}u.$watch("layers.baselayers",(function(e,n){if(angular.equals(e,n))return m=g(t,i,m,e,d.overlays,c),!0;for(var o in c.baselayers)l(e[o])&&!e[o].doRefresh||(t.hasLayer(c.baselayers[o])&&t.removeLayer(c.baselayers[o]),delete c.baselayers[o],e[o]&&e[o].doRefresh&&(e[o].doRefresh=!1));for(var r in e)if(l(c.baselayers[r]))!0!==e[r].top||t.hasLayer(c.baselayers[r])?!1===e[r].top&&t.hasLayer(c.baselayers[r])&&t.removeLayer(c.baselayers[r]):h(t,c.baselayers[r]);else{var a=p(e[r]);l(a)&&(c.baselayers[r]=a,!0===e[r].top&&h(t,c.baselayers[r]))}var s=!1;for(var u in c.baselayers)if(t.hasLayer(c.baselayers[u])){s=!0;break}!s&&Object.keys(c.baselayers).length>0&&h(t,c.baselayers[Object.keys(c.baselayers)[0]]),m=g(t,i,m,e,d.overlays,c)}),!0),u.$watch("layers.overlays",(function(e,n){if(angular.equals(e,n))return m=g(t,i,m,d.baselayers,e,c),!0;for(var o in c.overlays)if(!l(e[o])||e[o].doRefresh){if(t.hasLayer(c.overlays[o])){var r=l(e[o])?e[o].layerOptions:null;f(t,c.overlays[o],r)}delete c.overlays[o],e[o]&&e[o].doRefresh&&(e[o].doRefresh=!1)}for(var a in e){if(l(c.overlays[a]))e[a].visible&&!t.hasLayer(c.overlays[a])?h(t,c.overlays[a]):!1===e[a].visible&&t.hasLayer(c.overlays[a])&&f(t,c.overlays[a],e[a].layerOptions);else{var s=p(e[a]);if(!l(s))continue;c.overlays[a]=s,!0===e[a].visible&&h(t,c.overlays[a])}e[a].visible&&t._loaded&&e[a].data&&"heatmap"===e[a].type&&(c.overlays[a].setData(e[a].data),c.overlays[a].update())}m=g(t,i,m,d.baselayers,e,c)}),!0)}))}}}]),angular.module("ui-leaflet").directive("legend",["leafletLogger","$http","$timeout","leafletHelpers","leafletLegendHelpers",function(e,t,n,i,o){var r=e,a=i.errorHeader+" [Legend] ";return{restrict:"A",scope:!1,replace:!1,require:"leaflet",transclude:!1,link:function(e,t,n,s){var l,c,u,d,p=i.isArray,h=i.isString,f=i.isDefined,g=i.isFunction,m=s.getLeafletScope(),v=m.legend;m.$watch("legend",(function(e){f(e)&&(l=e.legendClass?e.legendClass:"legend",c=e.position||"bottomright",d=e.type||"arcgis")}),!0);var b=function(e,t,n){t&&t.layers&&t.layers.length>0&&(f(u)?o.updateLegend(u.getContainer(),t,d,n):((u=L.control({position:c})).onAdd=o.getOnAddLegend(t,l,d,n),u.addTo(e)),f(v.loadedData)&&g(v.loadedData)&&v.loadedData())};s.getMap().then((function(e){m.$watch("legend",(function(t){f(t)?f(t.url)||"arcgis"!==d||p(t.colors)&&p(t.labels)&&t.colors.length===t.labels.length?f(t.url)?r.info(a+" loading legend service."):(f(u)&&(u.removeFrom(e),u=null),u=L.control({position:c}),"arcgis"===d&&(u.onAdd=o.getOnAddArrayLegend(t,l)),u.addTo(e)):r.warn(a+" legend.colors and legend.labels must be set."):f(u)&&(u.removeFrom(e),u=null)})),m.$watch("legend.url",(function(t){if(f(t))if(p(t)||h(t))for(var i,s=h(t)?[t]:t,l=function(n,o){return function(l){f(l.data.error)?r.warn(a+"Error loadin legend from: "+o,l.data.error.message):i&&i.layers&&i.layers.length>0?i.layers=i.layers.concat(l.data.layers):i=l.data,n===s.length-1&&b(e,i,t)}},c=function(e){r.warn(a+" legend.url not loaded.",e)},u=0;u<s.length;u++)o.addLegendURL(n.id,{url:s[u],method:"GET"}).then(l(u)).catch(c);else r.warn(a+" legend.url must be an array or string.")})),m.$watch("legend.legendData",(function(t){r.debug("legendData",t),!f(m.legend.url)&&f(t)&&b(e,t)}),!0)}))}}}]),angular.module("ui-leaflet").directive("markers",["leafletLogger","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletMarkerEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(e,t,n,i,o,r,a,s,l,c,u){var d=o.isDefined,p=o.errorHeader,h=o,f=o.isString,g=a.addMarkerWatcher,m=a.updateMarker,v=a.listenMarkerEvents,b=a.addMarkerToGroup,y=a.createMarker,x=a.deleteMarker,w=a.getModelFromModels,A=a.getLayerModels,_=l,E=o.watchOptions,S=c.maybeWatch,T=u.extend,C=e,k=function(e,t,n){if(Object.keys(e).length){if(n&&f(n)){if(!e[n]||!Object.keys(e[n]).length)return;return e[n][t]}return e[t]}},I=function(e,t,n,i){return i&&f(i)?(d(t[i])||(t[i]={}),t[i][n]=e):t[n]=e,e},D=function(e,t,n,i,o,r){if(!f(e))return C.error(p+" A layername must be a string"),!1;if(!d(t))return C.error(p+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!d(t.overlays)||!d(t.overlays[e]))return C.error(p+' A marker can only be added to a layer of type "group"'),!1;var a=t.overlays[e];return a instanceof L.LayerGroup||a instanceof L.FeatureGroup?(a.addLayer(i),!o&&r.hasLayer(i)&&!0===n.focus&&i.openPopup(),!0):(C.error(p+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},P=function(e,t,n,i,o,r,a,l,c,u){for(var f in t)if(!u[f])if(-1===f.search("-")){var x=h.copy(t[f]),A=h.getObjectDotPath(c?[c,f]:[f]),_=k(r,f,c);if(d(_)){var E=w(n,f,c);m(x,E,_,A,a,o,i)}else{var S=y(x),T=(x?x.layer:void 0)||c;if(!d(S)){C.error(p+" Received invalid data on the marker "+f+".");continue}if(I(S,r,f,c),d(x.message)&&S.bindPopup(x.message,x.popupOptions),d(x.group)){var L=d(x.groupOption)?x.groupOption:null;b(S,x.group,L,i)}if(h.LabelPlugin.isLoaded()&&d(x.label)&&d(x.label.message)&&S.bindLabel(x.label.message,x.label.options),d(x)&&(d(x.layer)||d(c))){if(!D(T,o,x,S,l.individual.doWatch,i))continue}else d(x.group)||(i.addLayer(S),l.individual.doWatch||!0!==x.focus||S.openPopup());l.individual.doWatch&&g(S,A,a,o,i,l.individual.isDeep),v(S,x,a,l.individual.doWatch,i),s.bindEvents(e,S,A,x,a,T)}}else C.error('The marker can\'t use a "-" on his key name: "'+f+'".')},O=function(e,t,n,i,o){var r,a,s=!1,l=!1,c=d(t);for(var u in n)s||(C.debug(p+"[markers] destroy: "),s=!0),c&&(a=e[u],r=t[u],l=angular.equals(a,r)&&i),d(e)&&Object.keys(e).length&&d(e[u])&&Object.keys(e[u]).length&&!l||o&&h.isFunction(o)&&o(a,r,u)},M=function(e,t,n,i,o){O(e,t,n,!1,(function(e,t,r){C.debug(p+"[marker] is deleting marker: "+r),x(n[r],i,o),delete n[r]}))},N=function(e,t,n){var i={};return O(e,t,n,!0,(function(e,t,n){C.debug(p+"[marker] is already rendered, marker: "+n),i[n]=e})),i};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,t,o,r){var a=r[0],s=a.getLeafletScope();a.getMap().then((function(e){var t,a={};t=d(r[1])?r[1].getLayers:function(){var e=n.defer();return e.resolve(),e.promise};var l=s.markersWatchOptions||E;d(o.watchMarkers)&&(l.doWatch=l.individual.doWatch=!d(o.watchMarkers)||h.isTruthy(o.watchMarkers));var c=d(o.markersNested)&&h.isTruthy(o.markersNested);t().then((function(t){var n=function(n,i){c?_.each(n,(function(n,o){var r=A(i,o);M(n,r,a[o],e,t)})):M(n,i,a,e,t)},r=function(i,r){n(i,r);var u=null;c?_.each(i,(function(n,c){var d=A(r,c),p=A(i,c);u=N(p,d,a[c]),P(o.id,n,r,e,t,a,s,l,c,u)})):(u=N(i,r,a),P(o.id,i,r,e,t,a,s,l,void 0,u))};T(o.id,"markers",r,n),i.setMarkers(a,o.id),S(s,"markers",l,(function(e,t){r(e,t)}))}))}))}}}]),angular.module("ui-leaflet").directive("maxbounds",["leafletLogger","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(e,t,n,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,o,r){var a=r.getLeafletScope(),s=n.isValidBounds,l=i.isNumber;r.getMap().then((function(e){a.$watch("maxbounds",(function(t){if(s(t)){var i=n.createLeafletBounds(t);l(t.pad)&&(i=i.pad(t.pad)),e.setMaxBounds(i),o.center||o.lfCenter||e.fitBounds(i)}else e.setMaxBounds()}))}))}}}]),angular.module("ui-leaflet").directive("paths",["leafletLogger","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletPathEvents",function(e,t,n,i,o,r,a){var s=e;return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,l,c,u){var d=u[0],p=o.isDefined,h=o.isString,f=d.getLeafletScope(),g=f.paths,m=r.createPath,v=a.bindPathEvents,b=r.setPathOptions;d.getMap().then((function(e){var r,a=i.getDefaults(c.id);r=p(u[1])?u[1].getLayers:function(){var e=t.defer();return e.resolve(),e.promise},p(g)&&r().then((function(t){var i={};n.setPaths(i,c.id);var r=!p(c.watchPaths)||"true"===c.watchPaths,l=function(n,i){var o=f.$watch('paths["'+i+'"]',(function(i,r){if(!p(i)){if(p(r.layer))for(var a in t.overlays){t.overlays[a].removeLayer(n)}return e.removeLayer(n),void o()}b(n,i.type,i)}),!0)};f.$watchCollection("paths",(function(n){for(var u in i)p(n[u])||(e.removeLayer(i[u]),delete i[u]);for(var d in n)if(0!==d.search("\\$"))if(-1===d.search("-")){if(!p(i[d])){var g=n[d],y=m(d,n[d],a);if(p(y)&&p(g.message)&&y.bindPopup(g.message,g.popupOptions),o.LabelPlugin.isLoaded()&&p(g.label)&&p(g.label.message)&&y.bindLabel(g.label.message,g.label.options),p(g)&&p(g.layer)){if(!h(g.layer)){s.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!p(t)){s.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!p(t.overlays)||!p(t.overlays[g.layer])){s.error('[AngularJS - Leaflet] A path can only be added to a layer of type "group"');continue}var x=t.overlays[g.layer];if(!(x instanceof L.LayerGroup||x instanceof L.FeatureGroup)){s.error('[AngularJS - Leaflet] Adding a path to an overlay needs a overlay of the type "group" or "featureGroup"');continue}i[d]=y,x.addLayer(y),r?l(y,d):b(y,g.type,g)}else p(y)&&(i[d]=y,e.addLayer(y),r?l(y,d):b(y,g.type,g));v(c.id,y,d,g,f)}}else s.error('[AngularJS - Leaflet] The path name "'+d+'" is not valid. It must not include "-" and a number.')}))}))}))}}}]),angular.module("ui-leaflet").directive("tiles",["leafletLogger","leafletData","leafletMapDefaults","leafletHelpers",function(e,t,n,i){var o=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,r,a,s){var l=i.isDefined,c=s.getLeafletScope(),u=c.tiles;l(u)&&l(u.url)?s.getMap().then((function(e){var i,o=n.getDefaults(a.id);c.$watch("tiles",(function(n){var r=o.tileLayerOptions,s=o.tileLayer;if(l(n.url)||!l(i))return l(i)?l(n.url)&&l(n.options)&&!angular.equals(n.options,r)?(e.removeLayer(i),r=o.tileLayerOptions,angular.copy(n.options,r),s=n.url,(i=L.tileLayer(s,r)).addTo(e),void t.setTiles(i,a.id)):void(l(n.url)&&i.setUrl(n.url)):(l(n.options)&&angular.copy(n.options,r),l(n.url)&&(s=n.url),(i=L.tileLayer(s,r)).addTo(e),void t.setTiles(i,a.id));e.removeLayer(i)}),!0)})):o.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),["markers","geojson"].forEach((function(e){angular.module("ui-leaflet").directive(e+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(t,n,i,o,r){var a=r.isDefined,s=r.errorHeader,l=r.isObject,c=r.watchOptions,u=t;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(t,n,i,o){var r=o[0],d=r.getLeafletScope();r.getMap().then((function(){a(t[e+"WatchOptions"])&&(l(t[e+"WatchOptions"])?angular.extend(c,t[e+"WatchOptions"]):u.error(s+"["+e+"WatchOptions] is not an object"),d[e+"WatchOptions"]=c)}))}}}])})),angular.module("ui-leaflet").factory("leafletEventsHelpersFactory",["$rootScope","$q","leafletLogger","leafletHelpers",function(e,t,n,i){var o=i.safeApply,r=i.isDefined,a=i.isObject,s=i.isArray,l=i.errorHeader,c=n,u=function(e,t){this.rootBroadcastName=e,c.debug("leafletEventsHelpersFactory: lObjectType: "+t+"rootBroadcastName: "+e),this.lObjectType=t};return u.prototype.getAvailableEvents=function(){return[]},u.prototype.genDispatchEvent=function(e,t,n,i,o,r,a,s,l){var u=this;return(e=e||"")&&(e="."+e),function(d){var p=u.rootBroadcastName+e+"."+t;c.debug(p),u.fire(i,p,n,d,d.target||o,a,r,s,l)}},u.prototype.fire=function(t,n,i,a,s,l,c,u,d){o(t,(function(){var o={leafletEvent:a,leafletObject:s,modelName:c,model:l};r(u)&&angular.extend(o,{layerName:u}),"emit"===i?t.$emit(n,o):e.$broadcast(n,o)}))},u.prototype.bindEvents=function(e,t,n,i,o,u,d){var p=[],h=this;if(r(o.eventBroadcast))if(a(o.eventBroadcast))if(r(o.eventBroadcast[h.lObjectType]))if(a(o.eventBroadcast[h.lObjectType])){r(o.eventBroadcast[this.lObjectType].logic)&&"emit"!==o.eventBroadcast[h.lObjectType].logic&&"broadcast"!==o.eventBroadcast[h.lObjectType].logic&&c.warn(l+"Available event propagation logic are: 'emit' or 'broadcast'.");var f=!1,g=!1;r(o.eventBroadcast[h.lObjectType].enable)&&s(o.eventBroadcast[h.lObjectType].enable)&&(f=!0),r(o.eventBroadcast[h.lObjectType].disable)&&s(o.eventBroadcast[h.lObjectType].disable)&&(g=!0),f&&g?c.warn(l+"can not enable and disable events at the same time"):f||g?f?o.eventBroadcast[this.lObjectType].enable.forEach((function(e){-1!==p.indexOf(e)?c.warn(l+"This event "+e+" is already enabled"):-1===h.getAvailableEvents().indexOf(e)?c.warn(l+"This event "+e+" does not exist"):p.push(e)})):(p=this.getAvailableEvents(),o.eventBroadcast[h.lObjectType].disable.forEach((function(e){var t=p.indexOf(e);-1===t?c.warn(l+"This event "+e+" does not exist or has been already disabled"):p.splice(t,1)}))):c.warn(l+"must enable or disable events")}else c.warn(l+"event-broadcast."+[h.lObjectType]+" must be an object check your model.");else p=this.getAvailableEvents();else c.error(l+"event-broadcast must be an object check your model.");else p=this.getAvailableEvents();return p.forEach((function(r){t.on(r,h.genDispatchEvent(e,r,"emit",o,t,n,i,u,d))})),"emit"},u}]).service("leafletEventsHelpers",["leafletEventsHelpersFactory",function(e){return new e}]),angular.module("ui-leaflet").factory("leafletGeoJsonEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory","leafletData",function(e,t,n,i,o,r){var a=i.safeApply,s=o,l=function(){s.call(this,"leafletDirectiveGeoJson","geojson")};return(l.prototype=new s).genDispatchEvent=function(t,n,i,o,l,c,u,d,p){var h=s.prototype.genDispatchEvent.call(this,t,n,i,o,l,c,u,d),f=this;return function(t){"mouseout"===n&&(p.resetStyleOnMouseout&&r.getGeoJSON(p.mapId).then((function(e){(d?e[d]:e).resetStyle(t.target)})),a(o,(function(){e.$broadcast(f.rootBroadcastName+".mouseout",t)}))),h(t)}},l.prototype.getAvailableEvents=function(){return["click","dblclick","mouseover","mouseout"]},new l}]),angular.module("ui-leaflet").factory("leafletLabelEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory",function(e,t,n,i,o){var r=i,a=o,s=function(){a.call(this,"leafletDirectiveLabel","markers")};return(s.prototype=new a).genDispatchEvent=function(e,t,n,i,o,r,s,l){var c=r.replace("markers.","");return a.prototype.genDispatchEvent.call(this,e,t,n,i,o,c,s,l)},s.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},s.prototype.genEvents=function(e,t,n,i,o,a,s,l){var c=this,u=this.getAvailableEvents(),d=r.getObjectArrayPath("markers."+a);u.forEach((function(t){o.label.on(t,c.genDispatchEvent(e,t,n,i,o.label,d,s,l))}))},s.prototype.bindEvents=function(e,t,n,i,o,r){},new s}]),angular.module("ui-leaflet").factory("leafletMapEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpers","leafletIterators",function(e,t,n,i,o,r){var a=i.isDefined,s=o.fire,l=function(e,t,i,o){return o&&(o+="."),function(r){var a="leafletDirectiveMap."+o+t;n.debug(a),s(e,a,i,r,r.target,e)}};return{getAvailableMapEvents:function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomanim","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},genDispatchMapEvent:l,notifyCenterChangedToBounds:function(e){e.$broadcast("boundsChanged")},notifyCenterUrlHashChanged:function(e,t,n,i){if(a(n.urlHashCenter)){var o=t.getCenter(),r=o.lat.toFixed(4)+":"+o.lng.toFixed(4)+":"+t.getZoom();a(i.c)&&i.c===r||e.$emit("centerUrlHash",r)}},addEvents:function(e,t,n,i,o){r.each(t,(function(t){var r={};r[n]=t,e.on(t,l(i,t,o,e._container.id||""),r)}))}}}]),angular.module("ui-leaflet").factory("leafletMarkerEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents",function(e,t,n,i,o,r){var a=i.safeApply,s=i.isDefined,l=i,c=r,u=o,d=function(){u.call(this,"leafletDirectiveMarker","markers")};return(d.prototype=new u).genDispatchEvent=function(t,n,i,o,r,s,l,c){var d=u.prototype.genDispatchEvent.call(this,t,n,i,o,r,s,l,c);return function(t){"click"===n?a(o,(function(){e.$broadcast("leafletDirectiveMarkersClick",s)})):"dragend"===n&&(a(o,(function(){l.lat=r.getLatLng().lat,l.lng=r.getLatLng().lng})),l.message&&!0===l.focus&&r.openPopup()),d(t)}},d.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose","touchend","touchstart","touchmove","touchcancel","touchleave"]},d.prototype.bindEvents=function(e,t,n,i,o,r){var a=u.prototype.bindEvents.call(this,e,t,n,i,o,r);l.LabelPlugin.isLoaded()&&s(t.label)&&c.genEvents(e,n,a,o,t,i,r)},new d}]),angular.module("ui-leaflet").factory("leafletPathEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(e,t,n,i,o,r){var a=i.isDefined,s=i.isObject,l=i,c=i.errorHeader,u=o,d=r.fire,p=n,h=function(e,t,n,i,o,r,a,s){return(e=e||"")&&(e="."+e),function(l){var c="leafletDirectivePath"+e+"."+t;p.debug(c),d(i,c,n,l,l.target||o,a,r,s)}},f=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:f,bindPathEvents:function(e,t,n,i,o){var r,d,g=[],m="broadcast";if(a(o.eventBroadcast))if(s(o.eventBroadcast))if(a(o.eventBroadcast.path))if(s(o.eventBroadcast.paths))p.warn(c+"event-broadcast.path must be an object check your model.");else{void 0!==o.eventBroadcast.path.logic&&null!==o.eventBroadcast.path.logic&&("emit"!==o.eventBroadcast.path.logic&&"broadcast"!==o.eventBroadcast.path.logic?p.warn(c+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===o.eventBroadcast.path.logic&&(m="emit"));var v=!1,b=!1;if(void 0!==o.eventBroadcast.path.enable&&null!==o.eventBroadcast.path.enable&&"object"==typeof o.eventBroadcast.path.enable&&(v=!0),void 0!==o.eventBroadcast.path.disable&&null!==o.eventBroadcast.path.disable&&"object"==typeof o.eventBroadcast.path.disable&&(b=!0),v&&b)p.warn(c+"can not enable and disable events at the same time");else if(v||b)if(v)for(r=0;r<o.eventBroadcast.path.enable.length;r++)d=o.eventBroadcast.path.enable[r],-1!==g.indexOf(d)?p.warn(c+"This event "+d+" is already enabled"):-1===f().indexOf(d)?p.warn(c+"This event "+d+" does not exist"):g.push(d);else for(g=f(),r=0;r<o.eventBroadcast.path.disable.length;r++){d=o.eventBroadcast.path.disable[r];var y=g.indexOf(d);-1===y?p.warn(c+"This event "+d+" does not exist or has been already disabled"):g.splice(y,1)}else p.warn(c+"must enable or disable events")}else g=f();else p.error(c+"event-broadcast must be an object check your model.");else g=f();for(r=0;r<g.length;r++)d=g[r],t.on(d,h(e,d,m,o,g,n));l.LabelPlugin.isLoaded()&&a(t.label)&&u.genEvents(e,n,m,o,t,i)}}}])}(angular)},function(e,t,n){(function(n){
/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v1.0.10
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 */
!function(n,i){"use strict";var o=["ng","oc.lazyLoad"],r={},a=[],s=[],l=[],c=[],u=n.noop,d={},p=[];n.module("oc.lazyLoad",["ng"]).provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(e,t,h,m,v,b){var y={},x={$controllerProvider:e,$compileProvider:h,$filterProvider:m,$provide:t,$injector:v,$animateProvider:b},w=!1,A=!1,_=[],E={};_.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},this.config=function(e){n.isDefined(e.modules)&&(n.isArray(e.modules)?n.forEach(e.modules,(function(e){y[e.name]=e})):y[e.modules.name]=e.modules),n.isDefined(e.debug)&&(w=e.debug),n.isDefined(e.events)&&(A=e.events)},this._init=function(e){if(0===s.length){var t=[e],r=["ng:app","ng-app","x-ng-app","data-ng-app"],a=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,l=function(e){return e&&t.push(e)};n.forEach(r,(function(t){r[t]=!0,l(document.getElementById(t)),t=t.replace(":","\\:"),void 0!==e[0]&&e[0].querySelectorAll&&(n.forEach(e[0].querySelectorAll("."+t),l),n.forEach(e[0].querySelectorAll("."+t+"\\:"),l),n.forEach(e[0].querySelectorAll("["+t+"]"),l))})),n.forEach(t,(function(t){if(0===s.length){var i=" "+e.className+" ",o=a.exec(i);o?s.push((o[2]||"").replace(/\s+/g,",")):n.forEach(t.attributes,(function(e){0===s.length&&r[e.name]&&s.push(e.value)}))}}))}0!==s.length||(i.jasmine||i.mocha)&&n.isDefined(n.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");n.forEach(s,(function(e){!function e(t){if(-1===o.indexOf(t)){o.push(t);var i=n.module(t);L(null,i._invokeQueue,t),L(null,i._configBlocks,t),n.forEach(i.requires,e)}}(e)})),s=[],c.pop()};var S=function(e){try{return JSON.stringify(e)}catch(i){var t=[];return JSON.stringify(e,(function(e,i){if(n.isObject(i)&&null!==i){if(-1!==t.indexOf(i))return;t.push(i)}return i}))}},T=function(e){var t,n,i=0;if(0==e.length)return i;for(t=0,n=e.length;t<n;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i};function C(e,t,i){if(t){var r,a,s,c=[];for(r=t.length-1;r>=0;r--)if(a=t[r],n.isString(a)||(a=I(a)),a&&-1===p.indexOf(a)&&(!y[a]||-1!==l.indexOf(a))){var h=-1===o.indexOf(a);if(s=g(a),h&&(o.push(a),C(e,s.requires,i)),s._runBlocks.length>0)for(d[a]=[];s._runBlocks.length>0;)d[a].push(s._runBlocks.shift());n.isDefined(d[a])&&(h||i.rerun)&&(c=c.concat(d[a])),L(e,s._invokeQueue,a,i.reconfig),L(e,s._configBlocks,a,i.reconfig),u(h?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",a),t.pop(),p.push(a)}var f=e.getInstanceInjector();n.forEach(c,(function(e){f.invoke(e)}))}}function k(e,t){var i=e[2][0],o=e[1],a=!1;n.isUndefined(r[t])&&(r[t]={}),n.isUndefined(r[t][o])&&(r[t][o]={});var s=function(e,i){r[t][o].hasOwnProperty(e)||(r[t][o][e]=[]),function(e,t){var i,o=!0;t.length&&(i=l(e),n.forEach(t,(function(e){o=o&&l(e)!==i})));return o}(i,r[t][o][e])&&(a=!0,r[t][o][e].push(i),u("ocLazyLoad.componentLoaded",[t,o,e]))};function l(e){return n.isArray(e)?T(e.toString()):n.isObject(e)?T(S(e)):n.isDefined(e)&&null!==e?T(e.toString()):e}if(n.isString(i))s(i,e[2][1]);else{if(!n.isObject(i))return!1;n.forEach(i,(function(e,t){n.isString(e)?s(e,i[1]):s(t,e)}))}return a}function L(e,t,i,o){var r,s,l,c;if(t)for(r=0,s=t.length;r<s;r++)if(l=t[r],n.isArray(l)){if(null!==e){if(!e.hasOwnProperty(l[0]))throw new Error("unsupported provider "+l[0]);c=e[l[0]]}var u=k(l,i);if("invoke"!==l[1])u&&n.isDefined(c)&&c[l[1]].apply(c,l[2]);else{var d=function(e){var t=a.indexOf(i+"-"+e);(-1===t||o)&&(-1===t&&a.push(i+"-"+e),n.isDefined(c)&&c[l[1]].apply(c,l[2]))};if(n.isFunction(l[2][0]))d(l[2][0]);else if(n.isArray(l[2][0]))for(var p=0,h=l[2][0].length;p<h;p++)n.isFunction(l[2][0][p])&&d(l[2][0][p])}}}function I(e){var t=null;return n.isString(e)?t=e:n.isObject(e)&&e.hasOwnProperty("name")&&n.isString(e.name)&&(t=e.name),t}function D(e){if(!n.isString(e))return!1;try{return g(e)}catch(e){if(/No module/.test(e)||e.message.indexOf("$injector:nomod")>-1)return!1}}this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(e,t,i,a,l){var d,h=a("ocLazyLoad");function m(t){var n=l.defer();return e.error(t.message),n.reject(t),n.promise}return w||((e={}).error=n.noop,e.warn=n.noop,e.info=n.noop),x.getInstanceInjector=function(){return d||(d=t.data("$injector")||n.injector())},{_broadcast:u=function(t,n){A&&i.$broadcast(t,n),w&&e.info(t,n)},_$log:e,_getFilesCache:function(){return h},toggleWatch:function(e){e?c.push(!0):c.pop()},getModuleConfig:function(e){if(!n.isString(e))throw new Error("You need to give the name of the module to get");return y[e]?n.copy(y[e]):null},setModuleConfig:function(e){if(!n.isObject(e))throw new Error("You need to give the module config object to set");return y[e.name]=e,e},getModules:function(){return o},isLoaded:function(e){var t=function(e){var t=o.indexOf(e)>-1;return t||(t=!!D(e)),t};if(n.isString(e)&&(e=[e]),n.isArray(e)){var i,r;for(i=0,r=e.length;i<r;i++)if(!t(e[i]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:I,_getModule:function(e){try{return g(e)}catch(t){throw(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1)&&(t.message='The module "'+S(e)+'" that you are trying to load does not exist. '+t.message),t}},moduleExists:D,_loadDependencies:function(e,t){var i,o,r,a=[],s=this;if(null===(e=s._getModuleName(e)))return l.when();try{i=s._getModule(e)}catch(e){return m(e)}return o=s.getRequires(i),n.forEach(o,(function(i){if(n.isString(i)){var o=s.getModuleConfig(i);if(null===o)return void _.push(i);i=o,o.name=void 0}if(s.moduleExists(i.name))return 0!==(r=i.files.filter((function(e){return s.getModuleConfig(i.name).files.indexOf(e)<0}))).length&&s._$log.warn('Module "',e,'" attempted to redefine configuration for dependency. "',i.name,'"\n Additional Files Loaded:',r),n.isDefined(s.filesLoader)?void a.push(s.filesLoader(i,t).then((function(){return s._loadDependencies(i)}))):m(new Error("Error: New dependencies need to be loaded from external files ("+i.files+"), but no loader has been defined."));if(n.isArray(i)){var l=[];n.forEach(i,(function(e){var t=s.getModuleConfig(e);null===t?l.push(e):t.files&&(l=l.concat(t.files))})),l.length>0&&(i={files:l})}else n.isObject(i)&&i.hasOwnProperty("name")&&i.name&&(s.setModuleConfig(i),_.push(i.name));if(n.isDefined(i.files)&&0!==i.files.length){if(!n.isDefined(s.filesLoader))return m(new Error('Error: the module "'+i.name+'" is defined in external files ('+i.files+"), but no loader has been defined."));a.push(s.filesLoader(i,t).then((function(){return s._loadDependencies(i)})))}})),l.all(a)},inject:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=this,r=l.defer();if(n.isDefined(e)&&null!==e){if(n.isArray(e)){var a=[];return n.forEach(e,(function(e){a.push(o.inject(e,t,i))})),l.all(a)}o._addToLoadList(o._getModuleName(e),!0,i)}if(s.length>0){var c=s.slice(),u=function e(n){_.push(n),E[n]=r.promise,o._loadDependencies(n,t).then((function(){try{p=[],C(x,_,t)}catch(e){return o._$log.error(e.message),void r.reject(e)}s.length>0?e(s.shift()):r.resolve(c)}),(function(e){r.reject(e)}))};u(s.shift())}else{if(t&&t.name&&E[t.name])return E[t.name];r.resolve()}return r.promise},getRequires:function(e){var t=[];return n.forEach(e.requires,(function(e){-1===o.indexOf(e)&&t.push(e)})),t},_invokeQueue:L,_registerInvokeList:k,_register:C,_addToLoadList:f,_unregister:function(e){n.isDefined(e)&&n.isArray(e)&&n.forEach(e,(function(e){r[e]=void 0}))}}}],this._init(n.element(i.document))}]);var h=n.bootstrap;n.bootstrap=function(e,t,i){return o=["ng","oc.lazyLoad"],r={},a=[],s=[],l=[],c=[],u=n.noop,d={},p=[],n.forEach(t.slice(),(function(e){f(e,!0,!0)})),h(e,t,i)};var f=function(e,t,i){(c.length>0||t)&&n.isString(e)&&-1===s.indexOf(e)&&(s.push(e),i&&l.push(e))},g=n.module;n.module=function(e,t,n){return f(e,!1,!0),g(e,t,n)},e.exports===t&&(e.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse","$timeout",function(t,n,i,o,r){return{restrict:"A",terminal:!0,priority:1e3,compile:function(r,a){var s=r[0].innerHTML;return r.html(""),function(r,a,l){var c=o(l.ocLazyLoad);r.$watch((function(){return c(r)||l.ocLazyLoad}),(function(o){e.isDefined(o)&&t.load(o).then((function(){i.enter(s,a),n(a.contents())(r)}))}),!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(t,i,o,r){var a=!1,s=o.document.getElementsByTagName("head")[0]||o.document.getElementsByTagName("body")[0];return t.buildElement=function(l,c,u){var d,p,h=i.defer(),f=t._getFilesCache(),g=function(e){var t=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+t:e+"&_dc="+t:e+"?_dc="+t};switch(e.isUndefined(f.get(c))&&f.put(c,h.promise),l){case"css":(d=o.document.createElement("link")).type="text/css",d.rel="stylesheet",d.href=!1===u.cache?g(c):c;break;case"js":(d=o.document.createElement("script")).src=!1===u.cache?g(c):c;break;default:f.remove(c),h.reject(new Error('Requested type "'+l+'" is not known. Could not inject "'+c+'"'))}d.onload=d.onreadystatechange=function(e){d.readyState&&!/^c|loade/.test(d.readyState)||p||(d.onload=d.onreadystatechange=null,p=1,t._broadcast("ocLazyLoad.fileLoaded",c),h.resolve(d))},d.onerror=function(){f.remove(c),h.reject(new Error("Unable to load "+c))},d.async=u.serie?0:1;var m=s.lastChild;if(u.insertBefore){var v=e.element(e.isDefined(n)?u.insertBefore:document.querySelector(u.insertBefore));v&&v.length>0&&(m=v[0])}if(m.parentNode.insertBefore(d,m),"css"==l){var b=o.navigator.userAgent.toLowerCase();if(b.indexOf("phantomjs/1.9")>-1)a=!0;else if(/iP(hone|od|ad)/.test(o.navigator.platform)){var y=o.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),x=parseFloat([parseInt(y[1],10),parseInt(y[2],10),parseInt(y[3]||0,10)].join("."));a=x<6}else if(b.indexOf("android")>-1){var w=parseFloat(b.slice(b.indexOf("android")+8));a=w<4.4}else if(b.indexOf("safari")>-1){var A=b.match(/version\/([\.\d]+)/i);a=A&&A[1]&&parseFloat(A[1])<6}if(a)var _=1e3,E=r((function(){try{d.sheet.cssRules,r.cancel(E),d.onload()}catch(e){--_<=0&&d.onerror()}}),20)}return h.promise},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.filesLoader=function(i){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=[],a=[],s=[],l=[],c=null,u=t._getFilesCache();t.toggleWatch(!0),e.extend(o,i);var d=function(n){var i,d=null;if(e.isObject(n)&&(d=n.type,n=n.path),c=u.get(n),e.isUndefined(c)||!1===o.cache){if(null!==(i=/^(css|less|html|htm|js)?(?=!)/.exec(n))&&(d=i[1],n=n.substr(i[1].length+1,n.length)),!d)if(null!==(i=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(n)))d=i[1];else{if(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!t.jsLoader.hasOwnProperty("requirejs"))return void t._$log.error("File type could not be determined. "+n);d="js"}"css"!==d&&"less"!==d||-1!==r.indexOf(n)?"html"!==d&&"htm"!==d||-1!==a.indexOf(n)?"js"===d||-1===s.indexOf(n)?s.push(n):t._$log.error("File type is not valid. "+n):a.push(n):r.push(n)}else c&&l.push(c)};if(o.serie?d(o.files.shift()):e.forEach(o.files,(function(e){d(e)})),r.length>0){var p=n.defer();t.cssLoader(r,(function(n){e.isDefined(n)&&t.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),p.reject(n)):p.resolve()}),o),l.push(p.promise)}if(a.length>0){var h=n.defer();t.templatesLoader(a,(function(n){e.isDefined(n)&&t.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),h.reject(n)):h.resolve()}),o),l.push(h.promise)}if(s.length>0){var f=n.defer();t.jsLoader(s,(function(n){e.isDefined(n)&&(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||t.jsLoader.hasOwnProperty("requirejs"))?(t._$log.error(n),f.reject(n)):f.resolve()}),o),l.push(f.promise)}if(0===l.length){var g=n.defer(),m="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";return t._$log.error(m),g.reject(m),g.promise}return o.serie&&o.files.length>0?n.all(l).then((function(){return t.filesLoader(i,o)})):n.all(l).finally((function(e){return t.toggleWatch(!1),e}))},t.load=function(i){var o,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=this,s=null,l=[],c=n.defer(),u=e.copy(i),d=e.copy(r);if(e.isArray(u))return e.forEach(u,(function(e){l.push(a.load(e,d))})),n.all(l).then((function(e){c.resolve(e)}),(function(e){c.reject(e)})),c.promise;if(e.isString(u)?(s=a.getModuleConfig(u))||(s={files:[u]}):e.isObject(u)&&(s=e.isDefined(u.path)&&e.isDefined(u.type)?{files:[u]}:a.setModuleConfig(u)),null===s){var p=a._getModuleName(u);return o='Module "'+(p||"unknown")+'" is not configured, cannot load.',t._$log.error(o),c.reject(new Error(o)),c.promise}e.isDefined(s.template)&&(e.isUndefined(s.files)&&(s.files=[]),e.isString(s.template)?s.files.push(s.template):e.isArray(s.template)&&s.files.concat(s.template));var h=e.extend({},d,s);return e.isUndefined(s.files)&&e.isDefined(s.name)&&t.moduleExists(s.name)?t.inject(s.name,h,!0):(t.filesLoader(s,h).then((function(){t.inject(null,h).then((function(e){c.resolve(e)}),(function(e){c.reject(e)}))}),(function(e){c.reject(e)})),c.promise)},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.cssLoader=function(i,o,r){var a=[];e.forEach(i,(function(e){a.push(t.buildElement("css",e,r))})),n.all(a).then((function(){o()}),(function(e){o(e)}))},t.cssLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.jsLoader=function(i,o,r){var a=[];e.forEach(i,(function(e){a.push(t.buildElement("js",e,r))})),n.all(a).then((function(){o()}),(function(e){o(e)}))},t.jsLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(t,n,i,o){return t.templatesLoader=function(r,a,s){var l=[],c=t._getFilesCache();return e.forEach(r,(function(t){var r=i.defer();l.push(r.promise),o.get(t,s).then((function(i){var o=i.data;e.isString(o)&&o.length>0&&e.forEach(e.element(o),(function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&n.put(e.id,e.innerHTML)})),e.isUndefined(c.get(t))&&c.put(t,!0),r.resolve()})).catch((function(e){r.reject(new Error('Unable to load template file "'+t+'": '+e.data))}))})),i.all(l).then((function(){a()}),(function(e){a(e)}))},t.templatesLoader.ocLazyLoadLoader=!0,t}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),r>=o)return-1;for(n=Math.max(r>=0?r:o-Math.abs(r),0);n<o;){if(n in i&&i[n]===e)return n;n++}return-1})}).call(this,n(0))},function(e,t,n){n(4),n(9),n(14),n(25),n(15),n(16),n(6),n(17),n(18),n(26),n(8),n(19),n(84),n(30),n(85),n(86),n(87),n(88),n(21),n(32),n(31),n(89),n(90),n(20),n(7),n(91),n(92),n(93),n(94),n(95),n(96),n(5),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(33),n(107),n(34),n(108),n(109),n(110),n(112),n(114),n(116),n(118),n(120),n(122),n(124),n(126),n(128),n(130),n(132),n(134),n(136),n(138),n(140),n(142),n(144),n(146)},function(e,t,n){var i,o,r;o=[n(0),n(1)],void 0===(r="function"==typeof(i=function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(19),n(7),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(n,i){var o=i||e.ui.ddmanager.current,r=!1;return!(!o||(o.currentItem||o.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===o.options.scope&&i.accept.call(i.element[0],o.currentItem||o.element)&&t(o,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,n))return r=!0,!1})),!r&&!!this.accept.call(this.element[0],o.currentItem||o.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",n,this.ui(o)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,i,o){if(!n.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,s=r+t.helperProportions.width,l=a+t.helperProportions.height,c=n.offset.left,u=n.offset.top,d=c+n.proportions().width,p=u+n.proportions().height;switch(i){case"fit":return c<=r&&s<=d&&u<=a&&l<=p;case"intersect":return c<r+t.helperProportions.width/2&&s-t.helperProportions.width/2<d&&u<a+t.helperProportions.height/2&&l-t.helperProportions.height/2<p;case"pointer":return e(o.pageY,u,n.proportions().height)&&e(o.pageX,c,n.proportions().width);case"touch":return(a>=u&&a<=p||l>=u&&l<=p||a<u&&l>p)&&(r>=c&&r<=d||s>=c&&s<=d||r<c&&s>d);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,n){var i,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<r.length;i++)if(!(r[i].options.disabled||t&&!r[i].accept.call(r[i].element[0],t.currentItem||t.element))){for(o=0;o<s.length;o++)if(s[o]===r[i].element[0]){r[i].proportions().height=0;continue e}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===a&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight}))}},drop:function(n,i){var o=!1;return e.each((e.ui.ddmanager.droppables[n.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&t(n,this,this.options.tolerance,i)&&(o=this._drop.call(this,i)||o),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),o},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}))},drag:function(n,i){n.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(n,i),e.each(e.ui.ddmanager.droppables[n.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var o,r,a,s=t(n,this,this.options.tolerance,i),l=!s&&this.isover?"isout":s&&!this.isover?"isover":null;l&&(this.options.greedy&&(r=this.options.scope,(a=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===r}))).length&&((o=e(a[0]).droppable("instance")).greedyChild="isover"===l)),o&&"isover"===l&&(o.isover=!1,o.isout=!0,o._out.call(o,i)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,i),o&&"isout"===l&&(o.isout=!1,o.isover=!0,o._over.call(o,i)))}}))},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Selectable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(7),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each((function(){var n=e(this),i=n.offset(),o={left:i.left-t.elementPos.left,top:i.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:n,left:o.left,top:o.top,right:o.left+n.outerWidth(),bottom:o.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))})),e(t.target).parents().addBack().each((function(){var i,o=e.data(this,"selectable-item");if(o)return i=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),n._removeClass(o.$element,i?"ui-unselecting":"ui-selected")._addClass(o.$element,i?"ui-selecting":"ui-unselecting"),o.unselecting=!i,o.selecting=i,o.selected=i,i?n._trigger("selecting",t,{selecting:o.element}):n._trigger("unselecting",t,{unselecting:o.element}),!1})))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,o=this.options,r=this.opos[0],a=this.opos[1],s=t.pageX,l=t.pageY;return r>s&&(n=s,s=r,r=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:r,top:a,width:s-r,height:l-a}),this.selectees.each((function(){var n=e.data(this,"selectable-item"),c=!1,u={};n&&n.element!==i.element[0]&&(u.left=n.left+i.elementPos.left,u.right=n.right+i.elementPos.left,u.top=n.top+i.elementPos.top,u.bottom=n.bottom+i.elementPos.top,"touch"===o.tolerance?c=!(u.left>s||u.right<r||u.top>l||u.bottom<a):"fit"===o.tolerance&&(c=u.left>r&&u.right<s&&u.top>a&&u.bottom<l),c?(n.selected&&(i._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(i._addClass(n.$element,"ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,i._addClass(n.$element,"ui-selected"),n.selected=!0):(i._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))})),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var i=e.data(this,"selectable-item");n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})})),e(".ui-selecting",this.element[0]).each((function(){var i=e.data(this,"selectable-item");n._removeClass(i.$element,"ui-selecting")._addClass(i.$element,"ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})})),this._trigger("stop",t),this.helper.remove(),!1}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(7),n(14),n(27),n(18),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,o=!1,r=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,r.widgetName+"-item")===r)return i=e(this),!1})),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),!i||this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each((function(){this===t.target&&(o=!0)})),!o)||(this.currentItem=i,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,n,i){var o,r,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(r)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,o,r,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(o=(i=this.items[n]).item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||e.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,a={};r&&"x"!==r||(a.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(a.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,(function(){i._clear(t)}))}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each((function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))})),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each((function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")})),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=e.left,a=r+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+c>s&&i+c<l,p="y"===this.options.axis||t+u>r&&t+u<a,h=d&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:r<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!i||!o)&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,o,r,a=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(i=(o=e(l[n],this.document[0])).length-1;i>=0;i--)(r=e.data(o[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&s.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function c(){a.push(this)}for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(c);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,o,r,a,s,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(n=p.length-1;n>=0;n--)for(i=(o=e(p[n],this.document[0])).length-1;i>=0;i--)(r=e.data(o[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(d.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=d.length-1;n>=0;n--)for(a=d[n][1],i=0,c=(s=d[n][0]).length;i<c;i++)(l=e(s[i])).data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,i,o,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(i=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+i+">",t.document[0]);return t._addClass(o,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===i?t._createTrPlaceholder(t.currentItem,o):"img"===i&&o.attr("src",t.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(e,o){n&&!i.forcePlaceholderSize||(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each((function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}))},_contactContainers:function(t){var n,i,o,r,a,s,l,c,u,d,p=null,h=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(p&&e.contains(this.containers[n].element[0],p.element[0]))continue;p=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(o=1e4,r=null,a=(u=p.floating||this._isFloating(this.currentItem))?"left":"top",s=u?"width":"height",d=u?"pageX":"pageY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[h].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[a],c=!1,t[d]-l>this.items[i][s]/2&&(c=!0),Math.abs(t[d]-l)<o&&(o=Math.abs(t[d]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],n=e(o.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(t){var n,i,o=this.options,r=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/o.grid[1])*o.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay((function(){o===this.counter&&this.refreshPositions(!i)}))},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function o(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}for(this.fromOutside&&!t&&i.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(i.push((function(e){this._trigger("remove",e,this._uiHash())})),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(o("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(o("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Accordion 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(6),n(8),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,n,i=this.options.icons;i&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+i.header),t.prependTo(this.headers),n=this.active.children(".ui-accordion-header-icon"),this._removeClass(n,i.header)._addClass(n,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons())):this._activate(t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,o=this.headers.index(t.target),r=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:r=this.headers[(o+1)%i];break;case n.LEFT:case n.UP:r=this.headers[(o-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:r=this.headers[0];break;case n.END:r=this.headers[i-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),e(r).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,i=n.heightStyle,o=this.element.parent();this.active=this._findActive(n.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var t=e(this),n=t.uniqueId().attr("id"),i=t.next(),o=i.uniqueId().attr("id");t.attr("aria-controls",o),i.attr("aria-labelledby",n)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(t=o.height(),this.element.siblings(":visible").each((function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))})),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each((function(){var n=e(this).is(":visible");n||e(this).show(),t=Math.max(t,e(this).css("height","").height()),n||e(this).hide()})).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),(function(e,t){n[t]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n,i,o=this.options,r=this.active,a=e(t.currentTarget),s=a[0]===r[0],l=s&&o.collapsible,c=l?e():a.next(),u=r.next(),d={oldHeader:r,oldPanel:u,newHeader:l?e():a,newPanel:c};t.preventDefault(),s&&!o.collapsible||!1===this._trigger("beforeActivate",t,d)||(o.active=!l&&this.headers.index(a),this.active=s?e():a,this._toggle(d),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),o.icons&&(n=r.children(".ui-accordion-header-icon"),this._removeClass(n,null,o.icons.activeHeader)._addClass(n,null,o.icons.header)),s||(this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active"),o.icons&&(i=a.children(".ui-accordion-header-icon"),this._removeClass(i,null,o.icons.header)._addClass(i,null,o.icons.activeHeader)),this._addClass(a.next(),"ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter((function(){return 0===parseInt(e(this).attr("tabIndex"),10)})).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var i,o,r,a=this,s=0,l=e.css("box-sizing"),c=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){a._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(o=d),o=o||d.easing||u.easing,r=r||d.duration||u.duration,t.length?e.length?(i=e.show().outerHeight(),t.animate(this.hideProps,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:r,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?"content-box"===l&&(s+=n.now):"content"!==a.options.heightStyle&&(n.now=Math.round(i-t.outerHeight()-s),s=0)}})):t.animate(this.hideProps,r,o,p):e.animate(this.showProps,r,o,p)},_toggleComplete:function(e){var t=e.oldPanel,n=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(20),n(6),n(9),n(10),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,a="input"===o;this.isMultiLine=r||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[r||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(t,n){var i,o;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),(i=n.item.attr("aria-label")||o.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay((function(){this.previous=o,this.selectedItem=i}))),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(6)],void 0===(r="function"==typeof(i=function(e){var t;function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",n,(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",n,o)}function o(){e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,n){for(var i in e.extend(t,n),n)null==n[i]&&(t[i]=n[i]);return t}return e.extend(e.ui,{datepicker:{version:"1.12.1"}}),e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,o,r;o="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(e(t),o)).settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,r):o&&this._inlineDatepicker(t,r)},_newInst:function(t,n){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,o,r,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[s?"before":"after"](n.append)),t.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),"focus"!==(i=this._get(n,"showOn"))&&"both"!==i||t.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(o=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:o,title:o}):o)),t[s?"before":"after"](n.trigger),n.trigger.on("click",(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,o,r=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(n=0,i=0,o=0;o<e.length;o++)e[o].length>n&&(n=e[o].length,i=o);return i},r.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,o,a){var s,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",p)),r(p.settings,o||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",p),this},_destroyDatepicker:function(n){var i,o=e(n),r=e.data(n,"datepicker");o.hasClass(this.markerClassName)&&(i=n.nodeName.toLowerCase(),e.removeData(n,"datepicker"),"input"===i?(r.append.remove(),r.trigger.remove(),o.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||o.removeClass(this.markerClassName).empty(),t===r&&(t=null))},_enableDatepicker:function(t){var n,i,o=e(t),r=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||((i=o.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var n,i,o=e(t),r=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||((i=o.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var o,a,s,l,c=this._getInst(t);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null;o=n||{},"string"==typeof n&&((o={})[n]=i),c&&(this._curInst===c&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),s=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),r(c.settings,o),null!==s&&void 0!==o.dateFormat&&void 0===o.minDate&&(c.settings.minDate=this._formatDate(c,s)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),c),this._autoSize(c),this._setDate(c,a),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,o,r=e.datepicker._getInst(t.target),a=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return(o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv))[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,o[0]),(n=e.datepicker._get(r,"onSelect"))?(i=e.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,o=e.datepicker._getInst(t.target);if(e.datepicker._get(o,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(t){var n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n))&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){var n,i,o,a,s,l,c;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t||(n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(o=(i=e.datepicker._get(n,"beforeShow"))?i.apply(t,[t,n]):{})&&(r(n.settings,o),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each((function(){return!(a|="fixed"===e(this).css("position"))})),s={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),s=e.datepicker._checkOffset(n,s,a),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),n.inline||(l=e.datepicker._get(n,"showAnim"),c=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?n.dpDiv.show(l,e.datepicker._get(n,"showOptions"),c):n.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),e.datepicker._curInst=n)))},_updateDatepicker:function(n){this.maxRows=4,t=n,n.dpDiv.empty().append(this._generateHTML(n)),this._attachHandlers(n);var i,r=this._getNumberOfMonths(n),a=r[1],s=n.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&o.apply(s.get(0)),n.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&n.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),n.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),n===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),n.yearshtml&&(i=n.yearshtml,setTimeout((function(){i===n.yearshtml&&n.yearshtml&&n.dpDiv.find("select.ui-datepicker-year:first").replaceWith(n.yearshtml),i=n.yearshtml=null}),0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var o=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?o-a:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+o>l&&l>o?Math.abs(n.left+o-l):0),n.top-=Math.min(n.top,n.top+r>c&&c>r?Math.abs(r+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),o=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return[(n=e(t).offset()).left,n.top]},_hideDatepicker:function(t){var n,i,o,r,a=this._curInst;!a||t&&a!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),o=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,o):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1,(r=this._get(a,"onClose"))&&r.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id===e.datepicker._mainDivId||0!==n.parents("#"+e.datepicker._mainDivId).length||n.hasClass(e.datepicker.markerClassName)||n.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!n.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===i)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var o=e(t),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var n,i=e(t),o=this._getInst(i[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(n=new Date,o.selectedDay=n.getDate(),o.drawMonth=o.selectedMonth=n.getMonth(),o.drawYear=o.selectedYear=n.getFullYear()),this._notifyChange(o),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var o=e(t),r=this._getInst(o[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(t,n,i,o){var r,a=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((r=this._getInst(a[0])).selectedDay=r.currentDay=e("a",o).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,o=e(t),r=this._getInst(o[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),(i=this._get(r,"onSelect"))?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var n,i,o,r=this._get(t,"altField");r&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),o=this.formatDate(n,i,this._getFormatConfig(t)),e(r).val(o))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;var o,r,a,s,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,p=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,b=-1,y=!1,x=function(e){var n=o+1<t.length&&t.charAt(o+1)===e;return n&&o++,n},w=function(e){var t=x(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),r=n.substring(l).match(o);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},A=function(t,i,o){var r=-1,a=e.map(x(t)?o:i,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(a,(function(e,t){var i=t[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase())return r=t[0],l+=i.length,!1})),-1!==r)return r+1;throw"Unknown name at position "+l},_=function(){if(n.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(y)"'"!==t.charAt(o)||x("'")?_():y=!1;else switch(t.charAt(o)){case"d":v=w("d");break;case"D":A("D",d,p);break;case"o":b=w("o");break;case"m":m=w("m");break;case"M":m=A("M",h,f);break;case"y":g=w("y");break;case"@":g=(s=new Date(w("@"))).getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"!":g=(s=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"'":x("'")?_():y=!0;break;default:_()}if(l<n.length&&(a=n.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=u?0:-100)),b>-1)for(m=1,v=b;!(v<=(r=this._getDaysInMonth(g,m-1)));)m++,v-=r;if((s=this._daylightSavingAdjust(new Date(g,m-1,v))).getFullYear()!==g||s.getMonth()+1!==m||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i,o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(l(e))for(;i.length<n;)i="0"+i;return i},u=function(e,t,n,i){return l(e)?i[t]:n[t]},d="",p=!1;if(t)for(i=0;i<e.length;i++)if(p)"'"!==e.charAt(i)||l("'")?d+=e.charAt(i):p=!1;else switch(e.charAt(i)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),o,r);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),a,s);break;case"y":d+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=!0;break;default:d+=e.charAt(i)}return d},_possibleChars:function(e){var t,n="",i=!1,o=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||o("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":o("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),r=o,a=this._getFormatConfig(e);try{r=this.parseDate(n,i,a)||o}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var o=null==n||""===n?i:"string"==typeof n?function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=i.getFullYear(),r=i.getMonth(),a=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(n);l;){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(l[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,r))}l=s.exec(n)}return new Date(o,r,a)}(n):"number"==typeof n?isNaN(n)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(n):new Date(n.getTime());return(o=o&&"Invalid Date"===o.toString()?i:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,o=e.selectedMonth,r=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),o===e.selectedMonth&&r===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var t,n,i,o,r,a,s,l,c,u,d,p,h,f,g,m,v,b,y,x,w,A,_,E,S,T,C,k,L,I,D,P,O,M,N,R,B,z,$,H=new Date,V=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),j=this._get(e,"isRTL"),F=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),Q=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),Y=1!==q[0]||1!==q[1],Z=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),K=this._getMinMaxDate(e,"max"),J=e.drawMonth-Q,ee=e.drawYear;if(J<0&&(J+=12,ee--),K)for(t=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-q[0]*q[1]+1,K.getDate())),t=X&&t<X?X:t;this._daylightSavingAdjust(new Date(ee,J,1))>t;)--J<0&&(J=11,ee--);for(e.drawMonth=J,e.drawYear=ee,n=this._get(e,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,J-G,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+n+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+n+"</span></a>",o=this._get(e,"nextText"),o=W?this.formatDate(o,this._daylightSavingAdjust(new Date(ee,J+G,1)),this._getFormatConfig(e)):o,r=this._canAdjustMonth(e,1,ee,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+o+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+o+"</span></a>",a=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?Z:V,a=W?this.formatDate(a,s,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=F?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(j?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),p=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),x="",A=0;A<q[0];A++){for(_="",this.maxRows=4,E=0;E<q[1];E++){if(S=this._daylightSavingAdjust(new Date(ee,J,e.selectedDay)),T=" ui-corner-all",C="",Y){if(C+="<div class='ui-datepicker-group",q[1]>1)switch(E){case 0:C+=" ui-datepicker-group-first",T=" ui-corner-"+(j?"right":"left");break;case q[1]-1:C+=" ui-datepicker-group-last",T=" ui-corner-"+(j?"left":"right");break;default:C+=" ui-datepicker-group-middle",T=""}C+="'>"}for(C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===A?j?r:i:"")+(/all|right/.test(T)&&0===A?j?i:r:"")+this._generateMonthYearHeader(e,J,ee,X,K,A>0||E>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)k+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[L=(w+u)%7]+"'>"+h[L]+"</span></th>";for(C+=k+"</tr></thead><tbody>",I=this._getDaysInMonth(ee,J),ee===e.selectedYear&&J===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,I)),D=(this._getFirstDayOfMonth(ee,J)-u+7)%7,P=Math.ceil((D+I)/7),O=Y&&this.maxRows>P?this.maxRows:P,this.maxRows=O,M=this._daylightSavingAdjust(new Date(ee,J,1-D)),N=0;N<O;N++){for(C+="<tr>",R=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(M)+"</td>":"",w=0;w<7;w++)B=m?m.apply(e.input?e.input[0]:null,[M]):[!0,""],$=(z=M.getMonth()!==J)&&!b||!B[0]||X&&M<X||K&&M>K,R+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(M.getTime()===S.getTime()&&J===e.selectedMonth&&e._keyEvent||y.getTime()===M.getTime()&&y.getTime()===S.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!v?"":" "+B[1]+(M.getTime()===Z.getTime()?" "+this._currentClass:"")+(M.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+(z&&!v||!B[2]?"":" title='"+B[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+M.getMonth()+"' data-year='"+M.getFullYear()+"'")+">"+(z&&!v?"&#xa0;":$?"<span class='ui-state-default'>"+M.getDate()+"</span>":"<a class='ui-state-default"+(M.getTime()===V.getTime()?" ui-state-highlight":"")+(M.getTime()===Z.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+M.getDate()+"</a>")+"</td>",M.setDate(M.getDate()+1),M=this._daylightSavingAdjust(M);C+=R+"</tr>"}++J>11&&(J=0,ee++),_+=C+="</tbody></table>"+(Y?"</div>"+(q[0]>0&&E===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}x+=_}return x+=c,e._keyEvent=!1,x},_generateMonthYearHeader:function(e,t,n,i,o,r,a,s){var l,c,u,d,p,h,f,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",x="";if(r||!m)x+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=o&&o.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=i.getMonth())&&(!c||u<=o.getMonth())&&(x+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+s[u]+"</option>");x+="</select>"}if(b||(y+=x+(!r&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!v)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(e,"yearRange").split(":"),p=(new Date).getFullYear(),f=(h=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t})(d[0]),g=Math.max(f,h(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=o?Math.min(g,o.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)e.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!r&&m&&v?"":"&#xa0;")+x),y+="</div>"},_adjustInstDate:function(e,t,n){var i=e.selectedYear+("Y"===n?t:0),o=e.selectedMonth+("M"===n?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,o))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,o,r)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),o=n&&t<n?n:t;return i&&o>i?i:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var o=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(n,i+(t<0?t:o[0]*o[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var n,i,o=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!o||t.getTime()>=o.getTime())&&(!r||t.getTime()<=r.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1",e.datepicker})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(21),n(19),n(7),n(30),n(15),n(6),n(9),n(10),n(29),n(26),n(8),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,o=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){o.trigger("focus")})),t.preventDefault()):(this._delay((function(){i.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,(function(n,i){var o,r;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),o=i.click,r={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,e("<button></button>",i).button(r).appendTo(t.uiButtonSet).on("click",(function(){o.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,i(o))},drag:function(e,n){t._trigger("drag",e,i(n))},stop:function(o,r){var a=r.offset.left-t.document.scrollLeft(),s=r.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(s>=0?"+":"")+s,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",o,i(r))}})},_makeResizable:function(){var t=this,n=this.options,i=n.resizable,o=this.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,i){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,a(i))},resize:function(e,n){t._trigger("resize",e,a(n))},stop:function(i,o){var r=t.uiDialog.offset(),s=r.left-t.document.scrollLeft(),l=r.top-t.document.scrollTop();n.height=t.uiDialog.height(),n.width=t.uiDialog.width(),n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",i,a(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,o={};e.each(t,(function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(o[e]=t)})),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,n){var i,o,r=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=r.is(":data(ui-draggable)"))&&!n&&r.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((o=r.is(":data(ui-resizable)"))&&!n&&r.resizable("destroy"),o&&"string"==typeof n&&r.resizable("option","handles",n),o||!1===n||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay((function(){t=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Progressbar 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(n.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Selectmenu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(20),n(12),n(16),n(6),n(17),n(9),n(8),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){n._rendered||n._refreshMenu()}))},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var i=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&i.index!==t.focusIndex&&(t._trigger("focus",e,{item:i}),t.isOpen||t._select(i,e)),t.focusIndex=i.index,t.button.attr("aria-activedescendant",t.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var n=e("<span>");return this._setText(n,t.label),this._addClass(n,"ui-selectmenu-text"),n},_renderMenu:function(t,n){var i=this,o="";e.each(n,(function(n,r){var a;r.optgroup!==o&&(a=e("<li>",{text:r.optgroup}),i._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(r.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(t),o=r.optgroup),i._renderItemData(t,r)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var i=e("<li>"),o=e("<div>",{title:n.element.attr("title")});return n.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(o,n.label),i.append(o).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,i,o=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),o+=":not(.ui-state-disabled)"),(i="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](o).eq(-1):n[e+"All"](o).eq(0)).length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1!==e?(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var n=this,i=[];t.each((function(t,o){i.push(n._parseOption(e(o),t))})),this.items=i},_parseOption:function(e,t){var n=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}])})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(7),n(6),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(n=i.values&&i.values.length||1,o.length>n&&(o.slice(n).remove(),o=o.slice(0,n)),t=o.length;t<n;t++)r.push("<span tabindex='0'></span>");this.handles=o.add(e(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,r,a,s,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var n=Math.abs(i-c.values(t));(o>n||o===n&&(t===c._lastChangedValue||c.values(t)===u.min))&&(o=n,r=e(this),a=t)})),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),s=r.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-r.width()/2,top:t.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_uiHash:function(e,t,n){var i={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==t?t:this.values(e),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var i,o=this.value(),r=this.values();this._hasMultipleValues()&&(i=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&!0===this.options.range&&(n=0===t?Math.min(i,n):Math.max(i,n)),r[t]=n),n!==o&&!1!==this._trigger("slide",e,this._uiHash(t,n,r))&&(this._hasMultipleValues()?this.values(t,n):this.value(n))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,o=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch("range"===t&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),this._super(t,n),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=o-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step;(e=Math.round((e-t)/n)*n+t)>this.options.max&&(e-=n),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,i,o,r,a=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,u={};this._hasMultipleValues()?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](u,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n})):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?(i-o)/(r-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},s.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(t){var n,i,o,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,r)))return}switch(o=this.options.step,n=i=this._hasMultipleValues()?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-o)}this._slide(t,r,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),this._removeClass(e(t.target),null,"ui-state-active"))}}})})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Spinner 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(21),n(1),n(6),n(10),n(4)],void 0===(r="function"==typeof(i=function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}return e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),n=this.element;return e.each(["min","max","step"],(function(e,i){var o=n.attr(i);null!=o&&o.length&&(t[i]=o)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){var n;function i(){this.element[0]===e.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=n,this._delay((function(){this.previous=n})))}n=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,i.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,n)}),e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return n=e-(t=null!==i.min?i.min:0),e=t+(n=Math.round(n/i.step)*i.step),e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var n,i,o;if("culture"===e||"numberFormat"===e)return n=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(n));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,t.up),o=this.buttons.last().find(".ui-icon"),this._removeClass(o,null,this.options.icons.down),this._addClass(o,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:t((function(e){this._super(e)})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&null!==(n=this._parse(e))&&(t||(n=this._adjustValue(n)),e=this._format(n)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t((function(e){this._stepUp(e)})),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t((function(e){this._stepDown(e)})),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:t((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!1!==e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),e.ui.spinner})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Tabs 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(12),n(6),n(10),n(8),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){var t;return e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(t=/#.*$/,function(e){var n,i;n=e.href.replace(t,""),i=location.href.replace(t,"");try{n=decodeURIComponent(n)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return e.hash.length>1&&n===i}),_create:function(){var t=this,n=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each((function(n,o){if(e(o).attr("aria-controls")===i)return t=n,!1})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!n&&0),!n&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(e.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,o),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",i)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){for(var i=this.tabs.length-1;-1!==e.inArray((t>i&&(t=0),t<0&&(t=i),t),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),(function(e){return n.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each((function(n,i){var o,r,a,s=e(i).uniqueId().attr("id"),l=e(i).closest("li"),c=l.attr("aria-controls");t._isLocal(i)?(a=(o=i.hash).substring(1),r=t.element.find(t._sanitizeSelector(o))):(o="#"+(a=l.attr("aria-controls")||e({}).uniqueId()[0].id),(r=t.element.find(o)).length||(r=t._createPanel(a)).insertAfter(t.panels[n-1]||t.tablist),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a,"aria-labelledby":s}),r.attr("aria-labelledby",s)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var n,i,o;for(e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),o=0;i=this.tabs[o];o++)n=e(i),!0===t||-1!==e.inArray(o,t)?(n.attr("aria-disabled","true"),this._addClass(n,null,"ui-state-disabled")):(n.removeAttr("aria-disabled"),this._removeClass(n,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),(function(e,t){n[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){n-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each((function(){n=Math.max(n,e(this).height("").height())})).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget).closest("li"),r=o[0]===i[0],a=r&&n.collapsible,s=a?e():this._getPanelForTab(o),l=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:l,newTab:a?e():o,newPanel:s};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!n.collapsible||!1===this._trigger("beforeActivate",t,c)||(n.active=!a&&this.tabs.index(o),this.active=r?e():o,this.xhr&&this.xhr.abort(),l.length||s.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(o),t),this._toggle(t,c))},_toggle:function(t,n){var i=this,o=n.newPanel,r=n.oldPanel;function a(){i.running=!1,i._trigger("activate",t,n)}function s(){i._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&i.options.show?i._show(o,i.options.show,a):(o.show(),a())}this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,(function(){i._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()})):(this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),s()),r.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),o.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;!1!==n&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,(function(e){return e!==t?e:null})):e.map(this.tabs,(function(e,n){return n!==t?n:null}))),this._setOptionDisabled(n))},disable:function(t){var n=this.options.disabled;if(!0!==n){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setOptionDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),s={tab:o,panel:a},l=function(e,t){"abort"===t&&i.panels.stop(!1,!0),i._removeClass(o,"ui-tabs-loading"),a.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(o,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done((function(e,t,o){setTimeout((function(){a.html(e),i._trigger("load",n,s),l(o,t)}),1)})).fail((function(e,t){setTimeout((function(){l(e,t)}),1)}))))},_ajaxSettings:function(t,n,i){var o=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,r){return o._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:r},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(6),n(9),n(8),n(1),n(4)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(n,i);-1!==o&&i.splice(o,1),t.removeData("ui-tooltip-id"),(i=e.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var i=this;this._super(t,n),"content"===t&&e.each(this.tooltips,(function(e,t){i._updateContent(t.element)}))},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i.element[0],t.close(o,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})),this.disabledTitles=e([])},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each((function(){var t,i=e(this);i.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))})),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,o=this,r=t?t.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(t,e,i);(n=i.call(e[0],(function(n){o._delay((function(){e.data("ui-tooltip-open")&&(t&&(t.type=r),this._open(t,e,n))}))})))&&this._open(t,e,n)},_open:function(t,n,i){var o,r,a,s,l=e.extend({},this.options.position);function c(e){l.of=e,r.is(":hidden")||r.position(l)}i&&((o=this._find(n))?o.tooltip.find(".ui-tooltip-content").html(i):(n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),r=o.tooltip,this._addDescribedBy(n,r.attr("id")),r.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(s=e("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:c}),c(t)):r.position(e.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval((function(){r.is(":visible")&&(c(l.of),clearInterval(a))}),e.fx.interval)),this._trigger("open",t,{tooltip:r})))},_registerCloseHandlers:function(t,n){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,n,i)},close:function(t){var n,i=this,o=e(t?t.currentTarget:this.element),r=this._find(o);r?(n=r.tooltip,r.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),r.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,(function(){i._removeTooltip(e(this))})),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]})),r.closing=!0,this._trigger("close",t,{tooltip:n}),r.hiding||(r.closing=!1))):o.removeData("ui-tooltip-open")},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),i=e("<div>").appendTo(n),o=n.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[o]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,(function(n,i){var o=e.Event("blur"),r=i.element;o.target=o.currentTarget=r[0],t.close(o,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title")||r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Blind 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("blind","hide",(function(t,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=e(this),r=t.direction||"up",a=o.cssClip(),s={clip:e.extend({},a)},l=e.effects.createPlaceholder(o);s.clip[i[r][0]]=s.clip[i[r][1]],"show"===t.mode&&(o.cssClip(s.clip),l&&l.css(e.effects.clipToBox(s)),s.clip=a),l&&l.animate(e.effects.clipToBox(s),t.duration,t.easing),o.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Bounce 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("bounce",(function(t,n){var i,o,r,a=e(this),s=t.mode,l="hide"===s,c="show"===s,u=t.direction||"up",d=t.distance,p=t.times||5,h=2*p+(c||l?1:0),f=t.duration/h,g=t.easing,m="up"===u||"down"===u?"top":"left",v="up"===u||"left"===u,b=0,y=a.queue().length;for(e.effects.createPlaceholder(a),r=a.css(m),d||(d=a["top"===m?"outerHeight":"outerWidth"]()/3),c&&((o={opacity:1})[m]=r,a.css("opacity",0).css(m,v?2*-d:2*d).animate(o,f,g)),l&&(d/=Math.pow(2,p-1)),(o={})[m]=r;b<p;b++)(i={})[m]=(v?"-=":"+=")+d,a.animate(i,f,g).animate(o,f,g),d=l?2*d:d/2;l&&((i={opacity:0})[m]=(v?"-=":"+=")+d,a.animate(i,f,g)),a.queue(n),e.effects.unshift(a,y,h+1)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Clip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("clip","hide",(function(t,n){var i,o={},r=e(this),a=t.direction||"vertical",s="both"===a,l=s||"horizontal"===a,c=s||"vertical"===a;i=r.cssClip(),o.clip={top:c?(i.bottom-i.top)/2:i.top,right:l?(i.right-i.left)/2:i.right,bottom:c?(i.bottom-i.top)/2:i.bottom,left:l?(i.right-i.left)/2:i.left},e.effects.createPlaceholder(r),"show"===t.mode&&(r.cssClip(o.clip),o.clip=i),r.animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Drop 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("drop","hide",(function(t,n){var i,o=e(this),r="show"===t.mode,a=t.direction||"left",s="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a?"-=":"+=",c="+="===l?"-=":"+=",u={opacity:0};e.effects.createPlaceholder(o),i=t.distance||o["top"===s?"outerHeight":"outerWidth"](!0)/2,u[s]=l+i,r&&(o.css(u),u[s]=c+i,u.opacity=1),o.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Explode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("explode","hide",(function(t,n){var i,o,r,a,s,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=c,d=e(this),p="show"===t.mode,h=d.show().css("visibility","hidden").offset(),f=Math.ceil(d.outerWidth()/u),g=Math.ceil(d.outerHeight()/c),m=[];function v(){m.push(this),m.length===c*u&&(d.css({visibility:"visible"}),e(m).remove(),n())}for(i=0;i<c;i++)for(a=h.top+i*g,l=i-(c-1)/2,o=0;o<u;o++)r=h.left+o*f,s=o-(u-1)/2,d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*f,top:-i*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:g,left:r+(p?s*f:0),top:a+(p?l*g:0),opacity:p?0:1}).animate({left:r+(p?0:s*f),top:a+(p?0:l*g),opacity:p?1:0},t.duration||500,t.easing,v)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Fade 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("fade","toggle",(function(t,n){var i="show"===t.mode;e(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Fold 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("fold","hide",(function(t,n){var i=e(this),o=t.mode,r="show"===o,a="hide"===o,s=t.size||15,l=/([0-9]+)%/.exec(s),c=t.horizFirst?["right","bottom"]:["bottom","right"],u=t.duration/2,d=e.effects.createPlaceholder(i),p=i.cssClip(),h={clip:e.extend({},p)},f={clip:e.extend({},p)},g=[p[c[0]],p[c[1]]],m=i.queue().length;l&&(s=parseInt(l[1],10)/100*g[a?0:1]),h.clip[c[0]]=s,f.clip[c[0]]=s,f.clip[c[1]]=0,r&&(i.cssClip(f.clip),d&&d.css(e.effects.clipToBox(f)),f.clip=p),i.queue((function(n){d&&d.animate(e.effects.clipToBox(h),u,t.easing).animate(e.effects.clipToBox(f),u,t.easing),n()})).animate(h,u,t.easing).animate(f,u,t.easing).queue(n),e.effects.unshift(i,m,4)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Highlight 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("highlight","show",(function(t,n){var i=e(this),o={backgroundColor:i.css("backgroundColor")};"hide"===t.mode&&(o.opacity=0),e.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Puff 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5),n(33)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("puff","hide",(function(t,n){var i=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,i,n)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Pulsate 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("pulsate","show",(function(t,n){var i=e(this),o=t.mode,r="show"===o,a=r||"hide"===o,s=2*(t.times||5)+(a?1:0),l=t.duration/s,c=0,u=1,d=i.queue().length;for(!r&&i.is(":visible")||(i.css("opacity",0).show(),c=1);u<s;u++)i.animate({opacity:c},l,t.easing),c=1-c;i.animate({opacity:c},l,t.easing),i.queue(n),e.effects.unshift(i,d,s+1)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Shake 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("shake",(function(t,n){var i=1,o=e(this),r=t.direction||"left",a=t.distance||20,s=t.times||3,l=2*s+1,c=Math.round(t.duration/l),u="up"===r||"down"===r?"top":"left",d="up"===r||"left"===r,p={},h={},f={},g=o.queue().length;for(e.effects.createPlaceholder(o),p[u]=(d?"-=":"+=")+a,h[u]=(d?"+=":"-=")+2*a,f[u]=(d?"-=":"+=")+2*a,o.animate(p,c,t.easing);i<s;i++)o.animate(h,c,t.easing).animate(f,c,t.easing);o.animate(h,c,t.easing).animate(p,c/2,t.easing).queue(n),e.effects.unshift(o,g,l+1)}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Slide 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){return e.effects.define("slide","show",(function(t,n){var i,o,r=e(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0),p={};e.effects.createPlaceholder(r),i=r.cssClip(),o=r.position()[c],p[c]=(u?-1:1)*d+o,p.clip=r.cssClip(),p.clip[a[l][1]]=p.clip[a[l][0]],"show"===s&&(r.cssClip(p.clip),r.css(c,p[c]),p.clip=i,p[c]=o),r.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}))})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i,o,r;
/*!
 * jQuery UI Effects Transfer 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(0),n(1),n(5)],void 0===(r="function"==typeof(i=function(e){var t;return!1!==e.uiBackCompat&&(t=e.effects.define("transfer",(function(t,n){e(this).transfer(t,n)}))),t})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i=n(111);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,'/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n */.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default !important;pointer-events:none}.ui-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-icon-block{left:50%;margin-left:-8px;display:block}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}\n',""])},function(e,t,n){var i=n(113);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Draggable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */.ui-draggable-handle{-ms-touch-action:none;touch-action:none}\n",""])},function(e,t,n){var i=n(115);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Resizable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:0.1px;display:block;-ms-touch-action:none;touch-action:none}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}\n",""])},function(e,t,n){var i=n(117);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Selectable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */.ui-selectable{-ms-touch-action:none;touch-action:none}.ui-selectable-helper{position:absolute;z-index:100;border:1px dotted black}\n",""])},function(e,t,n){var i=n(119);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Sortable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */.ui-sortable-handle{-ms-touch-action:none;touch-action:none}\n",""])},function(e,t,n){var i=n(121);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Accordion 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/accordion/#theming\n */.ui-accordion .ui-accordion-header{display:block;cursor:pointer;position:relative;margin:2px 0 0 0;padding:.5em .5em .5em .7em;font-size:100%}.ui-accordion .ui-accordion-content{padding:1em 2.2em;border-top:0;overflow:auto}\n",""])},function(e,t,n){var i=n(123);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Autocomplete 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/autocomplete/#theming\n */.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}\n",""])},function(e,t,n){var i=n(125);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Button 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/button/#theming\n */.ui-button{padding:.4em 1em;display:inline-block;position:relative;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2em;box-sizing:border-box;text-indent:-9999px;white-space:nowrap}input.ui-button.ui-button-icon-only{text-indent:0}.ui-button-icon-only .ui-icon{position:absolute;top:50%;left:50%;margin-top:-8px;margin-left:-8px}.ui-button.ui-icon-notext .ui-icon{padding:0;width:2.1em;height:2.1em;text-indent:-9999px;white-space:nowrap}input.ui-button.ui-icon-notext .ui-icon{width:auto;height:auto;text-indent:0;white-space:normal;padding:.4em 1em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}\n",""])},function(e,t,n){var i=n(127);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Checkboxradio 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/checkboxradio/#theming\n */.ui-checkboxradio-label .ui-icon-background{box-shadow:inset 1px 1px 1px #ccc;border-radius:.12em;border:none}.ui-checkboxradio-radio-label .ui-icon-background{width:16px;height:16px;border-radius:1em;overflow:visible;border:none}.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon{background-image:none;width:8px;height:8px;border-width:4px;border-style:solid}.ui-checkboxradio-disabled{pointer-events:none}\n",""])},function(e,t,n){var i=n(129);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Controlgroup 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/controlgroup/#theming\n */.ui-controlgroup{vertical-align:middle;display:inline-block}.ui-controlgroup>.ui-controlgroup-item{float:left;margin-left:0;margin-right:0}.ui-controlgroup>.ui-controlgroup-item:focus,.ui-controlgroup>.ui-controlgroup-item.ui-visual-focus{z-index:9999}.ui-controlgroup-vertical>.ui-controlgroup-item{display:block;float:none;width:100%;margin-top:0;margin-bottom:0;text-align:left}.ui-controlgroup-vertical .ui-controlgroup-item{box-sizing:border-box}.ui-controlgroup .ui-controlgroup-label{padding:.4em 1em}.ui-controlgroup .ui-controlgroup-label span{font-size:80%}.ui-controlgroup-horizontal .ui-controlgroup-label+.ui-controlgroup-item{border-left:none}.ui-controlgroup-vertical .ui-controlgroup-label+.ui-controlgroup-item{border-top:none}.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content{border-right:none}.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content{border-bottom:none}.ui-controlgroup-vertical .ui-spinner-input{width:75%;width:calc( 100% - 2.4em)}.ui-controlgroup-vertical .ui-spinner .ui-spinner-up{border-top-style:solid}\n",""])},function(e,t,n){var i=n(131);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Datepicker 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/datepicker/#theming\n */.ui-datepicker{width:17em;padding:.2em .2em 0;display:none}.ui-datepicker .ui-datepicker-header{position:relative;padding:.2em 0}.ui-datepicker .ui-datepicker-prev,.ui-datepicker .ui-datepicker-next{position:absolute;top:2px;width:1.8em;height:1.8em}.ui-datepicker .ui-datepicker-prev-hover,.ui-datepicker .ui-datepicker-next-hover{top:1px}.ui-datepicker .ui-datepicker-prev{left:2px}.ui-datepicker .ui-datepicker-next{right:2px}.ui-datepicker .ui-datepicker-prev-hover{left:1px}.ui-datepicker .ui-datepicker-next-hover{right:1px}.ui-datepicker .ui-datepicker-prev span,.ui-datepicker .ui-datepicker-next span{display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.ui-datepicker .ui-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.ui-datepicker .ui-datepicker-title select{font-size:1em;margin:1px 0}.ui-datepicker select.ui-datepicker-month,.ui-datepicker select.ui-datepicker-year{width:45%}.ui-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.ui-datepicker th{padding:.7em .3em;text-align:center;font-weight:bold;border:0}.ui-datepicker td{border:0;padding:1px}.ui-datepicker td span,.ui-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.ui-datepicker .ui-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.ui-datepicker .ui-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current{float:left}.ui-datepicker.ui-datepicker-multi{width:auto}.ui-datepicker-multi .ui-datepicker-group{float:left}.ui-datepicker-multi .ui-datepicker-group table{width:95%;margin:0 auto .4em}.ui-datepicker-multi-2 .ui-datepicker-group{width:50%}.ui-datepicker-multi-3 .ui-datepicker-group{width:33.3%}.ui-datepicker-multi-4 .ui-datepicker-group{width:25%}.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header{border-left-width:0}.ui-datepicker-multi .ui-datepicker-buttonpane{clear:left}.ui-datepicker-row-break{clear:both;width:100%;font-size:0}.ui-datepicker-rtl{direction:rtl}.ui-datepicker-rtl .ui-datepicker-prev{right:2px;left:auto}.ui-datepicker-rtl .ui-datepicker-next{left:2px;right:auto}.ui-datepicker-rtl .ui-datepicker-prev:hover{right:1px;left:auto}.ui-datepicker-rtl .ui-datepicker-next:hover{left:1px;right:auto}.ui-datepicker-rtl .ui-datepicker-buttonpane{clear:right}.ui-datepicker-rtl .ui-datepicker-buttonpane button{float:left}.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,.ui-datepicker-rtl .ui-datepicker-group{float:right}.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header{border-right-width:0;border-left-width:1px}.ui-datepicker .ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat;left:.5em;top:.3em}\n",""])},function(e,t,n){var i=n(133);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Dialog 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/dialog/#theming\n */.ui-dialog{position:absolute;top:0;left:0;padding:.2em;outline:0}.ui-dialog .ui-dialog-titlebar{padding:.4em 1em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:20px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em 1em;background:none;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-n{height:2px;top:0}.ui-dialog .ui-resizable-e{width:2px;right:0}.ui-dialog .ui-resizable-s{height:2px;bottom:0}.ui-dialog .ui-resizable-w{width:2px;left:0}.ui-dialog .ui-resizable-se,.ui-dialog .ui-resizable-sw,.ui-dialog .ui-resizable-ne,.ui-dialog .ui-resizable-nw{width:7px;height:7px}.ui-dialog .ui-resizable-se{right:0;bottom:0}.ui-dialog .ui-resizable-sw{left:0;bottom:0}.ui-dialog .ui-resizable-ne{right:0;top:0}.ui-dialog .ui-resizable-nw{left:0;top:0}.ui-draggable .ui-dialog-titlebar{cursor:move}\n",""])},function(e,t,n){var i=n(135);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,'/*!\n * jQuery UI Menu 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/menu/#theming\n */.ui-menu{list-style:none;padding:0;margin:0;display:block;outline:0}.ui-menu .ui-menu{position:absolute}.ui-menu .ui-menu-item{margin:0;cursor:pointer;list-style-image:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}.ui-menu .ui-menu-item-wrapper{position:relative;padding:3px 1em 3px .4em}.ui-menu .ui-menu-divider{margin:5px 0;height:0;font-size:0;line-height:0;border-width:1px 0 0 0}.ui-menu .ui-state-focus,.ui-menu .ui-state-active{margin:-1px}.ui-menu-icons{position:relative}.ui-menu-icons .ui-menu-item-wrapper{padding-left:2em}.ui-menu .ui-icon{position:absolute;top:0;bottom:0;left:.2em;margin:auto 0}.ui-menu .ui-menu-icon{left:auto;right:0}\n',""])},function(e,t,n){var i=n(137);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,'/*!\n * jQuery UI Progressbar 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/progressbar/#theming\n */.ui-progressbar{height:2em;text-align:left;overflow:hidden}.ui-progressbar .ui-progressbar-value{margin:-1px;height:100%}.ui-progressbar .ui-progressbar-overlay{background:url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");height:100%;filter:alpha(opacity=25);opacity:0.25}.ui-progressbar-indeterminate .ui-progressbar-value{background-image:none}\n',""])},function(e,t,n){var i=n(139);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Selectmenu 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/selectmenu/#theming\n */.ui-selectmenu-menu{padding:0;margin:0;position:absolute;top:0;left:0;display:none}.ui-selectmenu-menu .ui-menu{overflow:auto;overflow-x:hidden;padding-bottom:1px}.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup{font-size:1em;font-weight:bold;line-height:1.5;padding:2px 0.4em;margin:0.5em 0 0 0;height:auto;border:0}.ui-selectmenu-open{display:block}.ui-selectmenu-text{display:block;margin-right:20px;overflow:hidden;text-overflow:ellipsis}.ui-selectmenu-button.ui-button{text-align:left;white-space:nowrap;width:14em}.ui-selectmenu-icon.ui-icon{float:right;margin-top:0}\n",""])},function(e,t,n){var i=n(141);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Slider 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slider/#theming\n */.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}\n",""])},function(e,t,n){var i=n(143);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Spinner 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/spinner/#theming\n */.ui-spinner{position:relative;display:inline-block;overflow:hidden;padding:0;vertical-align:middle}.ui-spinner-input{border:none;background:none;color:inherit;padding:.222em 0;margin:.2em 0;vertical-align:middle;margin-left:.4em;margin-right:2em}.ui-spinner-button{width:1.6em;height:50%;font-size:.5em;padding:0;margin:0;text-align:center;position:absolute;cursor:default;display:block;overflow:hidden;right:0}.ui-spinner a.ui-spinner-button{border-top-style:none;border-bottom-style:none;border-right-style:none}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}\n",""])},function(e,t,n){var i=n(145);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Tabs 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tabs/#theming\n */.ui-tabs{position:relative;padding:.2em}.ui-tabs .ui-tabs-nav{margin:0;padding:.2em .2em 0}.ui-tabs .ui-tabs-nav li{list-style:none;float:left;position:relative;top:0;margin:1px .2em 0 0;border-bottom-width:0;padding:0;white-space:nowrap}.ui-tabs .ui-tabs-nav .ui-tabs-anchor{float:left;padding:.5em 1em;text-decoration:none}.ui-tabs .ui-tabs-nav li.ui-tabs-active{margin-bottom:-1px;padding-bottom:1px}.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor{cursor:text}.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor{cursor:pointer}.ui-tabs .ui-tabs-panel{display:block;border-width:0;padding:1em 1.4em;background:none}\n",""])},function(e,t,n){var i=n(147);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/*!\n * jQuery UI Tooltip 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tooltip/#theming\n */.ui-tooltip{padding:8px;position:absolute;z-index:9999;max-width:300px}body .ui-tooltip{border-width:2px}\n",""])},function(e,t,n){n(149)},function(e,t,n){var i=n(150);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(2)(!1);var i=n(13),o=i(n(151)),r=i(n(152)),a=i(n(153)),s=i(n(154)),l=i(n(155)),c=i(n(156));t.push([e.i,"/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n *\n * To view and modify this theme, visit http://jqueryui.com/themeroller/\n */.ui-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget.ui-widget-content{border:1px solid #c5c5c5}.ui-widget-content{border:1px solid #ddd;background:#fff;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #ddd;background:#e9e9e9;color:#333;font-weight:bold}.ui-widget-header a{color:#333}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default,.ui-button,html .ui-button.ui-state-disabled:hover,html .ui-button.ui-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited,a.ui-button,a:link.ui-button,a:visited.ui-button,.ui-button{color:#454545;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus,.ui-button:hover,.ui-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited,a.ui-button:hover,a.ui-button:focus{color:#2b2b2b;text-decoration:none}.ui-visual-focus{box-shadow:0 0 3px 1px #5e9ed6}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active,a.ui-button:active,.ui-button:active,.ui-button.ui-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.ui-icon-background,.ui-state-active .ui-icon-background{border:#003eff;background-color:#fff}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#fff;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #dad55e;background:#fffa90;color:#777620}.ui-state-checked{border:1px solid #dad55e;background:#fffa90}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#777620}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#5f3f3f}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#5f3f3f}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url("+o+")}.ui-widget-header .ui-icon{background-image:url("+o+")}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon,.ui-button:hover .ui-icon,.ui-button:focus .ui-icon{background-image:url("+r+")}.ui-state-active .ui-icon,.ui-button:active .ui-icon{background-image:url("+a+")}.ui-state-highlight .ui-icon,.ui-button .ui-state-highlight.ui-icon{background-image:url("+s+")}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url("+l+")}.ui-button .ui-icon{background-image:url("+c+")}.ui-icon-blank{background-position:16px 16px}.ui-icon-caret-1-n{background-position:0 0}.ui-icon-caret-1-ne{background-position:-16px 0}.ui-icon-caret-1-e{background-position:-32px 0}.ui-icon-caret-1-se{background-position:-48px 0}.ui-icon-caret-1-s{background-position:-65px 0}.ui-icon-caret-1-sw{background-position:-80px 0}.ui-icon-caret-1-w{background-position:-96px 0}.ui-icon-caret-1-nw{background-position:-112px 0}.ui-icon-caret-2-n-s{background-position:-128px 0}.ui-icon-caret-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-65px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-65px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:1px -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:3px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:3px}.ui-widget-overlay{background:#aaa;opacity:0.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEVEREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREQf23IJAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUEec/kAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEX////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uKVtWAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEV3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diBVLkeJAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEXMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADP1XLPAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEV3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3czPLQ+AAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";angular.module("evtviewer.core",[])},function(e,t,n){"use strict";angular.module("evtviewer.core").constant("GLOBALDEFAULTCONF",{test:{active:!1},debugAllModules:!0,debugConf:{log:!0,info:!0,warn:!0,debug:!0},modules:{interface:{active:!0}},configUrl:"./config/config.json",dataUrl:"",logoUrl:"",enableXMLdownload:!0,sourcesUrl:"",sourcesTextsUrl:"",visCollSvg:"",analoguesUrl:"",visCollTextUrl:"",visCollImageList:"",visCollStyleUrl:"",visCollDataModel:"",preferredWitness:"A",skipWitnesses:"",indexTitle:"EVT Critical Viewer",webSite:"",editionType:"critical",defaultEdition:"critical",showEditionLevelSelector:!0,availableEditionLevel:[{value:"critical",label:"Critical",title:"Critical edition",visible:!0},{value:"diplomatic",label:"Diplomatic",title:"Diplomatic edition",visible:!0},{value:"interpretative",label:"Interpretative",title:"Interpretative edition",visible:!0}],showDocumentSelector:!0,defaultViewMode:"readingTxt",availableViewModes:[{label:"READING_TEXT",icon:"reading-txt",viewMode:"readingTxt",visible:!0},{label:"MULTIPLE_RECENSIONS",icon:"mode-versions",viewMode:"versions",visible:!0},{label:"IMAGE_TEXT",icon:"mode-imgTxt",viewMode:"imgTxt",visible:!0},{label:"TEXT_TEXT",icon:"mode-txtTxt",viewMode:"txtTxt",visible:!1},{label:"COLLATION",icon:"mode-collation",viewMode:"collation",visible:!0},{label:"SOURCE_TEXT",icon:"mode-srcTxt",viewMode:"srcTxt",visible:!0},{label:"3DHOP",icon:"mode-tdhop",viewMode:"tdhop",visible:!0}],toolHeatMap:!0,toolPinAppEntries:!1,toolImageTextLinking:!0,viscollButton:!1,thumbnailsButton:!0,listDef:"<listWit>, <listChange>",versionDef:"<witness>, <change>",fragmentMilestone:"<witStart>, <witEnd>",lacunaMilestone:"<lacunaStart>, <lacunaEnd>",possibleVariantFilters:"type, cause, hand",possibleLemmaFilters:"resp, cert",notSignificantVariant:"<orig>, <sic>, [type=orthographic]",loadCriticalEntriesImmediately:!0,maxWitsLoadTogether:5,versions:[],witnessesGroups:[{groupName:"Grp_1",witnesses:["V","P","N","M","G","C","R"]},{groupName:"Grp_2",witnesses:["F","D","O","W","M5mg","B","U"]}],quoteDef:"<quote>",analogueDef:"<seg>,<ref[type=parallelPassage]>",showReadingExponent:!0,showInlineCriticalApparatus:!0,showInlineSources:!1,showInlineAnalogues:!1,variantColors:{},filterColors:{},genericColors:["rgb(52, 197, 173)","rgb(238, 194, 66)","rgb(253, 153, 54)","rgb(253, 95, 58)","rgb(235, 77, 153)","rgb(252, 144, 172)","rgb(171, 99, 219)","rgb(67, 135, 217)","rgb(163, 207, 81)","rgb(238, 194, 66)","rgb(228, 99, 220)","rgb(124, 113, 232)"],variantColorLight:"rgb(208, 220, 255)",variantColorDark:"rgb(101, 138, 255)",heatmapColor:"rgb(255, 108, 63)",xsltUrl:"",defaultBibliographicStyle:"Chicago",allowedBibliographicStyles:{Chicago:{label:"Chicago",enabled:!0},APA:{label:"APA",enabled:!1},MLA:{label:"MLA",enabled:!0}},bibliographicEntriesSortBy:{Author:"BIBLIOGRAPHY.AUTHOR",Year:"BIBLIOGRAPHY.YEAR",Title:"BIBLIOGRAPHY.TITLE",Publisher:"BIBLIOGRAPHY.PUBLISHER"},bibliographySortOrder:{ASC:"BIBLIOGRAPHY.ASC",DESC:"BIBLIOGRAPHY.DESC"},namedEntitiesSelector:!0,namedEntitiesToHandle:[],otherEntitiesToHandle:[],languages:["en","it"],showObjectSelector:!0,tdhopViewerOptions:{name:"Bewcastle",url:"data/3Dmodels/multires/bewcastle.nxz",mesh:"Bewcastle",toolHome:!0,toolZoomin:!0,toolZoomout:!0,toolLighting:!0,toolLightControl:!0,toolMeasure:!0,toolPickPoint:!0,toolPlaneSections:!0,toolSolidColor:!0,toolCamera:!0,toolFullScreen:!0}})},function(e,t,n){"use strict";(function(e){angular.module("evtviewer.core").provider("Utils",(function(){this.deepExtend=function e(t,n){for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?(t[i]=t[i]||{},e(t[i],n[i])):t[i]=angular.copy(n[i]);return t},this.deepExtendSkipDefault=function e(t,n){for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?(t[i]=t[i]||{},e(t[i],n[i])):"dataUrl"===i?""!==n[i]&&(t[i]=angular.copy(n[i])):"NONE"===n[i]||"NULL"===n[i]?t[i]="":""!==n[i]&&(t[i]=angular.copy(n[i]));return t},this.getElementsBetweenTree=function(e,t){for(var n,i=this.getCommonAncestor(e,t),o=[];e.parentNode!==i;){for(n=e;n.nextSibling;)o.push(n=n.nextSibling);e=e.parentNode}for(var r=[];t.parentNode!==i;){for(n=t;n.previousSibling;)r.push(n=n.previousSibling);t=t.parentNode}for(r.reverse();(e=e.nextSibling)!==t;)o.push(e);return o.concat(r)},this.getCommonAncestor=function(t,n){for(var i=e(t).parents().addBack();n;){if(-1!==i.index(n))return n;n=n.parentNode}return null},this.isNestedInElem=function(e,t){return!(null===e.parentNode||void 0===e.parentNode||!e.parentNode.tagName)&&("text"!==e.parentNode.tagName&&(e.parentNode.tagName.toLowerCase()===t.toLowerCase()||this.isNestedInElem(e.parentNode,t)))},this.isNestedInClassElem=function(e,t){return!(null===e.parentNode||void 0===e.parentNode||!e.parentNode.className)&&(""!==e.parentNode.className&&(e.parentNode.className.indexOf(t)>=0||this.isNestedInElem(e.parentNode,t)))};var t=function(){var e=Math.floor(256*Math.random()).toString(16);return("0"+String(e)).substr(-2)};this.getRandomColor=function(e){if("hex"===e)return"#"+t()+t()+t();if("rgb"===e){var n=[256*Math.random(),256*Math.random(),256*Math.random()],i=[255,255,255];return"rgb("+[n[0]+i[0],n[1]+i[1],n[2]+i[2]].map((function(e){return Math.round(e/2)})).join(",")+")"}},this.decodeHTMLEntities=function(e){var t=document.createElement("div");return e&&"string"==typeof e&&(e=(e=e.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,"")).replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),t.innerHTML=e,e=t.textContent,t.textContent=""),t=void 0,e},this.cleanText=function(e){return e=this.cleanPunctuation(e),e=this.cleanSpace(e)},this.cleanSpace=function(e){for(var t,n=/\s\s/;e.match(n);)t=e.replace(n," "),e=t;return" "===e.charAt(0)&&(e=e.substring(1)),e},this.cleanPunctuation=function(e){for(var t,n=/[.,#!$%\^&\*;:{}\[\]\'\"=\-_`~()]/;e.match(n);)t=e.replace(n,""),e=t;return e},this.replaceStringAt=function(e,t,n,i,o){return e.slice(0,i)+e.slice(i,o).replace(t,n)+e.slice(o)},this.$get=function(){return{deepExtend:this.deepExtend,deepExtendSkipDefault:this.deepExtendSkipDefault,getRandomColor:this.getRandomColor,cleanText:this.cleanText,cleanSpace:this.cleanSpace,cleanPunctuation:this.cleanPunctuation,replaceStringAt:this.replaceStringAt,DOMutils:{getElementsBetweenTree:this.getElementsBetweenTree,getCommonAncestor:this.getCommonAncestor,isNestedInElem:this.isNestedInElem,isNestedInClassElem:this.isNestedInClassElem,decodeHTMLEntities:this.decodeHTMLEntities}}}}))}).call(this,n(0))},function(e,t,n){"use strict";angular.module("evtviewer.core").constant("BASECONFIG",{debug:!1}).provider("config",["UtilsProvider","GLOBALDEFAULTCONF","BASECONFIG",function(e,t,n){var i={};e.deepExtend(i,t),void 0!==window.globalConfig&&angular.isObject(window.globalConfig)&&e.deepExtend(i,window.globalConfig),void 0===window.GLOBALCONFIG&&(window.GLOBALCONFIG=i),this.makeDefaults=function(t,o){var r=angular.copy(n);return void 0!==o&&e.deepExtend(r,o),void 0!==i.modules[t]&&e.deepExtend(r,i.modules[t]),i.modules[t]=r,r},this.isValid=function(){return!0},this.isModuleActive=function(e){return angular.isObject(i.modules[e])&&!0===i.modules[e].active},this.extendDefault=function(t){e.deepExtendSkipDefault(i,t)},this.$get=function(){return i.isValid=this.isValid,i.isModuleActive=this.isModuleActive,i.extendDefault=this.extendDefault,i}}])},function(e,t,n){"use strict";angular.module("evtviewer.core").run(["$log","config",function(e,t){function n(n,i,o){return function(){var r,a=e.enabledContexts[o],s=t.modules[o];if(!1!==t.debugConf[i]&&(r=void 0!==a?a:void 0!==s&&void 0!==s.debug&&s.debug,!0===t.debugAllModules||!0===r)){var l=Array.prototype.slice.call(arguments);l.unshift("#"+o+"#"),n.apply(null,l)}}}function i(e,t){return function(){var n=function(){try{throw Error("")}catch(e){return e}},i=n(),o=i.stack.split("\n")[4],r=Array.prototype.slice.call(arguments);r.unshift("#EVTViewer "+t+"#"),r.push(o),e.apply(null,r)}}e.enabledContexts=[],e.getInstance=function(t){return{log:n(e.log,"log",t),info:n(e.info,"info",t),warn:n(e.warn,"warn",t),debug:n(e.debug,"debug",t),error:i(e.error,t),enableLogging:function(n){e.enabledContexts[t]=n}}}}])},function(e,t,n){"use strict";angular.module("evtviewer.core").service("eventDispatcher",["$q",function(e){var t={},n={};return t.sendEvent=function(t,i){var o,r,a=[],s=0;return n[t]&&angular.forEach(n[t],(function(t){void 0!==t&&(r={args:i,resolve:function(e){s<a.length&&(a[s].resolve(e),s++)},reject:function(e){s<a.length&&(a[s].reject(e),s++)}},a.push(e.defer()),t.apply(null,[r]))})),o=a.map((function(e){return e.promise})),e.all(o)},t.addListener=function(e,t){return n[e]||(n[e]=[]),n[e].push(t),[e,t]},t.addListeners=function(e,n){var i=[];for(var o in e)i.push(t.addListener(e[o],n));return i},t.removeListener=function(e){var t=e[0],i=e[1];n[t]&&angular.forEach(n[t],(function(e,o){e===i&&(n[t].splice(o,1),0===n[t].length&&delete n[t])}))},t.getListeners=function(){var e=[];for(var t in n)e.push(t);return e},t}])},function(e,t,n){"use strict";angular.module("evtviewer.core").config(["$compileProvider",function(e){e.directive("compile",["$compile",function(e){return function(t,n,i){t.$watch((function(e){return e.$eval(i.compile)}),(function(i){n.html(i),e(n.contents())(t)}))}}])}])},function(e,t,n){"use strict";angular.module("evtviewer.core").filter("capitalize",(function(){return function(e,t){var n=t?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return e&&e.replace?e.replace(n,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})):""}})).filter("camelToSpaces",(function(){return function(e,t){return e&&e.replace?e.replace(/\s+/g," ").replace(/([a-z\d])([A-Z])/g,"$1 $2"):""}})).filter("underscoresToSpaces",(function(){return function(e,t){return e&&e.replace?e.replace(/\_+/g," "):""}})).filter("uppercase",(function(){return function(e,t){return e&&e.toUpperCase?e.toUpperCase():""}})).filter("stringtohtml",(function(){return function(e,t){return e&&e.replace?e.replace(/="[^"]+"/g,(function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")})):""}})).filter("newLinesToSpaces",(function(){return function(e){return e.replace(/\n/g," ")}})).filter("normalizeMultispaces",(function(){return function(e){return e.replace(/\s{2,}/g," ")}}))},function(e,t,n){"use strict";angular.module("evtviewer.core").constant("XPATH",{getLineNodes:".//node()[self::lb or self::p or self::pb or self::head]",getParLineNodes:".//node()[self::p or self:l or self::pb or self::head]",getPrevLb:"count(.//preceding::lb[ancestor::body])",getPrevBody:"count(.//preceding::body)",getPrevPb:"count(.//preceding::pb)",getDiplomaticNodes:".//node()[self::lb or self::pb or self::g or self::text()][not((ancestor::corr or ancestor::reg or ancestor::expan or ancestor::ex))]",getDiplomaticChildNodes:".//node()[self::g or self::pb or self::text()][not((ancestor::corr or ancestor::reg or ancestor::expan or ancestor::ex))]",getInterpretativeNodes:"//body//node()[self::lb or self::pb or self::g or self::text()][not(ancestor::sic or ancestor::orig or ancestor::abbr or ancestor::am)]",getInterpretativeChildNodes:".//node()[self::g or self::pb or self::text()][not(ancestor::sic or ancestor::orig or ancestor::abbr or ancestor::am)]",getChildNodes:".//node()[self::g or self::pb or self::text()]",getTextGlyphNodes:".//node()[self::g or self::lb or self::pb or self::text()]",getGlyphNodes:".//node()[self::g]",getCurrentTextNode:".//ancestor::text[1]",ns:{getLineNodes:".//node()[self::ns:lb or self::ns:p or self::ns:pb or self::ns:head]",getParLineNodes:".//node()[self::ns:p or self::ns:l or self::ns:pb or self::ns:head]",getPrevLb:"count(.//preceding::ns:lb[ancestor::ns:body])",getPrevBody:"count(.//preceding::ns:body)",getPrevP:"count(.//preceding::ns:p)",getDiplomaticNodes:".//node()[self::ns:lb or self::ns:pb or self::ns:g or self::text()][not((ancestor::ns:corr or ancestor::ns:reg or ancestor::ns:expan or ancestor::ns:ex))]",getDiplomaticChildNodes:".//node()[self::ns:g or self::ns:pb or self::text()][not((ancestor::ns:corr or ancestor::ns:reg or ancestor::ns:expan or ancestor::ns:ex))]",getInterpretativeNodes:".//node()[self::ns:lb or self::ns:pb or self::ns:g or self::text()][not(ancestor::ns:sic or ancestor::ns:orig or ancestor::ns:abbr or ancestor::ns:am)]",getInterpretativeChildNodes:".//node()[self::ns:g or self::ns:pb or self::text()][not(ancestor::ns:sic or ancestor::ns:orig or ancestor::ns:abbr or ancestor::ns:am)]",getChildNodes:".//node()[self::ns:g or self::ns:pb or self::text()]",getTextGlyphNodes:".//node()[self::ns:g or self::ns:lb or self::ns:pb or self::text()]",getGlyphNodes:".//node()[self::ns:g]",getCurrentTextNode:".//ancestor::ns:text[1]"}})},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler",[])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("baseData",["$log","$q","$http","config","xmlParser","evtParser","evtCriticalApparatusParser","evtSourcesParser","evtProjectInfoParser","evtPrimarySourcesParser","evtAnaloguesParser","evtDialog","evtBibliographyParser","evtNamedEntitiesParser","evtHotSpotParser","parsedData",function(e,t,n,i,o,r,a,s,l,c,u,d,p,h,f,g){var m,v={},b={XMLDocuments:[],XMLExtDocuments:[],XMLSrcDocuments:[],XMLStrings:[]},y=e.getInstance("baseData"),x={};v.addXMLString=function(e){var n=[];return n.push(w(e).promise),t.all(n)},v.getXML=function(){return m},v.getXMLDocuments=function(){return b.XMLDocuments},v.getXMLStrings=function(){return b.XMLStrings};var w=function(e){var n=t.defer();return e=e.replace(/<!--.*-->/gm,""),"TEI"===(m=o.parse(e)).documentElement.nodeName?(b.XMLStrings.push(e),_(m).promise.then((function(){b.XMLDocuments.push(m),A(m),y.log("XML TEI parsed and stored ",b.XMLDocuments),n.resolve("success")}))):(y.error("Something wrong with the XML"),n.resolve("success")),n};v.addXMLExtDocument=function(e,t){var n=o.parse(e);try{b.XMLStrings.push(e),b.XMLExtDocuments[t]=n,b.XMLExtDocuments.length++;r.parseExternalDocuments(n,t);y.log("External Files parsed and stored",b.XMLExtDocuments)}catch(e){y.log("Something wrong with the supplementary XML files "+e)}},v.addXMLSrcDocument=function(e,t){var n=o.parse(e);try{b.XMLStrings.push(e),b.XMLSrcDocuments[t]=n,b.XMLSrcDocuments.length++;r.parseExternalDocuments(n,t);y.log("Source file parsed and stored",b.XMLSrcDocuments)}catch(e){y.log("Something wrong with the supplementary XML files "+e)}},v.handleViscollSvg=function(e,t){var n=o.parse(e);r.parseSvgsForViscoll(n,t)},v.addViscollDataModel=function(e){var t=o.parse(e);r.parseViscollDatamodel(t)},v.addViscollImageList=function(e){var t=o.parse(e);r.parseViscollImageList(t)};var A=function(e){if(r.analyzeEncoding(e),c.parseZones(e),f.parseHotSpots(e),r.parseDocuments(e),a.parseWitnesses(e),""!==i.quoteDef){var n=[];n.push(s.parseQuotes(e)),t.all(n).then((function(){""===i.sourcesUrl?s.parseSources(e):s.parseSources(e,b.XMLExtDocuments.sources)}))}""!==i.analogueDef&&(""===i.analoguesUrl?u.parseAnalogues(e,""):u.parseAnalogues(e,b.XMLExtDocuments.analogues)),h.parseEntities(e),l.parseProjectInfo(e),p.parseBiblInfo(e),r.parseGlyphs(e),"internal"!==g.getEncodingDetail("variantEncodingLocation")&&(i.loadCriticalEntriesImmediately&&a.parseCriticalEntries(e),i.versions.length>1&&a.parseVersionEntries(e))},_=function(e){var r=t.defer(),a=i.dataUrl,s=0,l=e.getElementsByTagName("xi:include");if(a=a.substring(0,a.lastIndexOf("/")+1),l&&l.length>0){var c=l.length;angular.forEach(l,(function(e){var t=a+e.getAttribute("href"),i=e.getAttribute("xpointer");n.get(t).then((function(t){s++;var n,a=o.parse(t.data);if(i){var l=angular.element(a)[0];E(i,l),n=x[i]}else n=a.getElementsByTagName("text")[0];e.parentNode.replaceChild(n,e),s===c&&r.resolve("success")}),(function(t){var n=e.getElementsByTagName("fallback")[0],o=d.getById("errorMsg"),a=n?n.innerHTML:"";a+='<div style="text-align:center;">Warning! <br/> EVT could not work properly.</div>',o.updateContent(a),o.setTitle(i+" - XI:INCLUDE ERROR"),o.open(),r.resolve("success")}))}))}else r.resolve("success");return r},E=function e(t,n){n.childNodes.forEach((function(n){return n.attributes&&n.hasAttribute("xml:id")&&n.getAttribute("xml:id")===t?(x[t]=n,n):n.childNodes&&n.childNodes.length>0?e(t,n):void 0}))};return v}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("parsedData",["$log","config","Utils",function(e,t,n){var i={};e.getInstance("dataHandler").log("parsedData running");var o={},r={fileDescription:"",encodingDescription:"",textProfile:"",outsideMetadata:"",revisionHistory:"",msDesc:""},a={_indexes:[]},s={length:0,_indexes:[]},l=[],c={svgs:{_indexes:[]},quires:{_indexes:[]},imglist:{_indexes:[]},svgToLoad:[],loaded:!1},u={_indexes:[],length:0},d={length:0},p={length:0},h={length:0,_indexes:{corresp:{},subDivs:{},main:{}}},f={_indexes:{witnesses:[],groups:[],encodingStructure:[]}},g=t.genericColors,m={filtersCollection:{filters:{},length:0,forLemmas:0,forVariants:0,colors:[]},__allLoaded:!1,_maxVariance:0,_indexes:{encodingStructure:[],appEntries:[],exponents:[],depa:{start:{},end:{}}}},v={},b=[],y={_indexes:{encodingStructure:[],versionWitMap:{},versionId:{_name:{}}}},x={},w=!1,A={_indexes:[]},_={_indexes:[]},E={_indexes:[]},S={_collections:{_indexes:[]},_indexes:[]};i.getEncodingDetail=function(e){return o[e]},i.setEncodingDetail=function(e,t){o[e]=t},i.getNamedEntityTypeIcon=function(e){var t;switch(e){case"place":case"placeName":t="fa-map-marker";break;case"person":case"pers":case"persName":t="fa-user";break;case"org":case"orgName":t="fa-users";break;case"relation":t="fa-share-alt";break;default:t="fa-list-ul"}return t},i.addNamedEntitiesCollection=function(e){var t=e.id;if(void 0===S._collections[t]){var n=e&&e.type?e.type:"generic",o=i.getNamedEntityTypeIcon(n);S._collections[t]={_indexes:[],_listKeys:[],_title:e&&e.title?e.title:"",_type:n,_icon:o},S._collections._indexes.push(t)}},i.addNamedEntityInCollection=function(e,t,n){var i=e.id;void 0===S._collections[i]&&this.addNamedEntitiesCollection(e),void 0===S._collections[i][n]&&(S._collections[i][n]={_indexes:[]},S._collections[i]._listKeys.push(n));var o=t.id;S._collections[i][n][o]=t,S[o]={collectionId:i,listKey:n},S._indexes.push(o),S._collections[i]._indexes.push(o),S._collections[i][n]._indexes.push(o)},i.getNamedEntities=function(){return S},i.getNamedEntitiesCollection=function(){return S._collections},i.getNamedEntitiesCollectionByName=function(e){return S._collections[e]},i.getNamedEntitiesCollectionByNameAndPos=function(e,t){return S._collections[e][t]},i.getNamedEntity=function(e){var t;if(e){var n=S[e];void 0!==n&&void 0!==n.collectionId&&void 0!==n.listKey&&void 0!==S._collections[n.collectionId]&&void 0!==S._collections[n.collectionId][n.listKey]&&(t=S._collections[n.collectionId][n.listKey][e])}return t},i.getNamedEntityType=function(e){var t=e&&S[e]?S[e].collectionId:void 0,n=i.getNamedEntitiesCollectionByName(t);return n?n._type:"generic"};var T={_indexes:{encodingStructure:[],sourcesRef:{_id:[]}}},C={_indexes:{encodingStructure:[],quotesRef:{_id:[]},availableTexts:[],correspId:{}}},k={_indexes:{encodingStructure:[]},_refId:{_indexes:[]}};i.addPage=function(e,t){var n=e.value;if(void 0===s.length&&(s.length=0),""===e.value&&(n=e.value="page_"+(s.length+1)),void 0===s[n])e.docs=[t],s[s.length]=n,e.indexInCollection=s.length,s[n]=e,s.length++,s._indexes.push(n);else{var i=s[n];i.docs&&i.docs.indexOf(t)<0&&i.docs.push(t)}t&&""!==t&&void 0!==u[t]&&u[t].pages.push(n),l[s.length-1]={value:e.value,image:e.image,label:e.label,docs:e.docs}},i.getPages=function(){return s},i.getThumbnails=function(){return l},i.getPage=function(e){return s[e]},i.setPageText=function(e,t,n,i){var o=s[e];if(o){o.text||(o.text={});var r=o.text[t];void 0!==r&&void 0!==r[n]?r[n]+=i:void 0!==r?r[n]=i:(o.text[t]={},o.text[t][n]=i),o.docs&&o.docs.indexOf(t)<0&&o.docs.push(t)}},i.getPageText=function(e,t,n){var i=s[e];if(i&&i.text&&i.text[t])return i.text[t][n]},i.getPageImage=function(e){for(var t=[],n=0;n<t.length&&t[n].page!==e;)n++;return{}},i.addViscollSvg=function(e){var t=e.id||"svg_"+c.svgs._indexes.length;c.svgs[t]=e,c.quires[t]&&(c.quires[t].svg=e),c.svgs._indexes.push(t)},i.addViscollImageList=function(e){var t=e.id;c.imglist[t]=e,c.imglist._indexes.push(t)},i.addViscollQuire=function(e){var t=e.value;c.quires[t]=e,c.quires._indexes.push(t)},i.addViscollLeaf=function(e){var t=e.value,n=e.quire;c.quires[n].leaves[t]=e,c.quires[n].leaves._indexes.push(t)},i.setViscollSVGToLoad=function(e){c.svgToLoad=e},i.getViscollSVGToLoad=function(){return c.svgToLoad},i.updateLeafDataInQuire=function(e,t){if(c.quires[e].leaves[t.id])for(var n in t)c.quires[e].leaves[t.id][n]=t[n]},i.getViscollSvgs=function(){return c},i.setViscollSvgsLoaded=function(e){c.loaded=e},i.areViscollSvgsLoaded=function(){return c.loaded},i.getViscollSvg=function(e){return c[e]},i.addDocument=function(e){var t=e.value;""===e.value&&(t=e.value="doc_"+(u._indexes.length+1)),void 0===u[t]&&(u._indexes.push(t),u[t]=e)},i.getDocuments=function(){return u},i.getDocument=function(e){return u[e]},i.getPreviousDocument=function(e){var t=u._indexes.indexOf(e),n=u._indexes[t-1];return u[n]},i.addExternalDocument=function(e){var t=e.value;void 0===d.length&&(d.length=0),""===e.value&&(t=e.value="extDoc_"+(d.length+1)),void 0===d[t]&&(d[d.length]=t,d[t]=e,d.length++)},i.getExternalDocuments=function(){return d},i.getExternalDocument=function(e){return d[e]},i.addSourceDocument=function(e,t){var n=e.value;void 0===p.length&&(p.length=0),""===e.value&&(n=e.value=t),void 0===p[n]&&(p[p.length]=n,p[n]=e,p.length++)},i.getSourceDocuments=function(){return p},i.getSourceDocument=function(e){return p[e]},i.addDiv=function(e,t){var n=e.value;h[h.length]=n,h[n]=e,h.length++,u[t].divs.push(n),e.corresp&&angular.forEach(e.corresp,(function(t){h._indexes.corresp[t]||(h._indexes.corresp[t]=[]),h._indexes.corresp[t].push(e.value)})),e._isSubDiv||(h._indexes.subDivs[e.value]=e.subDivs||[],h._indexes.main[e.doc]||(h._indexes.main[e.doc]=[]),h._indexes.main[e.doc].push(e.value))},i.getDivs=function(){return h},i.getDiv=function(e){return h[e]},i.setCriticalEditionAvailability=function(e){w=e},i.isCriticalEditionAvailable=function(){return w},i.setEditions=function(e){b=e},i.addEdition=function(e){b.push(e)},i.getEditions=function(){return b},i.getEdition=function(e){for(var t,n=0;n<b.length&&void 0===t;)b[n].value===e&&(t=b[n]),n++;return t},i.addElementInWitnessCollection=function(e){var n=t.skipWitnesses.split(",").filter((function(e){return 0!==e.length}));e&&e.id&&n.indexOf(e.id)<0&&void 0===f[e.id]&&(f[e.id]=e,"group"===e._type?f._indexes.groups.push(e.id):f._indexes.witnesses.push(e.id),void 0===e._group&&f._indexes.encodingStructure.push(e.id))},i.addWitnessText=function(e,t,n){void 0!==f[e]&&(void 0===f[e].text&&(f[e].text={}),f[e].text[t]=n)},i.getWitnessText=function(e,t){if(void 0!==f[e]&&void 0!==f[e].text&&void 0!==f[e].text[t])return f[e].text[t]},i.getWitnessesList=function(){return f._indexes.witnesses},i.getWitnesses=function(){return f},i.getWitness=function(e){return f[e]},i.getWitnessPages=function(e){if(void 0!==f[e]){if(void 0===f[e].pages){for(var t={length:0},n=0;n<s.length;n++){var i=s[s[n]];i.ed==="#"+e&&(t[t.length]=s[n],t[s[n]]=i,t.length++)}f[e].pages=t}return f[e].pages}},i.isWitnessesGroup=function(e){return void 0!==f[e]&&"group"===f[e]._type},i.getWitnessesInGroup=function(e){var t=[];if(void 0!==f[e]&&"group"===f[e]._type){var n=f[e].content;for(var o in n){var r=n[o];i.isWitnessesGroup(r)?t.push.apply(t,i.getWitnessesInGroup(r)):t.push(r)}}return t},i.getWitnessesListFormatted=function(){var e,t=f._indexes.encodingStructure;e="<ul>";for(var n=0;n<t.length;n++){var i=f[t[n]];e+=L(i)}return e+="</ul>"};var L=function e(t){var n="",i="";if("witness"===t._type)n+="<li><div>",t.attributes&&t.attributes.n?i=t.attributes.n:t.sigla&&""!==t.sigla&&(i=t.sigla),n+="<strong>"+i+"</strong>",t.description&&(3===t.description.nodeType?(""!==t.description.textContent&&""!==i&&(n+=": "),n+=t.description.textContent):(""!==t.description.innerHTML&&""!==i&&(n+=": "),n+=t.description.innerHTML)),n+="</div></li>";else{n+="<li><div>",t.attributes&&t.attributes.n?i=t.attributes.n:t.sigla&&""!==t.sigla&&(i=t.sigla),n+="<strong>"+i+"</strong>",""!==i&&""!==t.name&&(n+=": "),n+=t.name,n+="</div><ul>";for(var o=t.content?t.content.length:0,r=0;r<o;r++){n+=e(f[t.content[r]])}n+="</ul>",n+="</li>"}return n};i.getCriticalTextsCollection=function(){return v},i.addCriticalText=function(e,t){v[t]=e},i.getCriticalText=function(e){return v[e]},i.resetCriticalEntries=function(){m={filtersCollection:{filters:{},length:0,forLemmas:0,forVariants:0,colors:[]},__allLoaded:!1,_maxVariance:0,_indexes:{encodingStructure:[],appEntries:[],exponents:[]}}};return i.addCriticalEntry=function(e){if(void 0===m[e.id]){m[e.id]=e,m._indexes.appEntries.push(e.id),e._subApp||m._indexes.encodingStructure.push(e.id);var t=function(){var e,t,n=m._indexes.appEntries.length;return n>26?(t=Math.floor(n/26)+96,e=n%26==0?"&#"+(t-1)+";z":"&#"+t+";&#"+(n%26+96)+";"):e="&#"+(n+96)+";",e}();m._indexes.exponents.push({appId:e.id,exponent:t}),m[e.id].exponent=t}e._variance>m._maxVariance&&(m._maxVariance=e._variance),"double-end-point"===o.variantEncodingMethod&&i.addCriticalEntryDepaInfo(e)},i.addCriticalEntryDepaInfo=function(e){if(m._indexes.depa||(m._indexes.depa={start:{},end:{}}),e.attributes.from){var t="#"===e.attributes.from.charAt(0)?e.attributes.from.substr(1):e.attributes.from;m._indexes.depa.start[e.id]=t}if(e.attributes.to){var n="#"===e.attributes.to.charAt(0)?e.attributes.to.substr(1):e.attributes.to;m._indexes.depa.end[e.id]=n}else"internal"===o.variantEncodingLocation?m._indexes.depa.end[e.id]=e.id:"external"===o.variantEncodingLocation&&e.attributes.from&&(m._indexes.depa.end[e.id]=e.attributes.from.substr(1))},i.setCriticalEntriesLoaded=function(e){m.__allLoaded=e},i.getCriticalEntries=function(){return m},i.getCriticalEntryById=function(e){return m[e]},i.getCriticalEntryExponent=function(e){var t=i.getCriticalEntryById(e);return t?t.exponent:""},i.getCriticalEntriesMaxVariance=function(){return m._maxVariance},i.getReadingAttributes=function(e,t){var n=[];if(void 0!==m[t].content[e]){n=m[t].attributes;var i=m[t].content[e].attributes;for(var o in i)n[o]=i[o]}return n},i.isSubApp=function(e){return m[e]._subApp},i.getGenericColorForAppEntry=function(e){var t=m.filtersCollection,o=g[e];if(void 0===t.colors||t.colors.indexOf(o)<0)o=g[e],g.splice(e,1);else{if(e>=t.colors.length-1){for(var r=n.getRandomColor("rgb");t.colors.indexOf(r)>=0;)r=n.getRandomColor("rgb");t.colors.push(r)}o=i.getGenericColorForAppEntry(e+1)}return o},i.addCriticalEntryFilter=function(e,n){var o=t.possibleVariantFilters,r=t.possibleLemmaFilters,a=m.filtersCollection;if((o.indexOf(e)>=0||r.indexOf(e)>=0)&&(void 0===a.filters[e]&&(a.filters[e]={name:e,possibleFor:{lemma:r.indexOf(e)>=0,variant:o.indexOf(e)>=0},values:{}}),void 0===a.filters[e].values[n])){var s;void 0!==t.variantColors[e]&&void 0!==t.variantColors[e][n]&&""!==t.variantColors[e][n]?(s=t.variantColors[e][n],g.indexOf(s)>=0&&g.splice(g.indexOf(s),1)):s=i.getGenericColorForAppEntry(0),s&&a.colors.push(s);var l={name:n,color:s};a.filters[e].values[n]=l,a.length++,o.indexOf(e)>=0&&a.forVariants++,r.indexOf(e)>=0&&a.forLemmas++}},i.getCriticalEntriesFiltersCollection=function(){return m.filtersCollection},i.getCriticalEntriesFilters=function(){return m.filtersCollection.filters},i.getCriticalEntriesFilterValues=function(e){return m.filtersCollection.filters[e]},i.getCriticalEntriesFilterColor=function(e,t){return m.filtersCollection.filters[e].values[t].color},i.addBibliographicRef=function(e){void 0===a[e.id]&&(a[e.id]=e,a._indexes.push(e.id))},i.getBibliographicRefsCollection=function(){return a},i.getBibliographicRefById=function(e){return a[e]},i.addVersionEntry=function(e){void 0===y[e.id]&&(y._indexes.encodingStructure.push(e.id),y[e.id]=e)},i.getVersionEntries=function(){return y},i.getVersionEntry=function(e){return y[e]},i.addVersionWitness=function(e,n){var i=y._indexes.versionWitMap;void 0===i[e]?(i[e]=[],i[e].push(n)):i[e].indexOf(n)<0&&i[e].push(n);var o=y._indexes.versionId,r=y._indexes.versionId._name;if(void 0===o[e]){var a="Version &#"+(65+t.versions.indexOf(e))+";";o[e]=a,r[a]=e}},i.addVersionText=function(e,t,n){void 0===x[t]?(x[t]={},x[t][n]=e):void 0===x[t][n]&&(x[t][n]=e)},i.getVersionText=function(e,t){return x[t][e]},i.updateProjectInfoContent=function(e,t){r[t]=e},i.getProjectInfo=function(){return r},i.addGlyph=function(e){var t,n=A._indexes;t=e&&""!==e.id?e.id:e.id="glyph_"+(n+1),void 0===A[t]&&(n[n.length]=t,A[t]=e,n.length++)},i.getGlyphs=function(){return A},i.getGlyph=function(e){return A[e]},i.getGlyphMappingForEdition=function(e,t){return A[e]?A[e].mapping[t]:void 0},i.addZone=function(e){var t,n=_._indexes;t=e&&""!==e.id?e.id:e.id="zone_"+(n+1),void 0===_[t]&&(n[n.length]=t,_[t]=e,n.length++)},i.getZones=function(){return _},i.getZone=function(e){return _[e]},i.addHotSpot=function(e){var t,n=E._indexes;t=e&&""!==e.id?e.id:e.id="hotspot_"+(n+1),void 0===E[t]&&(n[n.length]=t,E[t]=e,n.length++)},i.getHotSpots=function(){return E},i.getHotSpot=function(e){return E[e]},i.isITLAvailable=function(){return t.toolImageTextLinking&&_._indexes.length>0},i.addQuote=function(e){void 0===T[e.id]&&(T[e.id]=e,T._indexes.encodingStructure.push(e.id));var t=e._indexes.sourceRefId,n=(e._indexes.sourceId,i.getQuotes()._indexes.sourcesRef);if(t.length>0)for(var o=0;o<t.length;o++)void 0===n[t[o]]&&n._id.indexOf(t[o])<0?(n[t[o]]=[],n[t[o]].push(e.id),n._id.push(t[o])):n[t[o]].indexOf(e.id)<0&&n[t[o]].push(e.id);var r=e._indexes.correspId,a=C._indexes.correspId;if(Object.keys(r).length>0)for(var s=0;s<Object.keys(r).length;s++)for(var l=Object.keys(r)[s],c=0;c<r[l].length;c++)void 0===a[l]?(a[l]={},a[l][r[l][c]]=[e.id]):void 0===a[l][r[l][c]]?a[l][r[l][c]]=[e.id]:a[l][r[l][c]].indexOf(e.id)<0&&a[l][r[l][c]].push(e.id)},i.getQuotes=function(){return T},i.getQuote=function(e){return T[e]},i.addSource=function(e){void 0===C[e.id]&&(C[e.id]=e,C._indexes.encodingStructure.push(e.id));var t=e.quotesEntriesId,n=i.getSources()._indexes.quotesRef;if(t.length>0)for(var o=0;o<t.length;o++)void 0===n[t[o]]&&n._id.indexOf(t[o])<0?(n[t[o]]=[],n[t[o]].push(e.id),n._id.push(t[o])):n[t[o]].indexOf(e.id)<0&&n[t[o]].push(e.id);e._textAvailable&&C._indexes.availableTexts.push({id:e.id,abbr:e.abbr})},i.getSources=function(){return C},i.getSource=function(e){return C[e]},i.getAnalogue=function(e){return k[e]},i.getAnalogues=function(){return k},i.addAnalogue=function(e){if(void 0===k[e.id]){k[e.id]=e,k._indexes.encodingStructure.push(e.id);for(var t=e._indexes.sourceRefId,n=k._refId,i=0;i<t.length;i++)n._indexes.indexOf(t[i])<0?(n._indexes.push(t[i]),n[t[i]]=[],n[t[i]].push(e.id)):n[t[i]].indexOf(e.id)<0&&n[t[i]].push(e.id)}},i}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtParser",["$q","xmlParser","parsedData","config",function(e,t,n,i){var o={},r=0,a=(i.visCollSvg,"leaf"),s="mode",l="quire",c="q",u="g",d={sectionHeaders:"<sourceDesc>, ",sectionSubHeaders:"",blockLabels:"",inlineLabels:"<authority>, <settlement>, <publisher>, <pubPlace>, <availability>, <author>, <editor>, <idno>, <date>, <repository>, <msName>, <textLang>",changeDef:"<change>",changeWhenDef:"[when]",changeByDef:"[who]"};return d.sectionSubHeaders+="<projectDesc>, <refsDecl>, <notesStmt>, <seriesStmt>, <publicationStmt>, <respStmt>, <funder>, <sponsor>, <msContents>, <revisionDesc>, ",d.sectionSubHeaders+="<principal>, <langUsage>, <particDesc>, <textClass>, <variantEncoding>, <editorialDecl>, <msIdentifier>, <physDesc>, <history>, <extent>, <editionStmt>",d.blockLabels+="<edition>, <correction>, <hyphenation>, <interpretation>, <normalization>, <punctuation>, <interpGrp>",d.blockLabels+="<quotation>, <segmentation>, <stdVals>, <colophon>, <handDesc>, <decoDesc>, <supportDesc>, <origin>",o.parserProperties={},o.isNestedInElem=function(e,t){return null!==e.parentNode&&("text"!==e.parentNode.tagName&&(e.parentNode.tagName===t||o.isNestedInElem(e.parentNode,t)))},o.capitalize=function(e,t){var n=t?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return e?e.replace(n,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})):""},o.camelToSpace=function(e){return e?e.replace(/\W+/g," ").replace(/([a-z\d])([A-Z])/g,"$1 $2"):""},o.camelToUnderscore=function(e){return e?e.replace(/\W+/g," ").replace(/([a-z\d])([A-Z])/g,"$1_$2"):""},o.isInMainVersion=function(e){if(null!==e.parentNode)return"text"===e.parentNode.tagName||("rdgGrp"===e.parentNode.tagName?!(i.versions&&i.versions.length>0)||!!e.parentNode.hasAttribute("ana")&&e.parentNode.getAttribute("ana").replace(/#/,"")===i.versions[0]:o.isInMainVersion(e.parentNode))},o.parseXMLElement=function(e,t,r){var a,s=r.skip||"",l=r.exclude||void 0,c=!1;if(3===t.nodeType)(a=t).textContent&&(a.textContent=a.textContent.replace("__SPACE__"," "));else if(void 0!==t.tagName&&(s.toLowerCase().indexOf("<"+t.tagName.toLowerCase()+">")>=0||t.className.indexOf("depaAnchor")>=0||t.className.indexOf("depaContent")>=0))a=t,c=!0;else if(void 0!==t.tagName&&void 0!==l&&l.toLowerCase().indexOf("<"+t.tagName.toLowerCase()+">")>=0)a=document.createTextNode("");else{var u=void 0!==t.tagName?t.tagName.toLowerCase():"";if(void 0!==t.attributes&&void 0!==t.attributes.copyOf&&""!==t.attributes.copyOf.value){(a=document.createElement("span")).className=t.tagName+" copy";var p=t.attributes.copyOf.value.replace("#",""),h="<"+t.tagName+' xml:id="'+p+".*</"+t.tagName+">",f=new RegExp(h,"ig"),g=e.outerHTML.match(f);if(g){var m=angular.element(g[0])[0];a.appendChild(o.parseXMLElement(e,m,r))}}else if(n.getEncodingDetail("usesLineBreaks")||"l"!==u)if("note"===u&&s.indexOf("<evtNote>")<0)a=o.parseNote(t);else if("date"===u&&(!t.childNodes||t.childNodes.length<=0)){(a=document.createElement("span")).className=t.tagName?t.tagName.toLowerCase():"";for(var v="",b=0;b<t.attributes.length;b++){var y=t.attributes[b];if(y.specified&&"xml:id"!==y.name){var x=new Date(y.value),w=x&&!isNaN(x)?x.toLocaleDateString():y.value;v+=o.camelToSpace(y.name.replace(":","-")).toLowerCase()+": "+w+", "}}a.textContent=v.slice(0,-1)}else if(i.namedEntitiesSelector&&"<placeName>, <geogName>, <persName>, <orgName>".toLowerCase().indexOf("<"+u+">")>=0&&void 0!==t.getAttribute("ref"))a=o.parseNamedEntity(e,t,s);else{if((a="div"===t.tagName?document.createElement("div"):document.createElement("span")).className=void 0!==t.tagName?t.tagName.toLowerCase():"",t.attributes)for(var A=0;A<t.attributes.length;A++){var _=t.attributes[A];_.specified&&"xml:id"!==_.name&&a.setAttribute("data-"+_.name.replace(":","-"),_.value)}var E;if("div"===t.tagName)E=t.attributes&&t.getAttribute("xml:id")?t.getAttribute("xml:id"):o.xpath(t).substr(1),a.setAttribute("id",E);if(t.childNodes)for(var S=0;S<t.childNodes.length;S++){var T=t.childNodes[S].cloneNode(!0);a.appendChild(o.parseXMLElement(e,T,r))}else a.innerHTML=t.innerHTML+" ";if(r.context&&"projectInfo"===r.context&&""!==a.innerHTML.replace(/\s/g,"")){var C=document.createElement("span"),k=!1;if(C.className="label-"+t.tagName,C.innerHTML="{{ 'PROJECT_INFO."+o.camelToUnderscore(t.tagName).toUpperCase()+"' | translate }}",d.sectionHeaders.toLowerCase().indexOf("<"+u+">")>=0?(C.className+=" projectInfo-sectionHeader",k=!0):d.sectionSubHeaders.toLowerCase().indexOf("<"+u+">")>=0?(C.className+=" projectInfo-sectionSubHeader",k=!0):d.blockLabels.toLowerCase().indexOf("<"+u+">")>=0?(C.className+=" projectInfo-blockLabel",k=!0):d.inlineLabels.toLowerCase().indexOf("<"+u+">")>=0&&(C.className+=" projectInfo-inlineLabel",C.innerHTML+=": ",k=!0),d.changeDef.toLowerCase().indexOf("<"+u+">")>=0){var L="",I=t.getAttribute(d.changeWhenDef.replace(/[\[\]]/g,""));I&&(L+=I+" ");var D=t.getAttribute(d.changeByDef.replace(/[\[\]]/g,""));D&&(L+="["+D+"]"),""!==L&&(a.innerHTML=L+" - "+a.innerHTML)}k&&a.insertBefore(C,a.childNodes[0])}if("lb"===u){a.id=t.getAttribute("xml:id"),a.appendChild(document.createElement("br"));var P=document.createElement("span");P.className="lineN";var O=t.getAttribute("n");P.textContent=O,O&&a.appendChild(P)}}else a=o.parseLine(e,t,r)}return c||3===t.nodeType||a.innerHTML&&""!==a.innerHTML.replace(/\s/g,"")||a.className&&(a.className.indexOf("depaAnchor")>=0||a.className.indexOf("depaContent")>=0)?a:document.createTextNode("")},o.parseElementAttributes=function(e){var t={_indexes:[]};if(e&&e.attributes)for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n];if(i.specified){var o=i.name.replace(":","-");t[o]=i.value,t._indexes.push(o)}}return t},o.parseExternalDocuments=function(e,t){var i={value:t,content:e};"analogues"!==t&&"sources"!==t?n.addSourceDocument(i,t):n.addExternalDocument(i,t),console.log("## Source Documents ##",n.getSourceDocuments()),console.log("## External Documents ##",n.getExternalDocuments())},o.createRegExpr=function(e){for(var t="(",n=e.split(","),i=0;i<n.length;i++){if(n[i].indexOf("[")<0)t+=n[i].replace(/[>]/g,"");else{var o=n[i].indexOf("[");"["!==n[i].substring(1,o)&&(t+=n[i].substring(0,o)),t+="[^<>]*?";var r=n[i].indexOf("]"),a=n[i].indexOf("=");t+=n[i].substring(o+1,a),t+="\\s*?=\\s*?['\"]\\s*?",t+=n[i].substring(a+1,r)}i<n.length-1?t+="|":i===n.length-1&&(t+=")")}return new RegExp(t,"i")},o.createAbbreviation=function(e,t){var n=t/2,i=e.substring(0,n),o=e.substring(e.length-n-1,e.length-1),r=i.lastIndexOf("",i.length-1),a=o.indexOf("",1),s=i.substring(0,r),l=i.substring(r,i.length),c=o.substring(a,o.length);return'<span class="textNode">'+s+'<span class="blurredText">'+l+'</span> [...] <span class="blurredText">'+o.substring(0,a)+"</span>"+c+"</span>"},o.balanceXHTML=function(e){if(e){e.lastIndexOf("<")>e.lastIndexOf(">")&&(e=e.substring(0,e.lastIndexOf("<")));var t=e.match(/<(?!\!)[^>]+>/g),n=[],i=[];for(var o in t)if(1===t[o].search("/")){var r=t[o].replace(/[<\/>]/gi,""),a=n[n.length-1];a&&(a.search("<"+r+" ")>=0||a.search("<"+r+">")>=0)?n.pop():i.push(r)}else t[o].search("/>")<=0&&n.push(t[o]);for(;n.length>0;){var s=n.pop();e+="</"+(s=s.substring(1,s.search(/[ >]/)))+">"}for(;i.length>0;){e="<"+i.shift()+">"+e}}return e||""},o.analyzeEncoding=function(e){var t=angular.element(e),i=t.find("body "+"<lb>".replace(/[<>]/g,""));n.setEncodingDetail("usesLineBreaks",i.length>0);var o=t.find("<l>".replace(/[<>]/g,"")+"[n]");n.setEncodingDetail("lineNums",o.length>0)},o.parseNote=function(e){var t=document.createElement("evt-popover"),n=e.getAttribute("n")?e.getAttribute("n"):"",i=e.getAttribute("type")||"generic";return t.setAttribute("data-trigger","click"),t.setAttribute("data-tooltip",e.innerHTML),t.setAttribute("data-n",n),t.setAttribute("data-type",i),t.innerHTML='<i class="evt_note"><span class="'+i+'">'+n+"</span></i>",t},o.parseNamedEntity=function(e,t,n){var i=document.createElement("evt-named-entity-ref"),r=t.getAttribute("ref"),a=r?r.replace("#",""):void 0;a&&""!==a&&i.setAttribute("data-entity-id",a);var s=t.tagName?t.tagName:"generic";i.setAttribute("data-entity-type",s);for(var l=0;l<t.childNodes.length;l++){var c,u=t.childNodes[l].cloneNode(!0);c=o.parseXMLElement(e,u,{skip:n}),i.appendChild(c)}return i},o.parseLines=function(e){for(var t=e.getElementsByTagName("l");0<t.length;){var n=t[0],i=o.parseLine(e,n,{});n.parentNode.replaceChild(i,n)}},o.parseLine=function(e,t,i){var r=document.createElement("div");r.className=t.tagName+" l-block";for(var a=0;a<t.attributes.length;a++){var s=t.attributes[a];s.specified&&r.setAttribute("data-"+s.name.replace(":","-"),s.value)}r.innerHTML=t.innerHTML;var l=t.getAttribute("n");if(l&&""!==l){var c=document.createElement("span");c.className="lineN",c.textContent=l,r.className+=" l-hasLineN";var u=o.parseXMLElement(e,r,i);r.innerHTML=c.outerHTML+'<span class="lineContent">'+u.outerHTML+"</span>"}else if(n.getEncodingDetail("lineNums")){r.className+=" l-indent";u=o.parseXMLElement(e,r,i);r.innerHTML='<span class="lineContent">'+u.outerHTML+"</span>"}return r},o.parseGlyphs=function(e){var t=angular.element(e);angular.forEach(t.find("glyph, char"),(function(t){var i={};i.id=t.getAttribute("xml:id")||"",i.xmlCode=t.outerHTML,i.mapping={},angular.forEach(angular.element(t).find("mapping"),(function(e){var t=e.getAttribute("type");i.mapping[t]={element:e.outerHTML,content:e.innerHTML,attributes:[]};for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];o.specified&&i.mapping[t].attributes.push({name:o.name.replace(":","-"),value:o.value})}}));var r=o.parseXMLElement(e,t,{skip:""});i.parsedXml=r?r.outerHTML:"",n.addGlyph(i)})),console.log("# GLYPHS #",n.getGlyphs())},o.xpath=function(e){try{if("string"==typeof e)return document.evaluate(e,document,null,0,null);if(!e||1!==e.nodeType)return"";var t=[];e.parentNode&&(t=[].filter.call(e.parentNode.children,(function(t){return t.tagName===e.tagName})));var n=t.length>1?[].indexOf.call(t,e)+1:"";n=n>1?n-1:"";var i="tei"!==e.tagName.toLowerCase()?"-"+e.tagName.toLowerCase():"";return o.xpath(e.parentNode)+i+n}catch(e){return"-id"+ ++r}},o.parsePages=function(e,t){var o=angular.element(e);angular.forEach(o.find("pb"),(function(e){var o={};e.getAttribute("ed")?o.value=e.getAttribute("xml:id")||e.getAttribute("ed").replace("#","")+"-"+e.getAttribute("n")||"page_"+(n.getPages().length+1):o.value=e.getAttribute("xml:id")||"page_"+(n.getPages().length+1),o.image=e.getAttribute("src")||i.singleImagesUrl+o.value+".jpg",o.svgId=e.getAttribute("svg:id")||n.getPages().length+1,o.label=e.getAttribute("n")||"Page "+(n.getPages().length+1),o.title=e.getAttribute("n")||"Page "+(n.getPages().length+1);for(var r=0;r<e.attributes.length;r++){var a=e.attributes[r];a.specified&&(o[a.name.replace(":","-")]=a.value)}e.getAttribute("facs")?o.source=e.getAttribute("facs"):o.source=i.singleImagesUrl+o.value+".jpg",n.addPage(o,t)}))},o.parseSvgsForViscoll=function(e,t){var i=angular.element(e),o=e.lastChild,r="";try{r=o.firstElementChild.innerHTML.match(/quire\s\d*\sfor/)[0].match(/\d+/)[0]}catch(e){}var a={id:t,quireN:r,svgLeaves:[],textSvg:o},s=n.getViscollSvgs();angular.forEach(i.find(u),(function(e){if(e.hasAttribute("id")){var i={id:e.id.replace("#",""),value:e.id.replace("#",""),label:e.id.replace("#","")};angular.forEach(s.imglist._indexes,(function(e){if(i.id===e.slice(0,-2))if(null==i.img){if(i.img=s.imglist[e].url,i.imgConjoin=s.imglist[e].conjoinUrl,i.imageId=s.imglist[e].value,void 0!==s.imglist[e].conjoinUrl)for(var t in s.imglist)s.imglist[e].id===s.imglist[t].conjoin&&(i.conjoinId=s.imglist[t].value)}else if(i.img2=s.imglist[e].url,i.imgConjoin2=s.imglist[e].conjoinUrl,i.imageId2=s.imglist[e].value,void 0!==s.imglist[e].conjoinUrl)for(var n in s.imglist)s.imglist[e].id==s.imglist[n].conjoin&&(i.conjoinId2=s.imglist[n].value)})),a.svgLeaves.push(i),n.updateLeafDataInQuire(t,i)}})),n.addViscollSvg(a)},o.parseViscollDatamodel=function(e){var t=angular.element(e),i=angular.element(t.find("shelfmark")),o=[];angular.forEach(t.find(l),(function(e){var t={value:e.getAttribute("xml:id")||"",n:e.getAttribute("n")||"quire"+(n.getViscollQuires().length+1),leaves:{length:0,_indexes:[]}};n.addViscollQuire(t),i&&o.push({fileName:"id-"+i.text()+"-"+t.n+".svg",id:t.value})})),angular.forEach(t.find(a),(function(e){var t=angular.element(e).find(c);if(t=t?t[0]:void 0){var i=angular.element(e).find(s),o=t.childNodes,r=null==o[1]?o[0]:o[1],a={value:e.getAttribute("xml:id")||"",leafno:t.getAttribute("leafno")||"",quire:t.getAttribute("target").replace("#","")||"target",conjoin:r.getAttribute("target").replace("#","")||"target",mode:i&&i[0]?i[0].getAttribute("val"):""};n.addViscollLeaf(a)}})),n.setViscollSVGToLoad(o),console.log("## parseViscollDatamodel ##",n.getViscollSvgs())},o.parseViscollImageList=function(e){var t=angular.element(e),i=n.getViscollSvgs();angular.forEach(t.find("image"),(function(e){var t={value:e.getAttribute("val")||"val",url:e.getAttribute("url")||"url",id:e.getAttribute("id")||"id"},o=t.id.slice(0,-2);angular.forEach(i.quires._indexes,(function(e){var n=i.quires[e].leaves;angular.forEach(n._indexes,(function(e){var i=n[e];o===i.value&&(t.conjoin=i.conjoin,"v"===t.id.substr(t.id.length-1)?t.conjoin+="-r":t.conjoin+="-v")}))})),n.addViscollImageList(t)})),angular.forEach(i.imglist._indexes,(function(e){angular.forEach(i.imglist._indexes,(function(t){t===i.imglist[e].conjoin&&(i.imglist[e].conjoinUrl=i.imglist[t].url)}))}))},o.parseDocuments=function(e){var t,r=angular.element(e),a="body";return r.find("text group text").length>0?t="text group text":r.find("text").length>0?t="text":r.find('div[subtype="edition_text"]').length>0&&(t='div[subtype="edition_text"]',a="div"),o.parserProperties.defDocElement=t,o.parserProperties.defContentEdition=a,n.setCriticalEditionAvailability(r.find(i.listDef.replace(/[<>]/g,"")).length>0),angular.forEach(r.find(t),(function(t){o.parseDocument(t,e)})),console.log("## PAGES ##",n.getPages()),console.log("## Documents ##",n.getDocuments()),console.log("## DIVS ##",n.getDivs()),n.getDocuments()},o.parseDocument=function(e,t){for(var r={value:e.getAttribute("xml:id")||o.xpath(t).substr(1)||"doc_"+(n.getDocuments()._indexes.length+1),label:"",title:"",content:e,front:void 0,pages:[],divs:[]},a=0;a<e.attributes.length;a++){var s=e.attributes[a];s.specified&&(r[s.name.replace(":","-")]=s.value)}if(void 0===r["xml-id"]?o.createTitle(r,"Doc"):o.createTitle(r,""),o.parseFront(r,e),n.addDocument(r),o.parsePages(e,r.value),"body"===o.parserProperties.defContentEdition){var l=e.querySelector("front"),c=e.querySelector("body");l&&o.parseDivs(l,r.value,"front"),o.parseDivs(c,r.value,"body")}else o.parseDivs(e,r.value,"body");if("critical"!==i.defaultEdition||!n.isCriticalEditionAvailable()){i.defaultEdition="diplomatic";var u=n.getPages(),d=r.pages;angular.forEach(angular.element(e).find(o.parserProperties.defContentEdition),(function(e){o.splitPages(u,e,r.value,o.parserProperties.defContentEdition,d)}))}},o.parseDivs=function(e,t,n){var i=e.getAttribute("xml:lang")?e.getAttribute("xml:lang"):"",r=angular.element(e);angular.forEach(r.children("div"),(function(e){o.parseDiv(e,t,n,i)}))},o.parseDiv=function(e,t,i){var r={doc:t,section:i,subDivs:[],title:"",_isSubDiv:o.isNestedInElem(e,"div")};angular.forEach(Object.values(e.attributes),(function(e){e.specified&&(r[e.name.replace(":","-")]=e.value)})),r.corresp&&(r.corresp=r.corresp.replace("#","").split(" ")),r.value=r["xml-id"]||o.xpath(e).substr(1)||"div_"+(n.getDivs().length+1),o.createTitle(r,"Div");var a=angular.element(e);return angular.forEach(a.children("div"),(function(e){r.subDivs.push(o.parseDiv(e,t,i).value)})),n.addDiv(r,t),r},o.createTitle=function(e,t){switch(e.type?e.title+=e.type.substr(0,1).toUpperCase()+e.type.substr(1):e.title+=t,e.subtype&&(e.title+=" - "+e.subtype.substr(0,1).toUpperCase()+e.subtype.substr(1)),e.title+=" ",t){case"Div":e.title+=e.n||n.getDivs().length+1;break;case"Doc":var i,o=n.getWitnessesList().find((function(t){return i=t,n.getWitness(t).corresp===e.value}));e.title+=o?i:e.n||n.getDocuments()._indexes.length+1;break;default:e.title=e.n||e["xml-id"]}e.label=e.title},o.parseFront=function(e,t){var n=t.querySelectorAll("<front>".replace(/[<\/>]/gi,""));if(n&&n[0]){var i=n[0].cloneNode(!0),r=i.querySelectorAll("<biblStruct>".replace(/[<\/>]/gi,""));if(r)for(var a=r.length-1;a>=0;a--){var s=document.createElement("evt-bibl-elem"),l=r[a],c=l.getAttribute("xml:id")||o.xpath(l).substr(1);s.setAttribute("data-bibl-id",c),l.parentNode.replaceChild(s,l)}var u=o.parseXMLElement(t,i,{skip:"<biblStruct><evt-bibl-elem>"}),d=o.parseElementAttributes(i);e.front={attributes:d,parsedContent:u&&u.outerHTML?u.outerHTML.trim():"",originalContent:i.outerHTML}}},o.splitLineBreaks=function(e,t){var n="",i="<"+t+"(.|[\r\n])*?>",r=new RegExp(i+"(.|[\r\n])*?<lb(.|[\r\n])*?/>","ig"),a=e.outerHTML.match(r);if(a&&a.length>0){var s=new RegExp(i,"ig"),l=a[0].replace(s,"");n+="<evtLB>"+(l=o.balanceXHTML(l))+"</evtLB>"}for(var c=new RegExp("<lb(.|[\r\n])*?(?=(<lb|</"+t+">))","ig"),u=e.outerHTML.match(c),d=u?u.length:0,p=0;p<d;p++){n+="<evtLB>"+o.balanceXHTML(u[p])+"</evtLB>"}return n},o.splitPages=function(e,t,i,o,r){var a,s=new RegExp("<body(.|[\r\n])*?(?=<pb)","ig"),l=t.outerHTML.match(s),c=new RegExp("<pb(.|[\r\n])*?(?=(<pb|</"+o+">))","ig"),u=t.outerHTML.match(c);if(l&&l.length>0){var d=n.getPreviousDocument(i);if(d&&d.pages&&d.pages.length>0){var p=d.pages[d.pages.length-1],h=e.length-r.length;if(p&&""!==p)for(var f=0,g=h;g<e.length;g++)(a=e[g])&&""!==a&&(n.setPageText(a,i,"original",u[f]),f++)}else for(var m=0;m<e.length;m++)(a=e[m])&&""!==a&&n.setPageText(a,i,"original",u[m])}},o.parseTextForEditionLevel=function(i,r,a,s){var l=o.balanceXHTML(s);l=l.replace(/>\s+</g,">__SPACE__<");var c=e.defer(),u=l,d=t.parse('<div id="mainContentToTranform" class="'+a+'">'+l+"</div>");if(void 0!==d){for(var p,h,f=d.getElementById("mainContentToTranform"),g=f.getElementsByTagName("pb"),m=0;m<g.length;)(p=g[m]).parentNode.removeChild(p);if("diplomatic"===a?h="_reg":"interpretative"===a&&(h="_orig"),h){var v=f.getElementsByTagName("lb");for(m=0;m<v.length;){var b=v[m],y=b.getAttribute("xml:id");y&&null!==y&&y.indexOf(h)>=0?b.parentNode.removeChild(b):m++}}var x=f.getElementsByTagName("g");for(m=0;m<x.length;){var w=x[m],A=w.getAttribute("ref"),_=document.createElement("span");if(_.className="glyph",A&&""!==A){A=A.replace("#","");var E=a;E="interpretative"===E?"normalized":E,(o.isNestedInElem(w,"abbr")||o.isNestedInElem(w,"orig"))&&(E="diplomatic");var S=n.getGlyphMappingForEdition(A,E);S&&_.appendChild(angular.element(S.element)[0])}_&&w.parentNode.insertBefore(_,w.nextSibling),w.parentNode.removeChild(w)}f.innerHTML=f.innerHTML.replace(/>[\s\r\n]*?</g,"><"),angular.forEach(f.children,(function(e){e.parentNode.replaceChild(o.parseXMLElement(d,e,{skip:"<pb>,<g>"}),e)})),u=f.outerHTML}else u="<span> {{ 'TEXT_NOT_AVAILABLE' | translate }}</span>";if(void 0===u){u="<span class=\"alert-msg alert-msg-error\">{{'MESSAGES.ERROR_IN_PARSING_TEXT' | translate}} <br />{{'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate}}</span>"}return u=u.replace(/__SPACE__/g," "),n.setPageText(i,r,a,u),c.resolve("success"),c},o}])},function(e,t,n){"use strict";(function(e){angular.module("evtviewer.dataHandler").service("evtCriticalApparatusParser",["$q","parsedData","evtParser","config","evtCriticalElementsParser","evtDepaParser",function(t,n,i,o,r,a){var s={};o.quoteDef,o.skipWitnesses.split(",").filter((function(e){return 0!==e.length}));s.findCriticalEntryById=function(t,n){if(void 0!==t){var i=n.replace(/\w-/g,"$&0>").replace(/[0-9]+/g,":eq($&)").replace(/-:eq/g,":eq"),o=e(t).find(i);r.handleAppEntry(o.get(0))}else console.log("ERROR")};return s.parseWitnesses=function(e){var t=o.skipWitnesses.split(",").filter((function(e){return 0!==e.length})),r=angular.element(e).find(o.listDef.replace(/[<>]/g,""));r.length>0?angular.forEach(r,(function(r){i.isNestedInElem(r,r.tagName)||angular.forEach(r.childNodes,(function(r){if(1===r.nodeType){var a={};if(a.id=r.getAttribute("xml:id"),t.indexOf(a.id)<0){if(o.listDef.indexOf("<"+r.tagName+">")>=0)a=function e(t,r){var a,s=o.skipWitnesses.split(",").filter((function(e){return 0!==e.length})),l={id:r.getAttribute("xml:id")||i.xpath(r).substr(1),sigla:r.getAttribute("xml:id"),name:"",content:[],_type:"group",_group:void 0,text:{}};if(void 0!==o.versions&&o.versions.length>1&&r.hasAttribute("ana")){var c=r.getAttribute("ana").replace("#","");o.versions.indexOf(c)>=0&&(a=c)}return angular.forEach(r.childNodes,(function(r){if(1===r.nodeType)if("head"===r.tagName)l.name=r.innerHTML;else if(o.listDef.indexOf("<"+r.tagName+">")>=0){if(s.indexOf(l.id)<0){var c=e(t,r);c._group=l.id,n.addElementInWitnessCollection(c),l.content.push(c.id)}}else if(o.versionDef.indexOf("<"+r.tagName+">")>=0){var u={id:r.getAttribute("xml:id")||i.xpath(r).substr(0),sigla:r.getAttribute("xml:id"),attributes:i.parseElementAttributes(r),description:i.parseXMLElement(t,r,{skip:""}),_group:l.id,_type:"witness"};s.indexOf(u.id)<0&&(n.addElementInWitnessCollection(u),l.content.push(u.id),void 0!==a&&n.addVersionWitness(a,u.id))}})),l}(e,r);else if(o.versionDef.indexOf("<"+r.tagName+">")>=0){var s;if(a={id:r.getAttribute("xml:id")||i.xpath(r).substr(0),sigla:r.getAttribute("xml:id"),description:i.parseXMLElement(e,r,{skip:""}),_group:void 0,_type:"witness",text:{}},void 0!==o.versions&&o.versions.length>1&&r.hasAttribute("ana")){var l=r.getAttribute("ana").replace("#","");o.versions.indexOf(l)>=0&&(s=l)}void 0!==s&&n.addVersionWitness(s,a.id)}n.addElementInWitnessCollection(a)}}}))})):console.log("WARNING: "+o.listDef+" missing. Please add this element to make EVT work properly with different witnesses."),console.log("## Witnesses ##",n.getWitnesses())},s.parseCriticalEntries=function(e){n.resetCriticalEntries();var i=t.defer(),s=angular.element(e);return angular.forEach(s.find("<app>".replace(/[<>]/g,"")),(function(t){if(!t.hasAttribute("type")||"recensio"!==t.getAttribute("type")){var i=r.handleAppEntry(t);i.lemma||"double-end-point"!==n.getEncodingDetail("variantEncodingMethod")||a.getLemma(i,e)}})),n.setCriticalEntriesLoaded(o.loadCriticalEntriesImmediately),console.log("## Critical entries ##",n.getCriticalEntries()),i.resolve("success"),i},s.parseVersionEntries=function(e){var i=t.defer(),o=angular.element(e);return angular.forEach(o.find("<app>".replace(/[<>]/g,"")+"[type=recensio]"),(function(e){r.handleVersionEntry(e)})),console.log("## Version Entries ##",n.getVersionEntries()),i.resolve("success"),i},s.containsWitnessElement=function(e,t){return null!==e&&(void 0!==t.group&&e.indexOf("#"+t.group)>=0||e.indexOf("#")>=0&&e.indexOf("#"+t.id)>=0||e.indexOf(t.id)>=0)},s.parseWitnessPageBreaks=function(e,t){for(var n=e.getElementsByTagName("pb");0<n.length;){var i=n[0];if(s.containsWitnessElement(i.getAttribute("ed"),t)){var o,r=document.createElement("span");o=i.getAttribute("ed")?i.getAttribute("xml:id")||i.getAttribute("ed").replace("#","")+"-"+i.getAttribute("n")||"page_0":i.getAttribute("xml:id")||"page_0",r.className="pb",r.setAttribute("data-wit",i.getAttribute("ed")),r.setAttribute("data-id",o),r.setAttribute("id","pb_"+o),r.textContent=i.getAttribute("n"),i.parentNode.replaceChild(r,i)}else i.parentNode.removeChild(i)}},s.parseWitnessLacunas=function(e,t){for(var o,r,a,s=e.getElementsByTagName("lacunaStart"),l=e.getElementsByTagName("lacunaEnd"),c=[],u=[],d=0;d<s.length;d++)o=s[d].parentNode.getAttribute("data-app-id"),r=s[d].parentNode.getAttribute("data-reading-id"),void 0!==(a=n.getCriticalEntryById(o).content[r].wits)&&a.indexOf(t)>=0&&c.push(s[d]);for(var p=0;p<l.length;p++)o=l[p].parentNode.getAttribute("data-app-id"),r=l[p].parentNode.getAttribute("data-reading-id"),void 0!==(a=n.getCriticalEntryById(o).content[r].wits)&&a.indexOf(t)>=0&&u.push(l[p]);if(c.length===u.length)for(var h=c.length-1;h>=0;h--){var f=c[h].parentNode,g=u[h].parentNode,m=f.getAttribute("data-app-id"),v=g.getAttribute("data-app-id"),b=new RegExp("<evt-reading.*data-app-id.*"+m+".*</evt-reading>(.|[\r\n])*?<evt-reading.*data-app-id.*"+v+".*</evt-reading>","ig"),y='<span data-app-id-start="'+m+'" data-app-id-end="'+v+'" class="lacuna">[LACUNA]</span>';e.innerHTML=e.innerHTML.replace(b,y),e.innerHTML=i.balanceXHTML(e.innerHTML)}else e.innerHTML="<span class=\"error\">{{ 'MESSAGES.ERROR_IN_PARSING_LACUNA' | translate }}</span>"},s.isFragmentaryWitness=function(e,t){try{return e.querySelectorAll("witStart[wit*='#"+t+"']").length>0||(e.querySelectorAll("rdg[wit*='#"+t+"'] witStart:not([wit]").length>0||e.querySelectorAll("lem[wit*='#"+t+"'] witStart:not([wit]").length>0)}catch(e){return!1}},s.parseFragmentaryWitnessText=function(e,t){for(var i,o,r,a=e.getElementsByTagName("witStart"),s=e.getElementsByTagName("witEnd"),l=[],c=[],u=0;u<a.length;u++)i=a[u].parentNode.getAttribute("data-app-id"),o=a[u].parentNode.getAttribute("data-reading-id"),void 0!==(r=n.getCriticalEntryById(i).content[o].wits)&&r.indexOf(t)>=0&&l.push(a[u]);for(var d=0;d<s.length;d++)i=s[d].parentNode.getAttribute("data-app-id"),o=s[d].parentNode.getAttribute("data-reading-id"),void 0!==(r=n.getCriticalEntryById(i).content[o].wits)&&r.indexOf(t)>=0&&c.push(s[d]);var p="";if(a.length===s.length){for(var h=l.length-1;h>=0;h--){var f=l[h].parentNode,g=c[h].parentNode,m=f.getAttribute("data-app-id"),v=g.getAttribute("data-app-id"),b=new RegExp('<evt-reading data-app-id="'+m+".*</evt-reading>(.|[\r\n])*?<evt-reading data-app-id.*"+v+".*</evt-reading>","ig");p='<span class="fragment fragment-start"></span>'+e.innerHTML.match(b)+'<span class="fragment fragment-end"></span>'+p}return p}return"<span class=\"error\">{{ 'MESSAGES.ERROR_IN_PARSING_FRAGMENTARY_TEXT' | translate }}</span>"},s}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtCriticalApparatus",["parsedData","config",function(e,t){var n={},i=t.skipWitnesses.split(",").filter((function(e){return 0!==e.length}));n.getContent=function(e,i,o){var r={attributes:{values:e.attributes||{},_keys:Object.keys(e.attributes)||[]},lemma:{content:"",attributes:{values:{},_keys:[]}},significantReadings:[],notSignificantReadings:[],readingGroups:[],criticalNote:"",witnessesGroups:JSON.parse(JSON.stringify(t.witnessesGroups))};n.getWitnessesGroups(e,o,r.witnessesGroups);var a=e.content[e.lemma];void 0!==a&&(r.lemma.content+='<span class="app_lemma_content">'+n.getLemma(a,o)+"</span>",r.lemma.attributes.values=a.attributes||{},r.lemma.attributes._keys=Object.keys(a.attributes)||[]);for(var s=e._indexes.readings,l=s._indexes,c=0;c<l.length;c++){var u=e.content[l[c]];if(void 0!==u){var d=n.getSignificantReading(u,o);s._significant.indexOf(u.id)>=0?r.significantReadings.push(d):r.notSignificantReadings.push(d)}}if(!i&&e._indexes.groups.length>0)for(var p=0;p<e._indexes.groups.length;p++){var h=e.content[e._indexes.groups[p]];if(void 0!==h){var f=[];for(var g in h.attributes)f.push({label:g,values:h.attributes[g]});for(var m=[],v=0;v<h.content.length;v++){var b=e.content[h.content[v]];void 0!==b&&m.push(n.getSignificantReading(b,o))}m.length>0&&r.readingGroups.push({header:f,readings:m})}}return r.criticalNote+=e.note,r},n.getWitnessesGroups=function(e,t,i){for(var o in i){for(var r in i[o].wits=[],i[o].significant={},i[o].significantContent={},i[o].notSignificant={},i[o].notSignificantContent={},e._indexes.witMap)i[o].witnesses.indexOf(r)>=0&&i[o].wits.push(r);for(var a in delete i[o].witnesses,i[o].wits){var s=e._indexes.witMap[i[o].wits[a]],l=e.content[s];l._significant?(i[o].significantContent[s]=l,void 0===i[o].significant[s]?(i[o].significant[s]=[],i[o].significant[s].push(i[o].wits[a])):i[o].significant[s].push(i[o].wits[a])):(i[o].notSignificantContent[s]=l,void 0===i[o].notSignificant[s]?(i[o].notSignificant[s]=[],i[o].notSignificant[s].push(i[o].wits[a])):i[o].notSignificant[s].push(i[o].wits[a]))}var c,u,d;if(0===Object.keys(i[o].significant).length)delete i[o].significant,delete i[o].significantContent;else{for(c in i[o].significantText="",i[o].significant){for(d in u='<span class="',c===e.lemma?u+='lem inWitGrp">':u+='rdg inWitGrp">',u+=n.getReadingForGroup(i[o].significantContent[c],t)+'</span><span class="witnesses">',i[o].significant[c])u+='<evt-witness-ref witness="'+i[o].significant[c][d]+'" data-scope-wit="'+t+'"></evt-witness-ref>';u+="</span>",i[o].significantText+=u}delete i[o].significant,delete i[o].significantContent}if(0===Object.keys(i[o].notSignificant).length)delete i[o].notSignificant,delete i[o].notSignificantContent;else{for(c in i[o].notSignificantText="",i[o].notSignificant){for(d in u='<span class="',c===e.lemma?u+='lem inWitGrp">':u+='rdg inWitGrp">',u+=n.getReadingForGroup(i[o].notSignificantContent[c],t)+'</span><span class="witnesses">',i[o].notSignificant[c])u+='<evt-witness-ref witness="'+i[o].notSignificant[c][d]+'" data-scope-wit="'+t+'"></evt-witness-ref>';u+="</span>",i[o].notSignificantText+=u}delete i[o].notSignificant,delete i[o].notSignificantContent}}},n.getReadingForGroup=function(e,t){for(var i="",o=0;o<e.content.length;o++)"string"==typeof e.content[o]?i+=e.content[o]:"subApp"===e.content[o].type?i+=n.getSubApparatus(e.content[o].id,t):"genericElement"===e.content[o].type?i+=n.getGenericContent(e.content[o],t):"quote"===e.content[o].type||"analogue"===e.content[o].type?i+=n.getCriticalElementContent(e.content[o],t):i+=e.content[o].outerHTML;return""===i&&(i=" <i>om.</i> "),i=(i=n.transformCriticalEntryLacunaMilestones(i)).replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),i=n.transformCriticalEntryFragmentMilestones(i)},n.getGenericContent=function(e,t){var i;i=' <span class="'+e.tagName+' inApparatus">';for(var o=0;o<e.content.length;o++)"string"==typeof e.content[o]?i+=e.content[o]:"subApp"===e.content[o].type?i+=n.getSubApparatus(e.content[o].id,t):"genericElement"===e.content[o].type?i+=n.getGenericContent(e.content[o],t):i+=e.content[o].outerHTML;return i+="</span>"},n.getLemma=function(e,t){for(var i="",o=0;o<e.content.length;o++)"subApp"===e.content[o].type?i+=n.getSubApparatus(e.content[o].id,t):"quote"===e.content[o].type||"analogue"===e.content[o].type?i+=n.getCriticalElementContent(e.content[o],t):"genericElement"===e.content[o].type?i+=n.getGenericContent(e.content[o],t):i+=e.content[o];return""!==(i=n.transformCriticalEntryLacunaMilestones(i))&&(i+=n.getCriticalEntryWitnesses(e,"lem",t)),i=i.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),i=n.transformCriticalEntryFragmentMilestones(i)},n.getSubApparatus=function(t,i){var o="",r=e.getCriticalEntryById(t),a=n.getContent(r,!0,i);o+='<span class="sub_app"> (('+a.lemma.content+" ";for(var s=0;s<a.significantReadings.length;s++)o+=a.significantReadings[s].content,s<a.significantReadings.length-1&&(o+="; ");return o+=")) </span>"},n.getSignificantReading=function(e,t){for(var i="",o={},r=0;r<e.content.length;r++)"string"==typeof e.content[r]?i+=e.content[r]:"subApp"===e.content[r].type?i+=n.getSubApparatus(e.content[r].id,t):"genericElement"===e.content[r].type?i+=n.getGenericContent(e.content[r],t):"quote"===e.content[r].type||"analogue"===e.content[r].type?i+=n.getCriticalElementContent(e.content[r],t):i+=e.content[r].outerHTML;""===i&&(i=" <i>om.</i> "),i=n.transformCriticalEntryLacunaMilestones(i);var a=n.getCriticalEntryWitnesses(e,"rdg",t);return void 0!==e.wits&&""===a||(i=(i+=a).replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),o={content:i=n.transformCriticalEntryFragmentMilestones(i),attributes:{values:e.attributes||{},_keys:Object.keys(e.attributes)||[]}}),o},n.getCriticalElementContent=function(e,t){var i=e.content||[],r='<span class="'+e.type+' inApparatus">';for(var a in i)if("string"==typeof i[a])r+='<span class="textNode">'+i[a]+"</span>";else{if(["EVT-POPOVER","lb","ptr","link","linkGrp","pb"].indexOf(i[a].tagName)>=0)r+="";else if("app"===i[a].type){r+=o(i[a],t)}else"analogue"===i[a].type||"quote"===i[a].type?r+=n.getCriticalElementContent(i[a],t):void 0!==i[a].content&&(r+=n.getText(i[a]))}return r+="</span>"},n.getText=function(e){var t="",i=e.content;if(void 0!==i)for(var o=0;o<i.length;o++)"string"==typeof i[o]?t+='<span class="textNode">'+i[o]+"</span>":void 0!==i[o].content&&(t+=n.getText(i[o]));return t};var o=function(e,t){var i="";if(""===t||void 0===t||void 0===e._indexes.witMap[t]){var o=e.lemma;i+=n.getText(e.content[o])}else{var r=e._indexes.witMap[t];i+=n.getText(e.content[r])}return i};return n.getCriticalEntryWitnesses=function(e,t,n){var o="";if(void 0!==e.wits&&e.wits.length>0)for(var r in e.wits)r&&e.wits[r]&&i.indexOf(r)<0&&(o+='<evt-witness-ref witness="'+e.wits[r]+'" data-scope-wit="'+n+'"></evt-witness-ref>');else if("lem"===t&&void 0!==e.autoWits&&e.autoWits.length>0)for(var a in e.autoWits)a&&e.autoWits[a]&&i.indexOf(a)<0&&(o+='<evt-witness-ref witness="'+e.autoWits[a]+'" data-scope-wit="'+n+'"></evt-witness-ref>');return""!==o&&(o='<span class="witnesses witnesses-'+t+'">'+o+"</span>"),o},n.getCriticalEntryAttributes=function(e,t){var n="";if(void 0!==e.attributes)for(var i in e.attributes)"wit"!==i&&"xml:id"!==i&&(n+='<span class="'+i+'">'+i+": "+e.attributes[i]+"</span>");return""!==n&&(n='<span class="attributes" style="display:none">'+n+"</span>"),n},n.transformCriticalEntryLacunaMilestones=function(e){return e=(e=e.replace(/<lacunaStart(.|[\r\n])*?\/>/gi,"<i> {{ 'CRITICAL_APPARATUS.LACUNA_START' | translate }} </i>")).replace(/<lacunaEnd(.|[\r\n])*?\/>/gi,"<i> {{ 'CRITICAL_APPARATUS.LACUNA_END' | translate }} </i>")},n.transformCriticalEntryFragmentMilestones=function(e){var t=e.match(/<witStart(.|[\r\n])*?\/>/gi);if(null!==t)for(var n=0;n<t.length;n++){var i=t[n],o=i.match(/"#.*"/g);o=null!==o?" of "+o[0].replace(/["#]/g,""):"";var r=new RegExp(i,"ig");e=e.replace(r,"<i> [beginning of fragment"+o+"] </i>")}var a=e.match(/<witEnd(.|[\r\n])*?\/>/gi);if(null!==a)for(var s=0;s<a.length;s++){var l=a[s],c=l.match(/"#.*"/g);c=null!==c?" of "+c[0].replace(/["#]/g,""):"";var u=new RegExp(l,"ig");e=e.replace(u,"<i> [end of fragment"+c+"] </i>")}return e},n}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtNamedEntitiesParser",["parsedData","evtParser",function(e,t){var n={},i=[{listDef:"<listPlace>",contentDef:"<place>",contentForLabelDef:"<placeName>",type:"place"},{listDef:"<listPerson>",contentDef:"<person>",contentForLabelDef:"<persName>",type:"person"},{listDef:"<listOrg>",contentDef:"<org>",contentForLabelDef:"<orgName>",type:"org"},{listDef:"<list>",contentDef:"<item>",contentForLabelDef:"",type:"generic"}];n.parseEntities=function(r){for(var a=angular.element(r),l="",c=0;c<i.length;c++){var u="<sourceDesc>".replace(/[<>]/g,"")+" > "+i[c].listDef.replace(/[<>]/g,""),d=i[c].contentDef.replace(/[<>]/g,""),p=i[c].type||"generic",h="LISTS."+p.toUpperCase();l+=u+" "+"<relation>".replace(/[<>]/g,"")+", ",angular.forEach(a.find(u),(function(r){if(!t.isNestedInElem(r,r.tagName)){var a=r.getAttribute("xml:id")||void 0;if("generic"!==p||"generic"===p&&void 0!==a){var l={id:a||t.xpath(r),type:p,title:h};angular.forEach(r.childNodes,(function(t){if(1===t.nodeType){var r=s(t,l),a={};i[c].listDef.indexOf("<"+t.tagName+">")>=0?n.parseDirectSubList(t,i[c],l):d.indexOf(t.tagName)>=0&&(a=o(t,i[c]),e.addNamedEntityInCollection(r,a,a.id.substr(0,1).toLowerCase()))}})),r.parentNode.removeChild(r)}}}))}var f=a.find(l.slice(0,-2));if(f&&f.length>0){var g={id:"parsedRelations",type:"relation",title:"LISTS.RELATION"};angular.forEach(f,(function(e){n.parseRelationsInList(e,g)}))}console.log("## parseEntities ##",e.getNamedEntitiesCollection())},n.parseDirectSubList=function(t,n,r){var a=n.contentDef;i.listDef;angular.forEach(t.childNodes,(function(t){if(1===t.nodeType){var i=s(t,r),l={};a.indexOf(t.tagName)>=0&&(l=o(t,n),e.addNamedEntityInCollection(i,l,l._listPos))}}))},n.parseRelationsInList=function(n,i){var o=t.parseXMLElement(n,n,{skip:"<evtNote>"}),r=n.getAttribute("active"),a=n.getAttribute("mutual"),s=n.getAttribute("passive"),l=n.getAttribute("name"),c=n.getAttribute("type");!c&&n.parentNode&&"<listRelation>".indexOf("<"+n.parentNode.tagName+">")>=0&&(c=n.parentNode.getAttribute("type")),l=l?t.camelToSpace(l):l;var u={id:n.getAttribute("xml:id")||t.xpath(n),label:"",content:{_indexes:[]},_listPos:"",_xmlSource:n.outerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")};u.content.name=[{attributes:{_indexes:[]},text:l}],u.content._indexes.push("name"),u.label=l?l.toLowerCase():"",l&&(u.label+=" ("),u.label+=c||"generic",u.label+=" relation",l&&(u.label+=")");var d='<span class="relation">',p="",h="",f="",g=r?r.split("#").filter((function(e){return 0!==e.length})):[],m=a?a.split("#").filter((function(e){return 0!==e.length})):[],v=s?s.split("#").filter((function(e){return 0!==e.length})):[];if(r||a||s||l){for(var b,y,x=0;x<g.length;x++)b=document.createElement("evt-named-entity-ref"),(y=g[x].trim())&&""!==y&&b.setAttribute("data-entity-id",y),b.textContent="#"+y,d+=b.outerHTML+" ",p+=b.outerHTML.trim()+", ";for(var w=0;w<m.length;w++)0===w&&r&&""!==r&&(d+="{{ 'AND' | translate}} "),b=document.createElement("evt-named-entity-ref"),(y=m[w].trim())&&""!==y&&b.setAttribute("data-entity-id",y),b.textContent="#"+y,d+=b.outerHTML+" ",h+=b.outerHTML.trim()+", ";d+=l?'<span class="relation-name">'+l+" </span>":"";for(var A=0;A<v.length;A++)b=document.createElement("evt-named-entity-ref"),(y=v[A].trim())&&""!==y&&b.setAttribute("data-entity-id",y),b.textContent="#"+y,d+=b.outerHTML+" ",f+=b.outerHTML.trim()+", "}d+="</span>",d+=o?o.innerHTML:n.innerHTML;for(var _=0;_<g.length;_++){var E=e.getNamedEntity(g[_].trim());E&&""!==d&&(E.content.relations||(E.content.relations=[],E.content._indexes.push("relations")),E.content.relations.push({text:"{{ 'LISTS.RELATION_ACTIVE_ROLE ' | translate:'{relationType:\""+c+"\"}'}}: "+d,attributes:[]}),E._xmlSource+=n.outerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""))}for(var S=0;S<m.length;S++){var T=e.getNamedEntity(m[S].trim());T&&""!==d&&(T.content.relations||(T.content.relations=[],T.content._indexes.push("relations")),T.content.relations.push({text:"{{ 'LISTS.RELATION_MUTUAL_ROLE ' | translate:'{relationType:\""+c+"\"}'}}: "+d,attributes:[]}),T._xmlSource+=n.outerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""))}for(var C=0;C<v.length;C++){var k=e.getNamedEntity(v[C].trim());k&&""!==d&&(k.content.relations||(k.content.relations=[],k.content._indexes.push("relations")),k.content.relations.push({text:"{{ 'LISTS.RELATION_PASSIVE_ROLE ' | translate:'{relationType:\""+c+"\"}'}}: "+d,attributes:[]}),k._xmlSource+=n.outerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""))}if(u.label=t.capitalize(u.label+": "+d),u._listPos=u.label.substr(0,1).toLowerCase(),""!==p||""!==h||""!==f){var L=[];""!==p&&L.push({attributes:{type:"LISTS.RELATION_ACTIVE",_indexes:["type"]},text:p.slice(0,-2)}),""!==h&&L.push({attributes:{type:"LISTS.RELATION_MUTUAL",_indexes:["type"]},text:h.slice(0,-2)}),""!==f&&L.push({attributes:{type:"LISTS.RELATION_PASSIVE",_indexes:["type"]},text:f.slice(0,-2)}),u.content.actors=L,u.content._indexes.push("actors")}e.addNamedEntityInCollection(i,u,u._listPos)};var o=function(e,n){var i=n.contentDef,o=n.listDef,s=n.contentForLabelDef,l=e.getAttribute("xml:id")||t.xpath(e),c={id:l,label:"",content:{_indexes:[]},_listPos:l.substr(0,1).toLowerCase(),_xmlSource:e.outerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")},u=e.getElementsByTagName(s.replace(/[<>]/g,""));if(u&&u.length>0){var d=t.parseXMLElement(u[0],u[0],{skip:"<evtNote>"});c.label=d?d.innerHTML:l}else c.label=l;return angular.forEach(e.childNodes,(function(e){1===e.nodeType&&(s.indexOf("<"+e.tagName+">")>=0&&e.children&&e.children.length>0?angular.forEach(e.children,(function(e){1===e.nodeType&&r(c,e,i,o)})):r(c,e,i,o))})),"<placeName>"===s&&a(c,e),c},r=function(e,i,o,r){var a;void 0===e.content[i.tagName]&&(e.content[i.tagName]=[],e.content._indexes.push(i.tagName)),a=o.indexOf("<"+i.tagName+">")>=0?n.parseSubEntity(i,o,r):t.parseXMLElement(i,i,{skip:"<evtNote>"}),e.content[i.tagName].push({text:a?a.innerHTML:i.innerHTML,attributes:t.parseElementAttributes(i)})},a=function(e,t){var n=t.outerHTML.search("<geo");if(n>=0){var i=t.outerHTML.search("</geo>"),o=t.outerHTML.substring(n,i),r=(o=o.substring(o.indexOf(">")+1)).split(", ");2===r.length&&(e.map={lat:r[0],lng:r[1]})}};n.parseSubEntity=function(e,i,o){var r=document.createElement("evt-named-entity-ref"),a=e.getAttribute("ref"),s=a?a.replace("#",""):void 0;s&&""!==s&&r.setAttribute("data-entity-id",s);var l=e.tagName?e.tagName:"generic";r.setAttribute("data-entity-type",l);for(var c=0;c<e.childNodes.length;c++){var u,d=e.childNodes[c].cloneNode(!0);u=1===d.nodeType&&o.toLowerCase().indexOf("<"+d.tagName.toLowerCase()+">")>=0?n.parseNamedEntitySubList(d,d,"<evtNote>"):t.parseXMLElement(d,d,{skip:"<evtNote>"}),r.appendChild(u)}return r},n.parseNamedEntitySubList=function(e,n,i){var o=document.createElement("span"),r=document.createElement("span"),a="";o.className=n.tagName.toLowerCase(),r.className=n.tagName.toLowerCase()+"-attributes";for(var s=0;s<n.attributes.length;s++){var l=n.attributes[s];l.specified&&(o.setAttribute("data-"+l.name.replace(":","-"),l.value),a+=t.camelToSpace(l.value)+", ")}""!==a&&(r.textContent=a.slice(0,-2),o.appendChild(r));for(var c=0;c<n.childNodes.length;c++){var u=n.childNodes[c].cloneNode(!0),d=t.parseXMLElement(e,u,{skip:i});o.appendChild(d)}return o};var s=function(e,n){var i=n;if(e.previousElementSibling&&"<head>".indexOf("<"+e.previousElementSibling.tagName+">")>=0)i.id=e.previousElementSibling.textContent.trim().replace(/\s/g,""),i.title=e.previousElementSibling.textContent.trim();else{var o,r=e.parentNode;if(r&&r.getAttribute("xml:id")&&(o=r.getAttribute("xml:id").trim().replace(/\s/g,""),i.id=o,i.title=o),r&&r.getAttribute("type")){var a=r.getAttribute("type").trim();o&&void 0!==o||(i.id=a),a=t.camelToSpace(a),i.title=a.substr(0,1).toUpperCase()+a.substr(1)}}return i},l=function(e){var t=new RegExp('xml:id=".*"',"ig"),n=e.match(t);t=new RegExp('xml:id=(?:"[^"]*"|^[^"]*$)',"ig");var i=n?n[0].match(t):void 0;return i?i[0].replace(/xml:id/,"").replace(/(=|\"|\')/gi,""):""};return n.parseEntitiesOccurrences=function(t,n){var i=t&&t.content?t.content:void 0,o=i?i.outerHTML:void 0,r=[];if(o&&n&&""!==n)for(var a=new RegExp("<pb(.|[\r\n])*?/>(.|[\r\n])*?(?=#"+n+")","ig"),s=o.match(a),c=s?s.length:0,u=0;u<c;u++){var d=new RegExp("<pb(.|[\r\n])*?/>","ig"),p=s[u].match(d),h=p&&p.length>0?p[p.length-1]:"",f=l(h);if(f){var g=e.getPage(f);r.push({pageId:f,pageLabel:g?g.label:f,docId:t?t.value:"",docLabel:t?t.label:""})}}return r},n}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtPrimarySourcesParser",["parsedData",function(e){var t={};return t.parseZones=function(t){var n=angular.element(t);angular.forEach(n.find("surface"),(function(t){t.getAttribute("xml:id");var n=t.getAttribute("corresp");n=n?n.replace("#",""):n,angular.forEach(t.childNodes,(function(t){if("zone"===t.tagName){var i={};if(t.attributes)for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o];if(r.specified)i["xml:id"===r.name?"id":r.name.replace(":","-")]=r.value}i.page=n,e.addZone(i)}}))})),console.log("## ZONES ##",e.getZones())},t}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtProjectInfoParser",["parsedData","evtParser",function(e,t){var n={};n.parseProjectInfo=function(t){var i=angular.element(t);angular.forEach(i.find("<teiHeader>".replace(/[<>]/g,"")),(function(e){n.parseEditionReference(e),n.parseFileDescription(e),n.parseEncodingDescription(e),n.parseTextProfile(e),n.parseOutsideMetadata(e),n.parseRevisionHistory(e),n.parseMsDescription(e),n.parselistObjectDescription(e)})),console.log("## parseProjectInfo ##",e.getProjectInfo())};return n.parseEditionReference=function(t){var n=angular.element(t),i=n.find("<titleStmt>".replace(/[<>]/g,"")+" title")[0],o=n.find("<titleStmt>".replace(/[<>]/g,"")+" author")[0],r=n.find("<publicationStmt>".replace(/[<>]/g,"")+" publisher")[0],a={title:i?i.textContent:"",author:o?o.textContent:"",publisher:r?r.textContent:""};e.updateProjectInfoContent(a,"editionReference")},n.parseFileDescription=function(n){var i=angular.element(n);angular.forEach(i.find("<fileDesc>".replace(/[<>]/g,"")),(function(i){if(i.children.length>0){var o=t.parseXMLElement(n,i,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;e.updateProjectInfoContent(o,"fileDescription")}}))},n.parseEncodingDescription=function(i){var o=angular.element(i);angular.forEach(o.find("<encodingDesc>".replace(/[<>]/g,"")),(function(o){if(o.children.length>0){var r="",a=angular.element(o).find("variantEncoding")[0];if(a){var s=t.parseXMLElement(i,o,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;r=s||"",r+="<span class=\"variantEncoding\">{{ 'PROJECT_INFO.ENCODING_METHOD_USED' | translate:'{ method:  \""+a.getAttribute("method")+"\" }' }}</span>",n.parseVariantEncodingInfo(a)}e.updateProjectInfoContent(r,"encodingDescription")}}))},n.parseVariantEncodingInfo=function(t){t.hasAttribute("method")&&e.setEncodingDetail("variantEncodingMethod",t.getAttribute("method")),t.hasAttribute("location")&&e.setEncodingDetail("variantEncodingLocation",t.getAttribute("location"))},n.parseTextProfile=function(n){var i=angular.element(n);angular.forEach(i.find("<profileDesc>".replace(/[<>]/g,"")),(function(i){if(i.children.length>0){var o=t.parseXMLElement(n,i,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;e.updateProjectInfoContent(o,"textProfile")}}))},n.parseOutsideMetadata=function(n){var i=angular.element(n);angular.forEach(i.find("<xenoData>".replace(/[<>]/g,"")),(function(i){if(i.children.length>0){var o=t.parseXMLElement(n,i,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;e.updateProjectInfoContent(o,"outsideMetadata")}}))},n.parseRevisionHistory=function(n){var i=angular.element(n);angular.forEach(i.find("<revisionDesc>".replace(/[<>]/g,"")),(function(i){var o=t.parseXMLElement(n,i,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;e.updateProjectInfoContent(o,"revisionHistory")}))},n.parseMsDescription=function(n){var i=angular.element(n);angular.forEach(i.find("<msDesc>".replace(/[<>]/g,"")),(function(i){var o=t.parseXMLElement(n,i,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;e.updateProjectInfoContent(o,"msDesc")}))},n.parselistObjectDescription=function(n){var i=angular.element(n);angular.forEach(i.find("<listObject>".replace(/[<>]/g,"")),(function(i){var o=t.parseXMLElement(n,i,{skip:"<evtNote>",exclude:"<listBibl>, <listWit>",context:"projectInfo"}).outerHTML;e.updateProjectInfoContent(o,"listObject")})),console.log("## parselistObjectDescription ##",e.getProjectInfo().listObject)},n}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtCriticalParser",["$q","parsedData","evtParser","evtCriticalApparatusParser","evtCriticalElementsParser","config","evtDepaParser",function(e,t,n,i,o,r,a){var s={},l=r.quoteDef,c=r.analogueDef,u=(n.createRegExpr(c),"<evt-reading>,<pb>,<app>,<lem>, <rdg>,<rdgGrp>,"+l+","+c+",<evt-quote>,<evt-analogue>,<evt-version-reading>");r.skipWitnesses.split(",").filter((function(e){return 0!==e.length}));return s.parseWitnessText=function(o,a,l){var c,d=e.defer();if(void 0!==o){var p=s.getDocToParse(o),h=p.getElementsByTagName("body")[0],f=t.getWitness(l);if(s.parseCriticalElementsInText(h,p,l,null),h.innerHTML=h.innerHTML.replace(/>[\s\r\n]*?</g,"><"),angular.forEach(h.querySelectorAll("[exclude]"),(function(e){var t=e.getAttribute("exclude");t&&t.indexOf("#"+l)>=0&&e.parentNode.removeChild(e)})),angular.forEach(h.children,(function(e){var t=u+","+r.lacunaMilestone+","+r.fragmentMilestone;e.parentNode.replaceChild(n.parseXMLElement(p,e,{skip:t}),e)})),i.parseWitnessPageBreaks(h,f),i.parseWitnessLacunas(h,l),i.isFragmentaryWitness(h,l)){h.innerHTML=h.innerHTML.replace(/xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"/g,"");var g=i.parseFragmentaryWitnessText(h,l);c=n.balanceXHTML(g)}else c=h.innerHTML;c=n.balanceXHTML(c)}else c="<span> {{ 'MESSAGES.TEXT_NOT_AVAILABLE' | translate }}</span>";return t.addWitnessText(l,a,c),d.resolve("success"),d},s.parseCriticalText=function(i,o,a){var l,c=e.defer();if(void 0!==i){var d=s.getDocToParse(i),p=d.getElementsByTagName("body")[0];s.parseCriticalElementsInText(p,d,"",a);for(var h=p.getElementsByTagName("pb");0<h.length;){var f=h[0];f.parentNode.removeChild(f)}angular.forEach(p.children,(function(e){var t=u+","+r.lacunaMilestone+","+r.fragmentMilestone;e.parentNode.replaceChild(n.parseXMLElement(d,e,{skip:t}),e)})),l=p.outerHTML}else l="<span>Text not available.</span>";if(void 0===l){l="<span class=\"alert-msg alert-msg-error critical-text-error\"># Critical Text Error. # <br/>{{'MESSAGES.ERROR_IN_PARSING_TEXT' | translate}} <br />{{'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate}}</span>"}return""!==a&&void 0!==a&&a!==r.versions[0]||t.addCriticalText(l,o),void 0!==a&&t.addVersionText(l,o,a),c.resolve("success"),c},s.getDocRoot=function(e){if(e&&e.tagName&&"tei"===e.tagName.toLowerCase())return e;if(e&&e.parentNode)return s.getDocRoot(e.parentNode);var t=e?e.querySelector("tei"):e;return t?s.getDocRoot(t):e},s.getDocToParse=function(e){var t,i=s.getDocRoot(e).cloneNode(!0);return angular.forEach(angular.element(i).find(n.parserProperties.defDocElement),(function(n){0===n.outerHTML.localeCompare(e.outerHTML)&&(t=n)})),t||e},s.parseCriticalElementsInText=function(e,i,o,u){for(var d=e.getElementsByTagName("<app>".replace(/[<>]/g,""))||[],p=d.length-1;p<d.length&&p>=0;)n.isNestedInElem(d[p],"<app>".replace(/[<>]/g,""))||s.appendAppNode(d[p],i,o,u),p--;if("double-end-point"===t.getEncodingDetail("variantEncodingMethod")&&"external"===t.getEncodingDetail("variantEncodingLocation")){var h=Object.values(t.getCriticalEntries()._indexes.depa.start),f=[];h.map((function(e){f.indexOf(e)<0&&f.push(e)}));for(var g=f.length-1;g>=0;){var m=e.querySelector("[*|id="+f[g]+"]");m&&a.setAppInText(m,o,e),g--}}if(r.quoteDef){var v=[],b=l.split(",");angular.forEach(b,(function(t){var n=e.getElementsByTagName(t.replace(/[<>]/g,""))||[];v=v.concat(n)}));for(var y=v.length-1;y<v.length&&y>=0;)s.appendQuoteNode(v[y],i,o),y--}if(r.analogueDef){var x=[],w=c.split(",")||[];angular.forEach(w,(function(t){var n=e.querySelectorAll(t.replace("<","").replace(">",""));angular.forEach(n,(function(e){x.push(e)}))}));for(var A=x.length-1;A<x.length&&A>=0;)s.appendAnalogueNode(x[A],i,o),A--}},s.appendAnalogueNode=function(e,n,i){var r,a=s.getParsedNodeId(e),l=t.getAnalogue(a);l&&(r=o.getAnalogueText(l,i,n)),r&&e.parentNode.replaceChild(r,e)},s.appendQuoteNode=function(e,n,i){var r,a=s.getParsedNodeId(e),l=t.getQuote(a);l&&(r=o.getQuoteText(l,i,n)),r&&e.parentNode.replaceChild(r,e)},s.appendAppNode=function(e,n,i,l){var c,u=s.getParsedNodeId(e),d="recensio"===e.getAttribute("type")?t.getVersionEntry(u):t.getCriticalEntryById(u);if(!r.loadCriticalEntriesImmediately||void 0===d)if("recensio"===e.getAttribute("type"))o.handleVersionEntry(e),d=t.getVersionEntry(u);else{o.handleAppEntry(e);var p=e.getElementsByTagName("<app>".replace(/[<>]/g,""));angular.forEach(Object.values(p),(function(e){o.handleAppEntry(e)})),d=t.getCriticalEntryById(u)}if(d)switch(i){case"":"double-end-point"===t.getEncodingDetail("variantEncodingMethod")?a.setInternalAppInText(e,d,i,n):c="recensioApp"===d.type?o.getVersionEntryLemma(d,i,l):o.getEntryLemmaText(d,i);break;default:"double-end-point"===t.getEncodingDetail("variantEncodingMethod")?a.setInternalAppInText(e,d,i,n):c="recensioApp"===d.type?o.getVersionEntryReadingText(d,i):o.getEntryWitnessReadingText(d,i)}else c=s.createErrorElement(null,"encodingError");c?e.parentNode.replaceChild(c,e):"double-end-point"===t.getEncodingDetail("variantEncodingMethod")&&e.parentNode.removeChild(e)},s.createErrorElement=function(e,t){var n=document.createElement("span");return n.className=e||"errorMsg",n.textContent=t||"ERROR",n},s.getParsedNodeId=function(e){var t;return e.attributes&&e.getAttribute("xml:id")?(t=e.getAttribute("xml:id"),t="app"===e.tagName?"app_"+t:t):t=n.xpath(e).substr(1),t},s.parseSourceText=function(i,o){var r,a=e.defer();angular.element(h);if(void 0!==i){for(var l,c,d,p,h=s.getDocToParse(i),f=h.getElementsByTagName("body")[0],g=f.getElementsByTagName("seg"),m=g.length-1,v=t.getSources()._indexes.correspId[o];m>=0;)(l=g[m]).hasAttribute("type")&&"srcTxtLink"===l.getAttribute("type")&&(l.hasAttribute("xml:id")&&(c=l.getAttribute("xml:id")),void 0!==v[c]&&((d=document.createElement("evt-source-seg")).setAttribute("data-seg-id",c),d.setAttribute("data-source-id",o),p=l.innerHTML,d.innerHTML=p,l.parentNode.replaceChild(d,l))),m--;angular.forEach(f.children,(function(e){var t=u+"<evt-source-seg>";e.parentNode.replaceChild(n.parseXMLElement(h,e,{skip:t}),e)})),r=f.outerHTML}else r="<span>Text not available.</span>";if(void 0===r){r="<span class=\"alert-msg alert-msg-error\">{{'MESSAGES.ERROR_IN_PARSING_TEXT' | translate}} <br />{{'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate}}</span>"}return t.getSource(o).text=r,a.resolve("success"),a},s}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtSourcesParser",["$q","parsedData","evtParser","evtCriticalElementsParser","config",function(e,t,n,i,o){var r={},a=o.quoteDef||"<quote>",s=function e(n){var o=t.getQuotes()._indexes.sourcesRef._id;if(3!==n.nodeType&&1===n.nodeType)if(n.attributes.length>0){for(var r=0;r<n.attributes.length;r++)if("xml:id"===n.attributes[r].name){var a=n.attributes[r].value;o.indexOf(a)>=0&&i.parseSource(n)}}else if(n.childNodes.length>0)for(var s=0;s<n.childNodes.length;s++)e(n.childNodes[s])};r.parseQuotes=function(o){var r=e.defer(),s=angular.element(o);return angular.forEach(s.find(a.replace(/[<>]/g,"")),(function(e){if(n.isNestedInElem(e,"body")){var o=i.parseQuote(e);t.addQuote(o)}})),console.log("## Quotes ##",t.getQuotes()),r.resolve("success"),r};var l=function(){for(var e=t.getSources()._indexes.quotesRef._id,n=t.getQuotes()._indexes.encodingStructure,i=[],o=0;o<n.length;o++)e.indexOf(n[o])<0&&(i.push(n[o]),n.splice(o,1));for(var r=0;r<i.length;r++)delete t.getQuotes()[i[r]]};return r.parseSources=function(n,i){var a=e.defer();if(t.getQuotes()._indexes.sourcesRef._id.length>0)if(""===o.sourcesUrl){var c,u=angular.element(n);u.find("text group text").length>0?c="text group text":u.find("text").length>0?c="text":u.find('div[subtype="edition_text"]').length>0&&(c='div[subtype="edition_text"]'),angular.forEach(u.find(c),(function(e){s(e)})),console.log("## Sources ##",t.getSources()),l()}else i&&r.parseExternalSources(i);return a.resolve("success"),a},r.parseExternalSources=function(n){for(var i=e.defer(),o=0;o<n.childNodes.length;o++)s(n.childNodes[o]);return console.log("## External Sources ##",t.getSources()),l(),i.resolve("success"),i},r}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtSourcesApparatus",["parsedData","evtCriticalApparatus",function(e,t){var n={getContent:function(t,i){for(var o,r,a={attributes:{values:t.attributes||{},_keys:Object.keys(t.attributes)||[]},sources:[],quote:"",abbrQuote:{begin:"",end:""},quoteCorresp:t._indexes.correspId,_xmlSource:t._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")},s=t._indexes.sourceId||[],l=t._indexes.sourceRefId||[],c=0;c<s.length;c++)o=e.getSource(s[c]),(r=n.getSource(o))&&a.sources.push(r);for(var u=0;u<l.length;u++)o=e.getSource(l[u]),(r=n.getSource(o))&&a.sources.push(r);if(a.quote=n.getQuote(t,i),a.quote.length>=140){var d=a.quote.indexOf(" ",20),p=a.quote.lastIndexOf(" ");a.abbrQuote.begin='<span class="beginQuote">'+a.quote.substring(0,d)+"</span>",a.abbrQuote.end='<span class="endQuote">'+a.quote.substring(p)+"</span>"}return a},getSource:function(e){if(e){var t={id:e.id,abbr:"",text:"",bibl:"",url:"",_xmlSource:e._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")};if(e.abbr.msId.length>0)for(var i=0;i<e.abbr.msId.length;i++)t.abbr+='<span class="msId inSource">'+n.getText(e.abbr.msId[i])+"</span>";else e.abbr.author.length>0&&(t.abbr+='<span class="author inSource">'+n.getText(e.abbr.author[0])+"</span>",e.abbr.author.length>1?t.abbr+="et al., ":t.abbr+=", "),e.abbr.title.length>0&&(t.abbr+='<span class="title inSource">'+n.getText(e.abbr.title[0])+"</span>");""===t.abbr&&(t.abbr=e.id);for(var o=e.bibl,r=0;r<o.length;r++)t.bibl+=n.getText(o[r]);var a="";if(e.quote.length>0){for(var s=0;s<e.quote.length;s++)a+=n.getText(e.quote[s]);""!==a&&(t.text=a)}for(var l=0;l<e.url.length;l++)e.url[l].indexOf("http")>=0?t.url+='<span class="linkLabel">{{ \'CRITICAL_APPARATUS.SEE_FULL_SOURCE_WEB\' | translate }}</span><a target="_blank" href="'+e.url[l]+'">'+e.url[l]+"</a><br/>":e.url[l].indexOf(e.id)>=0&&(t.url+='<span class="linkLabel"><evt-source-ref data-source-id="'+e.id+"\">{{ 'CRITICAL_APPARATUS.SEE_FULL_SOURCE' | translate }}</evt-source-ref></span>");return t}},getSourceAbbr:function(e){var t="";if(e.abbr)if(e.abbr.msId&&e.abbr.msId.length>0)for(var i=0;i<e.abbr.msId.length;i++)t+=n.getText(e.abbr.msId[i])+" ";else e.abbr.author&&e.abbr.author.length>0&&(t+=n.getText(e.abbr.author[0]),e.abbr.author.length>1?t+="et al., ":t+=", "),e.abbr.title&&e.abbr.title.length>0&&(t+=n.getText(e.abbr.title[0]));return""===t&&(t=e.id),t},getQuote:function(e,i){var o=e.content||[],r="";for(var a in o)if("string"==typeof o[a])r+=" "+o[a];else{["EVT-POPOVER","lb","ptr","link","linkGrp","pb"].indexOf(o[a].tagName)>=0?r+="":"app"===o[a].type?r+=n.getAppText(o[a],i):"analogue"===o[a].type?r+=t.getCriticalElementContent(o[a],i):"quote"===o[a].type?r+=" (("+n.getQuote(o[a],i)+"))":void 0!==o[a].content?r+=n.getText(o[a]):r+=n.getQuote(o[a])}return r},getText:function(e){var t="",i=e.content;if(void 0!==i)for(var o=0;o<i.length;o++)"string"==typeof i[o]?t+=" "+i[o]:void 0!==i[o].content&&(t+=n.getText(i[o]));return t},getAppText:function(e,t){var i="";if(""===t||void 0===t||void 0===e._indexes.witMap[t]){var o=e.lemma;i+=n.getText(e.content[o])}else{var r=e._indexes.witMap[t];i+=n.getText(e.content[r])}return i}};return n}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtAnaloguesParser",["$q","evtParser","parsedData","evtCriticalElementsParser","config",function(e,t,n,i,o){var r={},a=(o.quoteDef,o.analoguesUrl||""),s=o.analogueDef||"<seg>,<ref[type=parallelPassage]>";return r.parseAnalogues=function(o,l){var c,u=e.defer(),d=angular.element(o);(angular.forEach(d.find(s.replace(/[<>]/g,"")),(function(e){if(t.isNestedInElem(e,"body")){var o=i.parseAnalogue(e);(o._indexes.sourceId.length>0||o._indexes.sourceRefId.length>0)&&n.addAnalogue(o)}})),n.getAnalogues()._refId._indexes.length>0)&&(""===a||void 0===a?(d.find("text group text").length>0?c="text group text":d.find("text").length>0?c="text":d.find('div[subtype="edition_text"]').length>0&&(c='div[subtype="edition_text"]'),angular.forEach(d.find(c),(function(e){r.handleAnalogue(e)})),r.updateAnalogues()):void 0!==l&&r.parseExternalAnalogues(l));return console.log("## Analogues ##",n.getAnalogues()),u.resolve("success"),u},r.handleAnalogue=function(e){var t=n.getAnalogues()._refId,o=n.getAnalogues()._refId._indexes;if(3!==e.nodeType&&1===e.nodeType){var a=e.getAttribute("xml:id");if(a&&o.indexOf(a)>=0)for(var s=i.parseAnalogueSource(e),l=0;l<t[a].length;l++){n.getAnalogue(t[a][l]).sources.push(s)}else if(e.childNodes.length>0)for(var c=0;c<e.childNodes.length;c++)r.handleAnalogue(e.childNodes[c])}},r.updateAnalogues=function(){for(var e=n.getAnalogues(),t=n.getAnalogues()._indexes.encodingStructure,i=0;i<t.length;i++){var o=n.getAnalogue(t[i]);o.sources.length<=0&&(delete e[t[i]],t.splice(t.indexOf(o.id),1))}},r.parseExternalAnalogues=function(t){for(var i=e.defer(),o=0;o<t.childNodes.length;o++)r.handleAnalogue(t.childNodes[o]);return console.log("## External Analogues Received ##",n.getAnalogues()),r.updateAnalogues(),i.resolve("success"),i},r}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtAnaloguesApparatus",["evtSourcesApparatus",function(e){var t={getContent:function(e,n){for(var i={attributes:{values:e.attributes||{},_keys:Object.keys(e.attributes)||[]},sources:[],header:"",_xmlSource:e._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")},o=0;o<e.sources.length;o++){var r=t.getSource(e.sources[o]);r&&i.sources.push(r)}return i.header=t.getHeader(e,n),i},getSource:function(e){var n={id:e.id,abbr:"",text:"",bibl:"",url:e.url,_xmlSource:e._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")};if(e.abbr)if(e.abbr.msId&&e.abbr.msId.length>0)for(var i=0;i<e.abbr.msId.length;i++)n.abbr+='<span class="msId inSource">'+t.getText(e.abbr.msId[i])+"</span>";else e.abbr.author&&e.abbr.author.length>0&&(n.abbr+='<span class="author inSource">'+t.getText(e.abbr.author[0])+"</span>",e.abbr.author.length>1?n.abbr+="et al., ":n.abbr+=", "),e.abbr.title&&e.abbr.title.length>0&&(n.abbr+='<span class="title inSource">'+t.getText(e.abbr.title[0])+"</span>");""===n.abbr&&(n.abbr=e.id);for(var o=e.bibl,r=0;r<o.length;r++)n.bibl+=t.getText(o[r]);var a="";if(e.text.length>0){for(var s=0;s<e.text.length;s++)a+=t.getText(e.text[s]);""!==a&&(n.text=a)}return n},getHeader:function(n,i){var o=n.content||[],r='<span class="analogue-header">';for(var a in o)if("string"==typeof o[a])r+='<span class="textNode inAnalogueHeader">'+o[a]+"</span>";else{if(["EVT-POPOVER","lb","ptr","link","linkGrp","pb"].indexOf(o[a].tagName)>=0)r+="";else if("app"===o[a].type){r+='<span class="app inAnalogueHeader">'+t.getAppText(o[a],i)+"</span>"}else"analogue"===o[a].type?r+='<span class="subAnalogue inAnalogueHeader">(('+t.getHeader(o[a],i)+"))</span>":"quote"===o[a].type?r+='<span class="quote inAnalogueHeader">'+e.getQuote(o[a],i)+"</span>":"analogueContent"===o[a].type?r+=t.getHeader(o[a],i):void 0!==o[a].content&&(r+='<span class="textNode inAnalogueHeader">'+t.getText(o[a])+"</span>")}return r+="</span>"},getText:function(e){var n="",i=e.content;if(void 0!==i)for(var o=0;o<i.length;o++)"string"==typeof i[o]?n+=" "+i[o]:void 0!==i[o].content&&(n+=t.getText(i[o]));return n},getAppText:function(e,n){var i="";if(""===n||void 0===n||void 0===e._indexes.witMap[n]){var o=e.lemma;i+=t.getText(e.content[o])}else{var r=e._indexes.witMap[n];i+=t.getText(e.content[r])}return i}};return t}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtCriticalElementsParser",["evtParser","parsedData","config","xmlParser",function(e,t,n,i){var o={},r="<lem>, <rdg>",a=n.quoteDef||"<quote>",s=n.analogueDef||"<seg>,<ref[type=parallelPassage]>",l=e.createRegExpr(s),c=function(i,r){var s,c={id:"",attributes:[],content:[],note:"",_significant:!0,_group:void 0,_xmlTagName:r.tagName,_xmlSource:r.outerHTML};s=r.getAttribute("xml:id")?"rdg_"+r.getAttribute("xml:id"):e.xpath(r).substr(1),c.id=s;for(var u=0;u<r.attributes.length;u++){var d=r.attributes[u];if(d.specified){if(c.attributes[d.name]=d.value,"wit"===d.name||"source"===d.name){var p=d.value.split("#").filter((function(e){return 0!==e.length}));for(var h in c.wits=[],p){var f=p[h].replace(" ","");if(void 0!==t.getWitness(f))if(t.isWitnessesGroup(f)){var g=t.getWitnessesInGroup(f);for(var m in c.wits.push.apply(c.wits,g),g)void 0===i._indexes.witMap[g[m]]&&(i._indexes.witMap[g[m]]=s)}else c.wits.push(f),void 0===i._indexes.witMap[f]&&(i._indexes.witMap[f]=s)}}c._significant&&n.notSignificantVariant.indexOf("["+d.name+"="+d.value+"]")>=0&&(c._significant=!1),t.addCriticalEntryFilter(d.name,d.value)}}return angular.forEach(r.childNodes,(function(e){if(3===e.nodeType)""!==e.textContent.trim()&&c.content.push(e.textContent.trim());else if(1===e.nodeType)if("note"===e.tagName)c.note=e.innerHTML;else if("<app>".indexOf("<"+e.tagName+">")>=0){var t=o.handleAppEntry(e,i.id);if("recensioApp"===i.type&&"rdgGrp"===r.parentNode.tagName){var s=o.handleAppEntry(e,r);c.content.push(s)}else c.content.push({id:t.id,type:"subApp"}),i._indexes.subApps.push(t.id)}else{var u="",d="";if(void 0!==angular.element(e)[0].innerHTML&&(u=angular.element(e)[0].innerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),d=angular.element(e)[0].outerHTML.replace(u,"")),c._significant&&n.notSignificantVariant.indexOf("<"+e.tagName+">")>=0&&(c._significant=!1),n.fragmentMilestone.indexOf(e.tagName)>=0&&null===e.getAttribute("wit")){var p=r.getAttribute("wit");e.setAttribute("wit",p)}if(n.lacunaMilestone.indexOf(e.tagName)>=0&&null===e.getAttribute("wit")){var h=r.getAttribute("wit");e.setAttribute("wit",h)}a.indexOf("<"+e.tagName+">")>=0?c.content.push(o.parseQuote(e)):l.test(d)?c.content.push(o.parseAnalogue(e)):angular.element(e).find("<app>".replace(/[<>]/g,""))?c.content.push(function e(t){if(n.lacunaMilestone.indexOf("<"+t.tagName+">")<0&&n.fragmentMilestone.indexOf("<"+t.tagName+">")<0){var i={tagName:t.tagName,type:"genericElement",attributes:[],content:[]};if(t.attributes)for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];s.specified&&(i.attributes[s.name]=s.value)}return angular.forEach(t.childNodes,(function(r){if(3===r.nodeType)""!==r.textContent.trim()&&i.content.push(r.textContent.trim());else if("<"+r.tagName+">"=="<app>"){var s=o.handleAppEntry(r);i.content.push({id:s.id,type:"subApp"})}else{var c=angular.element(r)[0].innerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),u=angular.element(r)[0].outerHTML.replace(c,"");if(n.fragmentMilestone.indexOf(r.tagName)>=0&&null===r.getAttribute("wit")){var d=t.getAttribute("wit");r.setAttribute("wit",d)}if(n.lacunaMilestone.indexOf(r.tagName)>=0&&null===r.getAttribute("wit")){var p=t.getAttribute("wit");r.setAttribute("wit",p)}a.indexOf("<"+r.tagName+">")>=0&&i.content.push(o.parseQuote(r)),l.test(u)&&i.content.push(o.parseAnalogue(r)),angular.element(r).find("<app>".replace(/[<>]/g,""))?i.content.push(e(r)):i.content.push(r.cloneNode(!0))}})),i}return t}(e)):c.content.push(e.cloneNode(!0))}})),c},u=function(i){var a,s={type:"app",id:"",attributes:[],lemma:"",note:"",content:{},_indexes:{encodingStructure:[],readings:{_indexes:[],_significant:[]},groups:[],subApps:[],witMap:{}},_subApp:!1,_xmlSource:i.outerHTML||""};if(a=i.getAttribute("xml:id")?"app_"+i.getAttribute("xml:id"):e.xpath(i).substr(1),s.id=a,i.attributes)for(var l=0;l<i.attributes.length;l++){var u=i.attributes[l];u.specified&&(s.attributes[u.name]=u.value,t.addCriticalEntryFilter(u.name,u.value))}return"app"===i.parentNode.parentNode.parentNode.tagName&&"recensio"===i.parentNode.parentNode.parentNode.getAttribute("type")?s._subApp=!1:s._subApp=e.isNestedInElem(i,"<app>".replace(/[<>]/g,"")),n.versions.length>0&&(s._isInMainVersion=e.isInMainVersion(i)),angular.forEach(i.childNodes,(function(i){if(1===i.nodeType)if(r.indexOf("<"+i.tagName+">")>=0){var l=c(s,i);"<lem>".indexOf("<"+i.tagName+">")>=0?s.lemma=l.id:(s._indexes.readings._indexes.push(l.id),l._significant&&s._indexes.readings._significant.indexOf(l.id)<0&&s._indexes.readings._significant.push(l.id)),s.content[l.id]=l,s._indexes.encodingStructure.push(l.id)}else if("<rdgGrp>".indexOf("<"+i.tagName+">")>=0)!function(i,o){var a,s={attributes:[],content:[]};a=o.getAttribute("xml:id")?"rdg_"+o.getAttribute("xml:id"):e.xpath(o).substr(1),s.id=a,angular.forEach(o.childNodes,(function(e){if(r.indexOf("<"+e.tagName+">")>=0){var a=c(i,e);a._group=s.id,s.content.push(a.id);for(var l=0;l<o.attributes.length;l++){var u=o.attributes[l];u.specified&&(s.attributes[u.name]=u.value,void 0===a.attributes[u.name]&&(a.attributes[u.name]=u.value,a._significant&&n.notSignificantVariant.indexOf("["+u.name+"="+u.value+"]")>=0&&(a._significant=!1)),t.addCriticalEntryFilter(u.name,u.value))}i._indexes.readings._indexes.push(a.id),i.content[a.id]=a,(a._significant||"lem"===e.tagName)&&i._indexes.readings._significant.push(a.id)}else"<rdgGrp>".indexOf("<"+e.tagName+">")})),i._indexes.groups.push(s.id),i.content[s.id]=s,i._indexes.encodingStructure.push(s.id)}(s,i);else if("<app>".indexOf("<"+i.tagName+">")>=0){var u=o.handleAppEntry(i,a),d={id:u.id,type:"subApp"};s.content[u.id]=d,s._indexes.encodingStructure.push(u.id),s._indexes.subApp.push(u.id)}else"note"===i.tagName&&(s.note=i.innerHTML)})),s};o.handleAppEntry=function(e,n){var i=u(e)||void 0;(e.querySelectorAll("rdg lacunaStart").length>0||e.querySelectorAll("rdg lacunaEnd").length>0)&&(i._lacuna=!0),(e.querySelectorAll("rdg witStart").length>0||e.querySelectorAll("rdg witEnd").length>0)&&(i._fragment=!0);var o=i._indexes.readings._significant,r=o.length;""!==i.lemma&&o.indexOf(i.lemma)>=0&&(r-=1);var a=t.getWitnessesList(),s=r/a.length;i._variance=s;var l=Object.keys(i._indexes.witMap),c=[];if(l.length<a.length)for(var d in a)l.indexOf(a[d])<0&&c.push(a[d]);i._indexes.missingWits=c;var p=i.content[i.lemma];return p&&(p.wits&&0!==p.wits.length||(p.autoWits=c)),n&&(i._indexes._parentEntry=n),t.addCriticalEntry(i),i};o.handleVersionEntry=function(i){var o={type:"recensioApp",id:"",attributes:[],lemma:"",content:{},_indexes:{witMap:{}},_xmlSource:i.outerHTML||""};if(i.hasAttribute("xml:id")?o.id=i.getAttribute("xml:id"):o.id=e.xpath(i).substr(1),i.attributes)for(var r=0;r<i.attributes.length;r++){var a=i.attributes[r];a.specified&&(o.attributes[a.name]=a.value,o.attributes.length++)}return angular.forEach(i.childNodes,(function(e){if(1===e.nodeType)if("note"===e.tagName)o.note=e.innerHTML;else if("<rdgGrp>".indexOf("<"+e.tagName+">")>=0){var i=function(e,i){var o={id:"",versionId:"",attributes:[],content:{},lemma:""},r="";if(i.attributes)for(var a=0;a<i.attributes.length;a++){var s=i.attributes[a];if(s.specified&&(o.attributes[s.name]=s.value,o.attributes.length++,"ana"===s.name)){r=s.value.replace("#",""),o.id=r;var l=n.versions.indexOf(r);l>=0&&(o.versionId="Version &#"+(l+65)+";")}}return angular.forEach(i.childNodes,(function(n){if(1===n.nodeType){var i=c(e,n);if(void 0===i.wits){var a=t.getVersionEntries()._indexes.versionWitMap[r];if(void 0!==a&&a.length>0){i.wits=[];for(var s=0;s<a.length;s++)i.wits.push(a[s])}}"lem"===n.tagName&&(o.lemma=i.id),o.content[i.id]=i}})),e.content[r]=o,o}(o,e);i.lemma;i.id===n.versions[0]&&""!==i.lemma&&(o.lemma=i.lemma)}})),t.addVersionEntry(o),o},o.getEntryWitnessReadingText=function(e,n){var i;if(null!==e){var r=e._indexes.readings._indexes;if(i=document.createElement("evt-reading"),""!==e.lemma&&!e._lacuna&&1===r.length)(e.content[r[0]].wits||[]).length===t.getWitnessesList().length&&((i=document.createElement("span")).className=e.content[r[0]]._xmlTagName);i.setAttribute("data-app-id",e.id),i.setAttribute("data-scope-wit",n);var a=e._indexes.witMap[n];if(void 0!==a&&""!==a){i.setAttribute("data-reading-id",a);var s=e.content[a].content;if(s.length>0)for(var l in s)if("string"==typeof s[l])i.appendChild(document.createTextNode(s[l]));else if("subApp"===s[l].type){var c=t.getCriticalEntryById(s[l].id),u=o.getEntryWitnessReadingText(c,n),p=c._indexes.witMap[n]||"";u.setAttribute("data-reading-id",p),null!==u&&i.appendChild(u)}else if("quote"===s[l].type){var h=o.getQuoteText(s[l],n);i.appendChild(h)}else if("analogue"===s[l].type){var f=o.getAnalogueText(s[l],n);i.appendChild(f)}else if("genericElement"===s[l].type){var g=d(s[l],n);i.appendChild(g)}else i.appendChild(s[l]);else if(e._lacuna){var m=document.createElement("span");m.className="lacunaApp evt_note",i.appendChild(m)}else{var v=document.createElement("span");v.className="omission",i.appendChild(v)}}else if(e.lemma&&e.lemma.indexOf("depa-lem")<0)i=o.getEntryLemmaText(e,n);else if("double-end-point"!==t.getEncodingDetail("variantEncodingMethod")){var b=document.createElement("span");b.className="empty",b.setAttribute("title","noRdg"),i.appendChild(b)}}else{var y=document.createElement("span");y.className="encodingError",y.setAttribute("title","General error"),i.appendChild(y)}return i.setAttribute("data-type","variant"),i.childNodes.length<=0&&(i.innerHTML='<span class="emptyText"></span>'),i};var d=function e(n,i){var r=document.createElement("span");r.className=n.tagName;var a=Object.keys(n.attributes);for(var s in a){var l=a[s],c=n.attributes[l];"xml:id"!==l&&r.setAttribute("data-"+l.replace(":","-"),c)}var u=n.content;for(var d in u)if("string"==typeof u[d])r.appendChild(document.createTextNode(u[d]));else if("subApp"===u[d].type){var p=t.getCriticalEntryById(u[d].id),h=""===i?o.getEntryLemmaText(p,i):o.getEntryWitnessReadingText(p,i),f=p._indexes.witMap[i]||"";h.setAttribute("data-reading-id",f),null!==h&&r.appendChild(h)}else if("quote"===u[d].type){var g=o.getQuoteText(u[d],i);r.appendChild(g)}else if("analogue"===u[d].type){var m=o.getAnalogueText(u[d],i);r.appendChild(m)}else if("genericElement"===u[d].type){var v=e(u[d],i);r.appendChild(v)}return r};o.getVersionEntryReadingText=function(e,n){var i,r,a,s,l,c="",u=[];if(null!==e){(i=document.createElement("evt-version-reading")).setAttribute("data-app-id",e.id);var p,h,f,g=document.createElement("i");if(g.className="iconbis-evt_fork",g.setAttribute("title","There are alternative versions of this part of text"),i.appendChild(g),0!==Object.keys(e._indexes.witMap).length){if(""!==(c=e._indexes.witMap[n])){for(r in e.content)for(a in e.content[r].content)a===c&&(u=e.content[r].content[a].content);if(void 0!==u&&u.length>0)for(s in u)if("string"==typeof u[s])i.appendChild(document.createTextNode(u[s]));else if("app"===u[s].type){var m=t.getCriticalEntryById(u[s].id),v=o.getEntryWitnessReadingText(m,n);null!==v&&i.appendChild(v)}else if("quote"===u[s].type)p=o.getQuoteText(u[s],n),i.appendChild(p);else if("analogue"===u[s].type)h=o.getAnalogueText(u[s],n),i.appendChild(h);else if("genericElement"===u[s].type)f=d(u[s],n),i.appendChild(f);else if("recensioApp"===u[s].type){var b=o.getVersionEntryReadingText(u[s],n);i.appendChild(b)}else i.appendChild(u[s])}}else{var y,x=t.getVersionEntries()._indexes.versionWitMap;for(r in x)x[r].indexOf(n)>=0&&(y=r);if(void 0!==y){if(i.setAttribute("data-scope-version",y),void 0===e.content[y])return null;var w=e.content[y].lemma,A=Object.keys(e.content[y].content)[0],_=e.content[y].content[A];if(void 0!==w&&""!==w){var E=e.content[y].content[w].content;for(a in E)if("string"==typeof E[a])i.appendChild(document.createTextNode(E[a]));else if("subApp"===E[a].type||"app"===E[a].type){var S=t.getCriticalEntryById(E[a].id),T=""===n?o.getEntryLemmaText(S,n):o.getEntryWitnessReadingText(S,n),C=S._indexes.witMap[n]||"";T.setAttribute("data-reading-id",C),null!==T&&i.appendChild(T)}else"quote"===E[a].type?(p=o.getQuoteText(E[a],n),i.appendChild(p)):"analogue"===E[a].type?(h=o.getAnalogueText(E[a],n),i.appendChild(h)):"genericElement"===E[a].type&&(f=d(E[a],n),i.appendChild(f));c=w}else if(void 0!==_&&""!==_){u=_.content;for(a in u)if("string"==typeof u[a])i.appendChild(document.createTextNode(u[a]));else if("subApp"===u[a].type||"app"===u[a].type){S=t.getCriticalEntryById(u[a].id),T=o.getEntryWitnessReadingText(S,n),C=S._indexes.witMap[n]||"";T.setAttribute("data-reading-id",C),null!==T&&i.appendChild(T)}else"quote"===u[a].type?(p=o.getQuoteText(u[a],n),i.appendChild(p)):"analogue"===u[a].type?(h=o.getAnalogueText(u[a],n),i.appendChild(h)):"genericElement"===u[a].type&&(f=d(u[a],n),i.appendChild(f));c=w}}else{var k=document.createTextNode("Warning: no version has been defined for the current witness. Please check your encoded file.");(l=document.createElement("span")).className="encodingError",l.appendChild(k),i.appendChild(l)}}i.setAttribute("data-reading-id",c),i.setAttribute("data-scope-wit",n)}else(l=document.createElement("span")).className="encodingError",l.setAttribute("title","General error"),i.appendChild(l);return i.setAttribute("data-type","versionVariant"),i},o.getEntryLemmaText=function(e,i){var r,a;if(null!==e){if((r=document.createElement("evt-reading")).setAttribute("data-app-id",e.id),r.setAttribute("data-scope-wit",i),r.setAttribute("data-type","lemma"),e._lacuna){var s=document.createElement("span");s.className="lacunaApp evt_note",r.appendChild(s)}else if(e.lemma&&e.lemma.indexOf("depa-lem")<0){r.setAttribute("data-reading-id",e.lemma);var l=e.content[e.lemma].content;for(var c in l)if("string"==typeof l[c])r.appendChild(document.createTextNode(l[c]));else if("subApp"===l[c].type){var u=t.getCriticalEntryById(l[c].id),p=""===i?o.getEntryLemmaText(u,i):o.getEntryWitnessReadingText(u,i),h=u._indexes.witMap[i]||"";p.setAttribute("data-reading-id",h),null!==p&&r.appendChild(p)}else if("quote"===l[c].type){var f=o.getQuoteText(l[c],i);r.appendChild(f)}else if("analogue"===l[c].type){var g=o.getAnalogueText(l[c],i);r.appendChild(g)}else if("genericElement"===l[c].type){var m=d(l[c],i);r.appendChild(m)}}else""!==n.preferredWitness?null!==(r=o.getEntryWitnessReadingText(e,n.preferredWitness))&&(r.className="autoLemma"):"double-end-point"!==t.getEncodingDetail("variantEncodingMethod")&&((a=document.createElement("span")).className="encodingError",a.setAttribute("title","General error"),r.appendChild(a));if(null!==r){var v=Object.keys(e.attributes);for(var b in v){var y=v[b],x=e.attributes[y];"xml:id"!==y&&r.setAttribute("data-"+y.replace(":","-"),x)}void 0!==e._variance&&r.setAttribute("data-variance",e._variance)}}else(a=document.createElement("span")).className="encodingError",a.setAttribute("title","General error"),r.appendChild(a);return r.childNodes.length<=0&&(r.innerHTML='<span class="emptyText"></span>'),r},o.getVersionEntryLemma=function(e,n,i){var r,a;if(null!==e){(r=document.createElement("evt-version-reading")).setAttribute("data-app-id",e.id),r.setAttribute("data-type","versionLemma"),r.setAttribute("data-scope-version",i);var s=document.createElement("i");if(s.className="iconbis-evt_fork",s.setAttribute("title","There are alternative versions of this part of text"),r.appendChild(s),void 0!==e.content[i]){var l=e.content[i].lemma,c=Object.keys(e.content[i].content)[0],u=e.content[i].content[c];if(void 0!==l&&""!==l){r.setAttribute("data-reading-id",l);var d=e.content[i].content[e.content[i].lemma].content;for(var p in d)if("string"==typeof d[p])r.appendChild(document.createTextNode(d[p]));else if("app"===d[p].type){var h=t.getCriticalEntryById(d[p].id);null!==(b=o.getEntryLemmaText(h,""))&&r.appendChild(b)}else if("quote"===d[p].type){var f=o.getQuoteText(d[p],n);r.appendChild(f)}else if("analogue"===d[p].type){var g=o.getAnalogueText(d[p],n);r.appendChild(g)}else if("recensioApp"===d[p].type){var m=o.getVersionEntryLemma(d[p],n,i);r.appendChild(m)}}else if(void 0!==u&&""!==u){r.setAttribute("data-reading-id",c);var v=u.content;for(var p in v)if("string"==typeof v[p])r.appendChild(document.createTextNode(v[p]));else if("app"===v[p].type){var b;h=t.getCriticalEntryById(v[p].id);null!==(b=o.getEntryWitnessReadingText(h,""))&&r.appendChild(b)}else if("quote"===v[p].type){f=o.getQuoteText(v[p],n);r.appendChild(f)}else if("analogue"===v[p].type){g=o.getAnalogueText(v[p],n);r.appendChild(g)}else if("recensioApp"===v[p].type){m=o.getVersionEntryLemma(v[p],n,i);r.appendChild(m)}}else(a=document.createElement("span")).className="encodingError",a.setAttribute("title","lem missing inside of the version rdgGrp"),r.appendChild(a)}else(a=document.createElement("span")).className="encodingError",a.setAttribute("title","Wrong version id"),r.appendChild(a);if(null!==r){var y=Object.keys(e.attributes);for(var x in y){var w=y[x],A=e.attributes[w];"xml:id"!==w&&r.setAttribute("data-"+w.replace(":","-"),A)}}}else(a=document.createElement("span")).className="encodingError",a.setAttribute("title","General error"),r.appendChild(a);return r};var p=function t(n){var i={tagName:n.tagName,type:"quoteContent",attributes:[],content:[],_xmlSource:n.outerHTML};if(n.attributes)for(var r=0;r<n.attributes.length;r++){var s=n.attributes[r];s.specified&&(i.attributes[s.name]=s.value)}return angular.forEach(n.childNodes,(function(n){if(3===n.nodeType)""!==n.textContent.trim()&&i.content.push(n.textContent.trim());else if(1===n.nodeType){var r=angular.element(n)[0].innerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),s=angular.element(n)[0].outerHTML.replace(r,"");if(a.indexOf("<"+n.tagName+">")>=0)i.content.push(o.parseQuote(n));else if("<app>".indexOf("<"+n.tagName+">")>=0)i.content.push(o.handleAppEntry(n));else if(l.test(s))i.content.push(o.parseAnalogue(n));else if("note"===n.tagName)i.content.push(e.parseNote(n));else if(n.children.length>0)for(var c=0;c<n.children.length;c++)i.content.push(n.children[c].cloneNode(!0)),t(n.children[c]);else i.content.push(t(n))}})),i};o.parseQuote=function(i){var r,s,c,u={type:"quote",id:"",attributes:[],content:[],_indexes:{sourceId:[],sourceRefId:[],correspId:{},subQuotes:[]},_subQuote:!1,_xmlSource:i.outerHTML};if(c=i.getAttribute("xml:id")?i.getAttribute("xml:id"):e.xpath(i).substr(1),u.id=c,n.versions.length>0&&(u._isInMainVersion=e.isInMainVersion(i)),i.attributes)for(r=0;r<i.attributes.length;r++){var d,h=i.attributes[r];if(h.specified&&(u.attributes[h.name]=h.value),"source"===h.name&&(d=h.value.replace(/#/g,"").split(" "),u._indexes.sourceRefId=d),"ref"===h.name&&(d=h.value.replace(/#/g,"").split(" "),u._indexes.sourceRefId=d),"corresp"===h.name)for(s in d=h.value.replace(/#/g,"").split(" ")){var f=d[s].indexOf("/"),g=d[s].substring(0,f);void 0===u._indexes.correspId[g]?(u._indexes.correspId[g]=[],u._indexes.correspId[g].push(d[s].substring(f+1))):u._indexes.correspId[g].push(d[s].substring(f+1))}}var m=a.split(",");for(r=0;r<m.length&&!u._subQuote;)u._subQuote=e.isNestedInElem(i,m[r].replace(/[<>]/g,"")),r++;return angular.forEach(i.childNodes,(function(t){if(3===t.nodeType)""!==t.textContent.trim()&&u.content.push(t.textContent.trim());else if(1===t.nodeType){var n=angular.element(t)[0].innerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),s=angular.element(t)[0].outerHTML.replace(n,""),c=["bibl","biblStruct","biblFull","msDesc"],d=["ptr","ref","link"];if("listBibl"===t.tagName)for(r=0;r<t.children.length;r++)if(c.indexOf(t.children[r].tagName)>=0){var h=o.parseSource(t.children[r],i);u._indexes.sourceId.push(h.id),u.content.push(h)}else u.content.push(p(t.children[r]));else if(c.indexOf(t.tagName)>=0){var f=o.parseSource(t,i);u._indexes.sourceId.push(f.id),u.content.push(f)}else if(d.indexOf(t.tagName)>=0){if(u.content.push(p(t)),t.hasAttribute("target")){var g=t.getAttribute("target").replace(/#/g,"").split(" ");for(r=0;r<g.length;r++)u._indexes.sourceRefId.push(g[r])}}else if("linkGrp"===t.tagName){for(r=0;r<t.children.length;r++)if(d.indexOf(t.children[r].tagName)>=0&&(u.content.push(p(t.children[r])),t.children[r].hasAttribute("target"))){var m=t.children[r].getAttribute("target").replace(/#/g,"").split(" ");for(r=0;r<m.length;r++)u._indexes.sourceRefId.push(m[r])}}else if("<app>".indexOf("<"+t.tagName+">")>=0)u.content.push(o.handleAppEntry(t));else if(a.indexOf("<"+t.tagName+">")>=0){var v=o.parseQuote(t);u.content.push(v),u._indexes.subQuotes.push(v.id)}else l.test(s)?u.content.push(o.parseAnalogue(t)):"note"===t.tagName?u.content.push(e.parseNote(t)):u.content.push(p(t))}})),t.addQuote(u),u};var h=function e(t,n){var i={tagName:t.tagName,type:"sourceContent",attributes:[],content:[],url:[]};if(t.attributes)for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o];r.specified&&(i.attributes[r.name]=r.value)}return angular.forEach(t.childNodes,(function(t){if(3===t.nodeType)""!==t.textContent.trim()&&i.content.push(t.textContent.trim());else if(1===t.nodeType)if("citedRange"===t.tagName)null!==t.getAttribute("target")&&""!==t.getAttribute("target")&&i.url.push(t.getAttribute("target")),i.content.push(e(t));else if(t.children.length>0)for(var n=0;n<t.children.length;n++)i.content.push(e(t.children[n]));else i.content.push(e(t))})),i};o.parseSource=function(n,i){var o,r,a,s={id:"",abbr:{title:[],author:[],msId:[]},attributes:[],quotesEntriesId:[],bibl:[],quote:[],url:[],text:{},_textAvailable:!1,_xmlSource:n.outerHTML};if(n.attributes)for(o=0;o<n.attributes.length;o++){var l=n.attributes[o];if(l.specified){if("xml:id"===l.name&&(a=l.value),"target"===l.name||"source"===l.name||"ref"===l.name){var c=l.value.replace(/#/g,"").split(" ");for(r=0;r<c.length;r++)s.url.push(c[r])}s.attributes[l.name]=l.value,s.attributes.length++}}void 0===a&&(a=e.xpath(n).substr(1)),s.id=a,void 0!==t.getQuotes()._indexes.sourcesRef[s.id]?s.quotesEntriesId=t.getQuotes()._indexes.sourcesRef[s.id]:i.hasAttribute("xml:id")?s.quotesEntriesId.push(i.getAttribute("xml:id")):s.quotesEntriesId.push(e.xpath(i).substr(1));var u=angular.element(n);for(o in"msDesc"===n.tagName?angular.forEach(u.find("idno"),(function(e){s.abbr.msId.push(h(e))})):(angular.forEach(u.find("author"),(function(e){s.abbr.author.push(h(e))})),angular.forEach(u.find("title"),(function(e){s.abbr.title.push(h(e))}))),angular.forEach(n.childNodes,(function(e){if(3===e.nodeType)""!==e.textContent.trim()&&s.bibl.push(e.textContent.trim());else if(1===e.nodeType){var t,i=["ptr","ref","link"];if("cit"===n.tagName&&"quote"===e.tagName){var a=h(e);s.quote.push(a)}else if(i.indexOf(e.tagName)>=0){if("ref"===e.tagName?s.bibl.push(h(e)):s.bibl.push(e),e.hasAttribute("target"))for(t=e.getAttribute("target").replace(/#/g,"").split(" "),o=0;o<t.length;o++)s.url.push(t[o])}else if("linkGrp"===e.tagName){for(o=0;o<e.children.length;o++)if(i.indexOf(e.children[o].tagName)>=0&&("ref"===e.tagName?s.bibl.push(h(e)):s.bibl.push(e.children[o]),e.children[o].hasAttribute("target")))for(t=e.children[o].getAttribute("target").replace(/#/g,"").split(" "),r=0;r<t.length;r++)s.url.push(t[r])}else if("citedRange"===e.tagName){if(null!==e.getAttribute("target")&&""!==e.getAttribute("target"))for(t=e.getAttribute("target").replace(/#/g,"").split(" "),o=0;o<t.length;o++)s.url.push(t[o]);s.bibl.push(h(e))}else{var l=h(e);for(s.bibl.push(l),o=0;o<l.url.length;o++)s.url.push(l.url[o])}}})),s.url)s.url[o].indexOf(".xml")>=0&&(s._textAvailable=!0);return t.addSource(s),s};var f=function t(n,r,a){var s;if(void 0!==n.content)if(0===n.content.length){var l=i.parse(n._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")).children[0];if("pb"===n.tagName){if(""!==r&&l.getAttribute("ed").indexOf(r)>=0){var c,u=document.createElement("span");c=l.getAttribute("ed")?l.getAttribute("xml:id")||l.getAttribute("ed").replace("#","")+"-"+l.getAttribute("n"):l.getAttribute("xml:id"),u.className="pb",u.setAttribute("data-wit",l.getAttribute("ed")),u.setAttribute("data-id",c),u.setAttribute("id","pb_"+c),u.textContent=l.getAttribute("n"),s=u}}else s=e.parseXMLElement(a,l,{skip:""})}else if(1===n.content.length&&"string"==typeof n.content[0]){var d=i.parse(n._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")).children[0];s=e.parseXMLElement(a,d,{skip:""})}else{(s=document.createElement("span")).className=n.tagName?n.tagName.toLowerCase():"";var p=Object.keys(n.attributes);for(var h in p){var f=p[h],g=n.attributes[f];"xml:id"!==f&&s.setAttribute("data-"+f.replace(":","-"),g)}var m=n.content;for(var v in m){var b;"string"==typeof m[v]?((b=document.createElement("span")).setAttribute("class","textNode"),b.appendChild(document.createTextNode(m[v])),s.appendChild(b)):"quote"===m[v].type?s.appendChild(o.getQuoteText(m[v])):"EVT-POPOVER"===m[v].tagName?s.appendChild(m[v]):"app"===m[v].type?""===r?s.appendChild(o.getEntryLemmaText(m[v])):s.appendChild(o.getEntryWitnessReadingText(m[v],r)):"analogue"===m[v].type?s.appendChild(o.getAnalogueText(m[v])):void 0!==(b=t(m[v],r,a))&&s.appendChild(b)}}return s};o.getQuoteText=function(e,t,n){var i;(i=document.createElement("evt-quote")).setAttribute("data-quote-id",e.id),e._subQuote?i.setAttribute("data-type","subquote"):i.setAttribute("data-type","quote"),""!==t&&void 0!==t&&i.setAttribute("data-scope-wit",t);var r=e.content,a=["link","ptr","linkGrp"];for(var s in r){var l;"string"==typeof r[s]?((l=document.createElement("span")).setAttribute("class","textNode"),l.appendChild(document.createTextNode(r[s])),i.appendChild(l)):"EVT-POPOVER"===r[s].tagName?i.appendChild(r[s]):"app"===r[s].type?""===t?i.appendChild(o.getEntryLemmaText(r[s])):i.appendChild(o.getEntryWitnessReadingText(r[s],t)):"quote"===r[s].type?i.appendChild(o.getQuoteText(r[s],t,n)):"analogue"===r[s].type?i.appendChild(o.getAnalogueText(r[s],t,n)):"quoteContent"===r[s].type&&a.indexOf(r[s].tagName)<0&&void 0!==(l=f(r[s],t,n))&&i.appendChild(l)}return i};var g=function t(n){var i={tagName:n.tagName,type:"analogueContent",attributes:[],content:[],_xmlSource:n.outerHTML};if(n.attributes)for(var r=0;r<n.attributes.length;r++){var l=n.attributes[r];l.specified&&(i.attributes[l.name]=l.value)}return angular.forEach(n.childNodes,(function(n){if(3===n.nodeType)""!==n.textContent.trim()&&i.content.push(n.textContent.trim());else if(1===n.nodeType){var r=angular.element(n)[0].innerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),l=angular.element(n)[0].outerHTML.replace(r,"");if(a.indexOf("<"+n.tagName+">")>=0)i.content.push(o.parseQuote(n));else if("<app>".indexOf("<"+n.tagName+">")>=0)i.content.push(o.handleAppEntry(n));else if(e.createRegExpr(s).test(l))i.content.push(o.parseAnalogue(n));else if("note"===n.tagName)i.content.push(e.parseNote(n));else if(n.children.length>0)for(var c=0;c<n.children.length;c++)i.content.push(n.children[c].cloneNode(!0)),t(n.children[c]);else i.content.push(t(n))}})),i};o.parseAnalogue=function(t){var i,r,l={id:"",type:"",attributes:[],content:[],sources:[],_indexes:{sourceId:[],sourceRefId:[],subAnalogues:[]},_subAnalogue:!1,_xmlSource:t.outerHTML||""},c=t.getAttribute("xml:id")||e.xpath(t).substr(1);if(l.id=c,n.versions.length>0&&(l._isInMainVersion=e.isInMainVersion(t)),t.attributes)for(i=0;i<t.attributes.length;i++){var u,d=t.attributes[i];d.specified&&(l.attributes[d.name]=d.value),"source"===d.name&&(u=d.value.replace(/#/g,"").split(" "),l._indexes.sourceRefId=u),"corresp"===d.name&&(u=d.value.replace(/#/g,"").split(" "),l._indexes.sourceRefId=u),"ref"===d.name&&(u=d.value.replace(/#/g,"").split(" "),l._indexes.sourceRefId=u)}return angular.forEach(t.childNodes,(function(n){if(3===n.nodeType)""!==n.textContent.trim()&&l.content.push(n.textContent.trim());else if(1===n.nodeType){var c=angular.element(n)[0].innerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,""),u=angular.element(n)[0].outerHTML.replace(c,""),d=["bibl","biblStruct","biblFull","msDesc"],p=["ptr","ref","link"];if("listBibl"===n.tagName)for(i=0;i<n.children.length;i++)if(d.indexOf(n.children[i].tagName)>=0){var h=o.parseAnalogueSource(n.children[i],t);l._indexes.sourceId.push(h.id),l.sources.push(h)}else l.content.push(g(n.children[i]));else if(d.indexOf(n.tagName)>=0){var f=o.parseAnalogueSource(n,t);l._indexes.sourceId.push(f.id),l.sources.push(f)}else if(p.indexOf(n.tagName)>=0){if(l.content.push(g(n)),n.hasAttribute("target")){var m=n.getAttribute("target").replace(/#/g,"").split(" ");for(i=0;i<m.length;i++)l._indexes.sourceRefId.push(m[i])}}else if("linkGrp"===n.tagName){for(i=0;i<n.children.length;i++)if(p.indexOf(n.children[i].tagName)>=0&&(l.content.push(g(n.children[i])),n.children[i].hasAttribute("target"))){var v=n.children[i].getAttribute("target").replace(/#/g,"").split(" ");for(r=0;r<v.length;r++)l._indexes.sourceRefId.push(v[r])}}else"<app>".indexOf("<"+n.tagName+">")>=0?l.content.push(o.handleAppEntry(n)):a.indexOf("<"+n.tagName+">")>=0?l.content.push(o.parseQuote(n)):e.createRegExpr(s).test(u)?l.content.push(o.parseAnalogue(n)):"note"===n.tagName?l.content.push(e.parseNote(n)):l.content.push(g(n))}})),0===l._indexes.sourceId.length&&0===l._indexes.sourceRefId.length||(l.type="analogue"),l},o.parseAnalogueSource=function(t){var n,i,o,r={id:"",abbr:{title:[],author:[],msId:[]},attributes:[],bibl:[],text:[],url:[],_xmlSource:t.outerHTML||""};if(t.attributes)for(n=0;n<t.attributes.length;n++){var a=t.attributes[n];if(a.specified){if("xml:id"===a.name&&(o=a.value),"target"===a.name||"source"===a.name||"ref"===a.name){var s=a.value.replace(/#/g,"").split(" ");for(i=0;i<s.length;i++)r.url.push(s[i])}r.attributes[a.name]=a.value,r.attributes.length++}}void 0===o&&(o=e.xpath(t).substr(1)),r.id=o;var l=angular.element(t);return"msDesc"===t.tagName?angular.forEach(l.find("idno"),(function(e){r.abbr.msId.push(m(e))})):(angular.forEach(l.find("author"),(function(e){r.abbr.author.push(m(e))})),angular.forEach(l.find("title"),(function(e){r.abbr.title.push(m(e))}))),angular.forEach(t.childNodes,(function(e){if(3===e.nodeType)""!==e.textContent.trim()&&r.bibl.push(e.textContent.trim());else if(1===e.nodeType){var o,a=["ptr","ref","link"];if("cit"===t.tagName&&"quote"===e.tagName){var s=m(e);r.text.push(s)}else if(a.indexOf(e.tagName)>=0){if("ref"===e.tagName?r.bibl.push(m(e)):r.bibl.push(e),e.hasAttribute("target"))for(o=e.getAttribute("target").replace(/#/g,"").split(" "),n=0;n<o.length;n++)r.url.push(o[n])}else if("linkGrp"===e.tagName){for(n=0;n<e.children.length;n++)if(a.indexOf(e.children[n].tagName)>=0&&("ref"===e.tagName?r.bibl.push(m(e)):r.bibl.push(e.children[n]),e.children[n].hasAttribute("target")))for(o=e.children[n].getAttribute("target").replace(/#/g,"").split(" "),i=0;i<o.length;i++)r.url.push(o[i])}else if("citedRange"===e.tagName){if(null!==e.getAttribute("target")&&""!==e.getAttribute("target"))for(o=e.getAttribute("target").replace(/#/g,"").split(" "),n=0;n<o.length;n++)r.url.push(o[n]);r.bibl.push(h(e))}else{var l=m(e,t);for(r.bibl.push(l),n=0;n<l.url.length;n++)r.url.push(l.url[n])}}})),r};var m=function e(t){var n={tagName:t.tagName,type:"sourceContent",attributes:[],content:[],url:[]};if(t.attributes)for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];o.specified&&(n.attributes[o.name]=o.value)}return angular.forEach(t.childNodes,(function(t){if(3===t.nodeType)""!==t.textContent.trim()&&n.content.push(t.textContent.trim());else if(1===t.nodeType)if("citedRange"===t.tagName)null!==t.getAttribute("target")&&""!==t.getAttribute("target")&&n.url.push(t.getAttribute("target")),n.content.push(h(t));else if(t.children.length>0)for(var i=0;i<t.children.length;i++)n.content.push(e(t.children[i]));else n.content.push(e(t))})),n},v=function t(n,r,a){var s;if(void 0!==n.content)if(0===n.content.length){var l=i.parse(n._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")).children[0];if("pb"===n.tagName){if(""!==r&&l.getAttribute("ed").indexOf(r)>=0){var c,u=document.createElement("span");c=l.getAttribute("ed")?l.getAttribute("xml:id")||l.getAttribute("ed").replace("#","")+"-"+l.getAttribute("n"):l.getAttribute("xml:id"),u.className="pb",u.setAttribute("data-wit",l.getAttribute("ed")),u.setAttribute("data-id",c),u.setAttribute("id","pb_"+c),u.textContent=l.getAttribute("n"),s=u}}else s=e.parseXMLElement(a,l,{skip:""})}else if(1===n.content.length&&"string"==typeof n.content[0]){var d=i.parse(n._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")).children[0];s=e.parseXMLElement(a,d,{skip:""})}else{(s=document.createElement("span")).className=n.tagName?n.tagName.toLowerCase():"";var p=Object.keys(n.attributes);for(var h in p){var f=p[h],g=n.attributes[f];"xml:id"!==f&&s.setAttribute("data-"+f.replace(":","-"),g)}var m=n.content;for(var v in m)if("string"==typeof m[v])s.appendChild(document.createTextNode(m[v]));else if("quote"===m[v].type)s.appendChild(o.getQuoteText(m[v]));else if("EVT-POPOVER"===m[v].tagName)s.appendChild(m[v]);else if("app"===m[v].type)""===r?s.appendChild(o.getEntryLemmaText(m[v])):s.appendChild(o.getEntryWitnessReadingText(m[v],r));else if("analogue"===m[v].type)s.appendChild(o.getAnalogueText(m[v]));else{var b=t(m[v],r,a);void 0!==b&&s.appendChild(b)}}return s};return o.getAnalogueText=function(e,t,n){var i;(i=document.createElement("evt-analogue")).setAttribute("data-analogue-id",e.id),i.setAttribute("data-type","analogue"),""!==t&&void 0!==t&&i.setAttribute("data-scope-wit",t);var r=e.content,a=["link","ptr","linkGrp"];for(var s in r){var l;"string"==typeof r[s]?((l=document.createElement("span")).setAttribute("class","textNode"),l.appendChild(document.createTextNode(r[s])),i.appendChild(l)):"EVT-POPOVER"===r[s].tagName?i.appendChild(r[s]):"app"===r[s].type?""===t?i.appendChild(o.getEntryLemmaText(r[s])):i.appendChild(o.getEntryWitnessReadingText(r[s],t)):"quote"===r[s].type?i.appendChild(o.getQuoteText(r[s],t,n)):"analogue"===r[s].type?i.appendChild(o.getAnalogueText(r[s])):"analogueContent"===r[s].type&&a.indexOf(r[s].tagName)<0?void 0!==(l=v(r[s],t,n))&&i.appendChild(l):void 0!==r[s].content&&0!==r[s].content.length&&void 0!==(l=v(r[s],t,n))&&i.appendChild(l)}return i},o}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtVersionApparatus",["config","evtCriticalApparatus","evtParser",function(e,t,n){var i={getContent:function(t,n,o){var r={attributes:{values:t.attributes||{},_keys:Object.keys(t.attributes)||[]},versions:[],note:"",_readings:!1,_xmlSource:t._xmlSource.replace('xmlns="http://www.tei-c.org/ns/1.0"',"")};for(var a in t.content){var s=i.getVersionContent(t.content[a],n,o),l=e.versions.indexOf(s.value);r.versions.splice(l,0,s)}return void 0!==t.note&&""!==t.note&&(r.note+=t.note),(s.significantReadings.length>0||s.notSignificantReadings.length>0)&&(r._readings=!0),r},getVersionContent:function(e,i,o){var r={id:e.versionId,value:e.id,lem:"",significantReadings:[],notSignificantReadings:[],attributes:{values:e.attributes||{},_keys:Object.keys(e.attributes)||[]}},a=e.content[e.lemma];if(void 0!==a){var s=t.getLemma(a,i);if(t.getText(a).replace(/<span class="textNode">|<\/span>/g,"").length<=70)r.lem+='<span class="versionApp_lemma_content">'+s+"</span>";else{var l=s.substring(0,s.indexOf('<span class="witnesses')),c=s.substring(s.indexOf('<span class="witnesses'),s.length);r.lem=n.createAbbreviation(l,70)+c}}for(var u in e.content)if(u!==e.lemma){var d=t.getSignificantReading(e.content[u]);e.content[u]._significant?r.significantReadings.push(d):r.notSignificantReadings.push(d)}return r}};return i}])},function(e,t,n){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("evtviewer.dataHandler").service("evtBibliographyParser",["parsedData","evtParser","config",function(n,i,o){var r=o.allowedBibliographicStyles.Chicago.label,a=o.allowedBibliographicStyles.APA.label,s=o.allowedBibliographicStyles.MLA.label,l=(o.defaultBibliographicStyle,!1),c=!1,u=!1,d=!1,p=!1,h={biblStruct:"<biblStruct>",bibl:"<bibl>"},f={parseBiblInfo:function(e){var t=angular.element(e);for(var i in h)g(i,t);console.log("## parseBiblInfo ##",n.getBibliographicRefsCollection())}},g=function(e,t){var i=t.find("<listBibl>".replace(/[<>]/g,"")).find(">"+h[e].replace(/[<>]/g,""));angular.forEach(i,(function(e){var t=f.extractInfo(e);I(t);n.addBibliographicRef(t)}))};f.extractInfo=function(t){for(var n={id:"",type:"",author:[],titleAnalytic:"",titleMonogr:"",editionMonogr:"",date:"",editor:[],publisher:"",pubPlace:"",biblScope:{},note:{},idno:{},outputs:{},plainText:""},o=angular.element(t),r=!1,a=o[0].childNodes,s=0;s<a.length;s++)3===a[s].nodeType&&""!==a[s].textContent.trim()&&(r=!0);if(n.id=o.attr("xml:id")?o.attr("xml:id"):i.xpath(t),r)(a=(a=o.find("*")).sort((function(t,n){return e(n).parents().length-e(t).parents().length}))).replaceWith((function(){return'<span class="unstructuredBibl '+this.tagName+'">'+e(this).html()+"</span>"})),n.plainText=e(o).html();else{A(o,n);var l=o.find("<analytic>".replace(/[<>]/g,""));if(b(angular.element(l),n),m(o.find("author"),n.author),m(o.find("<editor>".replace(/[<>]/g,"")),n.editor),o[0].tagName===h.bibl.replace(/[<>]/g,"")){x(o[0],n),w(o.find("<biblScope>".replace(/[<>]/g,"")),n.biblScope),w(o.find("<citedRange>".replace(/[<>]/g,"")),n.biblScope);var c=o.children();c=e(c).filter((function(e,t){return t.tagName===h.bibl.replace(/[<>]/g,"")})),angular.forEach(c,(function(e){x(e,n)}))}else w(o.find("<citedRange>".replace(/[<>]/g,"")),n.biblScope),y(o,n);var u=o.find("<monogr>".replace(/[<>]/g,""));if(u){u=angular.element(u),b(u,n);u.find("<editor>".replace(/[<>]/g,""));var d=u.find("edition");n.editionMonogr=d&&d.length>0?d[0].textContent:n.editionMonogr;var f=d.find("date");""===n.date&&(n.date=f&&f.length>0?f[0].textContent:""),w(u.find("<biblScope>".replace(/[<>]/g,"")),n.biblScope),A(u,n);var g=angular.element(u.find("<imprint>".replace(/[<>]/g,"")));if(g&&g.length>0){var v=angular.element(g[0]);w(v.find("<biblScope>".replace(/[<>]/g,"")),n.biblScope);var _=g.find("date");n.date=_&&_.length>0?_[0].textContent:"";var E=g.find("publisher");""===n.publisher&&(n.publisher=E&&E.length>0?E[0].textContent:"");var C=g.find("pubPlace");""===n.pubPlace&&(n.pubPlace=C&&C.length>0?C[0].textContent:""),A(g,n)}}var k=angular.element(o.find("<series>".replace(/[<>]/g,"")));if(k&&k.length>0){var L=k.find("date");""===n.date&&(n.date=L&&L.length>0?L[0].textContent:"");var I=k.find("publisher");""===n.publisher&&(n.publisher=I&&I.length>0?I[0].textContent:"");var P=k.find("pubPlace");""===n.pubPlace&&(n.pubPlace=P&&P.length>0?P[0].textContent:""),A(k,n),w(k.find("<biblScope>".replace(/[<>]/g,"")),n.biblScope)}angular.forEach(o.find("<idno>".replace(/[<>]/g,"")),(function(e){var t=e.getAttribute("type");null!==t&&(n.idno[t]=e.textContent||"")})),T(n)||(n.plainText=o[0].textContent),D(n)&&O(n)&&(p=!0)}return S(n,!0,!0),n};var m=function(e,t){angular.forEach(e,(function(e){var n={name:"",surname:"",forename:""};if(v(e,e,n),""!==n.name&&""===n.surname){var i=C(n.name);n.surname=""!==i.surname?i.surname:n.surname,n.name=""!==i.name?i.name:n.name}t.push(n)}))},v=function e(t,n,i){if(3===t.nodeType){var o=t.textContent.substr(0,1).toUpperCase()+t.textContent.substr(1);if(n)switch(n.tagName){case"author":case"editor":case"name":i.name+=o+" ";break;case"surname":i.surname+=o+" ";break;case"forename":i.forename+=o+" "}}angular.forEach(t.childNodes,(function(t){switch(t.tagName){case"author":case"editor":case"name":case"surname":case"forename":e(t,t,i);break;default:e(t,n,i)}}))},b=function(e,t){var n=e.find("title");if(n&&n.length>0){var i=n[0].getAttribute("level")||"";i=null!==i?i.substr(0,1):"",e[0].tagName==="<monogr>".replace(/[<>]/g,"")?(i=""===i?"m":i,t.titleMonogr=n[0].textContent,t.type+=i):e[0].tagName==="<analytic>".replace(/[<>]/g,"")&&(i=""===i?"a":i,t.titleAnalytic=n[0].textContent,t.type+=i)}},y=function(e,t){angular.forEach(e.children(),(function(e){"date"===e.tagName?t.date=e.innerText:"pubPlace"===e.tagName?t.pubPlace=""===t.pubPlace?e.innerText:t.pubPlace:"publisher"===e.tagName&&(t.publisher=""===t.publisher?e.innerText:t.publisher)}))},x=function(e,t){for(var n,i=e.children,o=0;o<i.length;o++)if("title"===i[o].tagName&&(null!=(n=i[o].getAttribute("level"))&&(n=n.substring(0,1)),"m"!==n&&"j"!==n&&"u"!==n&&null!=n||(t.titleMonogr=i[o].textContent,t.type+=n),"a"===n&&null!=n&&(t.titleAnalytic=i[o].textContent,t.type+=n)),null==n||"m"===n)if("date"===i[o].tagName)t.date=i[o].textContent;else if("pubPlace"===i[o].tagName)t.pubPlace=""===t.pubPlace?i[o].textContent:t.pubPlace;else if("publisher"===i[o].tagName)t.publisher=""===t.publisher?i[o].textContent:t.publisher;else if("edition"===i[o].tagName){t.editionMonogr=""===t.editionMonogr?i[o].textContent:t.editionMonogr;var r=angular.element(i[o]).find("date");r&&r.length>0&&(t.date=""===t.date?r[0].textContent:t.date)}},w=function(e,t){angular.forEach(e,(function(e){angular.forEach(["type","unit"],(function(n){var i=e.getAttribute(n),o=e.getAttribute("from"),r=e.getAttribute("to");null!==i&&!i in t&&(null!==r&&null!==o&&""!==r&&""!==o?t[i]=o+"-"+r:""!==e.textContent&&(t[i]=e.textContent))}))}))},A=function(e,t){angular.forEach(e.find("note"),(function(e){var n=e.getAttribute("type");if(null===n){var i=1;for(n="note-"+i;n in t.note;)n="note"+ ++i}t.note[n]=e.textContent}))},_=function(e){return e&&"object"===(void 0===e?"undefined":t(e)).toLowerCase()},E=function(e){return _(e)&&e instanceof Array},S=function e(t,n,i){if("string"==typeof t)return n&&(t=t.replace(/\.$/,"")),i&&(t=(t=t.trim()).replace(/\s+/g," ")),t;if(E(t))for(var o=0,r=t.length;o<r;o++)e(t[o],!0,!0);else if(_(t))for(var a in t){var s;void 0!==(s=e(t[a],"author"!==a,!0))&&(t[a]=s)}},T=function e(n){var i,o=!1;if("string"===(void 0===(i=n)?"undefined":t(i)).toLowerCase())""!==n&&(o=!0);else if(E(n))n.length>0&&(o=!0);else if(_(n))for(var r in n)"id"!==r&&(o=o||e(n[r])),"author"===r&&n[r].length>0&&(c=!0),"date"===r&&""!==n[r]&&(l=!0),"titleAnalytic"!==r&&"titleMonogr"!==r||""===n[r]||(u=!0),"publisher"===r&&""!==n[r]&&(d=!0);return o};f.formatResult=function(e,t){if(!t.outputs[e]){var n,i,o,l="";if(null==e||""===e)""!==t.plainText&&(l+='<span data-style="unstructuredBibl">'+t.plainText+"<span>");else if(e===r){if(""!==t.plainText&&(l+='<span data-style="chicago">'+t.plainText+"<span>"),t.author&&t.author.length>0){if(l+='<span data-style="chicago" class="authors">',i=""!==(n=t.author[0]).name?n.name:n.forename,o=n.surname,""!==i&&""===o){var c=C(i);o=""!==c.surname?c.surname:o,i=""!==c.name?c.name:i}l+='<span data-style="chicago" class="author">',""!==o&&(l+='<span data-style="chicago" class="surname">'+o+"</span>"),""!==i&&""!==o?l+='<span data-style="chicago" class="name">'+L(i)+"</span>":""!==i&&(l+='<span data-style="chicago" class="name">'+i+"</span>"),l+="</span>",angular.forEach(t.author,(function(e,t){if(t>0){var n=""!==e.name?e.name:e.forename,i=e.surname;if(""!==n&&""===i){var o=C(n);i=""!==o.surname?o.surname:i,n=""!==o.name?o.name:n}l+='<span data-style="chicago" class="author">',""!==n&&""!==i?l+='<span data-style="chicago" class="name">'+L(n)+"</span>":""!==n&&(l+='<span data-style="chicago" class="name">'+n+"</span>"),""!==i&&(l+='<span data-style="chicago" class="surname">'+i+"</span>"),l+="</span>"}}))}l+="</span>",F(t)?(R(t)&&(l+='<span data-style="chicago" class="date">'+R(t)+"</span>"),P(t)&&(l+='<span data-style="chicago" data-attr="titolo" class="titleAnalytic">'+P(t)+"</span>"),O(t)&&(l+='<span data-style="chicago" data-attr="titolo" class="titleMonogr">'+O(t)+"</span>"),M(t)&&(l+='<span data-style="chicago" data-attr="titolo" class="edition">'+M(t)+"</span>"),N(t)&&(l+='<span data-style="chicago" class="pubPlace">'+N(t)+"</span>"),U(t)&&(l+='<span data-style="chicago" class="publisher">'+U(t)+"</span>"),z(t)&&(l+='<span data-style="chicago" class="url">'+z(t)+"</span>")):(R(t)&&(l+='<span data-style="chicago" class="date">'+R(t)+"</span>"),P(t)&&(l+='<span data-style="chicago" class="titleAnalytic">'+P(t)+"</span>"),O(t)&&(l+='<span data-style="chicago" class="titleMonogr">'+O(t)+"</span>"),W(t)&&(l+='<span data-style="chicago" class="editors">',angular.forEach(W(t),(function(e,t){l+='<span data-style="chicago" class="editor">';var n=""!==e.name?e.name:e.forename,i=e.surname;if(""!==n&&""===i){var o=C(n);i=""!==o.surname?o.surname:i,n=""!==o.name?o.name:n}""!==i&&(l+='<span data-style="chicago" class="editor surname">'+i+"</span>"),""!==n&&(l+='<span data-style="chicago" class="editor name">'+n+"</span>"),l+="</span>"})),l+="</span>"),N(t)&&(l+='<span data-style="chicago" class="pubPlace">'+N(t)+"</span>"),U(t)&&(l+='<span data-style="chicago" class="publisher">'+U(t)+"</span>"),B(t)&&(l+='<span data-style="chicago" class="pp">'+B(t)+"</span>"))}else if(e===a)if(""!==t.plainText&&(l+='<span data-style="apa">'+t.plainText+"<span>"),F(t))t.author&&t.author.length>0&&(l+='<span data-style="apa" class="authors">',i=""!==(n=t.author[0]).name?n.name:n.forename,o=n.surname,l+='<span data-style="apa" class="author">',""!==o&&(l+='<span data-style="apa" class="surname">'+o+"</span>"),""!==i&&""!==o&&(l+='<span data-style="apa" class="name">'+k(i)+"</span>"),""!==i&&""===o&&(l+='<span data-style="apa" class="name">'+i+"</span>"),l+="</span>",angular.forEach(t.author,(function(e,t){if(t>0){var i=""!==e.name?e.name:n.forename,o=""!==e.surname?e.surname:"";l+='<span data-style="apa" class="author">',""!==o&&(l+='<span data-style="apa" class="surname">'+o+"</span>"),""!==i&&""!==o&&(l+='<span data-style="apa" class="name">'+k(i)+"</span>"),""!==i&&""===o&&(l+='<span data-style="apa" class="name">'+i+"</span>"),l+="</span>"}})),l+="</span>"),R(t)&&(l+='<span data-style="apa" class="date">'+R(t)+"</span>"),O(t)&&(l+='<span data-style="apa" data-attr="titolo" class="titleMonogr">'+O(t)+"</span>"),B(t)&&(l+='<span data-style="apa" class="pp">'+B(t)+"</span>"),N(t)&&(l+='<span data-style="apa" class="pubPlace">'+N(t)+"</span>"),U(t)&&(l+='<span data-style="apa" class="publisher">'+U(t)+"</span>");else{if(t.author&&t.author.length>0&&(l+='<span data-style="apa" class="authors">',i=""!==(n=t.author[0]).name?n.name:n.forename,o=n.surname,l+='<span data-style="apa" class="author">',""!==o&&(l+='<span data-style="apa" class="surname">'+o+"</span>"),""!==i&&""!==o&&(l+='<span data-style="apa" class="name">'+k(i)+"</span>"),""!==i&&""===o&&(l+='<span data-style="apa" class="name">'+i+"</span>"),l+="</span>",angular.forEach(t.author,(function(e,t){if(t>0){var i=""!==e.name?e.name:n.forename,o=""!==e.surname?e.surname:"";if(""!==i&&""===o){var r=C(i);o=""!==r.surname?r.surname:o,i=""!==r.name?r.name:i}l+='<span data-style="apa" class="author">',""!==o&&(l+='<span data-style="apa" class="surname">'+o+"</span>"),""!==i&&""!==o&&(l+='<span data-style="apa" class="name">'+k(i)+"</span>"),""!==i&&""===o&&(l+='<span data-style="apa" class="name">'+i+"</span>"),l+="</span>"}})),l+="</span>"),R(t)&&(l+='<span data-style="apa" class="date">'+R(t)+"</span>"),P(t)&&(l+='<span data-style="apa" data-attr="titolo" class="titleAnalytic">'+P(t)+"</span>"),O(t)&&(l+='<span data-style="apa" data-attr="titolo" class="titleMonogr">'+O(t)+"</span>"),$(t)){var u=$(t);if(H(t)){var d=H(t);l+='<span data-style="apa" class="vol">'+u+"("+d+")</span>"}else l+='<span data-style="apa" class="vol">'+u+"</span>"}B(t)&&(l+='<span data-style="apa" class="pp">'+B(t)+"</span>"),N(t)&&(l+='<span data-style="apa" class="pubPlace">'+N(t)+"</span>"),U(t)&&(l+='<span data-style="apa" class="publisher">'+U(t)+"</span>")}else e===s&&(""!==t.plainText&&(l+='<span data-style="mla">'+t.plainText+"<span>"),F(t),t.author&&t.author.length>0&&(l+='<span data-style="mla" class="authors">',i=""!==(n=t.author[0]).name?n.name:n.forename,o=n.surname,l+='<span data-style="mla" class="author">',""!==o&&(l+='<span data-style="mla" class="surname">'+o+"</span>"),""!==i&&""!==o?l+='<span data-style="mla" class="name">'+L(i)+"</span>":""!==i&&(l+='<span data-style="mla" class="name">'+i+"</span>"),l+="</span>",angular.forEach(t.author,(function(e,t){if(t>0){var n=""!==e.name?e.name:e.forename,i=e.surname;l+='<span data-style="mla" class="author">',""!==n&&""!==i?l+='<span data-style="mla" class="name">'+L(n)+"</span>":""!==n&&(l+='<span data-style="mla" class="name">'+n+"</span>"),""!==i&&(l+='<span data-style="mla" class="surname">'+i+"</span>"),l+="</span>"}})),l+="</span>"),P(t)&&(l+='<span data-style="mla" data-attr="titolo" class="titleAnalytic">'+P(t)+"</span>"),O(t)&&(l+='<span data-style="mla" data-attr="titolo" class="titleMonogr">'+O(t)+"</span>"),N(t)&&(l+='<span data-style="mla" class="pubPlace">'+N(t)+"</span>"),U(t)&&(l+='<span data-style="mla" class="publisher">'+U(t)+"</span>"),R(t)&&(l+='<span data-style="mla" class="date">'+R(t)+"</span>"),B(t)&&(l+='<span data-style="mla" class="pp">'+B(t)+"</span>"),z(t)&&(l+='<span data-style="mla" class="generic">Web</span>'));if(""!==l&&j(t)){var p="";angular.forEach(j(t),(function(e){p+="<p>"+e+"</p>"})),l+='<evt-popover data-trigger="click"  data-tooltip="'+p+'"><i class="icon-evt_note"></i></evt-popover>'}t.outputs[e]=l}};var C=function(e){for(var t={surname:"",name:""},n=0,i=0,o=0;o<e.length;o++)","===e[o]&&(n++,i=o);return 1===n&&i>0&&(t.surname=e.substr(0,i),t.name=e.substr(i+1,e.length-1)),t},k=function(e){for(var t="",n=0;n<e.length;n++)0!==n&&" "!==e[n-1]&&"."!==e[n-1]||" "===e[n]||e[n]!==e[n].toUpperCase()||(t+="",t+=e[n],t+=".");var i=t.length;return"."===t[i-1]&&(t=t.substr(0,i-1)),t},L=function(e){for(var t=-1,n=0,i=0;i<e.length;i++)if(-1===t&&" "!==e[i]&&e[i]===e[i].toUpperCase()&&(t=i,n=i),-1!==t){if(" "===e[i]||"."===e[i])break;n++}var o=e.substr(t,n),r=k(e.substr(n+1));return""!==r&&(o+=" "),o+r};f.yearInfoDetected=function(){return l},f.authorInfoDetected=function(){return c},f.titleInfoDetected=function(){return u},f.publisherInfoDetected=function(){return d},f.bibliographicStyleInfoDetected=function(){return p},f.getType=function(e){return V(e)};var I=function(e){if(""!==e.id)return e.id},D=function(e){if(e.author&&e.author.length>0)return e.author},P=function(e){if(""!==e.titleAnalytic)return e.titleAnalytic},O=function(e){if(""!==e.titleMonogr)return e.titleMonogr},M=function(e){if(""!==e.editionMonogr)return e.editionMonogr},N=function(e){if(""!==e.pubPlace)return e.pubPlace},R=function(e){if(""!==e.date)return e.date},B=function(e){var t;return void 0!==e.note&&(void 0!==e.note.pp?t=e.note.pp:void 0!==e.note.pages&&(t=e.note.pages)),void 0!==e.biblScope.pages?t=e.biblScope.pages:void 0!==e.biblScope.pp?t=e.biblScope.pp:void 0!==e.biblScope.page&&(t=e.biblScope.page),t},z=function(e){if(void 0!==e.note.url)return'<a href="'+e.note.url+'" target="_blank">'+e.note.url+"</a>"},$=function(e){return void 0!==e.biblScope.vol?e.biblScope.vol:void 0!==e.biblScope.volume?e.biblScope.volume:void 0!==e.biblScope.volumes?e.biblScope.volumes:void 0},H=function(e){if(void 0!==e.biblScope.issue)return e.biblScope.issue},V=function(e){if(""!==e.type)return"am"===e.type||"ma"===e.type||("aj"===e.type||"ja"===e.type?e.type="j":e.type.includes("a")?e.type="a":e.type=e.type.substr(0,1)),e.type},j=function(e){if(e.note&&Object.keys(e.note).length>0)return e.note},F=function(e){return V(e)&&"m"===V(e).toLowerCase().substr(0,1)},U=function(e){if(""!==e.publisher)return e.publisher},W=function(e){if(e.editor&&e.editor.length>0)return e.editor};return f}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtHotSpotParser",["$q","xmlParser","evtParser","parsedData","config",function(e,t,n,i,o){var r={};return r.parseHotSpots=function(e){var t=angular.element(e);angular.forEach(t.find("div[type='hotspot']"),(function(e){angular.forEach(e.childNodes,(function(e){if("div"===e.tagName){var t={};if(e.attributes)for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];if(o.specified)t["xml:id"===o.name?"id":o.name.replace(":","-")]=o.value}t.content=angular.element(e).text(),t.images=angular.element(e).find("graphic"),i.addHotSpot(t)}}))})),console.log("## HOTSPOTS ##",i.getHotSpots())},r}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtGlyph",["parsedData",function e(t){e.prototype.getGlyph=function(e,n){var i=function(e){var n,i=t.getGlyphs(),o=e.getAttribute("ref");try{o=o.replace("#",""),(n=i[o].mapping).id=o}catch(e){return console.log(e),!0}return n}(e);return(i.runic?{diplomatic:function(){return void 0!==i.runic?i.runic.content:""},interpretative:function(){return void 0!==i.transliterated?i.transliterated.content:""}}:{diplomatic:function(){return void 0!==i.diplomatic?i.diplomatic.content:""},interpretative:function(){return void 0!==i.normalized?i.normalized.content:""}})[n]()}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtDepaParser",["parsedData","evtCriticalElementsParser","Utils","evtParser","config","xmlParser",function(e,t,n,i,o,r){var a={},s="<evt-reading>,<pb>,<app>,<lem>, <rdg>,<rdgGrp>,"+o.quoteDef+","+o.analogueDef+",<evt-quote>,<evt-analogue>,<evt-version-reading>";return a.setAppInText=function(i,o,r){if(e.getCriticalEntries()._indexes.depa){var s=e.getCriticalEntries()._indexes.depa.start,l=i.getAttribute("xml:id"),c=Object.keys(s).filter((function(e){return s[e]===l}))||[];angular.forEach(c,(function(s){var l=e.getCriticalEntryById(s);if(l){var c=e.getCriticalEntries()._indexes.depa.end[s],u=r.querySelector('[*|id="'+c+'"]');if(u){var d=o?t.getEntryWitnessReadingText(l,o):t.getEntryLemmaText(l,o),p=e.getEncodingDetail("variantEncodingMethod");if(d.setAttribute("data-method",p||"double-end-point"),!d.firstChild||!d.firstChild.className||d.firstChild.className.indexOf("empty")<0){if(i===u)a.removeChildNodes(i);else{if(i.childNodes&&i.childNodes.length>0||a.isDescendant(i,u)){var h=document.createTextNode("");i.parentNode.insertBefore(h,i),i=h}var f=n.DOMutils.getElementsBetweenTree(i,u);angular.forEach(f,(function(e){e.parentNode.removeChild(e)}))}i.parentNode.insertBefore(d,i)}else{var g=a.createAnchorElement(l,o);i.parentNode.insertBefore(g,i),d.setAttribute("data-no-text",!0),u.parentNode.insertBefore(d,u.nextSibling)}}}}))}},a.setInternalAppInText=function(e,i,o,r){var s=o?t.getEntryWitnessReadingText(i,o):t.getEntryLemmaText(i,o),l=i.attributes.from.replace("#",""),c=i.attributes.to?i.attributes.to.replace("#",""):null,u=l&&r.querySelector('[*|id="'+l+'"]')||null,d=c?r.querySelector('[*|id="'+c+'"]')||null:e;if(u&&d){if(u.childNodes&&u.childNodes.length>0||a.isDescendant(u,d)){var p=document.createTextNode("");u.parentNode.insertBefore(p,u),u=p}var h=n.DOMutils.getElementsBetweenTree(u,d);if(!s.firstChild||!s.firstChild.className||s.firstChild.className.indexOf("empty")<0)angular.forEach(h,(function(e){var t=document.createTextNode("");e.parentNode.replaceChild(t,e)})),u.parentNode.insertBefore(s,u.nextSibling);else{s.setAttribute("data-overlap",!0);var f=a.createAnchorElement(i,o);u.parentNode.insertBefore(f,u.nextSibling),angular.forEach(h,(function(e){var t=a.createDepaContentNode(e,r);t&&e.parentNode.replaceChild(t,e)})),s.setAttribute("data-no-text",!0),d.parentNode.insertBefore(s,d.nextSibling)}return s}},a.getLemma=function(t,n){n=n.documentElement||n;var o="",r=e.getCriticalEntries()._indexes.depa.start,s=e.getCriticalEntries()._indexes.depa.end,l=r[t.id],c=s[t.id];if(l){if(l===c){var u=n.querySelector("[*|id="+l+"]");u&&(o=u.outerHTML)}else{var d=n.outerHTML.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"");o=a.findReadingString(d,c,l,t),o=i.balanceXHTML(o)}o=o.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"").trim(),a.parseLemma(t,o,n)}},a.findReadingString=function(t,n,i,o){var r,a=t.indexOf('xml:id="'+i),s=t.substring(0,a).lastIndexOf("<"),l=0,c=e.getEncodingDetail("variantEncodingLocation");if("internal"===c){var u=o._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"");l=t.indexOf(u,s)}else l=t.indexOf('xml:id="'+n+'"');return r=(r=t.substring(s,l)).substring(r.indexOf(">")+1),"external"===c&&(r=r.substring(0,r.lastIndexOf("<"))),r},a.parseLemma=function(e,t,n){var o;content=t,"string"!=typeof t&&(o=r.parse(t),content=i.parseXMLElement(n,o,{skip:s}),content=content.textContent?content.textContent:o.textContent);var a={id:e.id+"-depa-lem",attributes:[],content:[content],note:"",_significant:!0,_group:void 0,_xmlTagName:"",_xmlSource:t};e.content[a.id]=a,e.lemma=a.id},a.removeChildNodes=function(e){if(e.childNodes&&!(e.childNodes.length<=0))for(var t=e.childNodes.length-1;t>=0;)e.removeChild(e.childNodes[t]),t--},a.isDescendant=function(e,t){if(t){for(var n=t.parentNode;n;)return n===e||a.isDescendant(e,n.parentNode);return!1}},a.createAnchorElement=function(e,t){var n=document.createElement("span");return n.setAttribute("data-app-id",e.id),n.setAttribute("class","depaAnchor"),n.setAttribute("id","depaAnchor-"+e.id+"-"+t),n},a.createDepaContentNode=function(e,t){var n;return 3===e.nodeType?((n=document.createElement("span")).setAttribute("class","depaContent"),n.textContent=e.textContent):(!e.className||e.className.indexOf("depaContent")<0)&&((n=i.parseXMLElement(t,e,{skip:s})).className+=" depaContent"),n},a}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtBuilder",["EvtParagraphLineParser","EvtLbParser","evtSearchDocument","evtAbstractSearchParserInterface",function e(t,n,i,o){function r(e,t){if(arguments.length<2)throw new Error("Function Interface.ensureImplements called with "+arguments.length+" arguments, but expected at least 2.");for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i.constructor!==t.constructor)throw new Error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface.");i.methods.forEach((function(t){if(!e.prototype[t]||"function"!=typeof e.prototype[t])throw new Error("Function Interface.ensureImplements: object does not implement the "+i.name+" interface. Method "+t+" was not found.")}))}}e.prototype.createParser=function(e){var a=i.hasLbElement(e);return a?(r(n,o),new n(e)):a?void 0:(r(t,o),new t(e))}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtSearch",["evtSearchDocument","evtBuilder","evtSearchIndex",function e(t,n,i){var o=0,r={};e.prototype.initSearch=function(e){var a,s={},l=t.getXmlDocBody(e);t.removeNoteElements(e),t.removeAddElements(e);for(var c=0;c<l.length;c++)a=(s=n.createParser(l[c])).parseElements(o),o=s.getPrevDocsLines(),r=angular.extend(r,a);i.createIndex(r)},e.prototype.getParsedElementsForIndexing=function(){return r},e.prototype.getPrevDocsLines=function(){return o}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").factory("EvtSearchInterface",(function(){return function(e,t){if(2!==arguments.length)throw new Error("Interface constructor called with "+arguments.length+" arguments, but expected exactly 2.");this.name=e,this.methods=t.map((function(e){if("string"!=typeof e)throw new Error("Interface constructor expects method names to be passed in as a string.");return e}))}}))},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtSearchDocument",["parsedData","evtGlyph","XPATH","Utils","config",function e(t,n,i,o,r){var a=this;a.ns=!1,a.nsResolver="",e.prototype.hasNamespace=function(e){return null!==e.documentElement.namespaceURI&&(a.ns=!0,a.nsResolver=function(t){if("ns"===t)return e.documentElement.namespaceURI}),a.ns},e.prototype.isAlsoInterpEdition=function(){var e,t;return r.availableEditionLevel.forEach((function(n){"diplomatic"===n.value&&(e=n.visible),"interpretative"===n.value&&(t=n.visible)})),e&&t},e.prototype.isInterpEdition=function(){var e;return r.availableEditionLevel.forEach((function(t){"interpretative"===t.value&&(e=t.visible)})),e},e.prototype.isDiplEdition=function(){var e;return r.availableEditionLevel.forEach((function(t){"diplomatic"===t.value&&(e=t.visible)})),e},e.prototype.hasLbElement=function(e){return 0!==e.getElementsByTagName("lb").length},e.prototype.getXmlDocBody=function(e){return e.getElementsByTagName("body")},e.prototype.getCurrentXmlDoc=function(e,n,o,r){var a=function(){var e=t.getDocuments(),n=e._indexes,i=[],o={};return n.forEach((function(t){o.id=t,o.title=e[o.id].title,o.textNode=e[o.id].content,i.push(o),o={}})),i}(),s=o?e.evaluate(i.ns.getCurrentTextNode,n,r,XPathResult.ANY_TYPE,null):e.evaluate(i.getCurrentTextNode,n,null,XPathResult.ANY_TYPE,null);for(var l in s=s.iterateNext(),a)if(s===a[l].textNode)return a[l]},e.prototype.getCurrentPage=function(e){return e.getAttribute("n")},e.prototype.getCurrentPageId=function(e){return e.getAttribute("xml:id")||"page_"+e.getAttribute("n")},e.prototype.getCurrentPageNodes=function(e,t){for(var n=[];0<t.length;){if("pb"===t[0].nodeName)return n;n.push(t[0]),t.splice(0,1)}return n},e.prototype.getLineNodes=function(e,t,n,o,r,a){for(var s,l,c,u,d,p=[];0<t.length;){if(s=r?e.evaluate(i.ns.getPrevBody,t[0],a,XPathResult.ANY_TYPE,null):e.evaluate(i.getPrevBody,t[0],null,XPathResult.ANY_TYPE,null),l=r?e.evaluate(i.ns.getPrevLb,t[0],a,XPathResult.ANY_TYPE,null):e.evaluate(i.getPrevLb,t[0],null,XPathResult.ANY_TYPE,null),c=0!==(s.numberValue>=1?l.numberValue-n:l.numberValue),u="lb"===t[0].nodeName,d="pb"===t[0].nodeName,c||u){for(;u||d;){if(t.splice(0,1),0===t.length)return;u="lb"===t[0].nodeName,d="pb"===t[0].nodeName}for(;void 0!==t[0]&&"lb"!==t[0].nodeName&&"pb"!==t[0].nodeName;)p.push(t[0]),t.splice(0,1);return p}t.splice(0,1)}return p},e.prototype.removeEmptyTextNodes=function(e){return e.filter((function(e){var t="#text"===e.nodeName&&""===e.textContent.trim(),n="#text"===e.nodeName;return!t||!n}))},e.prototype.getChildNodes=function(e,t,n,o){var r,a=[],s=n?e.evaluate(i.ns.getChildNodes,t,o,XPathResult.ANY_TYPE,null):e.evaluate(i.getChildNodes,t,null,XPathResult.ANY_TYPE,null);for(r=s.iterateNext();null!==r;)a.push(r),r=s.iterateNext();return a},e.prototype.getBodyTextGlyphNodes=function(e,t,n,o){var r,a=[],s=n?e.evaluate(i.ns.getTextGlyphNodes,t,o,XPathResult.ANY_TYPE,null):e.evaluate(i.getTextGlyphNodes,t,null,XPathResult.ANY_TYPE,null);for(r=s.iterateNext();null!==r;)a.push(r),r=s.iterateNext();return a},e.prototype.getParagraph=function(e,t){return e.getAttribute("n")||t.toString()},e.prototype.getLine=function(e,t){return e.getAttribute("n")||t.toString()},e.prototype.getContent=function(e,t){var i,r="";return e.forEach((function(e){({g:function(){i=n.getGlyph(e,t),r+=i},"#text":function(){r+=e.textContent}})[e.nodeName]()})),o.cleanSpace(r)},e.prototype.removeNoteElements=function(e){for(var t=e.getElementsByTagName("note");t.length>0;)t[0].parentNode.removeChild(t[0])},e.prototype.removeAddElements=function(e){for(var t=e.getElementsByTagName("add");t.length>0;)t[0].parentNode.removeChild(t[0])}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").factory("evtAbstractSearchParserInterface",["EvtSearchInterface",function(e){return new e("evtAbstractSearchParserInterface",["parseElements","getPrevDocsLines"])}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").factory("EvtParagraphLineParser",["evtSearchDocument","evtSearchDiplomaticParLineHandler","XPATH",function(e,t,n){function i(e){this.parsedElementsForIndexing={},this.xmlDocBody=e}return i.prototype.getPrevDocsLines=function(){},i.prototype.parseElements=function(){var i,o,r=this.xmlDocBody.ownerDocument;return e.hasNamespace(r),i=e.ns,o=e.nsResolver,this.parsedElementsForIndexing=function(e,i,o,r){var a=function(e,t,i,o){return i?e.evaluate(n.ns.getParLineNodes,t,o,XPathResult.ANY_TYPE,null):e.evaluate(n.getParLineNodes,t,null,XPathResult.ANY_TYPE,null)}(e,i,o,r);return function(e,n,i,o,r){return t.getParLineInfo(e,n,i,o,r)}(e,i,a,o,r)}(r,this.xmlDocBody,i,o),this.parsedElementsForIndexing},i}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").factory("EvtLbParser",["evtSearchDocument","evtDiplomaticEditionHandler","evtInterpretativeEditionHandler","evtSearchDiplomaticLbHandler","evtGlyph","Utils","XPATH",function(e,t,n,i,o,r,a){function s(e){this.parsedElementsForIndexing={},this.xmlDocBody=e}return s.prototype.getPrevDocsLines=function(){return this.parsedElementsForIndexing.countAllLines},s.prototype.parseElements=function(t){var n,o,r=this.xmlDocBody.ownerDocument;return e.hasNamespace(r),n=e.ns,o=e.nsResolver,this.parsedElementsForIndexing=function(e,t,n,o,r){var s=function(e,t,n,i){return n?e.evaluate(a.ns.getLineNodes,t,i,XPathResult.ANY_TYPE,null):e.evaluate(a.getLineNodes,t,null,XPathResult.ANY_TYPE,null)}(e,t,o,r);return function(e,t,n,o,r,a){return i.getLineInfo(e,t,n,o,r,a)}(e,t,s,n,o,r)}(this.xmlDocBody.ownerDocument,this.xmlDocBody,t,n,o),this.parsedElementsForIndexing},s}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtDiplomaticEditionHandler",["XPATH",function e(t){e.prototype.getDiplomaticNodes=function(e,n,i,o){for(var r=[],a=i?e.evaluate(t.ns.getDiplomaticNodes,n,o,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null):e.evaluate(t.getDiplomaticNodes,n,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),s=0;s<a.snapshotLength;s++)r.push(a.snapshotItem(s));return r},e.prototype.getDiplomaticChildNodes=function(e,n,i,o){for(var r=[],a=i?e.evaluate(t.ns.getDiplomaticChildNodes,n,o,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null):e.evaluate(t.getDiplomaticChildNodes,n,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),s=0;s<a.snapshotLength;s++)r.push(a.snapshotItem(s));return r}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtInterpretativeEditionHandler",["XPATH",function e(t){e.prototype.getInterpretativeNodes=function(e,n,i,o){for(var r=[],a=i?e.evaluate(t.ns.getInterpretativeNodes,n,o,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null):e.evaluate(t.getInterpretativeNodes,n,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),s=0;s<a.snapshotLength;s++)r.push(a.snapshotItem(s));return r},e.prototype.getInterpretativeChildNodes=function(e,n,i,o){for(var r=[],a=i?e.evaluate(t.ns.getInterpretativeChildNodes,n,o,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null):e.evaluate(t.getInterpretativeChildNodes,n,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),s=0;s<a.snapshotLength;s++)r.push(a.snapshotItem(s));return r}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtSearchDiplomaticParLineHandler",["evtSearchDocument","evtDiplomaticEditionHandler","evtInterpretativeEditionHandler","XPATH","Utils",function e(t,n,i,o,r){e.prototype.getParLineInfo=function(e,o,r,a,s){for(var l,c,u=t.getCurrentXmlDoc(e,o,a,s),d=t.isInterpEdition(),p=t.isDiplEdition(),h=1,f=1,g=1,m={},v={},b=r.iterateNext();null!==b;){var y={head:function(){},pb:function(){l=t.getCurrentPage(b)||h,c=t.getCurrentPageId(b,h),h++},default:function(){var o=[];p&&(o=n.getDiplomaticChildNodes(e,b,a,s));var r=[];d&&(r=i.getInterpretativeChildNodes(e,b,a,s)),o.forEach((function(n){var i,a;if("pb"===n.nodeName&&(l=t.getCurrentPage(n),c=t.getCurrentPageId(n,h),h++,o.splice(0,1),d&&r.splice(0,1)),l&&(m.page=l,m.pageId=c),m.xmlDocTitle=u.title,m.xmlDocId=u.id,{p:function(){m.paragraph=t.getParagraph(b,f),m.docId=m.xmlDocId+"-"+m.page+"-"+m.paragraph,f++},l:function(){m.line=t.getLine(b,g),m.docId=m.xmlDocId+"-"+m.page+"-"+m.line,g++}}[b.nodeName](),m.content={},p){if(i=t.getCurrentPageNodes(e,o),0===(a=t.removeEmptyTextNodes(i)).length)return void(m={});m.content.diplomatic=t.getContent(a,"diplomatic")}var s=[];if(d){s=t.getCurrentPageNodes(e,r);var y=t.removeEmptyTextNodes(s);if(0===y.length)return void(m={});m.content.interpretative=t.getContent(y,"interpretative")}v[m.docId]=m,m={},i=[],d&&(s=[])}))}};(y[b.nodeName]||y.default)(),b=r.iterateNext()}return v}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtSearchDiplomaticLbHandler",["evtSearchDocument","evtDiplomaticEditionHandler","evtInterpretativeEditionHandler","evtParser",function e(t,n,i,o){var r=0;e.prototype.getLineInfo=function(e,o,a,s,l,c){var u,d,p,h=t.getCurrentXmlDoc(e,o,l,c),f=n.getDiplomaticNodes(e,o,l,c),g=t.isInterpEdition(),m=t.isDiplEdition(),v=1,b=1,y={},x=1,w=0,A={},_={},E=1,S=a.iterateNext(),T=[];for(g&&(T=i.getInterpretativeNodes(e,o,l,c));null!==S;){var C={pb:function(){u=t.getCurrentPage(S)||v,d=t.getCurrentPageId(S,v),v++,x=0},p:function(){p=t.getParagraph(S,b),b++},default:function(){y.line=S.getAttribute("n")||x.toString(),w!==y.line?(u&&(y.page=u,y.pageId=d),p&&(y.paragraph=p),y.xmlDocTitle=h.title,y.xmlDocId=h.id,y.docId=y.xmlDocId+"-"+y.pageId+"-"+y.line+"-line"+E,y.lbId=S.getAttribute("xml:id"),m?(A.diplomatic=t.getLineNodes(e,f,s,E,l,c),t.removeEmptyTextNodes(A.diplomatic)):(A.diplomatic=[],[]),g?(A.interpretative=t.getLineNodes(e,T,s,E,l,c),t.removeEmptyTextNodes(A.interpretative)):(A.interpretative=[],[]),y.content={},m&&(y.content.diplomatic=t.getContent(A.diplomatic,"diplomatic")),g&&(y.content.interpretative=t.getContent(A.interpretative,"interpretative")),x++,E++,r++,w=y.line,_[y.docId]=y,A=[]):0}};(C[S.nodeName]||C.default)(),S=a.iterateNext(),y={}}return _.countAllLines=r,_}}])},function(e,t,n){"use strict";angular.module("evtviewer.dataHandler").service("evtKeyboard",["evtSearchDocument","baseData","parsedData","XPATH",function e(t,n,i,o){function r(e,t){for(var n in t)if(n===e)return!0;return!1}e.prototype.getDefaultKeyboardKeys=function(){return function(e){var t,n=i.getGlyphs(),o={};for(var r in n)for(var a=0;a<e.length;a++)e[a]===r&&(t=n[r].mapping.runic,o[e[a]]=t?n[r].mapping.runic.content:n[r].mapping.diplomatic.content);return o}(function(e){var t=[],n=e.length,i=30;for(;n<i;)i--;for(var o=0;o<i;o++)t.push(e[o]);return t}(function(e){return Object.keys(e).sort((function(t,n){return e[n]-e[t]}))}(function(e){for(var t,n,i,o={},a=0;a<e.length-1;a++)t=e[a],n=e[a+1],0===Object.keys(o).length&&(o[e[0]]=1),i=r(n,o),t===n?o[t]++:i?o[n]++:o[n]=1;return o}(e.prototype.getGlyphInXmlDoc()))))},e.prototype.getConfigKeyboardKeys=function(e){var t=i.getGlyphs(),n={};for(var o in t)for(var r=0;r<e.length;r++)o===e[r]&&(n[e[r]]=t[o].mapping.diplomatic.content);return n},e.prototype.getGlyphInXmlDoc=function(){for(var e,r=n.getXML(),a=function(e){var n={};return t.hasNamespace(e),n.ns=t.ns,n.nsResolver=t.nsResolver,n}(r),s=function(e,t,n){return t?e.evaluate(o.ns.getGlyphNodes,e,n,XPathResult.ANY_TYPE,null):e.evaluate(o.getGlyphNodes,e,null,XPathResult.ANY_TYPE,null)}(r,a.ns,a.nsResolver),l=i.getGlyphs(),c=s.iterateNext(),u=[];null!==c;){for(var d in e=c.getAttribute("ref").replace("#",""),l)e===d&&u.push(e);c=s.iterateNext()}return u}}])},function(e,t,n){"use strict";angular.module("evtviewer.bibliography",[])},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").directive("evtScrollIf",["$timeout",function(e){return function(t,n,i){i.$observe("evtScrollIf",(function(t){"true"===t&&e((function(){n[0].scrollIntoView()}),100)}))}}])},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").service("evtHighlight",(function(){var e={},t="";return e.setHighlighted=function(e){t=e},e.getHighlighted=function(){return t},e}))},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").provider("evtBibliography",(function(){this.defaults;this.setDefaults=function(e){e},this.$get=["$log","config","parsedData","evtBibliographyParser","evtHighlight",function(e,t,n,i,o){var r={},a={},s=[],l=0,c=(e.getInstance("bibliography"),function(e){var t=this,n=t.getBibliographicRefById(e);return t.initialSelectedStyle?(n.outputs[t.initialSelectedStyle.label]||i.formatResult(t.initialSelectedStyle.label,n),n.outputs[t.initialSelectedStyle.label]?n.outputs[t.initialSelectedStyle.label]:n.plainText):n.plainText}),u=function(e){var t=this.getBibliographicRefById(e),n=i.getType(t);return n=n||"unknown"},d=function(e){return""!==o.getHighlighted()&&o.getHighlighted()===e},p=function(e){return n.getBibliographicRefById(e)};return r.build=function(e){var o,r,h,f,g,m,v=e.id||l++,b=t.allowedBibliographicStyles||{},y=!0,x=!0,w=!0;for(var A in""!==t.defaultBibliographicStyle&&void 0!==b[t.defaultBibliographicStyle]&&b[t.defaultBibliographicStyle].enabled&&(r=b[t.defaultBibliographicStyle]),b)r||!b[A].enabled||r||(r=b[A]),b[A].enabled||delete b[A];if(void 0===a[v]){if(i.bibliographicStyleInfoDetected()||(x=!1,r=""),f=t.bibliographicEntriesSortBy||{},i.authorInfoDetected()||delete f.Author,i.yearInfoDetected()||delete f.Year,i.titleInfoDetected()||delete f.Title,i.publisherInfoDetected()||delete f.Publisher,f&&Object.keys(f).length>0)y=!0,h=f[Object.keys(f)[0]];else y=!1;m=(g=t.bibliographySortOrder).ASC,y||(w=!1),o=n.getBibliographicRefsCollection();var _;if(void 0===a[v])return _={uid:v,biblRefsCollection:o,styles:b,initialSelectedStyle:r,selectedSorting:h,biblSortStyleSelectVisibility:x,biblSortSelectVisibility:y,biblSortOrderSelectVisibility:w,sortBy:f,sortOrder:g,selectedSortOrder:m,getFormattedBibl:c,pubblicationType:u,isEntryHighlighted:d,getBibliographicRefById:p},a[v]=angular.extend(e.vm,_),s.push({id:v}),a[v]}},r.destroy=function(e){delete a[e]},r}]}))},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").controller("BibliographyCtrl",["$log","evtBibliography",function(e,t){e.getInstance("BibliographyCtrl");var n=this;this.myComparator=function(e,t){var i=e,o=t;switch(e=n.getBibliographicRefById(e),t=n.getBibliographicRefById(t),n.selectedSorting){case n.sortBy.Author:e&&e.author&&e.author.length>0&&(i=""!==e.author[0].name?e.author[0].name:"",i=""!==e.author[0].surname?e.author[0].surname:i),t&&t.author&&t.author.length>0&&(o=""!==t.author[0].name?t.author[0].name:"",o=""!==t.author[0].surname?t.author[0].surname:o);break;case n.sortBy.Year:e&&e.date&&(i=""!==e.date&&Number(e.date)?Number(e.date):""),t&&t.date&&(o=""!==t.date&&Number(t.date)?Number(t.date):"");break;case n.sortBy.Title:e&&e.titleAnalytic&&(i=""!==e.titleAnalytic&&""===i?e.titleAnalytic:i),e&&e.titleMonogr&&(i=""!==e.titleMonogr&&""===i?e.titleMonogr:i),t&&t.titleAnalytic&&(o=""!==t.titleAnalytic&&""===o?t.titleAnalytic:o),t&&t.titleMonogr&&(o=""!==t.titleMonogr&&""===o?t.titleMonogr:o);break;case n.sortBy.Publisher:e&&e.publisher&&(i=""!==e.publisher?e.publisher:""),t&&t.publisher&&(o=""!==t.publisher?t.publisher:"")}return i="number"==typeof i?i.toString():i,o="number"==typeof o?o.toString():o,i.localeCompare(o)},this.biblId=function(e){return e},this.getSortedBibl=function(){var e=n.biblRefsCollection._indexes;return e.sort(n.myComparator),n.selectedSortOrder===n.sortOrder.DESC&&e.reverse(),e},this.destroy=function(){t.destroy(this.uid)}}])},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").directive("evtBibliography",["evtBibliography",function(e){return{restrict:"E",template:n(204),scope:{id:"@"},controllerAs:"vm",controller:"BibliographyCtrl",link:function(t,n,i){var o=e.build(t);o.sortedBibl=o.getSortedBibl(),t.$watch((function(){return o.selectedSorting}),(function(e,t){t!==e&&(o.sortedBibl=o.getSortedBibl())}),!0),t.$watch((function(){return o.selectedSortOrder}),(function(e,t){t!==e&&(o.sortedBibl=o.getSortedBibl())}),!0),t.$on("$destroy",(function(){o&&o.destroy()}))}}}])},function(e,t){e.exports='<div class="evt-bibliography">\r\n\t<div class="evt-bibliography__header"\r\n\t\tng-if="::vm.biblSortStyleSelectVisibility || vm.biblSortSelectVisibility || vm.biblSortOrderSelectVisibility">\r\n\r\n\t\t<div ng-if="::vm.biblSortStyleSelectVisibility">\r\n\t\t\t<label for="biblStyleSelect"> {{ \'BIBLIOGRAPHY.STYLE\' | translate }} </label>\r\n\t\t\t<select id="biblStyleSelect" ng-model="vm.initialSelectedStyle"\r\n\t\t\t\tng-options="value as (value.label | translate) for (key, value) in vm.styles"></select>\r\n\t\t</div>\r\n\r\n\t\t<div ng-if="::vm.biblSortSelectVisibility">\r\n\t\t\t<label for="biblSortingSelect">{{ \'BIBLIOGRAPHY.SORT_BY\' | translate }} </label>\r\n\t\t\t<select id="biblSortingSelect" ng-model="vm.selectedSorting"\r\n\t\t\t\tng-options="value as (value | translate) for (key , value) in vm.sortBy"></select>\r\n\t\t</div>\r\n\r\n\t\t<div ng-if="::vm.biblSortOrderSelectVisibility">\r\n\t\t\t<label for="biblSortOrder">{{ \'BIBLIOGRAPHY.ORDER\' | translate }} </label>\r\n\t\t\t<select id="biblSortOrder" ng-model="vm.selectedSortOrder"\r\n\t\t\t\tng-options="value as (value | translate) for (key , value) in vm.sortOrder"></select>\r\n\t\t</div>\r\n\r\n\t</div>\r\n\t<div class="evt-bibliography__content"\r\n\t\tng-class="{\'noSorter\': !vm.biblSortStyleSelectVisibility && !vm.biblSortSelectVisibility }">\r\n\t\t<div class="biblRef" id="{{ ::bibl }}"\r\n\t\t\tng-repeat="bibl in vm.sortedBibl"\r\n\t\t\tcompile="vm.getFormattedBibl(bibl)" ng-attr-highlight="{{ vm.isEntryHighlighted(bibl) }}"\r\n\t\t\tevt-scroll-if="{{ vm.isEntryHighlighted(bibl) }}"\r\n\t\t\tng-attr-pubblicationType="{{ ::vm.pubblicationType(bibl) }}">\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").controller("BiblElemCtrl",["$scope","$log","parsedData","config","evtBibliographyParser",function(e,t,n,i,o){t.getInstance("BiblElemCtrl");var r=this;r.styles=i.allowedBibliographicStyles,r.initialSelectedStyle=i.defaultBibliographicStyle,r.getFormattedBibl=function(){var t=n.getBibliographicRefById(e.biblId);return t?(t.outputs[r.initialSelectedStyle]||o.formatResult(r.initialSelectedStyle,t),t.outputs[r.initialSelectedStyle]):""}}])},function(e,t,n){"use strict";angular.module("evtviewer.bibliography").directive("evtBiblElem",(function(){return{restrict:"E",scope:{biblId:"@"},transclude:!0,template:n(207),controllerAs:"vm",controller:"BiblElemCtrl"}}))},function(e,t){e.exports='<div class="evtBiblRef" compile="vm.getFormattedBibl()">\r\n</div>\r\n'},function(e,t,n){"use strict";angular.module("evtviewer.interface",[])},function(e,t,n){"use strict";angular.module("evtviewer.interface").config(["$routeProvider","$locationProvider","$translateProvider",function(e,t,n){t.hashPrefix(""),e.when("/:viewMode",{template:"index.html",controller:"InterfaceCtrl",reloadOnSearch:!1}).otherwise({redirectTo:"/",reloadOnSearch:!1}),n.useStaticFilesLoader({prefix:"./i18n/",suffix:".json"}),n.useSanitizeValueStrategy(null),n.fallbackLanguage("en").preferredLanguage("en")}]).run(["$injector","config",function(e,t){t.isValid()&&(t.isModuleActive("interface")&&e.get("evtInterface").boot())}])},function(e,t,n){"use strict";angular.module("evtviewer.interface").controller("InterfaceCtrl",["$log","$timeout","$scope","evtInterface","evtTranslation","evtPinnedElements","evtButtonSwitch","evtBox","evtApparatuses","parsedData","evtSelect","evtPopover","evtCommunication","evtDialog",function(e,t,n,i,o,r,a,s,l,c,u,d,p,h){document.body.style="display: block";var f=e.getInstance("interface");n.getCurrentViewMode=function(){return i.getState("currentViewMode")},n.getCurrentPage=function(){return i.getState("currentPage")},n.getCurrentDocument=function(){return i.getState("currentDoc")},n.getCurrentEdition=function(){return i.getState("currentEdition")},n.getCurrentComparingEdition=function(){return i.getState("currentComparingEdition")},n.getAvailableWitnesses=function(){return i.getProperty("availableWitnesses")},n.isWitnessSelectorActive=function(){return i.getProperty("witnessSelector")},n.addWitness=function(e){void 0!==e&&(i.addWitness(e),i.updateUrl()),t((function(){var e=window.getComputedStyle(document.getElementsByClassName("box")[0]).width.replace("px","");document.getElementById("compareWits_box").scrollLeft=e*(i.getState("currentWits").length+1)})),i.updateProperty("witnessSelector",!1)},n.getWitness=function(e){var t=e+" - "+c.getWitness(e).description.textContent.trim()||e;return t=t.length>30?t.substr(0,30)+"...":t},n.getCurrentWitnesses=function(){return i.getState("currentWits")},n.getCurrentWitnessPage=function(e){return i.getCurrentWitnessPage(e)},n.getAvailableViewModes=function(){return i.getProperty("availableViewModes")},n.existCriticalText=function(){return i.existCriticalText()},n.getCurrentAppEntry=function(){return i.getState("currentAppEntry")},n.updateCurrentAppEntry=function(e){i.updateState("currentAppEntry",e),"readingTxt"===i.getState("currentViewMode")&&(s.alignScrollToApp(e),l.alignScrollToApp(e)),i.updateUrl()},n.updateCurrentQuote=function(e){i.updateState("currentQuote",e)},n.getCurrentApparatus=function(){return i.getState("currentApparatus")},n.evtPinnedElements=r,n.isLoading=function(){var e=p.getError();return i.isLoading()&&""===e.title},n.isPinnedAppBoardOpened=function(){return i.getState("isPinnedAppBoardOpened")},n.isToolAvailable=function(e){return i.isToolAvailable(e)},n.getSecondaryContentOpened=function(){return i.getState("secondaryContent")},n.getProjectInfo=function(){return c.getProjectInfo()},n.getWitnessesListFormatted=function(){return c.getWitnessesListFormatted()},n.getAvailableLists=function(){return c.getNamedEntitiesCollection()._indexes},n.getProperty=function(e){return i.getProperty(e)},n.getState=function(e){return i.getState(e)},n.getWebSite=function(){var e=i.getProperty("webSite");return e.indexOf("http://")<0?"http://"+e:e},n.handleGenericClick=function(e){var t=e.target;if(0===angular.element(t).parents("evt-select").length&&u.closeAll(),0===angular.element(t).parents("button-switch").length){a.unselectAllSkipByBtnType("",["standAlone","toggler"]),i.updateState("mainMenu",!1)}0===angular.element(t).parents("evt-popover").length&&d.closeAll(),0===angular.element(t).parents(".witnessSelector").length&&i.getProperty("witnessSelector")&&i.updateProperty("witnessSelector",!1)},n.handleKeydownEvent=function(e){e.target&&e.target.tagName&&"input"===e.target.tagName.toLowerCase()&&"text"===e.target.getAttribute("type")||(27===e.keyCode?h.closeAll():37===e.keyCode?n.isVisCollOpened()||n.isThumbNailsOpened()||(e.metaKey?i.goToFirstPage():i.goToPrevPage()):39===e.keyCode&&(n.isVisCollOpened()||n.isThumbNailsOpened()||(e.metaKey?i.goToLastPage():i.goToNextPage())))},n.getBookmark=function(){var e=c.getProjectInfo().editionReference||{},t='<div class="bookmark">';return t+=e.author?e.author+". ":"",t+=e.title?"<em>"+e.title+"</em>. ":"",t+=e.publisher?"{{ 'PUBLISHED_BY' | translate }} "+e.publisher+". ":"",t+='<<a href="'+window.location+'" target="blank">'+window.location+"</a>>",t+="</div>"},n.getErrorMsg=function(){return p.getError()},n.getAvailableSourcesTexts=function(){return i.getProperty("availableSourcesTexts")},n.getCurrentSourceText=function(){return i.getState("currentSourceText")},n.isApparatusBoxOpen=function(){return i.getState("isApparatusBoxOpen")},n.showApparatusesBox=function(){return i.getState("isApparatusBoxOpen")&&"critical"===i.getState("currentEdition")},n.getCurrentVersions=function(){return i.getState("currentVersions")},n.getAvailableVersions=function(){return i.getProperty("availableVersions")},n.isVersionSelectorActive=function(){return i.getProperty("versionSelector")},n.getAllVersionsNumber=function(){return i.getAllVersionsNumber()},n.getVersion=function(e){var t=c.getVersionEntries(),n=t?t._indexes:{};return n&&n.versionId?n.versionId[e]:""},n.addVersion=function(e){void 0!==e&&i.addVersion(e),t((function(){var e=window.getComputedStyle(document.getElementsByClassName("box")[0]).width.replace("px","");document.getElementById("compareVer_box").scrollLeft=e*(i.getState("currentVersions").length+1)})),i.updateProperty("versionSelector",!1)},n.openGlobalDialogInfo=function(){i.updateState("secondaryContent","globalInfo"),h.openByType("globalInfo")},n.openGlobalDialogLists=function(){i.updateState("secondaryContent","entitiesList"),h.openByType("entitiesList")},n.openToc=function(){i.updateState("secondaryContent","toc"),h.openByType("toc")},n.generateBookmark=function(){i.updateState("secondaryContent","bookmark"),h.openByType("bookmark")},n.downloadXML=function(){window.open(i.getProperty("dataUrl"),"_blank")},n.getAvailableLanguages=function(){return o.getLanguages()},n.getCurrentLanguage=function(){return o.getCurrentLanguage()},n.setLanguage=function(e){o.setLanguage(e)},n.isNavBarOpened=function(){return i.getProperty("enableNavBar")&&i.getState("isNavBarOpened")},n.isNavBarEnabled=function(){return i.getProperty("enableNavBar")},n.isVisCollOpened=function(){return i.getState("isVisCollOpened")},n.isThumbNailsOpened=function(){return i.getState("isThumbNailsOpened")},n.getThumbnails=function(){return c.getThumbnails()},n.goToPageFromThumb=function(e){i.getState("currentPage")!==e.value&&(i.updateState("isThumbNailsOpened",!1),i.setCurrentPage(e))},n.toggleNavBar=function(){var e=i.getState("isNavBarOpened");i.updateState("isNavBarOpened",!e),t((function(){n.$broadcast("rzSliderForceRender")}))},f.log("InterfaceCtrl running")}]).directive("evt-g",["parsedData",function(e){return{restrict:"E",scope:{ref:"@"},template:'<span class="glyph" compile="::content"></span>',replace:!0,link:function(t,n,i){var o=t.ref,r="["+t.ref+"]";if(o&&""!==o){o=o.replace("#","");var a=e.getGlyph(o);a&&""!==a.parsedXml&&(r=a.parsedXml)}t.content=r}}}])},function(e,t,n){"use strict";angular.module("evtviewer.interface").service("evtInterface",["$rootScope","$timeout","evtTranslation","evtCommunication","evtCriticalApparatusParser","evtCriticalParser","evtPinnedElements","config","$routeParams","parsedData","evtReading","$q",function(e,t,n,i,o,r,a,s,l,c,u,d){var p={},h={currentViewMode:void 0,currentDoc:void 0,currentPage:void 0,currentDivs:{},currentWits:void 0,currentWitsPages:void 0,currentEdition:void 0,currentComparingEdition:void 0,currentAppEntry:void 0,currentHighlightedZone:void 0,isLoading:!0,isPinnedAppBoardOpened:!1,isNavBarOpened:!0,isVisCollOpened:!1,isThumbNailsOpened:!1,indexingInProgress:!1,secondaryContent:"",dialog:{home:""},isApparatusBoxOpen:!0,currentApparatus:void 0,currentQuote:void 0,currentAnalogue:void 0,currentSource:void 0,currentSourceText:void 0,currentVersions:void 0,currentVersionEntry:void 0,currentVersion:void 0,mainMenu:!1},f={indexTitle:"",webSite:"",dataUrl:"",logoUrl:"",enableXMLdownload:!1,toolHome:!0,availableViewModes:[],availableWitnesses:[],witnessSelector:!1,namedEntitiesLists:!1,availableSourcesTexts:[],isSourceLoading:!1,parsedSourcesTexts:[],availableVersions:[],versionSelector:!1,tabsContainerOpenedContent:"",tabsContainerOpenedTab:"",visCollTextUrl:"",visCollStyleUrl:"",enableNavBar:!0},g={};return p.boot=function(){i.getExternalConfig(s.configUrl).then((function(){f.indexTitle=s.indexTitle,f.logoUrl=s.logoUrl,f.webSite=s.webSite,f.enableXMLdownload=s.enableXMLdownload,f.toolHome=s.toolHome,f.availableViewModes=s.availableViewModes,f.visCollTextUrl=s.visCollTextUrl,f.visCollStyleUrl=s.visCollStyleUrl,f.enableNavBar=angular.isDefined(s.enableNavBar)?s.enableNavBar:h.enableNavBar,h.isNavBarOpened=angular.isDefined(s.initNavBarOpened)?s.initNavBarOpened:h.isNavBarOpened,n.setLanguages(s.languages);var u=n.getUserLanguage(),g=n.getFallbackLanguage();n.setFallbackLanguage(g),n.setLanguage(u),""!==s.sourcesUrl&&i.getExternalData(s.sourcesUrl),""!==s.analoguesUrl&&i.getExternalData(s.analoguesUrl),p.updateProperty("dataUrl",s.dataUrl),""===s.dataUrl?(i.err("","","dataUrlEmpty",!1),e.$applyAsync(h.isLoading=!1)):i.getData(s.dataUrl).then((function(){for(var n=0,u=f.availableViewModes.length;n<u;n++){var g=f.availableViewModes[n].viewMode;"collation"===g&&0===c.getWitnessesList().length&&(f.availableViewModes[n].visible=!1),"versions"===g&&p.getAllVersionsNumber()<2&&(f.availableViewModes[n].visible=!1),"srcTxt"!==g||c.getSources()._indexes.availableTexts&&0!==c.getSources()._indexes.availableTexts.length||(f.availableViewModes[n].visible=!1)}if(f.namedEntitiesLists=c.getNamedEntitiesCollection()._indexes.length>0,s.availableEditionLevel)for(var m=0;m<s.availableEditionLevel.length;m++){var v=s.availableEditionLevel[m];v.visible&&c.addEdition(v)}p.updateParams(l);var b=[];""!==s.sourcesUrl&&b.push(i.getExternalData(s.sourcesUrl)),""!==s.analoguesUrl&&b.push(i.getExternalData(s.analoguesUrl));var y=c.getDocument(h.currentDoc);void 0!==y&&("internal"===c.getEncodingDetail("variantEncodingLocation")&&(s.loadCriticalEntriesImmediately&&b.push(o.parseCriticalEntries(y.content).promise),s.versions.length>1&&b.push(o.parseVersionEntries(y.content).promise)),"critical"!==s.editionType&&"multiple"!==s.editionType||!c.isCriticalEditionAvailable()||(s.versions.length>0&&void 0!==s.versions[0]?b.push(r.parseCriticalText(y.content,h.currentDoc,s.versions[0]).promise):b.push(r.parseCriticalText(y.content,h.currentDoc).promise)),d.all(b).then((function(){var n=[];""!==s.visCollDataModel&&(n.push(i.getViscollDataModel(s.visCollDataModel)),""!==s.visCollImageList&&n.push(i.getViscollImageList(s.visCollImageList)),d.all(n).then((function(){var e=[],t=c.getViscollSVGToLoad();""!==s.visCollSvg&&t.length>0&&t.forEach((function(t){e.push(i.getViscollSvgs(s.visCollSvg+t.fileName,t.id))})),d.all(e).then((function(){c.setViscollSvgsLoaded(!0)}))}))),void 0!==h.currentAppEntry&&void 0===c.getCriticalEntryById(h.currentAppEntry)&&p.updateState("currentAppEntry","");var o=c.getSources()._indexes.availableTexts;if(0!==Object.keys(o).length){for(var r in o)f.availableSourcesTexts.push(o[r].id);p.updateCurrentSourceText(f.availableSourcesTexts[0])}if(h.currentVersions=[],2===s.versions.length)h.currentVersions.push(s.versions[1]);else for(var l=1;l<s.versions.length;l++)f.availableVersions.push(s.versions[l]);p.updateUrl();var u=c.getQuotes()._indexes.encodingStructure||[],g=!s.showInlineSources&&u.length>0,m=c.getAnalogues()._indexes.encodingStructure||[],v=!s.showInlineAnalogues&&m.length>0;h.isApparatusBoxOpen=!s.showInlineCriticalApparatus||g||v,e.$applyAsync(h.isLoading=!1),t((function(){a.getElementsFromCookies()}),10)})))}))}))},p.setTabContainerPanel=function(e){h.dialog.tabContainerPanel=e},p.getTabContainerPanel=function(){return h.dialog.tabContainerPanel},p.setHomePanel=function(e){h.dialog.home=e},p.getHomePanel=function(){return h.dialog.home},p.isLoading=function(){return h.isLoading},p.isToolAvailable=function(e){return s[e]},p.getToolState=function(e){return g[e]?g[e].status:void 0},p.getStates=function(){return h},p.getProperties=function(){return f},p.getProperty=function(e){return f[e]},p.getStates=function(){return h},p.getState=function(e){return h[e]},p.getCurrentWitnessPage=function(e){return h.currentWitsPages[e]},p.existCriticalText=function(){return void 0!==c.getCriticalText(h.currentDoc)},p.isCriticalApparatusInline=function(){return s.showInlineCriticalApparatus||"readingTxt"!==p.getState("currentViewMode")},p.isSourcesInline=function(){return s.showInlineSources||"readingTxt"!==p.getState("currentViewMode")},p.isAnaloguesInline=function(){return s.showInlineAnalogues||"readingTxt"!==p.getState("currentViewMode")},p.setToolStatus=function(e,t){g[e]||(g[e]={}),g[e].status=t},p.updateProperty=function(e,t){f[e]=t},p.updateState=function(e,t){h[e]=t},p.toggleState=function(e){h[e]=!h[e]},p.updateCurrentHighlightedZone=function(e){var t=h.currentHighlightedZone;t&&e&&t.id===e.id&&t.name===e.name||(h.currentHighlightedZone=e)},p.updateCurrentSourceText=function(e){var t=c.getSource(e);void 0!==t&&t._textAvailable&&(Object.keys(c.getSource(e).text).length>0||(f.isSourceLoading=!f.isSourceLoading,i.getSourceTextFile(s.sourcesTextsUrl+e+".xml",e).then((function(){f.isSourceLoading=!f.isSourceLoading,f.parsedSourcesTexts.push(e)}))));h.currentSourceText=e},p.removeAvailableVersion=function(e){var t=f.availableVersions.indexOf(e);void 0!==t&&f.availableVersions.splice(t,1)},p.addAvailableVersion=function(e){-1===f.availableVersions.indexOf(e)&&f.availableVersions.push(e)},p.addVersion=function(e,t){void 0===t?h.currentVersions.push(e):h.currentVersions.splice(t,0,e),p.removeAvailableVersion(e)},p.removeVersion=function(e){var t=h.currentVersions.indexOf(e);t>=0&&h.currentVersions.splice(t,1),f.availableVersions.indexOf(e)<0&&f.availableVersions.push(e)},p.switchVersions=function(e,t){var n=h.currentVersions.indexOf(t),i=h.currentVersions.indexOf(e);n>=0?h.currentVersions[n]=e:p.addAvailableVersion(e),h.currentVersions[i]=t,p.removeAvailableVersion(t)},p.getAllVersionsNumber=function(){return s.versions?s.versions.length:0},p.updateCurrentVersionEntry=function(e){void 0!==e&&(h.currentVersionEntry=e)},p.getCurrentVersionEntry=function(e){return h.currentVersionEntry},p.updateCurrentVersion=function(e){void 0!==e&&-1!==s.versions.indexOf(e)&&(h.currentVersion=e)},p.getCurrentVersion=function(e){return h.currentVersion},p.removeAvailableWitness=function(e){var t=f.availableWitnesses.indexOf(e);void 0!==t&&f.availableWitnesses.splice(t,1)},p.updateWitnessesPage=function(e,t){h.currentWitsPages[e]=t},p.updateDiv=function(e,t){h.currentDivs[e]=t},p.addWitness=function(e){h.currentWits.push(e),p.removeAvailableWitness(e)},p.addWitnessAtIndex=function(e,t){h.currentWits.splice(t,0,e),p.removeAvailableWitness(e)},p.removeWitness=function(e){var t=h.currentWits.indexOf(e);t>=0&&(h.currentWits.splice(t,1),delete h.currentWitsPages[e]),f.availableWitnesses.indexOf(e)<0&&f.availableWitnesses.push(e)},p.switchWitnesses=function(e,t){var n=h.currentWits.indexOf(t),i=h.currentWits.indexOf(e);n>=0&&(h.currentWits[n]=e),i>=0&&(h.currentWits[i]=t)},p.updateAvailableWitnessesByVersion=function(e){var t=c.getVersionEntries()._indexes.versionWitMap[e],n=[],i=[];if(void 0!==t&&t.length>0){for(var o=0;o<h.currentWits.length;o++)t.indexOf(h.currentWits[o])>=0&&n.push(h.currentWits[o]);h.currentWits=n;for(var r=0;r<t.length;r++)n.indexOf(t[r])<0&&i.push(t[r]);f.availableWitnesses=i}else if(e===s.versions[0]){for(var a=c.getWitnessesList(),l=0;l<h.currentWits.length;l++)a.indexOf(h.currentWits[l])>=0&&n.push(h.currentWits[l]);h.currentWits=n;for(var u=0;u<a.length;u++)n.indexOf(a[u])<0&&i.push(a[u]);f.availableWitnesses=i}p.updateUrl()},p.isViewModeAvailable=function(e){for(var t=0,n=f.availableViewModes.length;t<n;t++)if(f.availableViewModes[t].viewMode===e)return f.availableViewModes[t].visible},p.setCurrentPage=function(e){if(void 0!==e){var t=p.getState("currentDoc");p.updateState("currentPage",e.value),e.docs.length>0&&e.docs.indexOf(t)<0&&p.updateState("currentDoc",e.docs[0]),p.updateUrl()}},p.goToNextPage=function(){var e=c.getPages(),t=e[p.getState("currentPage")].indexInCollection,n=p.getState("currentDoc"),i=e[t+1];if(i){var o=e[i];p.updateState("currentPage",i),o.docs.length>0&&o.docs.indexOf(n)<0&&p.updateState("currentDoc",o.docs[0]),o.docs.length>1&&p.updateState("currentDoc",o.docs[0]),p.updateUrl()}return{newPageId:i,isFirst:i===e[0],isLast:i===e[e.length-1]}},p.goToPrevPage=function(){var e=c.getPages(),t=e[p.getState("currentPage")].indexInCollection,n=p.getState("currentDoc"),i=e[t-1];if(i){var o=e[i];p.updateState("currentPage",i),o.docs.length>0&&o.docs.indexOf(n)<0&&p.updateState("currentDoc",o.docs[0]),o.docs.length>1&&p.updateState("currentDoc",o.docs[0]),p.updateUrl()}return{newPageId:i,isFirst:i===e[0],isLast:i===e[e.length-1]}},p.goToFirstPage=function(){var e=c.getPages(),t=e[p.getState("currentPage")].indexInCollection,n=p.getState("currentDoc"),i=e[t-t];if(i){var o=e[i];p.updateState("currentPage",i),o.docs.length>0&&o.docs.indexOf(n)<0&&p.updateState("currentDoc",o.docs[0]),o.docs.length>1&&p.updateState("currentDoc",o.docs[0]),p.updateUrl()}return{newPageId:i,isFirst:i===e[0],isLast:i===e[e.length-1]}},p.goToLastPage=function(){var e=c.getPages(),t=p.getState("currentDoc"),n=e[e.length-1];if(n){var i=e[n];p.updateState("currentPage",n),i.docs.length>0&&i.docs.indexOf(t)<0&&p.updateState("currentDoc",i.docs[0]),i.docs.length>1&&p.updateState("currentDoc",i.docs[0]),p.updateUrl()}return{newPageId:n,isFirst:n===e[0],isLast:n===e[e.length-1]}},p.isCurrentPageFirst=function(){return p.getState("currentPage")===c.getPages()[0]},p.isCurrentPageLast=function(){var e=p.getState("currentPage"),t=c.getPages();return e===t[t.length-1]},p.updateParams=function(e){var t,n,i,o,r,a,l=s.defaultViewMode,d=s.defaultEdition,h=[],g={};void 0!==e.viewMode&&p.isViewModeAvailable(e.viewMode)&&(l=e.viewMode);var m,v=c.getEditions();if(void 0!==e.e?c.getEdition(e.e)?d=e.e:v&&v.length>0&&(d=v[0].value):c.getEdition(d)?"readingTxt"===l&&"critical"===d&&c.isCriticalEditionAvailable()&&(d=c.getEdition("critical")?"critical":v[0].value):v&&v.length>0&&(d=v[0].value),void 0!==e.ce)t=e.ce;else for(var b=0;!t&&b<v.length;)v[b].value!==d&&(t=v[b].value),b++;if(void 0!==e.p&&c.getEdition(e.ce))n=e.p;else{var y=c.getPages();y.length>0&&(n=y[y[0]].value||void 0)}if(void 0!==e.d&&void 0!==c.getDocument(e.d))i=e.d;else{var x=c.getDocuments();x._indexes.length>0&&(i=x[x._indexes[0]].value||void 0)}if(e.s&&c.getDiv(e.s)?a=e.s:c&&c.getDocument(i)&&(a=c.getDocument(i).divs[0]),void 0!==e.ws)for(var w in o=e.ws.split(",").filter((function(e){return 0!==e.length})),m=c.getWitnessesList(),f.availableWitnesses=m.slice(0,m.length),o){var A=o[w].split("@")[0],_=o[w].split("@")[1];void 0!==c.getWitness(A)&&(h.push(A),p.removeAvailableWitness(A),void 0!==_&&void 0!==c.getPage(A+"-"+_)&&(g[A]=_))}else if("collation"===l)s.versions.length>1?h=c.getVersionEntries()._indexes.versionWitMap[s.versions[0]]:void 0!==(h=c.getWitnessesList())&&h.length>s.maxWitsLoadTogether?(f.availableWitnesses=h.slice(s.maxWitsLoadTogether),h=h.slice(0,s.maxWitsLoadTogether)):f.availableWitnesses=[];else if(s.versions.length>1){var E=c.getVersionEntries()._indexes.versionWitMap[s.versions[0]];void 0!==E&&E.length>0&&(f.availableWitnesses=E.slice(0,E.length))}else m=c.getWitnessesList(),f.availableWitnesses=m.slice(0,m.length);void 0!==e.app&&(r=e.app),void 0!==l&&p.updateState("currentViewMode",l),void 0!==d?p.updateState("currentEdition",d):"collation"===l&&p.updateState("currentEdition","critical"),p.updateState("currentComparingEdition",t),void 0!==n&&p.updateState("currentPage",n),a&&i&&p.updateDiv(i,a),void 0!==i&&p.updateState("currentDoc",i),void 0!==h&&p.updateState("currentWits",h),g!=={}&&p.updateState("currentWitsPages",g),void 0!==r&&(p.updateState("currentAppEntry",r),u.setCurrentAppEntry(r)),p.updateUrl()},p.updateUrl=function(){var e=h.currentViewMode,t=h.currentDoc,n="";if(n+=void 0===h.currentDoc?"":(""===n?"":"&")+"d="+h.currentDoc,n+=void 0===h.currentPage?"":(""===n?"":"&")+"p="+h.currentPage,n+=h.currentDivs[t]?(""===n?"":"&")+"s="+h.currentDivs[t]:"",n+=void 0===h.currentEdition?"":(""===n?"":"&")+"e="+h.currentEdition,n+=void 0===h.currentComparingEdition?"":(""===n?"":"&")+"ce="+h.currentComparingEdition,"collation"===e&&void 0!==h.currentWits&&h.currentWits.length>0)for(var i in""!==n&&(n+="&"),n+="ws=",h.currentWits){n+=n.indexOf("ws=")<0?"ws=":"";var o=h.currentWits[i],r=p.getCurrentWitnessPage(o);n+=o,void 0!==r&&(n+="@"+r),i<h.currentWits.length-1&&(n+=",")}void 0!==h.currentAppEntry&&""!==h.currentAppEntry&&(""!==n&&(n+="&"),n+="app="+h.currentAppEntry),void 0!==e&&(window.location="#/"+e+"?"+n)},p}])},function(e,t,n){"use strict";angular.module("evtviewer.reference",[])},function(e,t,n){"use strict";angular.module("evtviewer.reference").constant("REFDEFAULTS",{}).config(["evtRefProvider","configProvider","REFDEFAULTS",function(e,t,n){var i=t.makeDefaults("ref",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.reference").provider("evtRef",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$log",function(t){var n={},i={},o=[],r=0;t.getInstance("reference");return n.build=function(t){var n,a=t.id||r++,s=t.type||"link",l=t.target||"";if(void 0===i[a])return n={uid:a,defaults:angular.copy(e),type:s,target:l},i[a]=angular.extend(t.vm,n),o.push({id:a,type:s}),i[a]},n.destroy=function(e){delete i[e]},n.getListByType=function(e){var t=[];for(var n in i)i[n].type===e&&t.push(i[n]);return t},n.getById=function(e){angular.forEach(i,(function(t){if(t.uid===e)return t}))},n}]}))},function(e,t,n){"use strict";angular.module("evtviewer.reference").controller("RefCtrl",["$log","evtRef","parsedData","evtDialog","evtHighlight","evtInterface","$timeout","evtCommunication",function(e,t,n,i,o,r,a,s){var l=this;e.getInstance("reference");l.handleRefClick=function(e){if("biblRef"===l.type||"biblio"===l.type||"#"===l.target.substr(0,1)){var t=l.target.replace("#","");n.getBibliographicRefById(t)?(r.updateState("secondaryContent","toc"),i.openByType("toc"),r.updateProperty("tabsContainerOpenedContent","bibliography"),o.setHighlighted(t),a((function(){o.setHighlighted("")}),2500)):s.err("MESSAGES.REFERENCE_NOT_FOUND","","405",!0)}else if(l.target&&""!==l.target){var c=l.target.indexOf("http")<0?"http://"+l.target:l.target;window.open(c,"_blank")}},l.destroy=function(){var e=l.uid;t.destroy(e)}}])},function(e,t,n){"use strict";angular.module("evtviewer.reference").directive("ref",["evtRef",function(e){return{restrict:"C",scope:{target:"@",type:"@"},replace:!0,transclude:!0,controllerAs:"vm",controller:"RefCtrl",template:'<span class="evtRef" ng-click="vm.handleRefClick($event)" ng-transclude></span>',link:function(t){var n=e.build(t);t.$on("$destroy",(function(){n&&n.destroy&&n.destroy()}))}}}])},function(e,t,n){"use strict";angular.module("evtviewer.communication",[])},function(e,t,n){"use strict";angular.module("evtviewer.communication").constant("COMMUNICATIONDEFAULTS",{mode:"xml",errorMsgs:{404:{title:"MESSAGES.FILE_NOT_FOUND",code:"404",msg:"MESSAGES.SOMETHING_WRONG_DURING_FILE_LOADING"},405:{title:"MESSAGES.MISSING_PARAMETERS",code:"405",msg:"MESSAGES.BIBL_REF_NOT_FOUND"},dataUrlEmpty:{title:"MESSAGES.MISSING_PARAMETERS",code:"404",msg:"MESSAGES.PATH_TO_EDITION_EMPTY"}}}).service("evtCommunication",["$http","$log","baseData","config","evtDialog","COMMUNICATIONDEFAULTS",function(e,t,n,i,o,r){var a={},s=r,l=t.getInstance("communication"),c={code:"",title:"",msg:""};return a.getExternalConfig=function(t){return e.get(t).then((function(e){i.extendDefault(e.data)}),(function(e){a.err("Something wrong while loading configuration file","",e,!0)}))},a.getData=function(t){return e.get(t).then((function(e){if("string"==typeof e.data)return l.log("XML Data received"),n.addXMLString(e.data)}),(function(e){s.errorMsgs[e.status]?a.err(s.errorMsgs[e.status].msg,t,e.status,!0):a.err(s.errorMsgs[404].msg,t,e.status,!0)}))},a.getViscollSvgs=function(t,i){return e.get(t).then((function(e){return n.handleViscollSvg(e.data,i)}),(function(e){}))},a.getViscollDataModel=function(t){return e.get(t).then((function(e){if("string"==typeof e.data)return l.log("XML Data received"),n.addViscollDataModel(e.data)}),(function(e){s.errorMsgs[e.status]?a.err(s.errorMsgs[e.status].msg,t,e.status,!0):a.err(s.errorMsgs[404].msg,t,e.status,!0)}))},a.getViscollImageList=function(t){return e.get(t).then((function(e){if("string"==typeof e.data)return l.log("XML Data received"),n.addViscollImageList(e.data)}),(function(e){s.errorMsgs[e.status]?a.err(s.errorMsgs[e.status].msg,t,e.status,!0):a.err(s.errorMsgs[404].msg,t,e.status,!0)}))},a.getExternalData=function(t){return e.get(t).then((function(e){if("string"==typeof e.data){var o="";t===i.sourcesUrl?o="sources":t===i.analoguesUrl&&(o="analogues"),n.addXMLExtDocument(e.data,o),l.log("XML Data received")}}),(function(e){s.errorMsgs[e]?a.err(s.errorMsgs[e].msg,t,e,!0):a.err(s.errorMsgs[404].msg,t,e,!0)}))},a.getSourceTextFile=function(t,i){return e.get(t).then((function(e){"string"==typeof e.data&&(n.addXMLSrcDocument(e.data,i),l.log("XML Data received"))}),(function(e){s.errorMsgs[e]?a.err(s.errorMsgs[e].msg,t,e,!0):a.err(s.errorMsgs[404].msg,t,e,!0)}))},a.getError=function(){return c},a.updateError=function(e){c=e},a.err=function(e,t,n,i){n=void 0!==n?n:"";var r=s.errorMsgs[n],l={code:r?r.code:n,msg:e&&""!==e||!r?e:r.msg,info:t,title:r?r.title:"MESSAGES.COMMUNICATION_ERROR "};if(a.updateError(l),i){var u=o.getById("errorMsg");u.updateContent('{{ "'+c.msg+'" | translate }} '+c.info),u.setTitle(c.title),u.open()}},a}])},function(e,t,n){"use strict";angular.module("evtviewer.translation",[])},function(e,t,n){"use strict";angular.module("evtviewer.translation").constant("TRANSLATIONDEFAULTS",{}).service("evtTranslation",["TRANSLATIONDEFAULTS","$translate",function(e,t){var n,i={},o=["en","it"];return i.setLanguage=function(e){n=e,t.use(e)},i.setLanguages=function(e){o=e},i.setFallbackLanguage=function(e){t.fallbackLanguage(e)},i.getLanguages=function(){return o},i.getCurrentLanguage=function(){return n},i.getUserLanguage=function(){var e=navigator.language;return e.indexOf("_")>=0&&e.split("_")[0],e.indexOf("-")>=0?e.split("-")[0]:e},i.getFallbackLanguage=function(){return o&&o.length>0?o[0]:"en"},i}])},function(e,t,n){"use strict";angular.module("evtviewer.UItools",[])},function(e,t,n){"use strict";angular.module("evtviewer.UItools").service("evtImageTextLinking",["evtInterface","Utils","parsedData","imageViewerHandler",function(e,t,n,i){var o={},r=/lb/;o.turnOnITL=function(){this.activateITL(),e.setToolStatus("ITL","active")},o.turnOnHTS=function(){this.activateHotSpots(),e.setToolStatus("HTS","active")},o.turnOffITL=function(){this.deactivateITL(),e.setToolStatus("ITL","inactive"),e.updateCurrentHighlightedZone(void 0),this.switchingOffHighlightInImage(),this.switchingOffHighlightInImageSelected()},o.turnOffHTS=function(){this.deactivateHotSpots(),e.setToolStatus("HTS","inactive"),e.updateCurrentHighlightedZone(void 0),this.switchingOffHighlightInImage(),this.switchingOffHighlightInImageSelected()},o.activateITL=function(){this.prepareLines(),this.prepareZoneInImgInteractions()},o.activateHotSpots=function(){var t=o.prepareHotSpotZones().filter((function(t){return t.page===e.getState("currentPage")}));i.showHotSpot(t)},o.prepareHotSpotZones=function(){for(var e=n.getZones(),t=e._indexes,i=[],o=0;o<t.length;o++){var r=t[o];if(r){var a,s=e[r],l=s.corresp?s.corresp.replace("#",""):s.start?s.start.replace("#",""):r;(a=n.getHotSpot(l))&&(s.content=a.content),i.push(s)}}return i.filter((function(e){return"HotSpot"===e.rendition}))},o.deactivateITL=function(){var t=e.getState("currentHighlightedZone");t&&this.changeLinesHighlightStatus(t.id,"unselect"),this.resetTextNodes()},o.deactivateHotSpots=function(){var e=o.prepareHotSpotZones();i.hiddenHotSpot(e)},o.prepareLines=function(){for(var e=document.getElementsByClassName("lb"),n=0;n<e.length;n++){var i;if(n===e.length-1){var o=e[n].nextSibling;for(i=e[n].id;o&&(3===o.nodeType||o.className&&o.className.indexOf("inLine")<0);){if(3===o.nodeType){var r=document.createElement("span");r.className="textNode",r.textContent=o.textContent,o.parentElement.replaceChild(r,o),o=r}this.preapareElementInLine(o,i),o=o.nextSibling||e[n].parentNode.nextSibling||void 0}}else{var a=e[n],s=e[n+1];if((i=a.id)&&a&&s){var l=t.DOMutils.getElementsBetweenTree(a,s);for(var c in l){var u=l[c];if(3===u.nodeType){var d=document.createElement("span");d.className="textNode",d.textContent=u.textContent,u.parentElement.replaceChild(d,u),u=d}this.preapareElementInLine(u,i)}}}}},o.preapareElementInLine=function(t,n){t.className&&t.className.indexOf("inLine")<0&&(t.className+=" inLine",t.setAttribute("data-line",n),t.onmouseover=function(){var e=this.getAttribute("data-line");o.changeLinesHighlightStatus(e,"over");var t=e.replace(r,"line");o.highlightZoneInImage(t)},t.onmouseout=function(){var e=this.getAttribute("data-line");o.changeLinesHighlightStatus(e,"out"),o.switchingOffHighlightInImage()},t.onclick=function(){var t=this.getAttribute("data-line"),n=e.getState("currentHighlightedZone");n&&"Line"===n.name&&(o.changeLinesHighlightStatus(n.id,"unselect"),o.switchingOffHighlightInImage(),o.switchingOffHighlightInImageSelected()),!n||"Line"===n.name&&n.id!==t?(e.updateCurrentHighlightedZone({name:"Line",id:t}),o.changeLinesHighlightStatus(t,"select"),o.selectHighlightedZone(t)):e.updateCurrentHighlightedZone(void 0)})},o.resetTextNodes=function(){var e=document.getElementsByClassName("textNode");for(var t in e){var n=e[t];if(n&&n.textContent){var i=document.createTextNode(n.textContent);n.parentElement.replaceChild(i,n)}}},o.changeLinesHighlightStatus=function(t,n){var i="active"===e.getToolState("ITL"),o=e.getState("currentViewMode");if(i&&"imgTxt"===o)for(var r=document.querySelectorAll("[data-line='"+t+"']"),a=0;a<r.length;a++)switch(n){case"over":r[a].className+=" lineHover";break;case"out":r[a].className=r[a].className.replace(" lineHover","")||"";break;case"select":r[a].className+=" lineSelected";break;case"unselect":r[a].className=r[a].className.replace(" lineSelected","")||""}},o.prepareZoneInImgInteractions=function(){if(0==document.getElementsByClassName("line-overlay").length)for(var t=n.getZones()._indexes.filter((function(e){return e.includes("line")})),o=0;o<t.length;o++){var r=t[o];if(n.getZone(r).page===e.getState("currentPage"))i.lineZone(n.getZone(r))}};return o.highlightZoneInImage=function(t){if("active"===e.getToolState("ITL")){var o=n.getZone(t);o&&i.highlightOverlay(o)}},o.switchingOffHighlightInImage=function(){i.turnOffOverlay()},o.switchingOffHighlightInImageSelected=function(){i.turnOffOverlaySelected()},o.selectHighlightedZone=function(t){if("active"===e.getToolState("ITL")){var o=n.getZone(t.replace(r,"line"));i.turnOffOverlaySelected(),i.highlightSelectedOverlay(o,t.replace(r,"line")),i.moveToZone(o)}},o}])},function(e,t,n){"use strict";angular.module("evtviewer.UItools").service("evtPinnedElements",["parsedData",function(e){var t={},n={_indexes:[],_indexesByType:{_types:[]}},i=[];return t.getElementsFromCookies=function(){var n=document.cookie.split(";");for(var i in n){var o=n[i].split("=");if("pinned"===o[0].trim())for(var r=JSON.parse(o[1]),a=0;a<r._indexes.length;a++){var s=r._indexes[a],l=r[s],c=!1;l&&("criticalApparatusEntry"===l.type?c=void 0!==e.getCriticalEntryById(s):l.type.indexOf("namedEntity")>=0&&(c=void 0!==e.getNamedEntity(s)),c&&t.addElement(r[s]))}}},t.addElement=function(e){n[e.id]=e,n._indexes.push(e.id),void 0===n._indexesByType[e.type]&&(n._indexesByType[e.type]=[],n._indexesByType._types.push(e.type)),n._indexesByType[e.type].push(e.id),document.cookie="pinned="+JSON.stringify(n)+"; 1"},t.removeElement=function(e){var t=n._indexes.indexOf(e.id);if(n._indexes.splice(t,1),n._indexesByType[e.type]){var i=n._indexesByType[e.type].indexOf(e.id);if(n._indexesByType[e.type].splice(i,1),0===n._indexesByType[e.type].length){delete n._indexesByType[e.type];var o=n._indexesByType._types.indexOf(e.type);n._indexesByType._types.splice(o,1)}}delete n[e.id],document.cookie="pinned="+JSON.stringify(n)+"; 1"},t.getPinnedData=function(){return n},t.getPinned=function(){return n._indexes},t.getAvailablePinnedTypes=function(){return n._indexesByType._types},t.getPinnedByType=function(e){return n._indexesByType[e]},t.getPinnedElement=function(e){return n[e]},t.getPinnedElementType=function(e){return n[e].type},t.isPinned=function(e){return void 0!==n[e]},t.addVisibleType=function(e){i.indexOf(e)<0&&i.push(e)},t.removeVisibleType=function(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)},t.setAllTypesVisible=function(){i=t.getAvailablePinnedTypes()},t.resetVisibleTypes=function(){i=[]},t.getVisibleTypes=function(){return i},t}])},function(e,t,n){"use strict";angular.module("evtviewer.box",[])},function(e,t,n){"use strict";angular.module("evtviewer.box").constant("BOXDEFAULTS",{menuClosed:!1}).config(["evtBoxProvider","configProvider","BOXDEFAULTS",function(e,t,n){var i=t.makeDefaults("box",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.box").provider("evtBox",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$log","$q","$timeout","config","parsedData","evtParser","evtCriticalParser","evtInterface","evtImageTextLinking","evtNamedEntityRef","evtGenericEntity","evtSourcesApparatus",function(t,n,i,o,r,a,s,l,c,u,d,p){var h={},f={},g=[],m=0,v=t.getInstance("box"),b=function(e,t){return this.state[e]=t,this.state[e]},y=function(e){return this.state[e]},x=function(){var e=this.uid;delete f[e]},w=function(e,t){var n=this.state.filters;void 0===n[e]&&(n[e]={name:e,any:!0,totActive:0,values:{length:0}}),void 0===n[e].totActive&&(n[e].totActive=0);var i=n[e].values;void 0===i[t]?(i[i.length]=t,i[t]={name:t,active:!0,color:r.getCriticalEntriesFilterColor(e,t)},i.length++):i[t].active=!i[t].active,i[t].active?(n[e].totActive++,n._totActive++):(n[e].totActive--,n._totActive--),n[e].any=0===n[e].totActive},A=function(e){this.state.filters[e].values={length:0},this.state.filters._totActive-=this.state.filters[e].totActive,this.state.filters[e].totActive=0},_=function(){void 0!==this.state.topBoxOpened&&(this.state.topBoxOpened=!this.state.topBoxOpened)},E=function(){void 0!==this.state.filterBox&&(this.state.filterBox=!this.state.filterBox)},S=function(e){this&&(this.topBoxContent=e)},T=function(){return"font-size:"+this.state.fontSize+"%"||!1},C=function(){this.state.fontSize=parseInt(this.state.fontSize)+4},k=function(){this.state.fontSize=parseInt(this.state.fontSize)-4},L=function(){this.state.fontSize="100"},I=function(){return"active"===l.getToolState("ITL")},D=function(){for(var e=u.getActiveEntityTypes(),t="",n=0;n<e.length;n++)t+=e[n]+"-active ";return t},P=function(){var e="";return 0===this.bottomMenuList.buttons.length&&0===this.bottomMenuList.selectors.length&&(e="noBottomMenu"),e};return h.build=function(t,u){var h,O,M=u.id||m++,N=u.model,R=u.type||"default",B=u.edition,z={selectors:[],buttons:[],appLabels:[]},$={selectors:[],buttons:[]},H={topBoxOpened:!1,fontSizeBtn:!1,fontSize:"100",topBoxContent:"",searchBox:!1},V=[],j=!0;if(void 0===f[M]){var F;switch(R){case"image":z.selectors.push({id:"page_"+M,type:"page",initValue:l.getState("currentPage")}),r.isITLAvailable()&&(z.buttons.push({title:"BUTTONS.IMAGE_TEXT_LINKING",label:"",icon:"itl",type:"itl"}),z.buttons.push({title:"BUTTONS.HOTSPOTS",label:"",icon:"hts",type:"hts"})),z.buttons.push({title:"BUTTONS.MS",label:"BUTTONS.MSD",type:"msDesc"}),o.enableNavBar||(o.thumbnailsButton&&z.buttons.push({title:"BUTTONS.THUMBNAILS",icon:"thumb-nails",type:"thumbNails"}),o.viscollButton&&z.buttons.push({title:"BUTTONS.VISCOLL",icon:"viscoll",type:"visColl"})),h=function(){t.vm.isLoading=!0;var e=l.getState("currentPage"),n=e?r.getPage(e):void 0,i=n?n.source:"";i=""===i?o.singleImagesUrl+e+".jpg":i,t.vm.content='<img src="'+i+'" alt="Image of page '+e+" of "+l.getState("currentDoc")+"\" onerror=\"this.setAttribute('src', 'images/fol_214v.jpg')\"/>";var a="",s=r.getZones();for(var c in s._indexes){var u=s[s._indexes[c]];if(u&&u.page===e){if(a+='<div class="zoneInImg" data-zone-id="'+u.id+'" data-zone-name="'+u.rendition+'"',u.corresp&&""!==u.corresp){var d=u.corresp.replace("#","");a+=' data-corresp-id="'+d+'"',"Line"===u.rendition?a+=' data-line="'+d+'"':"HotSpot"===u.rendition&&(a+=' data-hs="'+d+'"')}a+=">"+u.id+" ("+u.lrx+", "+u.lry+") ("+u.ulx+", "+u.uly+") </div>"}}t.vm.content+=a,t.vm.isLoading=!1};break;case"text":if("mainText"===M||"mainText1"===M?($.buttons.push({title:"Search",label:"Search",icon:"search",type:"searchInternal",show:function(){return!0},disabled:function(){return!0}}),$.buttons.push({title:"Create index for enable search",label:"Create index",icon:"",type:"searchIndex",show:function(){return!0}})):$.buttons.push({title:"Search",label:"Search",icon:"search",type:"searchInternal",show:function(){return!0},disabled:function(){return!0}}),(o.showDocumentSelector&&r.getDocuments()._indexes.length>0||r.getDocuments()._indexes.length>1)&&z.selectors.push({id:"document_"+M,type:"document",initValue:l.getState("currentDoc")}),r.isCriticalEditionAvailable()){if(r.getDivs().length>0)(W=(U=l.getState("currentDocument"))?l.getState("currentDivs")[U]||r.getDocument(U).divs.find((function(e){return"body"===r.getDiv(e).section})):r.getDocument(r.getDocuments()._indexes[0]).divs.find((function(e){return"body"===r.getDiv(e).section})))&&z.selectors.push({id:"div_"+M,type:"div",initValue:W});z.buttons.push({title:"BUTTONS.WITNESSES_LIST",label:"",icon:"witnesses",type:"witList"}),"collation"===l.getState("currentViewMode")&&o.versions.length>1&&Object.keys(r.getVersionEntries()._indexes.versionWitMap>0)&&z.selectors.push({id:"version_"+M,type:"version",initValue:l.getState("currentVersion")})}else z.selectors.push({id:"page_"+M,type:"page",initValue:l.getState("currentPage")});(o.showEditionLevelSelector&&o.availableEditionLevel.length>0||o.availableEditionLevel.length>1)&&("comparing"===t.subtype?z.selectors.push({id:"comparingEditionLevel_"+M,type:"comparingEdition",initValue:l.getState("currentComparingEdition")}):z.selectors.push({id:"editionLevel_"+M,type:"edition",initValue:l.getState("currentEdition")})),z.buttons.push({title:"BUTTONS.INFO_ABOUT_TEXT",label:"BUTTONS.INFO",icon:"info-alt",type:"front"}),"tdhop"===l.getState("currentViewMode")&&z.buttons.push({title:"BUTTONS.3D",label:"BUTTONS.OBJ",type:"listObject"}),(V=r.getCriticalEntriesFiltersCollection()).forLemmas>0&&(z.buttons.push({title:"BUTTONS.COLOR_KEY",label:"",icon:"color-legend",type:"colorLegend"}),$.buttons.push({title:"BUTTONS.FILTERS",label:"BUTTONS.FILTERS",icon:"filters",type:"toggleFilterApp",show:function(){return"critical"===u.edition}}),V=V.filters),o.namedEntitiesSelector&&$.selectors.push({id:"namedEntities_"+M,type:"named-entities",initValue:"NONE",multiselect:!0}),H.filters={_totActive:0},H.filterBox=!1,H.docId=l.getState("currentDoc"),o.toolHeatMap&&$.buttons.push({title:"BUTTONS.HEAT_MAP",label:"BUTTONS.HEAT_MAP",icon:"heatmap",type:"heatmap",show:function(){return"text"===u.type&&"critical"===u.edition}}),$.buttons.push({title:"BUTTONS.FONT_CHANGE",label:"",icon:"font-size",type:"fontSizeTools",show:function(){return!0}}),h=function(){t.vm.isLoading=!0;var e,p=[],h="active"===l.getToolState("ITL"),f="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.ERROR_IN_PARSING_TEXT' | translate }} <br /> {{ 'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate }}</span>",g="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.TEXT_NOT_AVAILABLE' | translate }}</span>";if(t.vm.edition&&"critical"===t.vm.edition&&!u.version){if(e=r.getCriticalText(t.vm.state.docId))t.vm.content=e||g,t.vm.isLoading=!1,i((function(){d.highlightActiveTypes()}));else if(void 0!==(e=r.getDocument(t.vm.state.docId)))try{o.versions.length>2?p.push(s.parseCriticalText(e.content,t.vm.state.docId,o.versions[0]).promise):p.push(s.parseCriticalText(e.content,t.vm.state.docId).promise),n.all(p).then((function(){t.vm.content=r.getCriticalText(t.vm.state.docId)||g,t.vm.isLoading=!1,i((function(){d.highlightActiveTypes()}))}))}catch(e){v.log(e),F=f,t.vm.isLoading=!1}}else if(t.vm.edition&&"critical"===t.vm.edition&&t.vm.version){var m=l.getState("currentDoc");if(void 0===(e=t.vm.version===o.versions[0]?r.getCriticalText(m)||void 0:r.getVersionText(u.version,m)||void 0)){e=r.getDocument(t.vm.state.docId);try{p.push(s.parseCriticalText(e.content,t.vm.state.docId,t.vm.version).promise),n.all(p).then((function(){o.versions[0]===t.vm.version?t.vm.content=r.getCriticalText(t.vm.state.docId)||g:t.vm.content=r.getVersionText(u.version,m)||g,t.vm.isLoading=!1}))}catch(e){v.log(e),F=f,t.vm.isLoading=!1}}else t.vm.content=e||g,t.vm.isLoading=!1}else{var b=l.getState("currentPage"),y=l.getState("currentDoc"),x="comparing"===t.subtype?l.getState("currentComparingEdition"):l.getState("currentEdition");if(void 0===(e=r.getPageText(b,y,x))){e=r.getPageText(b,y,"original");try{p.push(a.parseTextForEditionLevel(b,y,x,e).promise),n.all(p).then((function(){t.vm.content=r.getPageText(b,y,x)||g,t.vm.isLoading=!1,h&&i((function(){c.prepareLines(),c.prepareZoneInImgInteractions()})),i((function(){d.highlightActiveTypes()}))}))}catch(e){v.log(e),F=f,t.vm.isLoading=!1}}else t.vm.content=e||g,t.vm.isLoading=!1,h&&i((function(){c.prepareLines(),c.prepareZoneInImgInteractions()})),i((function(){d.highlightActiveTypes()}));t.vm.isLoading=!1}};break;case"witness":var U,W,q=void 0!==u.witPage&&""!==u.witPage?u.witness+"-"+u.witPage:"";if(z.selectors.push({id:"witnesses_"+M,type:"witness",initValue:u.witness},{id:"page_"+M,type:"witness-page",initValue:q}),r.getDivs().length>0)(W=(U=l.getState("currentDocument"))?l.getState("currentDivs")[U]||r.getDocument(U).divs.find((function(e){return"body"===r.getDiv(e).section})):r.getDocument(r.getDocuments()._indexes[0]).divs.find((function(e){return"body"===r.getDiv(e).section})))&&z.selectors.push({id:"div_"+M+"_"+u.witness,type:"div",initValue:W});z.buttons.push({title:"BUTTONS.INFO_ABOUT_TEXT",label:"BUTTONS.INFO",icon:"info-alt",type:"toggleInfoWit"},{title:"BUTTONS.WITNESS_CLOSE",label:"",icon:"remove",type:"removeWit"}),(V=r.getCriticalEntriesFiltersCollection()).forVariants>0&&($.buttons.push({title:"BUTTONS.FILTERS",label:"BUTTONS.FILTERS",icon:"filters",type:"toggleFilterApp",show:function(){return"true"}}),V=V.filters),H.filters={_totActive:0},H.filterBox=!1,$.buttons.push({title:"BUTTONS.FONT_CHANGE",label:"",icon:"font-size",type:"fontSizeTools",show:function(){return!0}}),h=function(){t.vm.isLoading=!0;var e="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.TEXT_OF_WITNESS_NOT_AVAILABLE' | translate:'{ witness:  \""+u.witness+"\" }' }}</span>";if(void 0!==u.witness){var i=l.getState("currentDoc"),o=r.getWitnessText(u.witness,i)||void 0;if(void 0===o){var a=r.getDocuments(),c="";if(a._indexes.length>0&&(c=a[i]),void 0!==c)try{var d=[];d.push(s.parseWitnessText(c.content,i,u.witness).promise),n.all(d).then((function(){t.vm.content=r.getWitnessText(u.witness,i)||e,t.vm.isLoading=!1}))}catch(e){v.log(e),t.vm.content="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.ERROR_IN_PARSING_TEXT' | translate }} <br /> {{ 'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate }}</span>",t.vm.isLoading=!1}else t.vm.content=e,t.vm.isLoading=!1}else t.vm.content=o,t.vm.isLoading=!1}};break;case"source":z.selectors.push({id:"sources_"+M,type:"source",initValue:l.getState("currentSourceText")}),z.buttons.push({title:"BUTTONS.BIBLIOGRAPHIC_REF",label:"",icon:"info",type:"toggleInfoSrc"}),$.buttons.push({title:"BUTTONS.FONT_CHANGE",label:"",icon:"font-size",type:"fontSizeTools",show:function(){return!0}}),h=function(){t.vm.isLoading=!0;var e="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.ERROR_IN_PARSING_TEXT' | translate }} <br /> {{ 'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate }}</span>",i="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.TEXT_OF_SOURCE_NOT_AVAILABLE' | translate:'{ source:  \""+t.vm.source+"\" }' }}</span>",o=r.getSource(t.vm.source),a=o?o.text:void 0;if(o&&0!==Object.keys(o.text).length&&void 0!==a)t.vm.content=a,t.vm.isLoading=!1;else{var c=r.getSourceDocument(t.vm.source);if(void 0!==c)try{var u=[];u.push(s.parseSourceText(c.content,t.vm.source).promise),n.all(u).then((function(){t.vm.content=r.getSource(t.vm.source).text||i,t.vm.isLoading=!1}));var d=p.getSource(r.getSource(l.getState("currentSourceText")));d&&S(d)}catch(n){v.log(n),t.vm.content=e,t.vm.isLoading=!1}else t.vm.content=e,t.vm.isLoading=!1}};break;case"version":r.getVersionEntries()._indexes.versionId[u.version];z.selectors.push({id:"version_"+M,type:"version",initValue:u.version}),l.getAllVersionsNumber()>2&&z.buttons.push({title:"BUTTONS.VERSION_CLOSE",label:"",icon:"remove",type:"removeVer"}),$.buttons.push({title:"BUTTONS.FONT_CHANGE",label:"",icon:"font-size",type:"fontSizeTools",show:function(){return!0}}),h=function(){t.vm.isLoading=!0;var e="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.TEXT_OF_VERSION_NOT_AVAILABLE' | translate:'{ version:  \""+u.version+"\" }' }}</span>";if(void 0!==u.version){var i=l.getState("currentDoc"),o=r.getVersionText(u.version,i)||void 0;if(void 0===o){var a=r.getDocuments(),c="";if(a._indexes.length>0&&(c=a[i]),void 0!==c)try{var d=[];d.push(s.parseCriticalText(c.content,i,u.version).promise),n.all(d).then((function(){t.vm.content=r.getVersionText(u.version,i)||e,t.vm.isLoading=!1}))}catch(e){v.log(e),t.vm.content="<span class=\"alert-msg alert-msg-error\">{{ 'MESSAGES.ERROR_IN_PARSING_TEXT' | translate }} <br /> {{ 'MESSAGES.TRY_DIFFERENT_BROWSER_OR_CONTACT_DEVS' | translate }}</span>",t.vm.isLoading=!1}else t.vm.content=e,t.vm.isLoading=!1}else t.vm.content=o,t.vm.isLoading=!1}};break;case"tdhop":if(z.selectors.push({id:"modelSelector",type:"generic",initValue:"Ruthwell Cross"}),z.buttons.push({title:"BUTTONS.IMAGE_TEXT_LINKING",label:"",icon:"itl",type:"itl"}),z.buttons.push({title:"BUTTONS.HOTSPOTS",label:"",icon:"hts",type:"hts"}),z.buttons.push({title:"BUTTONS.3D",label:"BUTTONS.OBJ",type:"objDesc"}),o.showObjectSelector){var Q=JSON.stringify(o.tdhopViewerOptions.Models);z.selectors.push({id:"model_"+N,type:"model",initValue:Q})}h=function(){t.vm.isLoading=!0;t.vm.source;t.vm.content=F,t.vm.isLoading=!1};break;default:j=!1,"pinnedBoard"===R?(z.buttons.push({title:"BUTTONS.BOARD_CLOSE",label:"",icon:"remove",type:"closePinned"}),o.toolPinAppEntries&&$.selectors.push({id:"pinnedFilter_"+M,type:"pinned-filter",initValue:"NONE",multiselect:!0})):z.buttons.push({title:"BUTTONS.BOX_CLOSE",label:"",icon:"remove",type:"removeBox"}),h=function(e){t.vm.content=e}}return O={currentEdition:B,uid:M,defaults:angular.copy(e),topMenuList:z,bottomMenuList:$,content:void 0,topBoxContent:'<span class="alert-msg">No info available</span>',state:H,appFilters:V,isLoading:j,genericTools:{fontSizeBtn:[{title:"BUTTONS.FONT_RESET",label:"",icon:"font-size-reset",type:"fontSizeReset"},{title:"BUTTONS.FONT_DECREASE",label:"",icon:"font-size-minus",type:"fontSizeDecrease"},{title:"BUTTONS.FONT_INCREASE",label:"",icon:"font-size-plus",type:"fontSizeIncrease"}]},osdTools:{osdBtn:[{title:"BUTTONS.ZOOM-RESET",label:"",icon:"zoom-reset",type:"zoomReset"},{title:"BUTTONS.ZOOM-OUT",label:"",icon:"zoom-out",type:"zoomOut"},{title:"BUTTONS.ZOOM-IN",label:"",icon:"zoom-in",type:"zoomIn"}]},updateContent:h,updateTopBoxContent:S,updateState:b,getState:y,destroy:x,toggleCriticalAppFilter:w,toggleFilterBox:E,toggleTopBox:_,clearFilter:A,fontSize:T,fontSizeIncrease:C,fontSizeDecrease:k,fontSizeReset:L,getNamedEntitiesActiveTypes:D,getAdditionalClass:P,isITLactive:I},f[M]=angular.extend(u,O),g.push({id:M,type:R}),f[M]}},h.getById=function(e){if("undefined"!==f[e])return f[e]},h.getList=function(){return g},h.getListByType=function(e){var t=[];for(var n in f)f[n].type===e&&t.push(f[n]);return t},h.getElementByValueOfParameter=function(e,t){var n;for(var i in f)f[i][e]===t&&(n=f[i]);return n},h.alignScrollToApp=function(e){for(var t in f)void 0!==f[t].scrollToAppEntry&&f[t].scrollToAppEntry(e)},h.alignScrollToQuote=function(e,t){for(var n in f)void 0!==f[n].scrollToQuotesEntry&&("source"===f[n].type?f[n].scrollToQuotesEntry(t):f[n].scrollToQuotesEntry(e))},h.alignScrollToAnalogue=function(e){for(var t in f)void 0!==f[t].scrollToAnaloguesEntry&&f[t].scrollToAnaloguesEntry(e)},h.getEditionById=function(e){return f[e].edition},h.getState=function(e,t){return f[e].state[t]},h.updateState=function(e,t,n){f[e].state[t]=n},h}]}))},function(e,t,n){"use strict";(function(e){angular.module("evtviewer.box").directive("box",["$timeout","evtBox","evtInterface","xmlParser","config","parsedData","evtSearchResults","evtSearchBox","evtVirtualKeyboard","evtButtonSwitch",function(t,i,o,r,a,s,l,c,u,d){return{restrict:"E",scope:{id:"@",type:"@",subtype:"@",witness:"@",witpage:"@",edition:"@",source:"@",version:"@"},transclude:!0,template:n(228),link:function(n,p,h){n.vm={id:n.id,type:n.type,subtype:n.subtype,witness:n.witness,witPage:n.witpage,edition:n.edition,source:n.source,version:n.version};var f,g,m=i.build(n,n.vm),v=angular.element(p).find(".box")[0];t((function(){if(f=angular.element(p).find(".box-body")[0],g=angular.element(p).find(".box-top-box")[0],m.updateContent(),"witness"===m.type||"text"===m.type){var t,i,r=v.scrollTop+42,l=r+angular.element(v).height(),c=function(){s.getDivs().length>0&&function(){if("text"===m.type){for(var t=angular.element(p).find(".div"),i=0,a=!1,c="";i<t.length&&!a;){c=t[i].getAttribute("id");var u,d=e("#"+c).offset();d&&(u=d.top),u&&u<=l&&u>=r?a=!0:i++}a&&c&&s.getDiv(c)&&n.vm.state.divId!==c&&(n.vm.state.divId=c,o.updateDiv(s.getDiv(c).doc,c),o.updateUrl())}}(),s.getPages().length>0&&function(){if("witness"===m.type){for(var t=angular.element(p).find(".pb"),i=0,a=!1,s="";i<t.length&&!a;){s=t[i].getAttribute("data-id");var c,u=e("span.pb[data-id='"+s+"']").offset();u&&(c=u.top),c&&c<=l&&c>=r?a=!0:i++}a&&o.getCurrentWitnessPage(n.witness)!==id.split("-")[1]&&(o.updateWitnessPage(n.witness,id.split("-")[1]),o.updateUrl())}}()};angular.element(f).on("DOMMouseScroll mousewheel scroll",(function(){t&&window.clearTimeout(t),t=window.setTimeout(c(),1e3)})),angular.element(g).on("DOMMouseScroll mousewheel scroll",(function(){i&&window.clearTimeout(i),i=window.setTimeout(c(),1e3)}))}m.type,b(n,a.xsltUrl)}));var b=function(e,t){if(""!==t){var i=r.parse(n.vm.content),o=function(e){var t;(t=window.ActiveXObject?new ActiveXObject("Msxml2.XMLHTTP"):new XMLHttpRequest).open("GET",e,!1);try{t.responseType="msxml-document"}catch(e){}return t.send(""),t.responseXML}(t);if(window.ActiveXObject){var a=i.transformNode(o);n.vm.content=a}else if(document.implementation&&document.implementation.createDocument){var s=new XSLTProcessor;s.importStylesheet(o);var l=s.transformToFragment(i,document);n.vm.content=l}}};if(n.vm.getTotElementsOfType=function(e){return i.getListByType(e).length},"witness"===m.type||"text"===m.type||"version"===m.type){n.vm.scrollToPage=function(n){t((function(){var t=e("#"+m.uid).find("#pb_"+n),i=1*window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");t.length>0&&void 0!==t[0]&&(f.scrollTop=t[0].offsetTop-i)}))},n.vm.scrollToAppEntry=function(n){t((function(){var t=e("#"+m.uid).find("[data-app-id='"+n+"']"),i=1*window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");t.length>0&&void 0!==t[0]&&(f.scrollTop=t[0].offsetTop-i)}))},n.vm.scrollToDiv=function(n){t((function(){var t=e("#"+n),i=1*window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");t.length>0&&void 0!==t[0]&&(f.scrollTop=t[0].offsetTop-i)}))};var y,x=o.getState("currentAppEntry"),w=o.getState("currentDoc"),A=o.getState("currentDivs"),_=A?A[w]:void 0;"witness"===m.type?y=n.vm.witness+"-"+o.getCurrentWitnessPage(n.vm.witness):"text"===m.type&&(y=o.getState("currentPage")),n.vm.scrollToPage(y),_&&n.vm.scrollToDiv(_),n.vm.scrollToAppEntry(x),n.$watch((function(){return o.getState("currentDivs")}),(function(e,t){if(t!==e){var i=o.getState("currentDoc"),r=e?e[i]:void 0;r&&n.vm.state.divId!==r&&(n.vm.state.divId=r,n.vm.scrollToDiv(r))}}),!0)}"witness"!==m.type&&"text"!==m.type&&"textdhop"!==m.type||(n.$watch((function(){return o.getState("currentDoc")}),(function(e,t){if(t!==e&&n.vm.state.docId!==e)if(n.vm.state.docId=e,n.vm.isLoading=!0,m.updateContent(),"text"===n.vm.currentType){var i=s.getDocument(e),o=i?i.front:void 0,r=o&&o.parsedContent?o.parsedContent:"<div class=\"warningMsg\">{{ 'MESSAGES.FRONT_NOT_AVAILABLE' | translate }}</div>";n.vm.updateTopBoxContent(r)}else if("image"===n.vm.currentType){var a=s.getProjectInfo().msDesc?s.getProjectInfo().msDesc:"<div class=\"warningMsg\">{{ 'MESSAGES.FRONT_NOT_AVAILABLE' | translate }}</div>";n.vm.updateTopBoxContent(a)}else if("tdhop"===n.vm.currentType||"text"===n.vm.currentType){var l=s.getProjectInfo().listObject?s.getProjectInfo().listObject:"<div class=\"warningMsg\">{{ 'MESSAGES.FRONT_NOT_AVAILABLE' | translate }}</div>";!s.getProjectInfo().listObject||s.getProjectInfo().listObject,n.vm.updateTopBoxContent(l)}}),!0),n.$watch((function(){return n.vm.state.filters._totActive}),(function(e,n){n!==e&&t((function(){var e=angular.element(p).find(".filters-in-box")[0],t=angular.element(e).height(),n=angular.element(p).find(".box-body > *:last-child")[0];angular.element(n).css("margin-bottom",t+20+"px")}))}),!0)),"witness"!==m.type&&"text"!==m.type&&"version"!==m.type||(n.vm.scrollToQuotesEntry=function(n){t((function(){var t=e("#"+m.uid).find("[data-quote-id='"+n+"']"),i=1*window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");t.length>0&&void 0!==t[0]&&(f.scrollTop=t[0].offsetTop-i)}))},n.vm.scrollToAnaloguesEntry=function(n){t((function(){var t=e("#"+m.uid).find("[data-analogue-id='"+n+"']"),i=1*window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");t.length>0&&void 0!==t[0]&&(f.scrollTop=t[0].offsetTop-i)}))},n.vm.scrollToVersionApparatus=function(n){t((function(){var t=e("#"+m.uid).find("evt-version-apparatus-entry[data-app-id='"+n+"']");window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");if(t.length>0&&void 0!==t[0]){var i=angular.element(t[0]).position().top,o=t[0].offsetParent.clientHeight,r=e("#"+m.uid).find("div[class='version-apparatus-entry']"),a=angular.element(r).outerHeight()||0;i+a>o&&(f.scrollTop+=i-o+a)}}))}),"source"===m.type&&(n.vm.scrollToQuotesEntry=function(n){t((function(){var t=e("#"+m.uid).find("[data-seg-id='"+n+"']"),i=1*window.getComputedStyle(f,null).getPropertyValue("padding-top").replace("px","");t.length>0&&void 0!==t[0]&&(f.scrollTop=t[0].offsetTop-i)}))}),"text"===m.type&&("comparing"===m.subtype?n.$watch((function(){return o.getState("currentComparingEdition")}),(function(e,i){i!==e&&n.vm.edition!==e&&(n.vm.edition=e,m.updateContent(),u.unselectCurrentKeyboard(d,m.id),t((function(){var e=n.id,t=c.getInputValue(e);""!==t&&l.highlightSearchResults(e,t)})))}),!0):n.$watch((function(){return o.getState("currentEdition")}),(function(e,i){i!==e&&n.vm.edition!==e&&(n.vm.edition=e,m.updateContent(),u.unselectCurrentKeyboard(d,m.id),t((function(){var e=n.id,t=c.getInputValue(e);""!==t&&l.highlightSearchResults(e,t)})))}),!0),n.$watch((function(){var e=n.id;return i.getState(e,"searchBox")}),(function(n,i){!0===n&&t((function(){e("input").trigger("focus")}),100)}),!0),n.$watch((function(){return o.getState("currentPage")}),(function(e,i){m.updateContent(),t((function(){var e=n.id,t=c.getInputValue(e);""!==t&&l.highlightSearchResults(e,t)}))}),!0)),"image"===m.type&&n.$watch((function(){return o.getState("currentPage")}),(function(e,t){t!==e&&n.vm.state.docId!==e&&(n.vm.state.pageId=e,m.updateContent())}),!0),"source"===m.type&&(n.$watch((function(){return o.getProperty("isSourceLoading")}),(function(e,t){t!==e&&(e||(n.vm.source=o.getState("currentSourceText"),m.updateContent()))})),n.$watch((function(){return o.getState("currentSourceText")}),(function(e,t){t!==e&&o.getProperty("parsedSourcesTexts").indexOf(e)>=0&&(n.vm.source=e,m.updateContent())}))),"text"===m.type&&"collation"===o.getState("currentViewMode")&&n.$watch((function(){return o.getState("currentVersion")}),(function(e,t){n.vm.version=e,m.updateContent()})),n.$on("$destroy",(function(){m&&m.destroy()}))}}}])}).call(this,n(0))},function(e,t){e.exports='<section class="box box-{{::vm.type}}"\r\n         id="{{::vm.uid}}"\r\n         data-position="left"\r\n         data-getTotElementsOfType="{{vm.getTotElementsOfType(\'witness\')}}"\r\n         ng-class="{\'span9of9\' : (vm.type === \'witness\' && vm.getTotElementsOfType(\'witness\') === 1) || (vm.type === \'version\' && vm.getTotElementsOfType(\'version\') === 1),\r\n                    \'span6of12\': vm.type === \'witness\' && vm.getTotElementsOfType(\'witness\') === 2 || (vm.type === \'version\' && vm.getTotElementsOfType(\'version\') === 2),\r\n                    \'span6of18\': (vm.type === \'witness\' && vm.getTotElementsOfType(\'witness\') === 3) || (vm.type === \'version\' && vm.getTotElementsOfType(\'version\') === 3) || (vm.type === \'text\' && vm.getTotElementsOfType(\'version\') > 1) || (vm.type === \'text\' && vm.getTotElementsOfType(\'witness\') > 1) || (vm.type === \'critical_apparatus\'),\r\n                    \'topBoxOpened\': vm.state.topBoxOpened,\r\n                    \'filterNotActive\': vm.state.filters._totActive <= 0,\r\n                    \'ITLactive\': vm.isITLactive()}">\r\n\r\n    <div class="box-menu"\r\n        data-position="top"\r\n        ng-if="::vm.type !== \'critical_apparatus\'  && vm.type !== \'empty\' && vm.type !== \'tdhop\'">\r\n\r\n        <evt-select\r\n            data-id="{{::selector.id}}"\r\n            data-type="{{::selector.type}}"\r\n            data-init="{{::selector.initValue}}"\r\n            ng-repeat="selector in ::vm.topMenuList.selectors track by $index">\r\n        </evt-select>\r\n        <button-switch\r\n            title="{{::button.title}}"\r\n            data-label="{{::button.label}}"\r\n            data-icon="{{::button.icon}}"\r\n            data-icon-pos="{{::button.iconPos}}"\r\n            data-type="{{::button.type}}"\r\n            ng-repeat="button in ::vm.topMenuList.buttons track by $index">\r\n        </button-switch>\r\n    </div>\r\n    \x3c!-- add by FS button switch --\x3e\r\n    <div class="box-menu" data-position="top" ng-if="::vm.type === \'tdhop\'">\r\n    </div>\r\n\r\n    <div\r\n        class="box-top-box avoidBlur"\r\n        ng-class="{\'open\': vm.state.topBoxOpened}"\r\n        compile="::vm.topBoxContent">\r\n    </div>\r\n\r\n    <div ng-if="::vm.type !== \'image\' && vm.type !== \'tdhop\'"\r\n         class="box-body {{vm.edition}}Edition {{vm.getNamedEntitiesActiveTypes()}} {{vm.getAdditionalClass()}}"\r\n         ng-class="{\r\n             \'search-opened\': vm.getState(\'searchBox\')\r\n         }"\r\n         style="{{vm.fontSize();}}"\r\n         id="box_body_{{::vm.uid}}"\r\n         compile="::vm.content" ng-transclude>\r\n    </div>\r\n\r\n    <div ng-if="::vm.type === \'image\'"\r\n         class="box-body {{vm.edition}}Edition {{vm.getNamedEntitiesActiveTypes()}} {{vm.getAdditionalClass()}}"\r\n         style="{{vm.fontSize();}}"\r\n         id="box_body_{{::vm.uid}}">\r\n\r\n         <div ng-app="evtviewer.imageViewer" ng-controller="imageViewerCtrl" style="height:100%">\r\n            <osd name="osdViewer"></osd>\r\n            \x3c!--i class="icon icon-evt_imgtxt buttonSwitch-icon"> </i--\x3e\r\n         </div>\r\n    </div>\r\n\r\n    <div  ng-if="::vm.type === \'tdhop\'"\r\n     class="box-body {{vm.edition}}Edition {{vm.getNamedEntitiesActiveTypes()}} {{vm.getAdditionalClass()}}" style="padding: 0px;" ng-controller="TreDHOPCtrl">\r\n      <evt-tredhop id=\'tdhop\' name="tredhopViewer">\r\n            \x3c!--div  class=\'box-tdhop box-body Edition noBottomMenu\'></div--\x3e\r\n      </evt-tredhop>\r\n   </div>\r\n\r\n    \x3c!-- <div class="box-body" id="box_body_{{vm.uid}}">{{ vm.content }}</div> --\x3e\r\n    <div class="loading" ng-if="vm.isLoading"><i class="fa fa-spinner fa-pulse loader"></i></div>\r\n    <div class="filters-in-box"\r\n         ng-if="(vm.type==\'witness\' || vm.type==\'text\') && vm.state.filters._totActive > 0">\r\n        <span\r\n            class="filter-group"\r\n            ng-repeat="filter in vm.state.filters track by $index"\r\n            ng-if="filter.totActive > 0">\r\n            <span\r\n                class="filter-value"\r\n                ng-repeat="value in filter.values track by $index"\r\n                ng-if="filter.values[value].active"\r\n                ng-click="vm.toggleCriticalAppFilter(filter.name, filter.values[value].name);"\r\n                style="background:{{::filter.values[value].color}}"\r\n                title="Remove \'\'{{::filter.values[value].name}}\'\'">\r\n                {{::filter.values[value].name}}\r\n            </span>\r\n        </span>\r\n    </div>\r\n    \x3c!-- <div class="box-bottom-box"> </div> --\x3e\r\n    <div\r\n        class="filters-box"\r\n        ng-if="::vm.type==\'witness\' || vm.type==\'text\'"\r\n        ng-class="{\'open\': vm.state.filterBox}">\r\n\r\n        <div class="filter-group"\r\n             ng-repeat="filter in vm.appFilters track by $index"\r\n             ng-if="::(vm.type==\'witness\' && filter.possibleFor.variant) || (vm.type==\'text\' && filter.possibleFor.lemma)">\r\n            <div class="filters-section-title">{{::filter.name}}</div>\r\n            <div class="filter-value-outer">\r\n                <div\r\n                    class="filter-value">\r\n                    <span\r\n                        class="filter-value-label filter-any"\r\n                        title="Toggle \'\'any\'\'"\r\n                        ng-class="{\'active\': vm.state.filters[filter.name] === undefined || vm.state.filters[filter.name].totActive === 0}"\r\n                        ng-click="vm.clearFilter(filter.name);"> any </span>\r\n                </div>\r\n            </div>\r\n            <div class="filter-value-outer" ng-repeat="value in filter.values track by $index">\r\n                <div\r\n                    style="background:{{::value.color}}"\r\n                    class="filter-value">\r\n                    <span\r\n                        class="filter-value-label"\r\n                        title="Toggle \'\'{{::value.name}}\'\'"\r\n                        ng-class="{\'active\': vm.state.filters[filter.name].values[value.name].active !== undefined && vm.state.filters[filter.name].values[value.name].active}"\r\n                        ng-click="vm.toggleCriticalAppFilter(filter.name, value.name);">\r\n                        {{::value.name}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n   <evt-search-box\r\n        ng-if="vm.type==\'text\'"\r\n        ng-controller="SearchBoxCtrl as searchBox">\r\n    </evt-search-box>\r\n\r\n   \x3c!--<evt-search-box-index\r\n      ng-if="vm.type==\'text\'">\r\n   </evt-search-box-index>--\x3e\r\n\r\n    <div\r\n        class="tools-group-box"\r\n        ng-if="::vm.type!==\'image\'"\r\n        ng-class="{\'open\': vm.getState(\'fontSizeBtn\')}">\r\n        <div\r\n            class="fontSizeBtnGroup">\r\n            <button-switch\r\n                class="no-background"\r\n                title="{{::button.title}}"\r\n                data-label="{{::button.label}}"\r\n                data-icon="{{::button.icon}}"\r\n                data-icon-pos="{{::button.iconPos}}"\r\n                data-type="{{::button.type}}"\r\n                ng-repeat="button in vm.genericTools.fontSizeBtn track by $index">\r\n            </button-switch>\r\n        </div>\r\n    </div>\r\n\r\n    <div\r\n        class="box-menu"\r\n        data-position="bottom"\r\n        ng-if="::vm.bottomMenuList.buttons.length > 0 || vm.bottomMenuList.selectors.length > 0">\r\n        <evt-select\r\n            data-id="{{::selector.id}}"\r\n            data-type="{{::selector.type}}"\r\n            data-init="{{::selector.initValue}}"\r\n            data-open-up="true"\r\n            data-multiselect="{{::selector.multiselect}}"\r\n            ng-repeat="selector in ::vm.bottomMenuList.selectors track by $index">\r\n        </evt-select>\r\n\r\n        <button-switch\r\n            title="{{::button.title}}"\r\n            data-label="{{::button.label}}"\r\n            data-icon="{{::button.icon}}"\r\n            data-icon-pos="{{::button.iconPos}}"\r\n            data-type="{{::button.type}}"\r\n            ng-repeat="button in vm.bottomMenuList.buttons track by $index"\r\n            ng-if="button.show()">\r\n        </button-switch>\r\n    </div>\r\n</section>\r\n'},function(e,t,n){"use strict";angular.module("evtviewer.select",[])},function(e,t,n){"use strict";angular.module("evtviewer.select").constant("SELECTORDEFAULTS",{expanded:!1,elementWidth:150,containerMaxHeight:170}).config(["evtSelectProvider","configProvider","SELECTORDEFAULTS",function(e,t,n){var i=t.makeDefaults("select",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.select").provider("evtSelect",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$log","config","Utils","parsedData","evtInterface","evtNamedEntityRef","evtGenericEntity","evtPinnedElements","evtSourcesApparatus",function(t,n,i,o,r,a,s,l,c){var u={},d={},p=[],h=0;t.getInstance("select");return u.build=function(t,u){var f,g,m,v,b,y,x,w=t.id||h++,A=t.type||"default",_=t.init||void 0,E=t.openUp||!1,S=t.multiselect||!1,T=[];if(void 0===d[w]){switch(A){case"page":m=function(e,t){if(void 0!==t){u.selectOption(t);var n=r.getState("currentDoc");r.updateState("currentPage",t.value),t.docs.length>0&&t.docs.indexOf(n)<0&&r.updateState("currentDoc",t.docs[0]),r.updateUrl()}},b=function(e){return e},T=(v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[e[n]]);return t})(o.getPages());break;case"document":m=function(e,t){if(void 0!==t){u.selectOption(t);var n=r.getState("currentPage");r.updateState("currentDoc",t.value),t.pages.length>0&&t.pages.indexOf(n)<0&&r.updateState("currentPage",t.pages[0]),t.divs.length>0&&r.updateDiv(t.value,t.divs[0]),r.updateUrl()}},b=function(e){return e},T=(v=function(e){for(var t=[],n=0;n<e._indexes.length;n++)t.push(e[e._indexes[n]]);return t})(o.getDocuments());break;case"div":m=function(e,t){if(t){u.selectOption(t);var n=t.doc;r.updateDiv(n,t.value),r.updateUrl()}},v=function(e,t,n){var i=o.getDivs();angular.forEach(e,(function(e){i[e].section===n&&(!i[e]._isSubDiv&&i[e].subDivs.length>0&&(i[e].type="groupTitle"),t.push(i[e]),o.getDivs()._indexes.subDivs[e]&&o.getDivs()._indexes.subDivs[e].length>0&&v(i[e].subDivs,t,n))}))},b=function(e){return e};var C=r.getState("currentDoc"),k=o.getDiv(r.getState("currentDivs")[C]),L=k?k.section:"body";v(o.getDivs()._indexes.main[C],T,L);break;case"edition":case"comparingEdition":m=function(e,t){var n,i;void 0!==t&&void 0!==e&&void 0!==e[0]&&t.value!==e[0].value&&(u.selectOption(t),"edition"===A?(n="currentEdition",i="currentComparingEdition"):"comparingEdition"===A&&(n="currentComparingEdition",i="currentEdition"),r.getState(i)===t.value&&r.updateState(i,e[0].value),r.updateState(n,t.value),r.updateUrl())},b=function(e){return e},T=(v=function(e){return e})(o.getEditions());break;case"named-entities":g=_,y={value:"ALL",label:"SELECTS.SELECT_ALL",title:"SELECTS.SELECT_ALL_NAMED_ENTITIES",additionalClass:"doubleBorderTop"},m=function(e,t){if(void 0!==t)if(u.selectOption(t),"ALL"===t.value){for(var n=T&&T.length>3?T.length-2:0,i=0;i<n;i++){var o=T[i];u.isOptionSelected(o)||(u.selectOption(o),"namedEntity"===o.type?a.addActiveType(o.value):"groupTitle"!==o.type&&s.addActiveType(o.value,o.color))}u.selectOption(t)}else if("NONE"===t.value){for(var r=u.optionSelected?u.optionSelected:[],l=0;l<r.length;l++){var c=T[l];"ALL"!==c.value&&("namedEntity"===c.type?a.removeActiveType(c.value):s.removeActiveType(c.value,c.color))}u.optionSelected=[],u.selectOption(t)}else"namedEntity"===t.type?u.isOptionSelected(t)?a.addActiveType(t.value):a.removeActiveType(t.value):u.isOptionSelected(t)?s.addActiveType(t.value,t.color):s.removeActiveType(t.value,t.color)},b=function(e){return e};var I=(v=function(e,t){var n=[];if(e)for(var i=0;i<e.length;i++){var r=e[i];if(r.available){var a="fa-circle";"namedEntity"===t&&(a=o.getNamedEntityTypeIcon(r.tagName)||a);var s={icon:a,type:t,value:r.tagName,label:r.label,title:r.label,color:r.color};n.push(s)}}return n})(n.namedEntitiesToHandle,"namedEntity"),D=v(n.otherEntitiesToHandle,"");T=[],I.length>0&&(T.push({label:"SELECTS.NAMED_ENTITIES",type:"groupTitle"}),T=T.concat(I)),D.length>0&&(T.push({label:"SELECTS.OTHER_ENTITIES",type:"groupTitle"}),T=T.concat(D)),T.length>0&&(T.push(y),T.push({value:"NONE",label:"SELECTS.CLEAR",title:"SELECTS.CLEAR_SELECTION"}));break;case"witness":g=_,m=function(e,t){u.collapse(),void 0!==e&&void 0!==e[0]?void 0!==t&&(r.switchWitnesses(e[0].value,t.value),r.updateUrl()):void 0!==t&&(r.addWitness(t.value),r.updateUrl())},b=function(e){return{value:e.id,label:e.id,title:e.description}},T=(v=function(e){for(var t=[],i=e._indexes.witnesses,o=0;o<i.length;o++){var a=e[i[o]],s={value:a.id,label:a.id,title:a.description};(n.versions.length>0&&r.getProperty("availableWitnesses").indexOf(i[o])>=0||n.versions.length<=0)&&t.push(s)}return t})(o.getWitnesses());break;case"witness-page":var P=t.$parent.vm.witness;g=_,m=function(e,n){void 0!==n&&(u.selectOption(n),r.updateWitnessesPage(P,n.value.split("-")[1]),r.updateUrl(),t.$parent.vm.scrollToPage(n.value))},b=function(e){return e},T=(v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[e[n]]);return t})(o.getWitnessPages(P));break;case"pinned-filter":g=_,f=[],y={value:"ALL",label:"SELECTS.SELECT_ALL",title:"SELECTS.SELECT_ALL_TYPES",additionalClass:"doubleBorderTop"},m=function(e,t){if(void 0!==t)if(u.selectOption(t),"ALL"===t.value){for(var n=T&&T.length>3?T.length-2:0,i=0;i<n;i++){var o=T[i];u.isOptionSelected(o)||u.selectOption(o)}l.setAllTypesVisible(),u.selectOption(t)}else"NONE"===t.value?(u.optionSelected=[],u.selectOption(t),l.resetVisibleTypes()):u.isOptionSelected(t)?l.addVisibleType(t.value):l.removeVisibleType(t.value)},v=function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var i=e[n],o={value:i,label:i,title:i};t.push(o)}return t.length>0&&(t.push(y),t.push({value:"NONE",label:"SELECTS.CLEAR",title:"SELECTS.CLEAR_SELECTION"})),t},b=function(e){return e};var O=l.getAvailablePinnedTypes();T=v(O);break;case"source":m=function(e,t){void 0!==t&&(u.selectOption(t),r.updateCurrentSourceText(t.value),r.updateState("currentSource",t.value))},b=function(e){return{value:e.id,label:c.getSourceAbbr(e),title:"SELECTS.SEE_FULL_TEXT"}},T=(v=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o={value:i.id,label:c.getSourceAbbr(i),title:"SELECTS.SEE_FULL_TEXT"};t.push(o)}return t})(o.getSources()._indexes.availableTexts);break;case"version":g=_,m=function(e,t){u.collapse(),"collation"!==r.getState("currentViewMode")?void 0!==e?void 0!==t&&r.switchVersions(e[0].value,t.value):void 0!==t&&r.addVersion(t.value):void 0!==t&&(r.updateCurrentVersion(t.value),r.updateAvailableWitnessesByVersion(t.value))},b=function(e){var t=o.getVersionEntries()._indexes.versionId[e];return{value:e,label:i.DOMutils.decodeHTMLEntities(t),title:"MESSAGES.SEE_VERSION_TEXT"}},T=(v=function(e){var t=[],a=e._indexes.versionId;for(var s in a){var l,c;if("collation"!==r.getState("currentViewMode"))s!==n.versions[0]&&"_name"!==s&&(l=a[s],c={value:s,label:i.DOMutils.decodeHTMLEntities(l),title:"MESSAGES.SEE_VERSION_TEXT"},t.push(c));else{var u=o.getVersionEntries()._indexes.versionWitMap[s];void 0!==u&&u.length>0&&(l=a[s],c={value:s,label:i.DOMutils.decodeHTMLEntities(l),title:"MESSAGES.SEE_WITNESS"},t.push(c))}}return t})(o.getVersionEntries());break;case"generic":T=t.options,g=_,m=function(e,t){u.collapse(),u.selectOption(t)}}return t.emptyOption&&T&&(!T[0]||T[0].value)&&T.unshift({value:"",label:"---",title:""}),x={uid:w,defaults:angular.copy(e),callback:m,initValue:_,currentType:A,multiselect:S,openUp:E,smaller:t.smaller,selectedOption:t.selectedOption,optionList:T,optionSelected:f,optionSelectedValue:g,formatOptionList:v,formatOption:b},d[w]=angular.extend(u,x),p.push({id:w,type:A}),d[w]}},u.getById=function(e){if(void 0!==d[e])return d[e]},u.getList=function(){return p},u.expandById=function(e,t){"undefined"!==d[e]&&(d[e].expand(),t&&u.closeAll())},u.closeAll=function(e){angular.forEach(d,(function(t,n){n!==e&&t.collapse()}))},u.addOption=function(e,t){"undefined"!==d[e]&&d[e].optionList.push(t)},u.setCallback=function(e,t){"undefined"!==d[e]&&(d[e].callback=t)},u.destroy=function(e){delete d[e]},u}]}))},function(e,t,n){"use strict";angular.module("evtviewer.select").controller("SelectCtrl",["$log","$element","$scope","evtSelect","parsedData",function(e,t,n,i,o){var r=this;e.getInstance("select");r.expand=function(){r.expanded=!0},r.collapse=function(){r.expanded=!1},r.toggleExpand=function(e){e||i.closeAll(r.uid),r.openUp&&r.updateContainerPosition(r.currentType),r.expanded=!r.expanded},r.getOptionSelected=function(){return r.optionSelected&&r.optionSelected.length>0?1===r.optionSelected.length?r.optionSelected[0]:{value:"MULTI",label:"SELECTS.MULTIPLE_SELECTION",title:"SELECTS.MULTIPLE_OPTIONS_SELECTED"}:{value:"",label:"SELECTS.NO_SELECTION",title:"SELECTS.OPEN_TO_SELECT_ELEMENT"}},r.selectOption=function(e){if(e){if(r.expanded&&r.toggleExpand(),"NONE"===e.value&&r.multiselect&&(e={value:"",label:"SELECTS.NO_SELECTION",title:"SELECTS.OPEN_TO_SELECT_ELEMENT"}),r.multiselect){var t=r.getSelectedOptionIndex(e);t>=0?r.optionSelected.splice(t,1):(void 0===r.optionSelected?r.optionSelected=[]:r.optionSelected.length>0&&(""!==r.optionSelected[0].value&&"ALL"!==r.optionSelected[0].value&&"NONE"!==r.optionSelected[0].value||r.optionSelected.splice(0,1)),r.optionSelected.push(e))}else r.optionSelected=[e];r.optionSelected&&r.optionSelected.length>1?r.optionSelectedValue="SELECTS.MULTIPLE_SELECTION":r.optionSelectedValue=void 0!==e?e.value:void 0}},r.getSelectedOptionIndex=function(e){for(var t=r.optionSelected||[],n=0,i=!1;n<t.length&&!i;)i=t[n].value===e.value,n++;return i?n-1:-1},r.selectOptionByValue=function(e){var t;if(void 0!==e&&""!==e)switch(r.currentType){case"page":t=r.formatOption(o.getPage(e));break;case"document":t=r.formatOption(o.getDocument(e));break;case"div":t=r.formatOption(o.getDiv(e));break;case"edition":case"comparingEdition":t=r.formatOption(o.getEdition(e));break;case"witness":t=r.formatOption(o.getWitness(e));break;case"witness-page":t=r.formatOption(o.getPage(e));break;case"source":var n,i=o.getSources()._indexes.availableTexts;for(var a in i)i[a].id===e&&(n=i[a]);t=r.formatOption(n);break;case"version":t=r.formatOption(e);break;case"generic":if(r.optionList)t=(s=r.optionList.filter((function(t){return t.value===e})))?s[0]:void 0;break;default:var s;if("NONE"===e&&r.multiselect)t={value:"",label:"SELECTS.NO_SELECTION",title:"SELECTS.OPEN_TO_SELECT_ELEMENT"};else if(r.optionList)t=(s=r.optionList.filter((function(t){return t&&t.value===e})))&&s[0]?s[0]:r.optionList[0]}else t="NONE"===e&&r.multiselect?{value:"",label:"SELECTS.NO_SELECTION",title:"SELECTS.OPEN_TO_SELECT_ELEMENT"}:r.optionList[0];void 0!==t&&r.selectOption(t)},r.isOptionSelected=function(e){if(void 0!==e){if(void 0===r.optionSelected)return;if(r.multiselect){for(var t=r.optionSelected||[],n=0,i=!1;n<t.length&&!i;)i=t[n].value===e.value,n++;return i}return r.optionSelected&&1===r.optionSelected.length&&r.optionSelected[0].value===e.value}},r.doCallback=function(e,t){r.callback(e,t),n.onOptionSelected({option:t})},r.destroy=function(){var e=r.uid;i.destroy(e)}}])},function(e,t,n){"use strict";angular.module("evtviewer.select").directive("evtSelect",["$timeout","evtSelect","evtInterface","evtPinnedElements","parsedData",function(e,t,i,o,r){return{restrict:"E",scope:{id:"@",type:"@",init:"@",openUp:"@",multiselect:"@",options:"=",smaller:"@",emptyOption:"@",selectedOption:"@",onOptionSelected:"&"},template:n(234),controllerAs:"vm",controller:"SelectCtrl",link:function(n,a){var s=t.build(n,n.vm);if(n.vm.updateContainerPosition=function(e){var t,n=a.find(".option_container");a.find(".selector"),a.find(".label_selected");n.css("position","absolute"),t=n.height()+2,n.css("margin-top",-t+"px")},e((function(){if(s.openUp&&s.updateContainerPosition(n.type),void 0!==s)if(void 0!==n.init&&""!==n.init)s.selectOptionByValue(n.init);else if(!n.multiselect){var e=n.vm.optionList?n.vm.optionList[0]:void 0;s.callback(void 0,e)}if("div"===n.type){var t=i.getState("currentDoc"),o=i.getState("currentDivs"),r=o?o[t]:void 0;r&&s.selectOptionByValue(r)}})),n.$watch((function(){return n.selectedOption}),(function(e,t){t!==e&&s.selectOptionByValue(n.selectedOption)}),!0),"witness-page"===n.type){var l=n.$parent.vm.witness;n.$watch((function(){return i.getCurrentWitnessPage(l)}),(function(e,t){t!==e&&s.selectOptionByValue(l+"-"+e)}),!0)}"page"===n.type&&n.$watch((function(){return i.getState("currentPage")}),(function(e,t){t!==e&&s.selectOptionByValue(e)}),!0),"edition"===n.type&&n.$watch((function(){return i.getState("currentEdition")}),(function(e,t){t!==e&&s.selectOptionByValue(e)}),!0),"comparingEdition"===n.type&&n.$watch((function(){return i.getState("currentComparingEdition")}),(function(e,t){t!==e&&s.selectOptionByValue(e)}),!0),"source"===n.type&&n.$watch((function(){return i.getState("currentSource")}),(function(e,t){t!==e&&s.selectOptionByValue(e)}),!0),"document"===n.type&&n.$watch((function(){return i.getState("currentDoc")}),(function(e,t){t!==e&&s.selectOptionByValue(e)}),!0),"div"===n.type&&n.$watch((function(){var e=i.getState("currentDoc");return i.getState("currentDivs")[e]}),(function(e,t){if(t!==e){var n=r.getDiv(t),i=r.getDiv(e);n&&i&&(s.optionList=[],s.formatOptionList(r.getDivs()._indexes.main[i.doc],s.optionList,i.section)),s.selectOptionByValue(e)}}),!0),"version"===n.type&&"collation"===i.getState("currentViewMode")&&n.$watch((function(){return i.getState("currentVersion")}),(function(e,t){t!==e&&s.selectOptionByValue(e)}),!0),"pinned-filter"===n.type&&n.$watch((function(){return o.getAvailablePinnedTypes()}),(function(t,n){if(n!==t){s.optionList=s.formatOptionList(t);var i=a.find(".selector");s.optionList.length>0?i.show():i.hide(),e((function(){var e=s.getOptionSelected();if("ALL"===e.value||"MULTI"===e.value){s.callback(e,{value:"ALL",label:"SELECTS.SELECTS_ALL",title:"SELECTS.SELECTS_ALL_TYPES",additionalClass:"doubleBorderTop"})}s.updateContainerPosition(s.type)}))}}),!0),n.$on("$destroy",(function(){s&&s.destroy()}))}}}])},function(e,t){e.exports='<div class="selector" ng-class="{\'smaller\': vm.smaller}"\r\n     data-parent="{{ ::vm.parent }}"\r\n     ng-show="::vm.optionList.length > 0">\r\n   <span \r\n      class="label_selected" \r\n      title="{{ vm.getOptionSelected().title | translate }}"\r\n      data-value="{{ vm.getOptionSelected().value }}">\r\n      {{ vm.getOptionSelected().label | translate | camelToSpaces | underscoresToSpaces | capitalize  }}\r\n   </span>\r\n   <div \r\n      class="open_options" \r\n      ng-click="vm.toggleExpand()">\r\n      <i class="fa fa-sort-desc"></i>\r\n   </div>\r\n   <div \r\n      class="option_container"\r\n      ng-class="{ \'expanded\':vm.expanded,\r\n                  \'openUp\': vm.openUp }" >\r\n      <div ng-repeat="option in vm.optionList" ng-switch="::option.type">\r\n         <div ng-switch-when="groupTitle" class="option groupTitle">\r\n            {{ option.label | translate | camelToSpaces | underscoresToSpaces | capitalize }}\r\n         </div>\r\n         <div \r\n            ng-switch-default\r\n            class="option {{ ::option.additionalClass }}" \r\n            title="{{option.title | translate | camelToSpaces | underscoresToSpaces | capitalize  }}" \r\n            data-value="{{::option.value }}"\r\n            data-wit="{{::option.ed}}"\r\n            ng-click="vm.doCallback(vm.optionSelected, option);"\r\n            ng-class="{\'selected\': vm.isOptionSelected(option)}">\r\n            <i class="fa {{::option.icon}} option-icon-label" \r\n               style="color: {{ ::option.color }}"\r\n               ng-if="::option.icon"></i>\r\n            {{ option.label  | translate | camelToSpaces | underscoresToSpaces | capitalize }}\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.buttonSwitch",[])},function(e,t,n){"use strict";(function(e){angular.module("evtviewer.buttonSwitch").provider("evtButtonSwitch",(function(){var t=this.defaults;this.setDefaults=function(e){t=e},this.$get=["$q","$log","config","baseData","parsedData","evtInterface","evtDialog","evtSelect","evtImageTextLinking","evtSourcesApparatus","evtBox","evtSearch","evtSearchBox","evtSearchResults","evtSearchResult","evtVirtualKeyboard",function(n,i,o,r,a,s,l,c,u,d,p,h,f,g,m,v){var b={},y={},x=[],w=0,A=(i.getInstance("buttonSwitch"),function(){this.active=!this.active}),_=function(e){this.active=e},E=function(){this.disabled=!0},S=function(){this.disabled=!1},T=function(){var e=this.uid;delete y[e]};return b.build=function(i,C){var k,L=i.id||w++,I=i.type||"default",D=i.title||"",P=i.label||"",O=function(e){var t="";if(!e)return"";switch(e.toLowerCase()){case"add":t="icon-evt_add";break;case"bookmark":t="icon-evt_bookmark";break;case"case-sensitive":t="icon-evt_case-sensitive";break;case"color-legend":t="icon-evt_color-legend";break;case"close":t="icon-evt_close";break;case"download":t="fa fa-download";break;case"download-xml":t="fa fa-file-code-o";break;case"exact-word":t="icon-evt_exact-match";break;case"filter":case"filters":t="icon-evt_filter";break;case"font-size":t="icon-evt_font-size";break;case"font-size-minus":t="icon-evt_font-size-minus-alt";break;case"font-size-plus":t="icon-evt_font-size-plus-alt";break;case"font-size-reset":t="icon-evt_font-size-reset-alt";break;case"heatmap":t="icon-evt_heatmap-alt";break;case"info":t="icon-evt_info";break;case"info-alt":t="icon-evt_info-alt";break;case"itl":t="icon-evt_link";break;case"keyboard":t="icon-evt_keyboard";break;case"hts":t="icon-evt_hotspot";break;case"language":t="fa fa-language";break;case"list":t="icon-evt_list";break;case"list-alt":t="fa fa-list-alt";break;case"menu":case"menu-vert":t="icon-evt_more-vert";break;case"mode-imgtxt":t="icon-evt_imgtxt";break;case"mode-txttxt":t="icon-evt_txttxt";break;case"reading-txt":t="icon-evt_txt";break;case"mode-collation":t="icon-evt_collation";break;case"mode-srctxt":t="iconbis-evt_srctxt";break;case"mode-versions":t="iconbis-evt_versions";break;case"mode-viscoll":t="iconbis-evt_srctxt";break;case"mode-bookreader":t="icon-evt_bookreader";break;case"next":t="icon-evt_next";break;case"pin":t="icon-evt_pin-alt-on";break;case"pin-off":t="icon-evt_pin-off";break;case"pin-on":t="icon-evt_pin-on";break;case"previous":t="icon-evt_previous";break;case"remove":t="icon-evt_close";break;case"search":t="icon-evt_search";break;case"search-advanced":t="icon-evt_advanced-search";break;case"search-results-hide":t="icon-evt_search-results-close";break;case"search-results-show":t="icon-evt_search-results-open";break;case"txt":t="icon-evt_txt";break;case"v-align":t="icon-evt_align";break;case"witnesses":t="icon-evt_books";break;case"zoom-in":t="icon-evt_zoom-in";break;case"zoom-out":t="icon-evt_zoom-out";break;case"zoom-reset":t="icon-evt_zoom-reset";break;case"next-page":t="fa fa-caret-right";break;case"prev-page":t="fa fa-caret-left";break;case"first-page":t="fa fa-step-backward";break;case"last-page":t="fa fa-step-forward";break;case"hide-bar":t="fa fa-caret-down";break;case"show-bar":t="fa fa-caret-up";break;case"thumb-nails":t="fa fa-th";break;case"viscoll":t="icon-evt_viscoll";break;case"tdhop":case"mode-tdhop":t="icon-evt_3dhop"}return t}(i.icon)||"",M=i.iconPos||"right",N=i.type||"",R=i.value||"",B=i.active||!1,z=i.disabled||!1,$=i.btnType||"",H=function(){console.log("TODO "+N)},V=function(){};switch(N){case"addWit":$="standAlone",H=function(){s.updateProperty("witnessSelector",!0),i.vm.active=!1};break;case"alignReadings":break;case"bookmark":H=function(){s.updateState("secondaryContent","bookmark"),l.openByType("bookmark"),this.active=!this.active};break;case"changeViewMode":$="standAlone",H=function(){if(void 0!==this.value){if("srcTxt"===this.value){var e=s.getState("currentSourceText");s.updateCurrentSourceText(e)}s.updateState("currentViewMode",this.value),s.updateUrl(),"active"===s.getToolState("ITL")&&("imgTxt"===this.value?u.activateITL():u.deactivateITL())}};break;case"colorLegend":$="toggler",H=function(){var e=i.$parent.vm;if(e.getState("topBoxOpened")&&"colorLegend"===e.getState("topBoxContent"))e.toggleTopBox();else{var t=a.getCriticalEntriesFiltersCollection(),n="";if(t.length>0){for(var o in n+='<div class="colorLegend">',t.filters){var r=t.filters[o],s="";for(var l in r.values){var c=r.values[l].name;s+='<span class="colorLegend-filter-value">'+('<i class="colorLegend-filter-color" style="background:'+r.values[l].color+'"></i>')+c+"</span>"}""!==s&&(n+='<span class="colorLegend-filter-name">'+o+"</span>"+s)}n+="</div>"}else n="<span>No filters available</span>";var u=n||"<span class=\"errorMsg\">{{ 'MESSAGES.GENERIC_ERROR' | translate }}</span>";e.updateTopBoxContent(u),e.updateState("topBoxContent","colorLegend"),e.getState("topBoxOpened")||e.toggleTopBox()}},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"closeDialog":H=function(){l.closeAll(),s.updateState("secondaryContent",""),this.active=!this.active};break;case"closePinned":H=function(){s.toggleState("isPinnedAppBoardOpened")};break;case"download-xml":H=function(){window.open(o.dataUrl,"_blank")};break;case"fontSizeDecrease":$="standAlone",H=function(){i.$parent.vm.fontSizeDecrease(),this.active=!this.active};break;case"fontSizeIncrease":$="standAlone",H=function(){i.$parent.vm.fontSizeIncrease(),this.active=!this.active};break;case"fontSizeReset":$="standAlone",H=function(){i.$parent.vm.fontSizeReset(),this.active=!this.active};break;case"fontSizeTools":H=function(){var e=i.$parent.vm.getState("fontSizeBtn")||!1;i.$parent.vm.updateState("fontSizeBtn",!e)},V=function(){i.$parent.vm.updateState("fontSizeBtn",!1)};break;case"front":$="toggler",H=function(){var e=i.$parent.vm;if(e.getState("topBoxOpened")&&"front"===e.getState("topBoxContent"))e.toggleTopBox();else{var t,n=s.getState("currentDoc");if(n){var o=a.getDocument(n),r=o?o.front:void 0;t=r&&r.parsedContent?r.parsedContent:"<div class=\"warningMsg\">{{ 'MESSAGES.FRONT_NOT_AVAILABLE' | translate }}</div>",i.$parent.vm.updateTopBoxContent(t),i.$parent.vm.toggleTopBox()}var l=t||"<span class=\"errorMsg\">{{ 'MESSAGES.GENERIC_ERROR' | translate }}</span>";e.updateTopBoxContent(l),e.updateState("topBoxContent","front"),e.getState("topBoxOpened")||e.toggleTopBox()}},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"msDesc":$="standAlone",H=function(){var e=i.$parent.vm;if(document.getElementsByClassName("box-top-box")[0].setAttribute("id","msDesc"),e.getState("topBoxOpened")&&"msDesc"===e.getState("topBoxContent"))e.toggleTopBox();else{var t;s.getState("currentDoc")&&(t=a.getProjectInfo().msDesc?a.getProjectInfo().msDesc:"<div class=\"warningMsg\">{{ 'MESSAGES.FRONT_NOT_AVAILABLE' | translate }}</div>",i.$parent.vm.updateTopBoxContent(t),i.$parent.vm.toggleTopBox());var n=t||"<span class=\"errorMsg\">{{ 'MESSAGES.GENERIC_ERROR' | translate }}</span>";e.updateTopBoxContent(n),e.updateState("topBoxContent","msDesc"),e.getState("topBoxOpened")||e.toggleTopBox()}},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"listObject":$="toggler",H=function(){var e=i.$parent.vm;if(document.getElementsByClassName("box-top-box")[0].setAttribute("id","listObject"),e.getState("topBoxOpened")&&"listObject"===e.getState("topBoxContent"))e.toggleTopBox();else{var t;s.getState("currentDoc")&&(t=a.getProjectInfo().listObject?a.getProjectInfo().listObject:"<div class=\"warningMsg\">{{ 'MESSAGES.FRONT_NOT_AVAILABLE' | translate }}</div>",i.$parent.vm.updateTopBoxContent(t),i.$parent.vm.toggleTopBox());var n=t||"<span class=\"errorMsg\">{{ 'MESSAGES.GENERIC_ERROR' | translate }}</span>";e.updateTopBoxContent(n),e.updateState("topBoxContent","listObject"),e.getState("topBoxOpened")||e.toggleTopBox()}},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"heatmap":$="standAlone",H=function(){var e=i.$parent.vm.getState("heatmap")||!1;i.$parent.vm.updateState("heatmap",!e)};break;case"itl":B="active"===s.getToolState("ITL"),$="standAlone",H=function(){this.active?u.turnOnITL():u.turnOffITL()};break;case"hts":B="active"===s.getToolState("HTS"),$="standAlone",H=function(){this.active?u.turnOnHTS():u.turnOffHTS()};break;case"mainMenu":$="standAlone",H=function(){var e=s.getState("mainMenu");s.updateState("mainMenu",!e)};break;case"openEntity":H=function(){this.active=!this.active};break;case"openGlobalDialogInfo":H=function(){s.updateState("secondaryContent","globalInfo"),l.openByType("globalInfo"),this.active=!this.active};break;case"openGlobalDialogWitnesses":H=function(){s.updateState("secondaryContent","witnessesList"),l.openByType("witnessesList"),this.active=!this.active};break;case"openGlobalDialogLists":H=function(){s.updateState("secondaryContent","entitiesList"),l.openByType("entitiesList"),this.active=!this.active};break;case"openToc":$="standAlone",H=function(){s.updateState("secondaryContent","toc"),l.openByType("toc"),this.active=!this.active};break;case"pin":case"pin-on":case"pin-off":H=function(){};break;case"removeWit":H=function(){var e=i.$parent.vm.witness;s.removeWitness(e),s.updateUrl()};break;case"search":H=function(){var e,t=i.$parent.id,n=f.getInputValue(t),o="";m.setPlaceholder(t,o),f.setSearchedTerm(t,n),((e={"":function(){o="Enter your query in the search box above",m.setVisibleRes(t,[]),m.setPlaceholder(t,o)},default:function(){var e=f.getStatus(t,"searchCaseSensitive"),i=f.getStatus(t,"searchExactWord"),o=g.getSearchResults(n,e,i),r=p.getEditionById(t),a=g.getCurrentEditionResults(o,r),s=g.getVisibleResults(a);m.setCurrentEditionResults(t,a),m.setVisibleRes(t,s)}})[n]||e.default)(),f.setStatus(t,"searchResultBox",!0),f.hideBtn(t,"searchResultsShow"),f.showBtn(t,"searchResultsHide"),v.unselectCurrentKeyboard(b,t)};break;case"searchIndex":$="standAlone",z=function(){if("true"===s.getToolState("isDocumentIndexed"))return!0}(),B=function(){if("true"===s.getToolState("isDocumentIndexed"))return!1}();var j=function(){var e;(e=n.defer(),s.updateState("indexingInProgress",!0),setTimeout((function(){e.resolve()}),100),e.promise).then((function(){var e,t,n=r.getXML();for(var i in(t=b.getByType("searchIndex")[0]).active=!1,t.disable(),h.initSearch(n),s.setToolStatus("isDocumentIndexed","true"),e=b.getByType("searchInternal"))e[i].disabled=!1;s.updateState("indexingInProgress",!1)}))};H=function(){if("true"!==s.getToolState("isDocumentIndexed"))return j();i.vm.active=!1};break;case"searchResultsShow":H=function(){var e=i.$parent.id;m.setPlaceholder(e,"Enter your query in the search box above"),f.updateStatus(e,"searchResultBox"),f.hideBtn(e,"searchResultsShow"),f.showBtn(e,"searchResultsHide"),v.unselectCurrentKeyboard(b,e)};break;case"searchResultsHide":H=function(){var e=i.$parent.id;f.updateStatus(e,"searchResultBox"),f.hideBtn(e,"searchResultsHide"),f.showBtn(e,"searchResultsShow"),v.unselectCurrentKeyboard(b,e)};break;case"searchCaseSensitive":$="standAlone",H=function(){var e=i.$parent.id,t=f.getInputValue(e);f.updateStatus(e,"searchCaseSensitive"),g.highlightSearchResults(e,t)};break;case"searchInternal":$="standAlone",z="true"!==s.getToolState("isDocumentIndexed");H=function(){if("true"===s.getToolState("isDocumentIndexed"))return e=i.$parent.id,t=p.getState(e,"searchBox"),p.updateState(e,"searchBox",!t),f.closeBox(e,"searchResultBox"),f.showBtn(e,"searchResultsShow"),void f.hideBtn(e,"searchResultsHide");var e,t;i.vm.active=!1};break;case"searchAdvanced":$="standAlone",H=function(){window.alert("Advanced search coming soon!")};break;case"searchVirtualKeyboard":$="standAlone",H=function(){var t=i.$parent.id,n=v.getKeyboardId(t),o=e("#"+n).getkeyboard(),r=b.getByType("searchVirtualKeyboard");if(o.isOpen||!1===this.active)o.close();else if(o.reveal(),r.length>1)for(var a in r)r[a].uid!==this.currentId&&r[a].setActive(!1)};break;case"searchExactWord":$="standAlone",H=function(){var e=i.$parent.id,t=f.getInputValue(e);f.updateStatus(e,"searchExactWord"),g.highlightSearchResults(e,t)};break;case"searchPrevResult":case"searchNextResult":z=!0,H=function(){};break;case"searchClear":$="standAlone",H=function(){var e,t=i.$parent.id;f.clearInputValue(t),e=f.getInputValue(t),g.highlightSearchResults(t,e)};break;case"share":H=function(){alert(window.location)};break;case"toggleInfoWit":$="toggler",H=function(){var e=a.getWitness(i.$parent.vm.witness).description||i.$parent.vm.topBoxContent;i.$parent.vm.updateTopBoxContent(e),i.$parent.vm.toggleTopBox()},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"toggleFilterApp":V=H=function(){i.$parent.vm.toggleFilterBox()};break;case"togglePinned":$="toggler",H=function(){s.toggleState("isPinnedAppBoardOpened")};break;case"witList":$="toggler",H=function(){var e=i.$parent.vm;if(e.getState("topBoxOpened")&&"witList"===e.getState("topBoxContent"))e.toggleTopBox();else{var t=a.getWitnessesListFormatted()||"<span class=\"errorMsg\">{{ 'MESSAGES.GENERIC_ERROR' | translate }}</span>";e.updateTopBoxContent(t),e.updateState("topBoxContent","witList"),e.getState("topBoxOpened")||e.toggleTopBox()}},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"toggleInfoSrc":$="toggler",H=function(){var e=d.getSource(a.getSource(s.getState("currentSourceText")));if(e){var t=e.bibl||i.$parent.vm.topBoxContent;i.$parent.vm.updateTopBoxContent(t),i.$parent.vm.toggleTopBox()}},V=function(){i.$parent.vm.updateState("topBoxOpened",!1)};break;case"addVer":$="standAlone",H=function(){s.updateProperty("versionSelector",!0),i.vm.active=!1};break;case"removeVer":H=function(){var e=i.$parent.vm.version;s.removeVersion(e)};break;case"cropText":$="toggler",H=function(){return i.$parent.vm};break;case"prevPage":case"nextPage":case"firstPage":case"lastPage":H=function(){this.active=!1,"prevPage"===N?s.goToPrevPage():"nextPage"===N?s.goToNextPage():"firstPage"===N?s.goToFirstPage():"lastPage"===N&&s.goToLastPage()},"prevPage"===N||"firstPage"===N?z=s.isCurrentPageFirst():"nextPage"!==N&&"lastPage"!==N||(z=s.isCurrentPageLast());break;case"hideBar":H=function(){var e=s.getState("isNavBarOpened");s.updateState("isNavBarOpened",!e),this.active=!this.active};break;case"thumbNails":$="toggler",H=function(){s.updateState("isVisCollOpened",!1);var e=b.getByType("visColl");e&&e.forEach((function(e){e.setActive(!1)}));var t=s.getState("isThumbNailsOpened");s.updateState("isThumbNailsOpened",!t)};break;case"visColl":$="toggler",H=function(){s.updateState("isThumbNailsOpened",!1);var e=b.getByType("thumbNails");e&&e.forEach((function(e){e.setActive(!1)}));var t=s.getState("isVisCollOpened");s.updateState("isVisCollOpened",!t)}}return k={uid:L,defaults:angular.copy(t),currentId:L,currentType:I,title:D,label:P,icon:O,iconPos:M,type:N,value:R,active:B,disabled:z,btnType:$,callback:H,onBtnClicked:i.onBtnClicked,doCallback:function(){var e=this;e.disabled&&"false"!==e.disabled||(b.unselectAllSkipByBtnType(e.uid,"standAlone"),c.closeAll(),e.toggleActive(),e.callback&&e.callback(),e.onBtnClicked&&e.onBtnClicked())},fakeCallback:V,toggleActive:A,setActive:_,disable:E,enable:S,destroy:T},y[L]=angular.extend(C,k),x.push({id:L,type:I}),y[L]},b.getById=function(e){if("undefined"!==y[e])return y[e]},b.getList=function(){return x},b.getByType=function(e){var t=[];for(var n in y)y[n].type===e&&t.push(y[n]);return t},b.unselectAll=function(){angular.forEach(y,(function(e){e.setActive(!1)}))},b.unselectAllSkipByBtnType=function(e,t){angular.forEach(y,(function(n){n.uid!==e&&t.indexOf(n.btnType)<0&&(n.active&&n.fakeCallback(),n.setActive(!1))}))},b.selectById=function(e){"undefined"!==y[e]&&y[e].setActive(!0)},b.destroy=function(e){delete y[e]},b}]}))}).call(this,n(0))},function(e,t,n){"use strict";angular.module("evtviewer.buttonSwitch").directive("buttonSwitch",["$rootScope","evtButtonSwitch","evtInterface",function(e,t,i){return{restrict:"E",scope:{title:"@",label:"@",icon:"@",type:"@",value:"@",iconPos:"@",disabled:"@",onBtnClicked:"&"},template:n(238),link:function(n,o){n.vm={};var r,a=t.build(n,n.vm);n.$watch((function(){return n.disabled}),(function(e,t){e!==t&&(n.vm.disabled=e)})),"addWit"===n.type&&(0===i.getProperty("availableWitnesses").length&&(n.vm.disabled=!0,n.vm.title="BUTTONS.NO_WITNESSES_AVAILABLE"),n.$watch((function(){return i.getProperty("availableWitnesses")}),(function(e,t){e!==t&&(0===e.length?(n.vm.disabled=!0,n.vm.title="BUTTONS.NO_WITNESSES_AVAILABLE"):(n.vm.disabled=!1,n.vm.title="BUTTONS.ADD_WITNESS"))}),!0)),"addVer"===n.type&&(0===i.getProperty("availableVersions").length&&(n.vm.disabled=!0,n.vm.title="BUTTONS.NO_VERSION_AVAILABLE"),n.$watch((function(){return i.getProperty("availableVersions")}),(function(e,t){e!==t&&(0===e.length?(n.vm.disabled=!0,n.vm.title="BUTTONS.NO_VERSION_AVAILABLE"):(n.vm.disabled=!1,n.vm.title="BUTTONS.ADD_VERSION"))}),!0)),"changeViewMode"===n.type&&n.$watch((function(){return i.getState("currentViewMode")}),(function(e,t){e===n.vm.value?n.vm.active=!0:n.vm.active=!1}),!0),"search"===n.type&&(r=n.$parent.id,e.$broadcast("searchBtn",{parentId:r,btn:a})),"searchVirtualKeyboard"===n.type&&(r=n.$parent.id,e.$broadcast("keyboardBtn",{parentId:r,btn:a})),"prevPage"!==n.type&&"firstPage"!==n.type||n.$watch((function(){return i.isCurrentPageFirst()}),(function(e,t){e!==t&&(n.vm.disabled=e)}),!0),"nextPage"!==n.type&&"lastPage"!==n.type||n.$watch((function(){return i.isCurrentPageLast()}),(function(e,t){e!==t&&(n.vm.disabled=e)}),!0),n.$on("$destroy",(function(){a&&a.destroy()}))}}}])},function(e,t){e.exports="<span class=\"buttonSwitch\"\r\n    title=\"{{vm.title | translate}}\"\r\n    ng-click=\"vm.doCallback()\"\r\n    ng-class=\"{'buttonSwitch-active': vm.active,\r\n                'buttonSwitch-disabled': vm.disabled === true,\r\n                'only-icon': vm.label === undefined || vm.label === '',\r\n                'only-text': vm.icon === undefined || vm.icon === '',\r\n                'iconLeft': vm.iconPos && vm.iconPos === 'left' }\">\r\n    \r\n    <i ng-if=\":: vm.iconPos && vm.iconPos === 'left'\" class=\"icon {{ vm.icon }} buttonSwitch-icon\"></i>\r\n    \r\n    <span\r\n      class=\"buttonSwitch-label\"\r\n      ng-if=\"::vm.label !== undefined && vm.label !== ''\">{{ vm.label | translate}}</span>\r\n    \r\n    <i ng-if=\":: !vm.iconPos || vm.iconPos === 'right'\" class=\"icon {{ vm.icon }} buttonSwitch-icon\"></i>\r\n</span>"},function(e,t,n){"use strict";angular.module("evtviewer.popover",[])},function(e,t,n){"use strict";angular.module("evtviewer.popover").constant("POPOVERDEFAULTS",{expanded:!1,tooltipOver:!1,tooltipMaxHeight:170,tooltipMaxWidth:200,openTriggerEvent:"click"}).config(["evtPopoverProvider","configProvider","POPOVERDEFAULTS",function(e,t,n){var i=t.makeDefaults("popover",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.popover").provider("evtPopover",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=function(){var t={},n={},i=[],o=0;return t.build=function(t,r,a){var s,l=o++,c=t||"",u=r||"";if(void 0===n[l])return s={uid:l,trigger:c,tooltip:u,expanded:angular.copy(e.expanded),tooltipOver:angular.copy(e.tooltipOver),defaults:angular.copy(e)},n[l]=angular.extend(a,s),i.push({id:l}),n[l]},t.getById=function(e){if("undefined"!==n[e])return n[e]},t.getList=function(){return i},t.expandById=function(e,i){"undefined"!==n[e]&&(n[e].expand(),i&&t.closeAll(e))},t.closeAll=function(e){angular.forEach(n,(function(t,n){(void 0===e||n!==e.toString())&&t.collapse()}))},t.mouseOutAll=function(e){angular.forEach(n,(function(t,n){n!==e.toString()&&t.mouseOut()}))},t.getIdTooltipOvered=function(){var e=-1;return angular.forEach(n,(function(t){t.tooltipOver&&(e=t.uid)})),e},t.destroy=function(e){delete n[e]},t}}))},function(e,t,n){"use strict";angular.module("evtviewer.popover").controller("PopoverCtrl",["$log","$scope","evtPopover",function(e,t,n){var i=this;i.parentRef=".box-body";e.getInstance("popover");this.expand=function(){i.expanded=!0},this.collapse=function(){i.expanded=!1},this.mouseOver=function(){i.over=!0},this.mouseOut=function(){i.over=!1},this.tooltipMouseOver=function(){i.tooltipOver=!0},this.tooltipMouseOut=function(){i.tooltipOver=!1},this.toggleExpand=function(e){e||n.closeAll(i.uid),i.expanded=!i.expanded},this.toggleOver=function(e){e||n.mouseOutAll(i.uid),i.over=!i.over},this.toggleTooltipOver=function(){i.tooltipOver=!i.tooltipOver},this.destroy=function(){var e=i.uid;n.destroy(e)},this.toggleMouseHover=function(){},this.toggleTooltipHover=function(){},this.triggerClick=function(){},this.resizeTooltip=function(){}}])},function(e,t,n){"use strict";angular.module("evtviewer.popover").directive("evtPopover",["evtPopover",function(e){return{restrict:"E",scope:{trigger:"@",tooltip:"@",parentRef:"@"},transclude:!0,template:n(244),controllerAs:"vm",controller:"PopoverCtrl",link:function(t,n){t.vm.toggleTooltipHover=function(e,t){e.stopPropagation(),t.toggleTooltipOver()},t.vm.toggleMouseHover=function(n,i){n.stopPropagation(),"over"!==i.trigger||i.over||i.expanded||t.vm.resizeTooltip(n,i.defaults);var o=e.getIdTooltipOvered();(o<0||o===i.uid)&&i.toggleOver()},t.vm.triggerClick=function(t,n){t.stopPropagation(),"over"===n.trigger||n.expanded||n.resizeTooltip(t,n.defaults);var i=e.getIdTooltipOvered();(i<0||i===n.uid)&&n.toggleExpand()},t.vm.resizeTooltip=function(e,i){e.stopPropagation();var o=t.vm.parentRef;void 0!==t.parentRef&&(o=t.parentRef);var r=n,a=angular.element(n).find("span.popover_tooltip").last(),s=angular.element(a).find(".popover__tooltip__before"),l=e.clientX,c=e.clientY;a.removeAttr("style");var u=r.height(),d=1*r.css("font-size").substr(0,2)+1,p=(r.width(),r.position().top),h=(r.position().left,a.offset().top,a.outerWidth()),f=a.outerHeight();h>i.tooltipMaxWidth&&a.css({width:i.tooltipMaxWidth+"px","max-width":i.tooltipMaxWidth+"px"}),a.css({position:"absolute"}),h=a.outerWidth(),f=a.outerHeight(),0===n.parents(o).length&&void 0===t.parentRef&&(o=n.parent());var g,m,v=n.parents(o).offset().left,b=n.parents(o).innerWidth(),y=l-v-h/2;a.css({left:y+"px"}),y+h>b&&(y=y-(g=y+h-b)-20,a.css({left:y+"px"})),y<0&&(y=0,a.css({left:y+"px"})),p+u+f>n.parents(o).outerHeight()?(m=f+u+10,u>d&&(m=m-(c-r.offset().top)+10),a.css({"margin-top":-m+"px"}).addClass("open-up"),s.css({top:a.outerHeight()+2+"px"})):(a.removeClass("open-up"),u>d?(g=u-d-(c-r.offset().top),a.css({"margin-top":-g+"px"})):a.css({"margin-top":"5px"}));var x=l-y-v-20;x=x<0?0:x,s.css({left:x+"px"}),(h=a.width())>i.tooltipMaxWidth&&a.css({width:i.tooltipMaxWidth+"px","max-width":i.tooltipMaxWidth+"px"})};var i=e.build(t.trigger,t.tooltip,t.vm);t.$on("$destroy",(function(){i&&i.destroy()}))}}}])},function(e,t){e.exports='<span class="popover">\r\n   <span \r\n        class="popover_trigger" \r\n        ng-mouseover="vm.toggleMouseHover($event, vm)" \r\n        ng-mouseout="vm.toggleMouseHover($event, vm)"\r\n        ng-click="vm.triggerClick($event, vm);" \r\n        ng-class="{\'expanded\':vm.expanded, \r\n                   \'active\': vm.over,\r\n                   \'blurred\': $parent.vm.state.topBoxOpened}">\r\n        <span ng-transclude></span>\r\n   </span>\r\n   <span \r\n        class="popover_tooltip" \r\n        ng-class="{\'expanded\':vm.expanded || (vm.trigger===\'over\' && vm.over)}"\r\n        ng-mouseover="vm.toggleTooltipHover($event, vm)"\r\n        ng-mouseout="vm.toggleTooltipHover($event, vm)">\r\n        <span \r\n            class="popover__tooltip__before" \r\n            ng-mouseover="vm.toggleTooltipHover($event, vm)"\r\n            ng-mouseout="vm.toggleTooltipHover($event, vm)"></span>\r\n      <span compile="::vm.tooltip"></span>\r\n   </span>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.list",[])},function(e,t,n){"use strict";angular.module("evtviewer.list").provider("evtList",(function(){this.defaults;this.setDefaults=function(e){e};this.$get=["parsedData","evtInterface",function(e,t){var n={},i=[],o=function(){var e=this.uid;delete n[e]},r=function(){for(var e=this,t=e.visibleElements.length,n=0;n<10&&n<e.elementsInListKey.length;){var i=e.elementsInListKey[t+n];i&&e.visibleElements.indexOf(i)<0&&e.visibleElements.push(i),n++}},a=function(t,n){var i=[];return n&&(i=(i=e.getNamedEntitiesCollectionByNameAndPos(t,n))?i._indexes:[]),i},s=function(e){var t=this;t.selectedLetter=e,t.elementsInListKey=a(t.uid,e),t.visibleElements=t.elementsInListKey?t.elementsInListKey.slice(0,40):[]};return i.build=function(l,c){var u,d=l,p=c.listType||"generic";if(void 0===n[d]){var h,f=t.getState("currentNamedEntity"),g=f?e.getNamedEntity(f):void 0,m=e.getNamedEntitiesCollectionByName(d);h=g&&p===e.getNamedEntityType(f)?g._listPos||void 0:m?m._listKeys[0]:void 0;var v=a(d,h),b=g&&p===e.getNamedEntityType(f)?v.indexOf(f):void 0,y=b?b+10:41,x=v?v.slice(0,y):[];return u={uid:d,listType:p,listKeys:m?m._listKeys:[],elements:m?m._indexes:[],elementsInListKey:v,visibleElements:x,selectedLetter:h,loadMoreElements:r,selectLetter:s,destroy:o},n[d]=angular.extend(c.vm,u),i.push({id:d}),n[d]}},i.destroy=function(e){delete n[e]},i.scrollToElemById=function(e,t){angular.forEach(i,(function(i){i.id===e&&n[e].scrollToElement(t)}))},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.list").directive("evtList",["evtList","evtInterface",function(e,t){return{restrict:"E",scope:{listId:"@",listType:"@"},transclude:!0,template:n(248),link:function(n,i,o){n.vm={listId:n.listId,listType:n.listType};var r=e.build(n.listId,n);n.vm.scrollToElement=function(e){var t=angular.element(i).find(".scrollableDiv")[0],n=angular.element(t).find('[data-entity-id="'+e+'"]');n.length>0&&n[0]&&(t.scrollTop=n[0].offsetTop),console.log(t.scrollTop)},n.$watch((function(){return t.getState("currentNamedEntity")}),(function(e,t){e!==t&&r.selectLetter(e.charAt(0))})),n.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<div class="evt-list">\r\n    <div ng-if="vm.elements.length > 0">\r\n        <div class="evt-list__listLetters">\r\n            <span class="evt-list__listLetters__letter" \r\n                ng-class="{\'active\': letter === vm.selectedLetter }"\r\n                ng-repeat="letter in ::vm.listKeys | orderBy track by $index" ng-click="vm.selectLetter(letter)">\r\n                {{ ::letter }}\r\n            </span>\r\n        </div>\r\n        <div class="evt-list__content">\r\n            <div class="scrollableDiv" infinite-scroll="vm.loadMoreElements()" infinite-scroll-distance="2" infinite-scroll-parent="true">\r\n                <evt-named-entity \r\n                    data-entity-id="{{::element}}" data-entity-type="{{::vm.listType}}"\r\n                    ng-repeat="element in vm.visibleElements | orderBy ">\r\n                </evt-named-entity>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="vm.elements.length <= 0">\r\n        {{ \'LISTS.NO_ELEMENTS\' | translate }} \r\n    </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity",[])},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity").constant("NAMEDENTITYDEFAULTS",{allowedTabs:["moreInfo","occurrences","map"]}).config(["evtNamedEntityProvider","configProvider","NAMEDENTITYDEFAULTS",function(e,t,n){var i=t.makeDefaults("namedEntity",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity").provider("evtNamedEntity",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$timeout","config","parsedData","evtNamedEntitiesParser","evtInterface","evtNamedEntityRef","evtPinnedElements","evtDialog","evtList",function(t,n,i,o,r,a,s,l,c){var u={},d={},p=[],h=0,f=function(){return i.getNamedEntity(this.entityId).output},g=function(){var e=this;"mainText"!==e.location&&(e.toggleSubContent(e._firstSubContentOpened),e.opened=!e.opened,e.toggleState())},m=function(){var e=this;e.occurrences||(e.occurrences=u.getOccurrences(e.entityId)),e.occurrencesOpened=!e.occurrencesOpened,e.toggleSection("occurrencesOpened")},v=function(){this.moreInfoOpened=!this.moreInfoOpened,this.toggleSection("moreInfoOpened")},b=function(e){var n=this;r.updateState("currentPage",e.pageId),r.updateState("currentDoc",e.docId),r.updateUrl(),"entitiesList"===r.getState("secondaryContent")&&r.updateState("secondaryContent",""),t((function(){a.highlightByEntityId(n.entityId)}),500)},y=function(e){var t=this;"occurrences"!==e||t.occurrences||(t.occurrences=u.getOccurrences(t.entityId)),t._subContentOpened!==e?t._subContentOpened=e:t._subContentOpened="",t.toggleSubContentClass()},x=function(){return n.toolPinAppEntries},w=function(){return s.isPinned(this.entityId)},A=function(){return this.isPinned()?"pin-on":"pin-off"},_=function(){var e=this;if(e.isPinned())s.removeElement({id:e.entityId,type:"namedEntity_"+e.entityType});else{s.addElement({id:e.entityId,type:"namedEntity_"+e.entityType});var t=s.getPinned();t&&1===t.length&&r.updateState("isPinnedAppBoardOpened",!0)}},E=function(){var e=this;r.updateState("secondaryContent","toc"),l.openByType("toc");var t=i.getNamedEntities()[e.entityId].collectionId;r.updateProperty("tabsContainerOpenedContent","entitiesLists"),r.updateProperty("tabsContainerOpenedTab",t),r.updateState("currentNamedEntity",e.entityId),setTimeout((function(){c.scrollToElemById(t,e.entityId)}),1e3)},S=function(e){var t=r.getState("currentDoc"),n=r.getState("currentPage");return t===e.docId&&n===e.pageId};return u.build=function(t,n){var o,r=h++,a=t||void 0,s=n.entityType||i.getNamedEntityType(a)||"generic",l=n.location||"list";if(void 0===d[r]){var c,u=i.getNamedEntity(a),T=!0,C=i.getNamedEntityTypeIcon(s);switch(T=void 0!==u&&void 0!==u.notes&&u.notes.length>0,s){case"place":case"placeName":case"person":case"pers":case"persName":break;case"org":case"orgName":T=T||void 0!==u&&void 0!==u.desc;break;default:T=T||void 0!==u&&void 0!==u.details}u&&u.occurrences&&(c=u.occurrences);var k={_indexes:[]};e.allowedTabs.indexOf("moreInfo")>=0&&(k._indexes.push("moreInfo"),k.moreInfo={label:"NAMED_ENTITIES.MORE_INFO"}),"relation"!==s&&(k._indexes.push("occurrences"),k.occurrences={label:"NAMED_ENTITIES.OCCURRENCES"});var L={zoom:8},I={focus:!0,draggable:!1};if(e.allowedTabs.indexOf("map")>=0&&("place"===s||"placeName"===s)&&u.map){k._indexes.push("map"),k.map={label:"NAMED_ENTITIES.MAP"};var D=parseFloat(u.map.lat),P=parseFloat(u.map.lng);L.lat=D,L.lng=P,I.lat=D,I.lng=P}return e.allowedTabs.indexOf("xmlSource")>=0&&(k._indexes.push("xmlSource"),k.xmlSource={label:"NAMED_ENTITIES.XML"}),o={uid:r,entityId:a,entityType:s,entityTypeIcon:C,location:l,entity:u||{},occurrences:c,opened:!1,moreInfoOpened:T,occurrencesOpened:!1,noMoreInfo:!T,_firstSubContentOpened:k&&k._indexes&&k._indexes.length>0?k._indexes[0]:"",_subContentOpened:"",over:!1,tabs:k,defaults:angular.copy(e),getElementContent:f,toggle:g,toggleMoreInfo:v,toggleOccurrences:m,goToOccurrence:b,toggleSubContent:y,isCurrentPageDoc:S,isPinAvailable:x,isPinned:w,getPinnedState:A,togglePin:_,openEntity:E,lfCenter:L,lfDefaults:{tileLayer:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0}},lfMarkers:{mainMarker:I}},d[r]=angular.extend(n.vm,o),p.push({id:r,entityId:a}),d[r]}},u.getOccurrences=function(e){for(var t=i.getDocuments(),n=t._indexes||[],r=[],a=0;a<n.length;a++){var s=t[n[a]],l=o.parseEntitiesOccurrences(s,e);r=r.concat(l)}return r},u.getById=function(e){var t;return angular.forEach(d,(function(n){n.entityId===e&&(t=n)})),t},u.getList=function(){return p},u.getPinned=function(){return s.getPinnedByType("namedEntity")},u.destroy=function(e){delete d[e]},u}]}))},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity").directive("evtNamedEntity",["evtNamedEntity",function(e){return{restrict:"E",scope:{entityId:"@",entityType:"@",location:"@"},transclude:!0,template:n(253),link:function(t,n,i){t.vm={entityId:t.entityId,entityType:t.entityType,location:t.location};e.build(t.entityId,t);var o=n.find(".namedEntity"),r=n.find(".namedEntity__details");t.vm.toggleState=function(){t.vm.opened?o.addClass("opened"):o.removeClass("opened")},t.vm.toggleSection=function(e){t.vm[e]?r.addClass(e):r.removeClass(e)};var a=n.find(".namedEntity__details-headers"),s=n.find(".namedEntity__details-panels");t.vm.toggleSubContentClass=function(){var e=t.vm._subContentOpened;(n.find(".namedEntity__details-header.active").removeClass("active"),""!==e)?(n.find(".namedEntity__details-header-"+e).addClass("active"),a.removeClass("closed"),s.removeClass("closed")):(a.addClass("closed"),s.addClass("closed"))},t.$on("$destroy",(function(){t.vm.uid&&e.destroy(t.vm.uid)}))}}}])},function(e,t){e.exports='<span class="namedEntity namedEntity-{{ ::vm.entityType }} location-{{::vm.location}}"\r\n     ng-class="::{\'opened\': vm.location === \'mainText\'}">\r\n\t<span class="namedEntity__header">\r\n        \x3c!-- HEADER --\x3e\r\n        <div class="namedEntity_tools"\r\n          ng-if="::vm.isPinAvailable()">\r\n          <button-switch\r\n            ng-if="vm.location !== \'list\'"\r\n            title="BUTTONS.OPEN_LIST"\r\n            data-label=""\r\n            data-icon="list"\r\n            data-type="openEntity"\r\n            ng-click="vm.openEntity()"></button-switch>\r\n          <button-switch \r\n                title="BUTTONS.PIN_REMOVE"\r\n                ng-if="::vm.isPinAvailable() && vm.location === \'pinned\'"\r\n                data-label=""\r\n                data-icon="remove"\r\n                data-type="pin-off"\r\n                ng-click="vm.togglePin()"></button-switch>\r\n          <button-switch \r\n                title="BUTTONS.PIN_TOGGLE"\r\n                ng-if="::vm.isPinAvailable() && vm.location !== \'pinned\'"\r\n                data-label=""\r\n                data-icon="pin"\r\n                data-type="pin"\r\n                ng-class="{\'active\' : vm.isPinned()}"\r\n                ng-click="vm.togglePin()"></button-switch>\r\n        </div>\r\n        <div ng-click="vm.toggle()">\r\n            <i class="fa opener" ng-if="::vm.location !== \'mainText\'"></i>\r\n            \r\n            <i class="fa namedEntity__icon {{::vm.entityTypeIcon}}" ng-if="::vm.location === \'mainText\'"></i>\r\n\r\n            <span compile="::vm.entity.label"></span>\r\n        </div>\r\n    </span>\r\n\r\n    <span class="namedEntity__details">\r\n        <div class="namedEntity__details-headers closed">\r\n            <span ng-repeat="tab in ::vm.tabs._indexes track by $index"\r\n                    ng-click="vm.toggleSubContent(tab)"\r\n                    class="namedEntity__details-header namedEntity__details-header-{{::tab}}">\r\n                {{ vm.tabs[tab].label | translate }}\r\n            </span>\r\n          </div>\r\n\r\n          <div class="namedEntity__details-panels closed"\r\n               ng-class="{\'largeMap\': vm.location === \'list\' && (vm._subContentOpened === \'map\' || vm._subContentOpened === \'occurrences\')}">\r\n                  <div class="namedEntity__details-panel"\r\n                        ng-switch="vm._subContentOpened">\r\n                        <div ng-switch-when="moreInfo">\r\n                            \r\n                            <span ng-if="::vm.entity.content && vm.entity.content._indexes.length > 0" \r\n                                ng-repeat="contentName in ::vm.entity.content._indexes">\r\n                                <span class="namedEntity__detail" ng-if="::vm.entity.content[contentName].length > 0">\r\n                                    \x3c!-- SWITCH to get icon --\x3e\r\n                                    <span ng-switch="contentName">\r\n                                        <i ng-switch-when="idno"\r\n                                            class="fa fa-barcode namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="note"\r\n                                            class="fa fa-sticky-note namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="occupation"\r\n                                            class="fa fa-briefcase namedEntity__detail-icon"></i>                                        \r\n                                        <i ng-switch-when="persName"\r\n                                            class="fa fa-user namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="sex"\r\n                                            class="fa fa-venus-mars namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="birth"\r\n                                            class="fa fa-birthday-cake namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="death"\r\n                                            class="fa fa-times fa-rotate-45 namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="residence"\r\n                                            class="fa fa-home namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="orgName"\r\n                                            class="fa fa-users namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="geoName"\r\n                                            class="fa fa-map-marker namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="geogFeat"\r\n                                            class="fa fa-map-marker namedEntity__detail-icon"></i>\r\n\r\n                                        <i ng-switch-when="district"\r\n                                            class="fa fa-map-marker namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="settlement"\r\n                                            class="fa fa-location-arrow namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="region"\r\n                                            class="fa fa-map-marker namedEntity__detail-icon"></i>    \r\n                                        <i ng-switch-when="country"\r\n                                            class="fa fa-map-marker namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="bloc"\r\n                                            class="fa fa-map-marker namedEntity__detail-icon"></i>\r\n                                        \r\n                                        <i ng-switch-when="relations"\r\n                                            class="fa fa-share-alt namedEntity__detail-icon"></i>\r\n                                        <i ng-switch-when="actors"\r\n                                            class="fa fa-users namedEntity__detail-icon"></i>\r\n\r\n                                        <i ng-switch-default\r\n                                            class="fa fa-info-circle namedEntity__detail-icon"></i>\r\n                                    </span>\r\n\r\n                                    <span class="namedEntity__detail-text"\r\n                                        ng-repeat="contentObj in ::vm.entity.content[contentName] track by $index">\r\n                                            <span class="namedEntity__detail-text-attributes">\r\n                                                <span class="namedEntity__detail-text-attribute" \r\n                                                    ng-repeat="attribute in ::contentObj.attributes._indexes track by $index"\r\n                                                >{{::contentObj.attributes[attribute] | translate | camelToSpaces | underscoresToSpaces }}</span>\r\n                                            </span>\r\n                                            <span class="namedEntity__detail-text-content" compile="::contentObj.text"></span>\r\n                                        </span>\r\n                                </span>\r\n                            </span>\r\n\r\n                            <span ng-if="::vm.entity.content._indexes.length <= 0">\r\n                                {{ \'MESSAGES.NO_MORE_INFO_AVAILABLE\' | translate }}\r\n                            </span>\r\n                        </div>\r\n                        <div ng-switch-when="occurrences">\r\n                            <span ng-if="::vm.occurrences && vm.occurrences.length > 0"\r\n                                class="namedEntity__occurrences-occurrence"\r\n                                ng-class="{\'active\': vm.isCurrentPageDoc(occurrence) } "\r\n                                ng-repeat="occurrence in ::vm.occurrences track by $index"\r\n                                ng-click="vm.goToOccurrence(occurrence)">\r\n                                {{ \'LISTS.OCCURRENCE\' | translate:occurrence }}\r\n                            </span>\r\n                            <span class="italic" ng-if="::vm.occurrences && vm.occurrences.length <= 0">\r\n                                {{ \'MESSAGES.NO_RESULT_FOUND\' | translate }}\r\n                            </span>\r\n                            <span class="italic" ng-if="::!vm.occurrences">\r\n                                {{ \'MESSAGES.LOADING_OCCURRENCES\' | translate }}\r\n                            </span>\r\n                        </div>\r\n                        <div ng-switch-when="xmlSource">\r\n                            <pre ng-if="::vm.entity._xmlSource">{{ ::vm.entity._xmlSource | newLinesToSpaces | normalizeMultispaces | prettyXml}}</pre>\r\n                            <span ng-if="::!vm.entity._xmlSource">{{ \'MESSAGES.NO_XML_SOURCE\' | translate }}</span>\r\n                        </div>\r\n                        <div ng-switch-when="map">\r\n                            <leaflet\r\n                                width="100%"\r\n                                height="300px"\r\n                                lf-center="vm.lfCenter"\r\n                                defaults="vm.lfDefaults"\r\n                                markers="vm.lfMarkers"></leaflet>\r\n                        </div>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n    </span>\r\n\r\n    \x3c!-- <span class="namedEntity__details">\r\n        <span class="namedEntity__moreInfo-toggler" ng-click="vm.toggleMoreInfo()">\r\n            <i class="fa opener"></i> About\r\n        </span>\r\n        <span class="namedEntity__moreInfo">\r\n            \r\n            <span ng-if="::vm.entity.notes && vm.entity.notes.length > 0" \r\n                class="{{ ::note.type }}"\r\n                ng-repeat="note in ::vm.entity.notes track by $index"\r\n                compile="::note.content">\r\n            </span>\r\n\r\n            <span ng-if="::vm.entity.desc" \r\n                ng-repeat="desc in ::vm.entity.desc track by $index"\r\n                compile="::desc.content">\r\n            </span>\r\n\r\n            <span ng-if="::vm.entity.details" \r\n                compile="::vm.entity.details">\r\n            </span>            \r\n\r\n            <span ng-if="::vm.noMoreInfo">\r\n                No more information available.\r\n            </span> --\x3e\r\n\r\n            \x3c!-- <span ng-switch="::vm.entityType">\r\n                <span ng-switch-when="place">\r\n                </span>\r\n\r\n                <span ng-switch-when="person">\r\n                </span>\r\n\r\n                <span ng-switch-when="org">\r\n                </span>\r\n\r\n                <span ng-switch-default>\r\n                </span>        \r\n            </span> --\x3e\r\n        \x3c!-- </span>\r\n\r\n        <span class="namedEntity__occurrences-toggler" ng-click="vm.toggleOccurrences()">\r\n            <i class="fa opener"></i> Occurrences\r\n        </span>\r\n        <span class="namedEntity__occurrences">\r\n            <span ng-if="::vm.occurrences && vm.occurrences.length > 0"\r\n                class="namedEntity__occurrences-occurrence"\r\n                ng-repeat="occurrence in ::vm.occurrences track by $index"\r\n                ng-click="vm.goToOccurrence(occurrence)">\r\n                {{ ::occurrence.docLabel }} - Fol. {{ ::occurrence.pageLabel }} \r\n            </span>\r\n            <span class="italic" ng-if="::vm.occurrences && vm.occurrences.length <= 0">\r\n                No result found.\r\n            </span>\r\n        </span>\r\n    </span> --\x3e\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity").provider("evtNamedEntityRef",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$timeout","parsedData","Utils",function(t,n,i){var o,r,a={},s={},l={},c=[],u=0,d=[],p=function(e){e.stopPropagation();var n=e.target;if(n&&!i.DOMutils.isNestedInElem(n,"evt-named-entity")||i.DOMutils.isNestedInElem(n,"evt-list")){var o=this;o.realNamedEntity&&(a.getCurrentHighlighted()!==o.entityId&&a.highlightByEntityId(void 0),o.active=!o.active,o.active?a.setActiveEntity(o.uid):a.setActiveEntity(void 0),o.toggleActive(),o.detailsInPopup&&t((function(){o.updateDetailsPosition(e,o)}),20))}};return a.build=function(t,i){var o,r=u++,d=t||void 0,h=i.entityType?i.entityType:n.getNamedEntityType(d),f=void 0!==t;if(void 0===s[r]){switch(h){case"persName":h="person";break;case"placeName":case"orgName":h=h.replace("Name","");break;default:h=h}return o={uid:r,entityId:d,entityType:h,detailsInPopup:!1,realNamedEntity:f,initHighlight:f&&a.getCurrentHighlighted()===d,defaults:angular.copy(e),goToEntityInList:p},s[r]=angular.extend(i.vm,o),c.push({id:r,entityId:d}),l[d]||(l[d]=[]),l[d].push(r),s[r]}},a.getActiveEntityTypes=function(){return d},a.addActiveType=function(e){d.indexOf(e)<0&&d.push(e)},a.removeActiveType=function(e){var t=d.indexOf(e);d.splice(t,1)},a.getActiveEntity=function(){return o},a.setActiveEntity=function(e){a.deactivateEntity(o),o=e},a.deactivateEntity=function(e){void 0!==e&&void 0!==s[e]&&(s[e].active=!1,s[e].toggleActive())},a.highlightByEntityId=function(e){a.setCurrentHighlighted(e),angular.forEach(s,(function(t){t.toggleHighlight&&(t.realNamedEntity&&t.entityId===e?t.toggleHighlight(!0):t.toggleHighlight(!1))}))},a.getCurrentHighlighted=function(){return r},a.setCurrentHighlighted=function(e){r=e},a.getById=function(e){var t;return angular.forEach(s,(function(n){n.entityId===e&&(t=n)})),t},a.getList=function(){return c},a.destroy=function(e){delete s[e]},a}]}))},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity").directive("evtNamedEntityRef",["evtNamedEntityRef",function(e){return{restrict:"E",scope:{entityId:"@",entityType:"@"},transclude:!0,template:n(256),link:function(t,n,i){t.vm={entityId:t.entityId,entityType:t.entityType};e.build(t.entityId,t);var o=n.find(".namedEntityRef"),r=n.find(".namedEntityRef__details");t.vm.toggleActive=function(){t.vm.active?(o.addClass("active"),r.addClass("active")):(o.removeClass("active"),r.removeClass("active"))},t.vm.toggleHighlight=function(e){e?o.addClass("highlighted"):o.removeClass("highlighted")},t.vm.updateDetailsPosition=function(e,t){if(t.active){e.stopPropagation();var i=n,o=angular.element(n).find("span.namedEntityRef__details").last(),r=angular.element(o).find(".namedEntityRef__details-before"),a=e.clientX,s=e.clientY;o.removeAttr("style");var l=i.height(),c=1*i.css("font-size").substr(0,2)+1,u=(i.width(),i.position().top),d=(i.position().left,o.offset().top,o.outerWidth()),p=o.outerHeight();d>200&&o.css({width:"200px","max-width":"200px"}),o.css({position:"absolute"}),d=o.outerWidth(),p=o.outerHeight();var h,f,g=n.parent(),m=n.parents(g).offset().left,v=n.parents(g).innerWidth(),b=a-m-d/2;o.css({left:b+"px"}),b+d>v&&(b=b-(h=b+d-v)-10,o.css({left:b+"px"})),b<0&&(b=0,o.css({left:b+"px"})),u+l+p>n.parents(g).outerHeight()?(f=p+l+10,l>c&&(f=f-(s-i.offset().top)+10),o.css({"margin-top":-f+"px"}).addClass("open-up"),r.css({top:o.outerHeight()+2+"px"})):(o.removeClass("open-up"),l>c?(h=l-c-(s-i.offset().top),o.css({"margin-top":-h+"px"})):o.css({"margin-top":"5px"}));var y=a-b-m;r.css({left:y+"px"}),(d=o.width())>200&&o.css({width:"200px","max-width":"200px"})}},t.$on("$destroy",(function(){t.vm.uid&&e.destroy(t.vm.uid)}))}}}])},function(e,t){e.exports='<span class="namedEntityRef namedEntityRef-{{ ::vm.entityType }}"\r\n\tng-class="::{\'fakeEntity\': !vm.realNamedEntity,\r\n\t\t\t\t \'highlighted\': vm.initHighlight }" title="{{ \'LISTS.ENTITY_TYPE_\'+vm.entityType | uppercase | translate }}"\r\n\tng-click="vm.goToEntityInList($event)" ng-transclude></span>\r\n\r\n<evt-named-entity \r\n\tng-if="!vm.detailsInPopup && vm.active" \r\n\tdata-location=\'mainText\'\r\n\tdata-entity-id="{{::vm.entityId}}" data-entity-type="{{::vm.entityType}}"></evt-named-entity>\r\n\r\n\x3c!-- <span class="namedEntityRef__details" ng-if="vm.active">\r\n\t<span class="namedEntityRef__details-before"></span>\r\n\t<evt-named-entity data-entity-id="{{::vm.entityId}}" data-entity-type="{{::vm.entityType}}"></evt-named-entity>\r\n</span> --\x3e'},function(e,t,n){"use strict";angular.module("evtviewer.namedEntity").service("evtGenericEntity",(function(){var e={},t={};e.addActiveType=function(n,i){void 0===t[n]&&(e.highlightElementsByType(n,i),t[n]={type:n,color:i})},e.removeActiveType=function(n,i){void 0!==t[n]&&(e.deEmphasizeElementsByType(n,i),t[n]=void 0)},e.highlightElementsByType=function(e,t){var i=document.getElementsByClassName(e);angular.forEach(i,(function(e){n(e,t,!0)}))},e.deEmphasizeElementsByType=function(e,t){var i=document.getElementsByClassName(e);angular.forEach(i,(function(e){n(e,t,!1)}))},e.highlightActiveTypes=function(){for(var n in t){var i=t[n];i&&e.highlightElementsByType(i.type,i.color)}};var n=function(e,t,n){n?(t?angular.element(e).css("background",t):angular.element(e).addClass("highlighted"),angular.element(e).addClass("entityHighlighted")):(t?angular.element(e).css("background",""):angular.element(e).removeClass("highlighted"),angular.element(e).removeClass("entityHighlighted"))};return e}))},function(e,t,n){"use strict";angular.module("evtviewer.criticalApparatusEntry",[])},function(e,t,n){"use strict";angular.module("evtviewer.criticalApparatusEntry").constant("APPENTRYDEFAULTS",{firstSubContentOpened:""}).config(["evtCriticalApparatusEntryProvider","configProvider","APPENTRYDEFAULTS",function(e,t,n){var i=t.makeDefaults("criticalApparatusEntry",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.criticalApparatusEntry").provider("evtCriticalApparatusEntry",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};var t="";this.$get=["config","parsedData","baseData","evtCriticalApparatusParser","evtCriticalApparatus","evtPinnedElements",function(n,i,o,r,a,s){var l={},c={},u=[],d=0;return l.build=function(t,s){var l,p=d++,h=t||void 0,f=s.scopeWit||"",g=s.type||"default",m=n.showReadingExponent;if(void 0===c[p]){var v,b="",y="",x={_indexes:[]},w=i.getCriticalEntryById(t);if(void 0===w){var A=o.getXMLDocuments()[0];A=A.cloneNode(!0),r.findCriticalEntryById(A,t),w=i.getCriticalEntryById(t)}void 0!==w&&(b=(v=a.getContent(w,w._subApp,f)).witnessesGroups,""!==v.criticalNote&&(x._indexes.push("criticalNote"),x.criticalNote={label:"CRITICAL_APPARATUS.TABS.CRITICAL_NOTE"}),v.notSignificantReadings.length>0&&(x._indexes.push("notSignificantReadings"),x.notSignificantReadings={label:"CRITICAL_APPARATUS.TABS.ORTHOGRAPHIC_VARIANTS"}),x._indexes.push("moreInfo"),x.moreInfo={label:"CRITICAL_APPARATUS.TABS.MORE_INFO"},""!==w._xmlSource&&(x._indexes.push("xmlSource"),x.xmlSource={label:"CRITICAL_APPARATUS.TABS.XML"},v.xmlSource=w._xmlSource.replace(/ xmlns="http:\/\/www\.tei-c\.org\/ns\/1\.0"/g,"")),x._indexes.length>0&&""!==e.firstSubContentOpened&&(y=x._indexes.indexOf(e.firstSubContentOpened)<0?x._indexes[0]:e.firstSubContentOpened));var _=void 0===s.exponent?i.getCriticalEntryExponent(s.appId):s.exponent;return l={uid:p,scopeWit:f,appId:h,readingId:s.readingId,content:v,type:g,_subContentOpened:y,over:!1,selected:!1,tabs:x,exponent:_,showExponent:m,witnessesGroups:b,currentViewMode:s.scopeViewMode},c[p]=angular.extend(s.vm,l),u.push({id:p}),c[p]}},l.getById=function(e){if("undefined"!==c[e])return c[e]},l.getList=function(){return u},l.destroy=function(e){delete c[e]},l.getPinned=function(){return s.getPinnedByType("criticalApparatusEntry")},l.setCurrentAppEntry=function(e){t!==e&&(t=e)},l.getCurrentAppEntry=function(){return t},l.mouseOutAll=function(){angular.forEach(c,(function(e){e.mouseOut()}))},l.mouseOverByAppId=function(e){angular.forEach(c,(function(t){t.appId===e?t.mouseOver():t.mouseOut()}))},l.unselectAll=function(){angular.forEach(c,(function(e){e.unselect()})),l.setCurrentAppEntry("")},l.selectById=function(e){angular.forEach(c,(function(t){t.appId===e?t.setSelected():t.unselect()})),l.setCurrentAppEntry(e)},l}]}))},function(e,t,n){"use strict";angular.module("evtviewer.criticalApparatusEntry").controller("CriticalApparatusEntryCtrl",["$scope","config","Utils","evtCriticalApparatusEntry","evtInterface","evtReading","evtBox","evtApparatuses","evtPinnedElements",function(e,t,n,i,o,r,a,s,l){e.content={};var c=this;this.toggleSubContent=function(e){c._subContentOpened!==e?c._subContentOpened=e:c._subContentOpened=""},this.toggleOverAppEntries=function(e){e.stopPropagation(),void 0===c.readingId&&(!1===c.over?(i.mouseOverByAppId(c.appId),r.mouseOverByAppId(c.appId)):(i.mouseOutAll(),r.mouseOutAll()))},this.isPinAvailable=function(){return t.toolPinAppEntries},this.isPinned=function(){return l.isPinned(c.appId)},this.getPinnedState=function(){return c.isPinned()?"pin-on":"pin-off"},this.togglePin=function(){if(c.isPinned())l.removeElement({id:c.appId,type:"criticalApparatusEntry"});else{l.addElement({id:c.appId,type:"criticalApparatusEntry"});var e=l.getPinned();e&&1===e.length&&o.updateState("isPinnedAppBoardOpened",!0)}},this.alignReadings=function(){a.alignScrollToApp(c.appId),s.alignScrollToApp(c.appId)},this.destroy=function(){var e=this.uid;i.destroy(e)},this.mouseOver=function(){c.over=!0},this.mouseOut=function(){c.over=!1},this.setSelected=function(){c.selected=!0},this.unselect=function(){c.selected=!1,c.closeSubContent()},this.isSelected=function(){return c.selected},this.isInline=function(){return o.isCriticalApparatusInline()},this.closeSubContent=function(){c._subContentOpened=""},this.callbackClick=function(e){e.stopPropagation();var t=e.target;"readingTxt"===c.currentViewMode&&(c.isSelected()?t&&t.className.indexOf("critical-apparatus-entry_other-content_headers")<0&&!n.DOMutils.isNestedInClassElem(t,"critical-apparatus-entry_other-content_headers")&&(i.unselectAll(),r.unselectAll(),o.updateState("currentAppEntry","")):(r.selectById(c.appId),o.updateState("currentAppEntry",c.appId),i.selectById(c.appId),c.isInline()||a.alignScrollToApp(c.appId)),o.updateUrl())},this.showInlineCriticalApparatus=function(){return t.showInlineCriticalApparatus}}])},function(e,t,n){"use strict";angular.module("evtviewer.criticalApparatusEntry").directive("evtCriticalApparatusEntry",["evtCriticalApparatusEntry","evtInterface",function(e,t){return{restrict:"E",scope:{appId:"@",readingId:"@",scopeWit:"@",type:"@",exponent:"@"},transclude:!0,template:n(263),controllerAs:"vm",controller:"CriticalApparatusEntryCtrl",link:function(n,i,o){n.scopeViewMode=t.getState("currentViewMode");var r=e.build(n.appId,n);t.isCriticalApparatusInline()||(r.selected=t.getState("currentAppEntry")===n.appId),n.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<div\r\n  class="critical-apparatus-entry"\r\n  ng-mouseover="vm.toggleOverAppEntries($event);"\r\n  ng-mouseout="vm.toggleOverAppEntries($event)"\r\n  ng-click="vm.callbackClick($event)"\r\n  ng-class="{\'noTools\': (scopeViewMode !== \'collation\' && scopeViewMode !== \'readingTxt\') && !vm.isPinAvailable(),\r\n             \'selected\': vm.isSelected() && !vm.isInline() && scopeViewMode === \'readingTxt\',\r\n             \'over\': vm.currentViewMode === \'readingTxt\' && vm.over}">\r\n  <div class="critical-apparatus-entry_main-content">\r\n\r\n\r\n    <div class="critical-apparatus-entry_tools"\r\n      ng-if="::(scopeViewMode === \'collation\' || scopeVieMode === \'readingTxt\') || vm.isPinAvailable()">\r\n      <button-switch\r\n            title="BUTTONS.PIN_REMOVE"\r\n            ng-if="::vm.isPinAvailable() && vm.type === \'pinned\'"\r\n            data-label=""\r\n            data-icon="remove"\r\n            data-type="pin-off"\r\n            ng-click="vm.togglePin()"></button-switch>\r\n      <button-switch\r\n            title="BUTTONS.PIN_TOGGLE"\r\n            ng-if="::vm.isPinAvailable() && vm.type === \'default\'"\r\n            data-label=""\r\n            data-icon="pin"\r\n            data-type="pin"\r\n            ng-class="{\'active\' : vm.isPinned()}"\r\n            ng-click="vm.togglePin()"></button-switch>\r\n      <button-switch\r\n            title="BUTTONS.ALIGN_READINGS"\r\n            ng-if="::vm.type === \'default\' && (scopeViewMode === \'collation\' || !vm.showInlineCriticalApparatus())"\r\n            data-label=""\r\n            data-icon="v-align"\r\n            data-type="alignReadings"\r\n            ng-click="vm.alignReadings()"></button-switch>\r\n    </div>\r\n    <span class="apparatus_exponent"\r\n            ng-if="::vm.showExponent"\r\n            compile="vm.exponent"></span>\r\n\r\n      <span\r\n        class="app_lemma"\r\n        ng-if="::vm.content.lemma.content !== \'\'"\r\n        compile="::vm.content.lemma.content"></span>\r\n    <div class="critical-apparatus-entry_main-content_list">\r\n            <span\r\n              class="app_reading"\r\n              ng-if="::vm.witnessesGroups.length === 0"\r\n              ng-repeat="reading in ::vm.content.significantReadings track by $index"\r\n              compile="reading.content">\r\n              </span>\r\n              <ul\r\n                class="app_reading_list"\r\n                ng-if="::vm.witnessesGroups.length > 0">\r\n                <li ng-repeat="group in ::vm.witnessesGroups"\r\n                  ng-if="::group.significantText !== undefined">\r\n                    <span\r\n                      class="witGrp_name"\r\n                      ng_if="::group.groupName !== \'\' && group.significantText !== undefined">{{group.groupName}}:</span>\r\n                    <span\r\n                      class="witGrp_content"\r\n                      compile="group.significantText"></span>\r\n                </li>\r\n             </ul>\r\n        </div>\r\n  </div>\r\n  <div class="critical-apparatus-entry_other-content"\r\n       ng-if="::vm.tabs._indexes.length > 0">\r\n\r\n      <div\r\n        class="critical-apparatus-entry_other-content_headers"\r\n        ng-class="{\'closed\': vm._subContentOpened === \'\'}">\r\n          <span ng-repeat="tab in ::vm.tabs._indexes track by $index"\r\n                ng-click="vm.toggleSubContent(tab)"\r\n                ng-class="{\'active\' : vm._subContentOpened == tab }">\r\n                {{ vm.tabs[tab].label | translate }}\r\n          </span>\r\n      </div>\r\n      <div\r\n        class="critical-apparatus-entry_other-content_panels"\r\n        ng-class="{\'closed\': vm._subContentOpened === \'\'}">\r\n          <div class="critical-apparatus-entry_other-content_panel"\r\n                ng-repeat="tab in ::vm.tabs._indexes track by $index"\r\n                ng-class="{\'active\' : vm._subContentOpened == tab}"\r\n                ng-switch="::tab">\r\n                <div ng-switch-when="notSignificantReadings">\r\n                  <ul ng-if="::vm.witnessesGroups.length <= 0">\r\n                      <li ng-repeat="reading in ::vm.content.notSignificantReadings track by $index"\r\n                          compile="::reading.content"></li>\r\n                  </ul>\r\n                  <div\r\n                    ng-if="::vm.witnessesGroups.length > 0"\r\n                    ng-repeat="group in ::vm.witnessesGroups">\r\n                    <span\r\n                      class="critical-apparatus-entry_other-content_panel_orthographic_title"\r\n                      ng-if="::group.notSignificantText !== undefined">\r\n                      {{ \'CRITICAL_APPARATUS.ORTHOGRAPHIC_VARIANTS_FOR\' | translate }} {{::group.groupName}}</span>\r\n                    <span\r\n                      class="critical-apparatus-entry_other-content_panel_orthographic_text"\r\n                      ng-if="::group.notSignificantText !== undefined"\r\n                      compile="group.notSignificantText"></span>\r\n                  </div>\r\n                </div>\r\n                <div ng-switch-when="moreInfo">\r\n                  <span class="app_lemma">\r\n                    {{ \'CRITICAL_APPARATUS.METADATA_FOR_LEMMA\' | translate }} "<em\r\n                        ng-if="::vm.content.lemma.content !== \'\'"\r\n                        compile="::vm.content.lemma.content"></em>"\r\n                  </span>\r\n                  <ul ng-if="::(vm.content.attributes._keys.length > 1 || vm.content.attributes._keys.length === 1 && vm.content.attributes._keys.indexOf(\'xml:id\') < 0)">\r\n                      <li ng-repeat="attr in ::vm.content.attributes._keys track by $index"\r\n                          ng-if="::attr !== \'xml:id\'">\r\n                          <span class="moreInfo-label">{{ ::attr }}</span> {{ ::vm.content.attributes.values[attr] }}\r\n                      </li>\r\n                  </ul>\r\n                  <ul ng-if="::(vm.content.attributes._keys.length <= 0 || vm.content.attributes._keys.length === 1 && vm.content.attributes._keys.indexOf(\'xml:id\') > 0)">\r\n                    <li><em>{{ \'CRITICAL_APPARATUS.NO_DATA\' | translate }}</em></li></ul>\r\n\r\n                  <span class="moreInfo-metadataTitle">{{ \'CRITICAL_APPARATUS.MORE_INFO\' | translate }}</span>\r\n                  <ul>\r\n                      <li\r\n                        class="app_lemma"\r\n                        class="app_reading_content"\r\n                        ng-if="::(vm.content.lemma.attributes._keys.length > 1 || vm.content.lemma.attributes._keys.length === 1 && vm.content.lemma.attributes._keys.indexOf(\'xml:id\') < 0)">\r\n                          <span>\r\n                            {{ \'CRITICAL_APPARATUS.METADATA_FOR\' | translate }}\r\n                            <em\r\n                                ng-if="::vm.content.lemma.content !== \'\'"\r\n                                compile="::vm.content.lemma.content"></em>\r\n                          </span>\r\n                          <ul>\r\n                            <li ng-repeat="attr in ::vm.content.lemma.attributes._keys track by $index"\r\n                                ng-if="::attr !== \'xml:id\'">\r\n                                <span class="moreInfo-label">{{ ::attr }}</span> {{ ::vm.content.lemma.attributes.values[attr] }}\r\n                            </li>\r\n                          </ul>\r\n                      </li>\r\n\r\n                      <li\r\n                        class="app_reading_content"\r\n                        ng-repeat="reading in ::vm.content.significantReadings track by $index"\r\n                        ng-if="::(reading.attributes._keys.length > 1 || reading.attributes._keys.length === 1 && reading.attributes._keys.indexOf(\'xml:id\') < 0)">\r\n                          <span>\r\n                           {{ \'CRITICAL_APPARATUS.METADATA_FOR\' | translate }}\r\n                            <em\r\n                                class="app_reading"\r\n                                compile="::reading.content"></em>\r\n                          </span>\r\n                          <ul>\r\n                            <li ng-repeat="attr in ::reading.attributes._keys track by $index"\r\n                                ng-if="::attr !== \'xml:id\'">\r\n                                <span class="moreInfo-label">{{ ::attr }}</span> {{ ::reading.attributes.values[attr] }}\r\n                            </li>\r\n                          </ul>\r\n                      </li>\r\n\r\n                      <li\r\n                        class="app_reading_content"\r\n                        ng-repeat="reading in ::vm.content.notSignificantReadings track by $index"\r\n                        ng-if="::(reading.attributes._keys.length > 1 || reading.attributes._keys.length === 1 && reading.attributes._keys.indexOf(\'xml:id\') < 0)">\r\n                          <span>\r\n                            {{ \'CRITICAL_APPARATUS.METADATA_FOR\' | translate }}\r\n                            <em\r\n                                class="app_reading"\r\n                                compile="::reading.content"></em>\r\n                          </span>\r\n                          <ul>\r\n                            <li ng-repeat="attr in reading.attributes._keys track by $index">\r\n                                <span class="moreInfo-label">{{ ::attr }}</span> {{ ::reading.attributes.values[attr] }}\r\n                            </li>\r\n                          </ul>\r\n                      </li>\r\n                  </ul>\r\n                </div>\r\n                <div ng-switch-when="xmlSource">\r\n                  <pre>{{ ::vm.content[tab] | newLinesToSpaces | normalizeMultispaces | prettyXml }}</pre>\r\n                </div>\r\n                <div ng-switch-default\r\n                     compile="::vm.content[tab]">\r\n                </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n'},function(e,t,n){"use strict";angular.module("evtviewer.criticalApparatusEntry").directive("evtWitnessRef",["evtCriticalApparatusEntry","evtBox","parsedData","evtInterface","config",function(e,t,i,o,r){return{restrict:"E",require:"^?evtCriticalApparatusEntry",scope:{witness:"@",scopeWit:"@"},transclude:!0,template:n(265),link:function(e,n,a){e.translationData={witness:e.witness},e.scopeWit===e.witness?e.title="CRITICAL_APPARATUS.WITNESS_REF_CURRENT":e.title="CRITICAL_APPARATUS.WITNESS_REF_OPEN",e.openWit=function(){var n=e.witness,a=e.scopeWit;if(n!==a){if(r.versions.length>0){var s,l=o.getState("currentVersion"),c=i.getVersionEntries()._indexes.versionWitMap;for(var u in c)c[u].indexOf(n)>=0&&(s=u);l!==s&&(o.updateCurrentVersion(s),o.updateState("currentWits",[]),o.updateAvailableWitnessesByVersion(s))}var d=o.getState("currentWits"),p=d.indexOf(a);d.indexOf(n)>=0&&o.removeWitness(n),void 0!==p&&o.addWitnessAtIndex(n,p+1),"collation"!==o.getCurrentView&&o.updateState("currentViewMode","collation"),o.updateUrl();var h=o.getState("currentAppEntry")||"";if(""!==h){var f=t.getElementByValueOfParameter("witness",n);void 0!==f&&f.scrollToAppEntry(h)}}}}}}])},function(e,t){e.exports='<span class="wit" \r\n      ng-class="::{\'selected\': witness === scopeWit}"\r\n      ng-click="openWit()"\r\n      title="{{ title | translate:translationData }}">{{ ::witness }}</span>'},function(e,t,n){"use strict";angular.module("evtviewer.reading",[])},function(e,t,n){"use strict";angular.module("evtviewer.reading").constant("READINGDEFAULTS",{tooltipMaxHeight:170,tooltipMaxWidth:200,openTriggerEvent:"click"}).config(["evtReadingProvider","configProvider","READINGDEFAULTS",function(e,t,n){var i=t.makeDefaults("reading",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.reading").provider("evtReading",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};var t="";this.$get=["config","parsedData",function(n,i){var o={},r={},a=[],s=0;return o.build=function(t,l){var c,u,d=s++,p=t||void 0,h="",f=n.showReadingExponent;if(void 0===r[d]){var g=i.getCriticalEntryExponent(l.appId);if(void 0!==l.readingId){var m=i.getReadingAttributes(l.readingId,t)||[];for(var v in m)"wit"!==v&&"xml:id"!==v&&(h+=v.toUpperCase()+": "+m[v]+" - ");""!==h&&(h=h.slice(0,-3))}var b=i.getCriticalEntryById(p);b&&b._subApp&&(c=b._indexes._parentEntry||"");var y=p===o.getCurrentAppEntry();return u={uid:d,scopeWit:l.scopeWit||"",appId:p,parentAppId:c,readingId:l.readingId,readingType:l.readingType,variance:l.variance,type:l.type,overlap:l.overlap,noText:l.noText,range:void 0,attributes:h,exponent:g,showExponent:f,over:!1,apparatus:{opened:!1,content:{},_loaded:!1,_subContentOpened:"criticalNote",inline:l.inlineApparatus},selected:y,openTriggerEvent:angular.copy(e.openTriggerEvent),defaults:angular.copy(e)},r[d]=angular.extend(l.vm,u),a.push({id:d,entryId:p}),r[d]}},o.getById=function(e){var t;return angular.forEach(r,(function(n){n.appId===e&&(t=n)})),t},o.getList=function(){return a},o.setCurrentAppEntry=function(e){t=e},o.getCurrentAppEntry=function(){return t},o.mouseOutAll=function(){angular.forEach(r,(function(e){e.mouseOut()}))},o.mouseOverByAppId=function(e){angular.forEach(r,(function(t){t.appId===e?t.mouseOver():t.mouseOut()}))},o.unselectAll=function(){angular.forEach(r,(function(e){e.unselect()}))},o.closeAllApparatus=function(e){angular.forEach(r,(function(t){(void 0===e||t.uid!==e)&&t.closeApparatus()}))},o.selectById=function(e){angular.forEach(r,(function(t){t.appId===e?t.setSelected():t.unselect()})),o.setCurrentAppEntry(e)},o.destroy=function(e){delete r[e]},o}]}))},function(e,t,n){"use strict";angular.module("evtviewer.reading").controller("ReadingCtrl",["config","$log","$scope","evtReading","parsedData","evtPopover","evtInterface","evtCriticalApparatusEntry","evtApparatuses",function(e,t,n,i,o,r,a,s,l){var c=this,u=(t.getInstance("reading"),function(e,t){angular.forEach(c.range,(function(n){e&&n.className.indexOf(t)<0?n.className+=" "+t:!e&&n.className.indexOf(t)>=0&&(n.className=n.className.replace(" "+t,""))}))});this.mouseOver=function(){c.over=!0,c.overlap&&c.range&&u(c.over,"over")},this.mouseOut=function(){c.over=!1,c.overlap&&c.range&&u(c.over,"over")},this.setSelected=function(){c.selected=!0,c.overlap&&c.range&&u(c.selected,"selected")},this.unselect=function(){c.selected=!1,c.overlap&&c.range&&u(c.selected,"selected")},this.isSelect=function(){return void 0!==c.parentAppId?c.selected||a.getState("currentAppEntry")===c.parentAppId:c.selected},this.isApparatusOpened=function(){return c.apparatus.opened&&!n.$parent.vm.state.topBoxOpened},this.closeApparatus=function(){c.apparatus.opened=!1},this.openApparatus=function(){c.apparatus.opened=!0,c.apparatus._loaded=!0},this.toggleOverAppEntries=function(e){e.stopPropagation(),c.hidden||(!1===c.over?(i.mouseOverByAppId(c.appId),s.mouseOverByAppId(c.appId)):(i.mouseOutAll(),s.mouseOutAll()))},this.toggleSelectAppEntries=function(e){c.hidden||(!1===c.selected?(i.selectById(c.appId),s.selectById(c.appId),c.apparatus.inline||(l.setCurrentApparatus("criticalApparatus"),l.alignScrollToApp(c.appId)),a.updateState("currentAppEntry",c.appId)):(a.updateState("currentAppEntry",""),i.unselectAll(),s.unselectAll())),a.updateUrl()},this.toggleApparatus=function(e){r.closeAll(),!c.hidden&&c.over&&(c.apparatus._loaded||(c.apparatus._loaded=!0),i.closeAllApparatus(c.uid),c.apparatus.opened=!c.apparatus.opened)},this.callbackClick=function(e){e&&e.stopPropagation(),c.over&&(c.toggleSelectAppEntries(e),(!c.isSelect()||c.apparatus.inline&&!c.apparatus.opened)&&c.toggleApparatus(e))},this.openApparatusSubContent=function(e){c.apparatus._subContentOpened=e},this.backgroundColor=function(){return"variant"===c.type?p():d()};var d=function(){var t;if(n.$parent.vm.state.heatmap){var i=o.getCriticalEntriesMaxVariance();return t=c.over&&!n.$parent.vm.state.topBoxOpened?"1":c.variance/i,"background: "+(e.heatmapColor.replace("rgb","rgba").slice(0,-1)+","+t+")")}return p()},p=function(){var t,r,a,s,l,u=e.possibleVariantFilters,d=e.possibleLemmaFilters,p=!1;if(c.parentAppId){var h=i.getById(c.parentAppId);p=!!h&&(h.over||h.isSelect())}if(void 0!==c.appId&&(s=o.getCriticalEntryById(c.appId),void 0!==(void 0!==c.readingId?s.content[c.readingId]:s.content[s.lemma])&&(l=o.getReadingAttributes(c.readingId,c.appId)||{},r=o.getCriticalEntriesFilters(),a="witness"===n.$parent.vm.type?u:d,Object.keys(l).length>0))){var f="",g=(c.over||c.isSelect()||p)&&!n.$parent.vm.state.topBoxOpened?"1":".4";for(var m in r){var v=r[m].name;if(a.indexOf(v)>=0&&void 0!==l&&void 0!==l[v])for(var b in r[m].values){var y=r[m].values[b].color,x=r[m].values[b].name;if(l[v]===x)if(y)f+=y.replace("rgb","rgba").slice(0,-1)+","+g+"),"}}""!==f&&((f=f.slice(0,-1)).match(/rgb/gi)&&f.match(/rgb/gi).length>1||f.match(/#/gi)&&f.match(/#/gi).length>1?(t="background: -moz-linear-gradient(left,"+f+");",t+="background: -webkit-linear-gradient(left,"+f+");",t+="background: ms-linear-gradient(left,"+f+");",t+="background: linear-gradient(left,"+f+");"):t="background: "+f)}return void 0===t&&(n.$parent.vm.state.topBoxOpened||(t=c.over||c.isSelect()||p?"background: "+e.variantColorDark:"background: "+e.variantColorLight)),t};this.fitFilters=function(){var e,t,i,r,a,s,l,u,d=o.getCriticalEntryById(c.appId),p=!1,h=0;if(e=o.getReadingAttributes(c.readingId,c.appId)||{},void 0!==d&&void 0!==(void 0!==c.readingId?d.content[c.readingId]:d.content[d.lemma])){var f=n.$parent.vm.state.filters||{},g=Object.keys(f);for(u in t=!1,g){if((i=f[r=g[u]]).totActive>0&&(h++,void 0!==e&&void 0!==e[r]))for(a=0,s=i.values;a<s.length&&!t;)s[s[a]].active&&(l=s[s[a]].name,t=t||e[r]===l),a++;if(t)break}p=t}return 0===h&&(p=!0),c.hidden=!p,p},this.destroy=function(){var e=this.uid;i.destroy(e)}}])},function(e,t,n){"use strict";angular.module("evtviewer.reading").directive("evtReading",["evtReading","parsedData","evtInterface",function(e,t,i){return{restrict:"E",scope:{appId:"@",readingId:"@",readingType:"@",variance:"@",scopeWit:"@",type:"@",overlap:"@",noText:"@"},transclude:!0,template:n(271),controllerAs:"vm",controller:"ReadingCtrl",link:function(t,n,o){t.currentViewMode=i.getState("currentViewMode"),t.inlineApparatus=i.isCriticalApparatusInline();var r=e.build(t.appId,t);t.inlineApparatus&&i.getState("currentAppEntry")===t.appId&&r.openApparatus(),t.vm.overlap&&t.vm.range&&angular.forEach(t.vm.range,(function(e){e.onmouseover=function(){r.toggleOverAppEntries()},e.onmouseout=function(){r.toggleOverAppEntries()},e.onclick=function(){r.callbackClick()}})),t.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<span \r\n    class="reading"\r\n    ng-mouseover="vm.toggleOverAppEntries($event);"\r\n    ng-mouseout="vm.toggleOverAppEntries($event)"\r\n    ng-click="vm.callbackClick($event);"\r\n    ng-class="{ \'selected\' : vm.isSelect() && !$parent.vm.state.topBoxOpened,\r\n                \'expansed\' : (!$parent.vm.state.topBoxOpened && vm.apparatus.opened && vm.apparatus.inline),\r\n                \'over\'     : vm.over, \r\n                \'invisible\': !vm.fitFilters(),\r\n                \'blurred\'  : $parent.vm.state.topBoxOpened}">\r\n    <span \r\n        ng-if="!vm.noText" \r\n        class="reading__text"\r\n        style="{{vm.backgroundColor()}}"\r\n        title="{{vm.attributes | translate}}"\r\n        ng-transclude></span>\r\n    \r\n    <span\r\n        ng-if="::vm.showExponent && vm.position !== \'start\'"\r\n        style="{{vm.backgroundColor()}}"\r\n        class="reading_exponent"\r\n        ng-click="vm.callbackClick($event);"\r\n        compile="::vm.exponent"></span>\r\n\r\n    <evt-critical-apparatus-entry \r\n      ng-class="{\'blurred\': $parent.vm.state.topBoxOpened}"\r\n      ng-if="vm.apparatus._loaded && vm.apparatus.inline && vm.isApparatusOpened() && vm.fitFilters()"\r\n      data-app-id="{{::vm.appId}}"\r\n      data-reading-id="{{::vm.readingId}}"\r\n      data-scope-wit="{{::vm.scopeWit}}"\r\n      data-exponent="{{::vm.exponent}}"></evt-critical-apparatus-entry>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.dialog",[])},function(e,t,n){"use strict";angular.module("evtviewer.dialog").constant("DIALOGDEFAULTS",{}).config(["evtDialogProvider","configProvider","DIALOGDEFAULTS",function(e,t,n){var i=t.makeDefaults("dialog",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.dialog").provider("evtDialog",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$log",function(t){var n={},i={},o=[],r=0,a=(t.getInstance("dialog"),function(){this.opened=!0}),s=function(){this.opened=!1},l=function(e){this.title=e},c=function(e){this.content=e},u=function(){var e=this.uid;delete i[e]};return n.build=function(t){var n,d=t.id||r++,p=t.type||"default",h=t.title||"",f=t.opened||!1;if(void 0===i[d])return n={uid:d,defaults:angular.copy(e),type:p,content:void 0,title:h,opened:f,open:a,close:s,setTitle:l,updateContent:c,destroy:u},i[d]=angular.extend(t.vm,n),o.push({id:d,type:p}),i[d]},n.getById=function(e){if("undefined"!==i[e])return i[e]},n.getList=function(){return o},n.getListByType=function(e){var t=[];for(var n in i)i[n].type===e&&t.push(i[n]);return t},n.openByType=function(e){for(var t in i)i[t].type===e&&i[t].open()},n.closeByType=function(e){for(var t in i)i[t].type===e&&i[t].close()},n.closeAll=function(){for(var e in i)void 0!==i[e].close()&&i[e].close()},n}]}))},function(e,t,n){"use strict";angular.module("evtviewer.dialog").directive("evtDialog",["evtDialog",function(e){return{restrict:"E",scope:{id:"@",type:"@",title:"@",opened:"@"},replace:!1,transclude:!0,template:n(276),link:function(t,n,i){t.vm={id:t.id,type:t.type,title:t.title,opened:t.opened};var o=e.build(t);t.$on("$destroy",(function(){o&&o.destroy()}))}}}])},function(e,t){e.exports='<div class="evt-dialog"\r\n    ng-show="vm.opened"\r\n    ng-class="::{\'evt-dialog-error\': vm.type === \'error\',\r\n               \'evt-dialog-small\': vm.type === \'bookmark\' }">\r\n    <div class="evt-dialog-shadow" ng-click="vm.close()"></div>\r\n\r\n\r\n    <div class="evt-dialog-container">\r\n        <div class="evt-dialog-container-top">\r\n            <span class="evt-dialog-container-top-title">{{ vm.title | translate }}</span>\r\n            <button-switch \r\n                    class="noPadding"\r\n                    title="{{ \'DIALOGS.CLOSE\' | translate }}"\r\n                    data-icon="remove"\r\n                    data-type="closeDialog">\r\n            </button-switch>\r\n        </div>\r\n        <div ng-switch="vm.type">\r\n            <div \r\n                ng-switch-when="error"\r\n                class="evt-dialog-container-content"\r\n                compile="::vm.content"></div>\r\n            <div \r\n                ng-switch-default\r\n                class="evt-dialog-container-content" ng-transclude></div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.tabsContainer",[])},function(e,t,n){"use strict";angular.module("evtviewer.tabsContainer").provider("evtTabsContainer",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["$log","parsedData","evtInterface",function(t,n,i){var o={},r={},a=[],s=0,l=(t.getInstance("tabsContainer"),function(){var e=this.uid;delete r[e]}),c=function(e){this.subContentOpened=this.subContentOpened!==e?e:""},u=function(e,t){e.tabs[t].showSubTabs=!e.tabs[t].showSubTabs;var n=document.getElementById(t+"_subTabsIcon");n&&(n.className=e.tabs[t].showSubTabs?"fa fa-caret-down":"fa fa-caret-right")},d=function(e,t){var n=this;n.subContentOpened=e,t?n.subTabOpened=t:n.tabs[e].subTabs?(u(n,e),n.tabs[e].subTabs._indexes.indexOf(n.subTabOpened)<0&&(n.subTabOpened=n.tabs[e].subTabs._indexes[0]||"")):n.subTabOpened=""};return o.build=function(t){var o,p=t.id||s++,h=t.type||"",f=t.orientation||"vertical";if(void 0===r[p]){var g="<span>No content</span>",m={_indexes:[]};switch(h){case"projectInfo":if((_=n.getProjectInfo().fileDescription||"")&&""!==_&&(m.fileDescription={label:"PROJECT_INFO.FILE_DESCRIPTION",name:"fileDescription",content:_||g},m._indexes.push("fileDescription")),(E=n.getProjectInfo().encodingDescription||"")&&""!==E&&(m.encodingDescription={label:"PROJECT_INFO.ENCODING_DESCRIPTION",name:"encodingDescription",content:E||g},m._indexes.push("encodingDescription")),(S=n.getProjectInfo().textProfile||"")&&""!==S&&(m.textProfile={label:"PROJECT_INFO.TEXT_PROFILE",name:"textProfile",content:S||g},m._indexes.push("textProfile")),(T=n.getProjectInfo().outsideMetadata||"")&&""!==T&&(m.outsideMetadata={label:"PROJECT_INFO.OUTSIDE_METADATA",name:"outsideMetadata",content:T||g},m._indexes.push("outsideMetadata")),(C=n.getProjectInfo().revisionHistory||"")&&""!==C&&(m.revisionHistory={label:"PROJECT_INFO.REVISION_HISTORY",name:"revisionHistory",content:C||g},m._indexes.push("revisionHistory")),n.getBibliographicRefsCollection()._indexes.length>0){var v='<evt-bibliography data-id="mainBibliography"></evt-bibliography>';m.bibliography={label:"PROJECT_INFO.BIBLIOGRAPHY",name:"bibliography",content:v||g,scrollDisabled:!0},m._indexes.push("bibliography")}break;case"entitiesList":var b=n.getNamedEntitiesCollection();m._indexes=b._indexes;for(var y=0;y<b._indexes.length;y++){var x=b[k=b._indexes[y]]&&b[k]._icon?b[k]._icon:"fa-list-ul",w=b[k]&&b[k]._type?b[k]._type:k,A=b[k]&&b[k]._title?b[k]._title:k;m[k]={label:A,icon:x,name:k,content:'<evt-list data-list-id="'+k+'" data-list-type="'+w+'"></evt-list>',scrollDisabled:!0,noPadding:!0}}break;case"toc":var _,E,S,T,C;if(m.toc={label:"TOC.TITLE",name:"toc",content:"<evt-toc></evt-toc>"},m._indexes.push("toc"),(b=n.getNamedEntitiesCollection())&&b._indexes&&b._indexes.length>0){m.entitiesLists={label:"DIALOGS.NAMED_ENTITIES",name:"entitiesLists",content:"",subTabs:{_indexes:[]},showSubTabs:!1,noPadding:!0},m.entitiesLists.subTabs._indexes=b._indexes;for(y=0;y<b._indexes.length;y++){var k;x=b[k=b._indexes[y]]&&b[k]._icon?b[k]._icon:"fa-list-ul",w=b[k]&&b[k]._type?b[k]._type:k,A=b[k]&&b[k]._title?b[k]._title:k;m.entitiesLists.subTabs[k]={label:A,icon:x,name:k,content:'<evt-list data-list-id="'+k+'" data-list-type="'+w+'"></evt-list>',scrollDisabled:!0,noPadding:!0}}m._indexes.push("entitiesLists")}if(n.getBibliographicRefsCollection()._indexes.length>0){v='<evt-bibliography data-id="mainBibliography"></evt-bibliography>';m.bibliography={label:"PROJECT_INFO.BIBLIOGRAPHY",name:"bibliography",content:v||g,scrollDisabled:!0},m._indexes.push("bibliography")}m.projectInfo={label:"DIALOGS.PROJECT_INFO",name:"projectInfo",content:"",subTabs:{_indexes:[]},showSubTabs:!1},(_=n.getProjectInfo().fileDescription||"")&&""!==_&&(m.projectInfo.subTabs.fileDescription={label:"PROJECT_INFO.FILE_DESCRIPTION",name:"fileDescription",content:_||g},m.projectInfo.subTabs._indexes.push("fileDescription")),(E=n.getProjectInfo().encodingDescription||"")&&""!==E&&(m.projectInfo.subTabs.encodingDescription={label:"PROJECT_INFO.ENCODING_DESCRIPTION",name:"encodingDescription",content:E||g},m.projectInfo.subTabs._indexes.push("encodingDescription")),(S=n.getProjectInfo().textProfile||"")&&""!==S&&(m.projectInfo.subTabs.textProfile={label:"PROJECT_INFO.TEXT_PROFILE",name:"textProfile",content:S||g},m.projectInfo.subTabs._indexes.push("textProfile")),(T=n.getProjectInfo().outsideMetadata||"")&&""!==T&&(m.projectInfo.subTabs.outsideMetadata={label:"PROJECT_INFO.OUTSIDE_METADATA",name:"outsideMetadata",content:T||g},m.projectInfo.subTabs._indexes.push("outsideMetadata")),(C=n.getProjectInfo().revisionHistory||"")&&""!==C&&(m.projectInfo.subTabs.revisionHistory={label:"PROJECT_INFO.REVISION_HISTORY",name:"revisionHistory",content:C||g},m.projectInfo.subTabs._indexes.push("revisionHistory")),m._indexes.push("projectInfo")}var L,I,D=i.getProperty("tabsContainerOpenedContent"),P=i.getProperty("tabsContainerOpenedTab");return L=D||(m._indexes.length>0?m._indexes[0]:""),(I=P||(m[L].subTabs&&m[L].subTabs._indexes.length>0?m[L].subTabs._indexes[0]:""))&&(m[L].showSubTabs=!0),o={uid:p,type:h,orientation:f,defaults:angular.copy(e),tabs:m,subContentOpened:L,subTabOpened:I,toggleSubTabs:u,toggleSubContent:c,toggleSubTab:d,destroy:l},r[p]=angular.extend(t.vm,o),a.push({id:p,type:h}),r[p]}},o.setSubContentOpenedByType=function(e,t){angular.forEach(r,(function(n){n.type===e&&(n.subContentOpened=t)}))},o.setSubTabOpened=function(e,t,n){angular.forEach(r,(function(i){i.type===e&&(i.subContentOpened=t,i.subTabOpened=n)}))},o}]}))},function(e,t,n){"use strict";angular.module("evtviewer.tabsContainer").controller("TabsContainerCtrl",["$log",function(e){e.getInstance("tabsContainer").log("TabsContainerCtrl running")}])},function(e,t,n){"use strict";angular.module("evtviewer.tabsContainer").directive("evtTabsContainer",["evtTabsContainer","evtInterface",function(e,t){return{restrict:"E",scope:{type:"@",orientation:"@"},template:n(281),link:function(n,i,o){n.vm={id:n.id,type:n.type,orientation:n.orientation};var r=e.build(n);t.setTabContainerPanel(r.tabs),n.$watch((function(){return t.getHomePanel()}),(function(t,n){""!==n&&e.setSubContentOpenedByType("projectInfo",n)})),n.$on("$destroy",(function(){r&&("projectInfo"===r.type&&t.setHomePanel(""),r.destroy())}))}}}])},function(e,t){e.exports='<div class="evt-tabs-container {{ ::vm.orientation }}">\r\n    <div \r\n        class="evt-tabs-container_headers"\r\n        ng-class="{\'closed\': vm.subContentOpened === \'\'}">\r\n        \r\n        <span \r\n            class="evt-tabs-container_header"\r\n            ng-repeat-start="tab in ::vm.tabs._indexes"\r\n            ng-click="vm.toggleSubTab(tab)"\r\n            ng-class="{\'active\' : vm.subContentOpened === tab,\r\n                        \'hasSubTabs\': vm.tabs[tab].showSubTabs }">\r\n            <i ng-if="vm.tabs[tab].subTabs && vm.tabs[tab].subTabs._indexes.length > 0"\r\n               class="fa fa-caret-right"\r\n               id="{{tab + \'_subTabsIcon\'}}"></i>\r\n            <i ng-if="::vm.tabs[tab].icon" class="fa {{::vm.tabs[tab].icon}} evt-tabs-container_header-icon"></i>\r\n            {{ ::vm.tabs[tab].label | translate }}\r\n            {{DIALOGS._BOOKMARK | translate}}\r\n        </span>\r\n        <ul ng-repeat-end\r\n            class="evt-tabs-container_header_subTabs"\r\n            ng-class="{ \'hide\' : !vm.tabs[tab].subTabs || vm.tabs[tab].subTabs._indexes.length === 0 || !vm.tabs[tab].showSubTabs}">\r\n            <li class="evt-tabs-container_header_subTabs_tab"\r\n                ng-repeat="subTab in vm.tabs[tab].subTabs._indexes"\r\n                ng-click="vm.toggleSubTab(tab, subTab)"\r\n                ng-class="{\'active\' : vm.subTabOpened === subTab }">\r\n                <i ng-if="::vm.tabs[tab].subTabs[subTab].icon" class="fa {{::vm.tabs[tab].subTabs[subTab].icon}} evt-tabs-container_header-icon"></i>\r\n                {{ vm.tabs[tab].subTabs[subTab].label | translate }}\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div \r\n        class="evt-tabs-container_panels"\r\n        ng-if="!vm.subTabOpened"\r\n        ng-class="{\'closed\': vm.subContentOpened === \'\', \'noPadding\' : vm.subContentOpened === \'toc\' || vm.subContentOpened === \'entitiesLists\'}">\r\n        \r\n        <div class="evt-tabs-container_panel"\r\n            id="{{\'subTab_\' + tab}}"\r\n            ng-repeat="tab in vm.tabs._indexes"\r\n            ng-class="{\'active\' : vm.subContentOpened === tab,\r\n                        \'addPadding\': tab === \'intro\',\r\n                        \'noscroll\': vm.tabs[tab].scrollDisabled,\r\n                        \'noPadding\': vm.tabs[tab].noPadding }"\r\n            compile="vm.tabs[tab].content">\r\n        </div>\r\n    </div>\r\n    <div \r\n        class="evt-tabs-container_panels"\r\n        ng-if="vm.subTabOpened">\r\n        <div class="evt-tabs-container_panel"\r\n            id="{{\'subTab_\' + subTab}}"\r\n            ng-repeat="subTab in vm.tabs[vm.subContentOpened].subTabs._indexes"\r\n            ng-class="{\'active\' : vm.subTabOpened === subTab,\r\n                       \'noscroll\': vm.tabs[vm.subContentOpened].scrollDisabled,\r\n                       \'noPadding\': vm.tabs[vm.subContentOpened].noPadding }"\r\n            compile="vm.tabs[vm.subContentOpened].subTabs[subTab].content"></div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.toc",[])},function(e,t,n){"use strict";angular.module("evtviewer.toc").provider("evtToc",(function(){this.defaults;this.setDefaults=function(e){e},this.$get=["$log","parsedData","evtInterface",function(e,t,n){var i={},o={},r=[],a=0;e.getInstance("toc");return i.build=function(e){var n,i=a++;if(!o[i]){var s=t.getDocuments()._indexes,l=t.getDivs(),c=t.getDivs()._indexes.main,u=t.getDivs()._indexes.subDivs,d=t.getPages(),p={};return n={currentId:i,docs:s.map((function(e){var n=t.getDocument(e),i={value:n.value,title:n.title,pages:n.pages,divs:{front:[],body:[],back:[],length:0}};return angular.forEach(c[e],(function(e){var n=t.getDiv(e);i.divs[n.section].push(e),i.divs.length++})),p[e]=!1,i})),docsId:s,divs:l,mainDivs:c,subDivs:u,pages:d,keys:["front","body","back"],open:p},o[i]=angular.extend(e.vm,n),r.push({id:i}),o[i]}},i.destroy=function(e){delete o[e]},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.toc").controller("TocCtrl",["$log","evtInterface","parsedData","config",function(e,t,n,i){var o=e.getInstance("toc"),r=this,a=function(){for(var e=n.getEditions(),t=[],i=0;i<e.length;i++)e[i].visible&&t.push(e[i].value);return t};this.goToDiv=function(e,n){var i=a();"critical"!==t.getState("currentEdition")&&i.indexOf("critical")>-1&&t.updateState(currentEdition,"critical"),t.updateState("currentDoc",e),t.updateDiv(e,n),t.updateState("secondaryContent",""),t.updateUrl()},this.goToPage=function(e,n){var o=a();if("critical"===t.getState("currentEdition")&&o>0){var r=o.indexOf(i.defaultEdition)>-1?i.defaultEdition:o[0];t.updateState(currentEdition,r)}t.updateState("currentDoc",e),t.updateState("currentPage",n),t.updateState("secondaryContent",""),t.updateUrl()},this.openDetails=function(e){r.open[e]=!r.open[e]},o.log("TocCtrl running")}])},function(e,t,n){"use strict";angular.module("evtviewer.toc").directive("evtToc",["evtToc","evtInterface",function(e,t){return{restrict:"E",scope:{},transclude:!0,template:n(286),controllerAs:"vm",controller:"TocCtrl",link:function(t,n,i){var o=e.build(t);t.$on("$destroy",(function(){o&&e.destroy(o.currentId)}))}}}])},function(e,t){e.exports='<div class="toc">\r\n    <div class="toc_doc" ng-repeat="doc in vm.docs" ng-class="{ \'open\' : vm.open[doc.value] }">\r\n        <span class="toc_doc_head"\r\n            ng-click="vm.openDetails(doc.value)"\r\n            ng-class="{ \'open\' : vm.open[doc.value] }">{{doc.title}}</span>\r\n        <div ng-class="{ \'open\' : vm.open[doc.value] }" class="toc_doc_details">\r\n            <div ng-if="doc.divs.length > 0">\r\n                <span class="list_head">{{ \'TOC.DIVS\' | translate }}</span>\r\n                <ul ng-repeat="key in vm.keys">\r\n                    <span class="list_head_sub"\r\n                            ng-if="doc.divs[key].length > 0">{{ \'TOC.\' + key.toUpperCase() | translate }}</span>\r\n                  <li ng-repeat="div in doc.divs[key]"\r\n                      ng-click="vm.goToDiv(doc.value, div)">\r\n                      <span class="indexLink">{{vm.divs[div].title}}</span>\r\n                      <ul ng-if="vm.subDivs[div].length > 0">\r\n                          <li ng-repeat="subDiv in vm.subDivs[div]"\r\n                              ng-click="vm.goToDiv(doc.value, subDiv)">\r\n                              <span class="indexLink">{{vm.divs[subDiv].title}}</span>\r\n                          </li>\r\n                      </ul>\r\n                  </li>\r\n                </ul>\r\n            </div>\r\n            <div ng-if="doc.pages.length > 0">\r\n                <span class="list_head">{{ \'TOC.PAGES\' | translate }}</span>\r\n                <ul>\r\n                    <li ng-repeat="page in doc.pages"\r\n                        ng-click="vm.goToPage(doc.value, page)">\r\n                        <span class="indexLink">{{page}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.quote",[])},function(e,t,n){"use strict";angular.module("evtviewer.quote").constant("QUOTEDEFAULTS",{openTriggerEvent:"click"}).config(["evtQuoteProvider","configProvider","QUOTEDEFAULTS",function(e,t,n){var i=t.makeDefaults("quote",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.quote").provider("evtQuote",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};var t="";this.$get=["evtInterface",function(n){var i={},o={},r=[],a=0;return i.build=function(t){var s=a++,l=t.quoteId||void 0;if(void 0===o[s]){var c={uid:s,scopeWit:t.scopeWit||"",quoteId:l,scopeViewMode:n.getState("currentViewMode"),type:t.type||"",over:!1,apparatus:{opened:!1,content:{},_loaded:!1,inline:t.inlineApparatus},selected:l===i.getCurrentSourcesEntry(),openTriggerEvent:angular.copy(e.openTriggerEvent),defaults:angular.copy(e)};return o[s]=angular.extend(t.vm,c),r.push({id:s}),o[s]}},i.getById=function(e){if(void 0!==o[e])return o[e]},i.getList=function(){return r},i.setCurrentSourcesEntry=function(e){n.getState("currentQuote")!==e&&n.updateState("currentQuote",e),t=e},i.getCurrentSourcesEntry=function(){return t},i.mouseOutAll=function(){angular.forEach(o,(function(e){e.mouseOut()}))},i.mouseOverByQuoteId=function(e){angular.forEach(o,(function(t){t.quoteId===e?t.mouseOver():t.mouseOut()}))},i.unselectAll=function(){angular.forEach(o,(function(e){e.unselect()})),n.updateState("currentQuote","")},i.closeAllApparatus=function(e){angular.forEach(o,(function(t){(void 0===e||t.uid!==e)&&t.closeApparatus()}))},i.selectById=function(e){angular.forEach(o,(function(t){t.quoteId===e?t.setSelected():t.unselect()})),n.updateState("currentQuote",e),i.setCurrentSourcesEntry(e)},i.destroy=function(e){delete o[e]},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.quote").controller("QuoteCtrl",["$log","$scope","evtQuote","evtPopover","evtInterface","evtApparatuses","evtSourcesApparatusEntry","parsedData",function(e,t,n,i,o,r,a,s){var l=this;e.getInstance("quote");this.mouseOver=function(){l.over=!0},this.mouseOut=function(){l.over=!1},this.setSelected=function(){l.selected=!0},this.unselect=function(){l.selected=!1},this.isSelected=function(){return l.selected},this.isApparatusOpened=function(){return l.apparatus.opened&&!t.$parent.vm.state.topBoxOpened},this.closeApparatus=function(){l.apparatus.opened=!1},this.openApparatus=function(){l.apparatus.opened=!0,l.apparatus._loaded=!0},this.toggleOverQuotes=function(e){e.stopPropagation(),!1===l.over?(n.mouseOverByQuoteId(l.quoteId),a.mouseOverByQuoteId(l.quoteId)):(n.mouseOutAll(),a.mouseOutAll())},this.toggleSelectQuotes=function(e){!1===l.selected?(n.selectById(l.quoteId),a.selectById(l.quoteId),l.apparatus.inline||(r.setCurrentApparatus("sources"),r.alignScrollToQuote(l.quoteId)),o.updateState("currentQuote",l.quoteId)):(n.unselectAll(),o.updateState("currentQuote",""),a.unselectAll()),o.updateUrl()},this.toggleApparatus=function(e){i.closeAll(),l.over&&(l.apparatus._loaded||(l.apparatus._loaded=!0),n.closeAllApparatus(l.uid),l.apparatus.opened=!l.apparatus.opened)},this.callbackClick=function(e){e.stopPropagation(),l.over&&(l.toggleSelectQuotes(e),(!l.isSelected()||l.apparatus.inline&&!l.apparatus.opened)&&l.toggleApparatus(e))},this.openApparatusSubContent=function(e){l.apparatus._subContentOpened=e},this.hasScopeSource=function(){var e=s.getSources()._indexes.quotesRef[l.quoteId]||void 0,t=o.getState("currentSourceText");return void 0!==e&&e.indexOf(t)>=0},this.destroy=function(){n.destroy(this.uid)}}])},function(e,t,n){"use strict";angular.module("evtviewer.quote").directive("evtQuote",["evtQuote","evtInterface",function(e,t){return{restrict:"E",scope:{quoteId:"@",scopeWit:"@",type:"@"},transclude:!0,template:n(292),controllerAs:"vm",controller:"QuoteCtrl",link:function(n,i,o){n.inlineApparatus=t.isSourcesInline();var r=e.build(n);n.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<span \r\n    class="quote"\r\n    ng-mouseover="vm.toggleOverQuotes($event)"\r\n    ng-mouseout="vm.toggleOverQuotes($event)"\r\n    ng-class="{ \'selected\' : vm.isSelected() && !$parent.vm.state.topBoxOpened,\r\n                \'expansed\' : (!$parent.vm.state.topBoxOpened && vm.apparatus.opened && vm.apparatus.inline),\r\n                \'over\'     : vm.over,\r\n                \'blurred\'  : $parent.vm.state.topBoxOpened,\r\n                \'subquote\' : vm.type === \'subquote\',\r\n                \'noquotes\' : $parent.vm.selected,\r\n                \'highlight\': vm.hasScopeSource() && vm.scopeViewMode === \'srcTxt\'}">\r\n    <sup\r\n        class="iconbis-evt_quote-left"\r\n        ng-click="vm.callbackClick($event);"\r\n        title="{{ \'QUOTES.QUOTE_START\' | translate}}"\r\n        ng-if="(vm.type !== \'subquote\' && !$parent.vm.selected) || (vm.over && vm.type === \'subquote\' && !$parent.vm.selected)">\r\n    </sup>\r\n    <span \r\n        class="quote__text"\r\n        ng-click="vm.callbackClick($event);"\r\n        ng-transclude></span>\r\n    <sup\r\n        class="iconbis-evt_quote-right"\r\n        ng-click="vm.callbackClick($event);"\r\n        title="{{ \'QUOTES.QUOTE_END\' | translate}}"\r\n        ng-if="(vm.type !== \'subquote\' && !$parent.vm.selected) || (vm.over && vm.type === \'subquote\' && !$parent.vm.selected)">\r\n    </sup>\r\n\r\n    <evt-sources-apparatus-entry\r\n        ng-class="{\'blurred\': $parent.vm.state.topBoxOpened}"\r\n        ng-if="vm.apparatus._loaded && vm.apparatus.inline"\r\n        ng-show="vm.isApparatusOpened()"\r\n        data-quote-id="{{::vm.quoteId}}"\r\n        data-scope-wit="{{::vm.scopeWit}}">\r\n    </evt-sources-apparatus-entry>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry",[])},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").constant("SOURCESAPPENTRY",{firstSubContentOpened:""}).config(["evtSourcesApparatusEntryProvider","configProvider","SOURCESAPPENTRY",function(e,t,n){var i=t.makeDefaults("sourcesApparatusEntry",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").provider("evtSourcesApparatusEntry",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};var t="";this.$get=["parsedData","evtSourcesApparatus","evtInterface",function(n,i,o){var r={},a={},s=[],l=0;return r.build=function(t){var r=l++,c=(t.quoteId,t.scopeWit||"");if(void 0===a[r]){var u,d,p,h,f="",g={_indexes:[]},m={_indexes:[]},v=n.getQuote(t.quoteId);if(void 0!==v){for(var b in d=(u=i.getContent(v,c)).quote,(p=u.sources).length=u.sources.length,p)g._indexes.push(p[b].id),g[p[b].id]=p[b],g[p[b].id].tabs={_indexes:[]},""===g[p[b].id].text&&""===g[p[b].id].url||(g[p[b].id].tabs._indexes.push("text"),g[p[b].id].tabs.text={label:"SOURCES.TEXT"}),""!==g[p[b].id].bibl&&(g[p[b].id].tabs._indexes.push("biblRef"),g[p[b].id].tabs.biblRef={label:"SOURCES.BIBLIOGRAPHIC_REFERENCE"}),""!==g[p[b].id]._xmlSource&&(g[p[b].id].tabs._indexes.push("xmlSource"),g[p[b].id].tabs.xmlSource={label:"SOURCES.XML"});for(var y=p&&p[0]&&g[p[0].id]?g[p[0].id].tabs:{_indexes:[]},x=0;x<y._indexes.length;x++){var w=y._indexes[x];m._indexes.push(y._indexes[x]),m[w]=y[w]}""!==v._xmlSource&&(h=u._xmlSource),m._indexes.length>0&&""!==e.firstSubContentOpened&&(f=m._indexes.indexOf(e.firstSubContentOpened)<0?m._indexes[0]:e.firstSubContentOpened)}var A={uid:r,quoteId:t.quoteId,head:d,xml:h,sources:p,srcList:g,_activeSource:p[0]?p[0].id:void 0,_overSource:"",tabs:m,_subContentOpened:f,over:!1,selected:!1,currentViewMode:o.getState("currentViewMode")};return a[r]=angular.extend(t.vm,A),s.push({id:r}),a[r]}},r.getById=function(e){if(void 0!==a[e])return a[e]},r.getList=function(){return s},r.setCurrentSourcesEntry=function(e){o.getCurrentQuote!==e&&o.updateState("currentQuote",e),t=e},r.getCurrentSourcesEntry=function(){return t},r.mouseOutAll=function(){angular.forEach(a,(function(e){e.mouseOut()}))},r.mouseOverByQuoteId=function(e){angular.forEach(a,(function(t){t.quoteId===e?t.mouseOver():t.mouseOut()}))},r.unselectAll=function(){angular.forEach(a,(function(e){e.unselect()}))},r.selectById=function(e){angular.forEach(a,(function(t){t.quoteId===e?t.setSelected():(t.unselect(),t.closeSubContent())})),r.setCurrentSourcesEntry(e)},r.destroy=function(e){delete a[e]},r}]}))},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").controller("sourcesApparatusEntryCtrl",["$scope","evtSourcesApparatusEntry","evtQuote","evtBox","evtApparatuses","evtInterface","parsedData",function(e,t,n,i,o,r,a){e.content={};var s=this;this.toggleSource=function(e){if(s._activeSource!==e){s._activeSource=e,s.tabs={_indexes:[]};for(var t=s.srcList[s._activeSource].tabs,n=0;n<t._indexes.length;n++){var i=t._indexes[n];s.tabs._indexes.push(t._indexes[n]),s.tabs[i]=t[i]}}},this.toggleOverSource=function(e,t){s._overSource!==t?s._overSource=t:s._overSource=""},this.getActiveSourceAbbr=function(e){for(var t=0;t<s.sources.length;t++)if(s.sources[t].id===e)return s.sources[t].abbr},this.mouseOver=function(){s.over=!0},this.mouseOut=function(){s.over=!1},this.setSelected=function(){s.selected=!0},this.unselect=function(){s.selected=!1,s.closeSubContent()},this.isSelect=function(){return r.getState("currentQuote")===s.quoteId||s.selected},this.closeSubContent=function(){s._subContentOpened=""},this.toggleSubContent=function(e){s._subContentOpened!==e?s._subContentOpened=e:s._subContentOpened=""},this.toggleOverSourcesEntries=function(e){e.stopPropagation(),s.over?(t.mouseOutAll(),"readingTxt"===s.currentViewMode&&n.mouseOutAll()):(t.mouseOverByQuoteId(s.quoteId),"readingTxt"===s.currentViewMode&&n.mouseOverByQuoteId(s.quoteId))},this.callbackClick=function(e){e.stopPropagation(),"readingTxt"===s.currentViewMode&&(t.selectById(s.quoteId),n.selectById(s.quoteId))},this.alignQuotes=function(){i.alignScrollToQuote(s.quoteId),o.alignScrollToQuote(s.quoteId),n.selectById(s.quoteId)},this.isSourceTextAvailable=function(e){for(var t=a.getSources()._indexes.availableTexts,n=!1,i=0;i<t.length;i++)t[i].id===e&&(n=!0);return n},this.destroy=function(){t.destroy(this.uid)}}])},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").directive("evtSourcesApparatusEntry",["evtSourcesApparatusEntry","evtInterface",function(e,t){return{restrict:"E",scope:{quoteId:"@",scopeWit:"@"},transclude:!0,template:n(298),controllerAs:"vm",controller:"sourcesApparatusEntryCtrl",link:function(n,i,o){n.scopeViewMode=t.getState("currentViewMode");var r=e.build(n);n.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<div\r\n    class="sources-apparatus-entry"\r\n    ng-class="{ \'selected\' : vm.isSelect() && vm.currentViewMode == \'readingTxt\',\r\n                \'over\' : vm.currentViewMode === \'readingTxt\' && vm.over,\r\n                \'srctxt\' : vm.currentViewMode === \'srcTxt\'}"\r\n    ng-mouseover="vm.toggleOverSourcesEntries($event)"\r\n    ng-mouseout="vm.toggleOverSourcesEntries($event)"\r\n    ng-click="vm.callbackClick($event)">\r\n\r\n    <div class="sources-apparatus-entry_main-content"\r\n        ng-if="vm.currentViewMode !== \'srcTxt\'">\r\n        <div class="sources-apparatus-entry_tools">\r\n            <button-switch\r\n                title=" {{ \'BUTTONS.ALIGN_QUOTES\' | translate }}"\r\n                ng-if="vm.currentViewMode !== \'imgTxt\' && vm.currentViewMode !== \'srcTxt\'"\r\n                data-label=""\r\n                data-icon="v-align"\r\n                data-type="alignReadings"\r\n                ng-click="vm.alignQuotes()"></button-switch>\r\n        </div>\r\n        <sup\r\n            class="iconbis-evt_quote-left">\r\n        </sup>\r\n        <span class="sources-apparatus-entry_main-content_header" compile="vm.head"></span>\r\n\r\n    </div>\r\n\r\n    <div class="sources-apparatus-entry_main-content_list"\r\n        ng-class="{ \'srctxt\' : vm.currentViewMode === \'srcTxt\' }">\r\n        <span class="sources-apparatus-entry_main-content_list-label"\r\n          ng-if="vm.sources.length > 1"> {{ \'SOURCES.QUOTED_SOURCES\' | translate }} </span>\r\n        <ul\r\n            ng-class="{ \'pointer\' : (vm.over || vm.selected) && vm.sources.length > 1 && vm.currentViewMode !== \'srcTxt\'}">\r\n            <li\r\n                ng-repeat-start="source in ::vm.sources"\r\n                class="source-id"\r\n                ng-class="{ \'selected\' : vm.selected && vm.sources.length > 1 && source.id == vm._activeSource,\r\n                            \'over\'   : (vm.over || vm.selected) && vm.sources.length > 1 && source.id == vm._overSource && vm.currentViewMode !== \'srcTxt\'}"\r\n                ng-mouseover="vm.toggleOverSource($event, source.id)"\r\n                ng-mouseout="vm.toggleOverSource($event, source.id)"\r\n                ng-click="vm.toggleSource(source.id)"\r\n                compile="source.abbr">\r\n            </li>\r\n            <span class="compareLabel"\r\n                ng-if="vm.currentViewMode === \'srcTxt\' && vm.isSourceTextAvailable(source.id)"\r\n                ng-repeat-end>\r\n                <evt-source-ref\r\n                    data-source-id="{{::source.id}}">\r\n                    {{ \'SOURCES.COMPARE_TEXT\' | translate }}\r\n                </evt-source-ref>\r\n            </span>\r\n        </ul>\r\n    </div>\r\n    <div class="sources-apparatus-entry_other-content"\r\n         ng-if="vm.tabs._indexes.length > 0 && vm.currentViewMode !== \'srcTxt\'">\r\n        <div\r\n            class="sources-apparatus-entry_other-content_headers"\r\n            ng-class="{\'closed\' : vm._subContentOpened === \'\'}">\r\n            <span ng-repeat="tab in ::vm.tabs._indexes"\r\n                  ng-click="vm.toggleSubContent(tab)"\r\n                  ng-class="{\'active\' : vm._subContentOpened == tab }">\r\n                {{ vm.tabs[tab].label | translate}}\r\n            </span>\r\n        </div>\r\n        <div class="sources-apparatus-entry_other-content_panels"\r\n             ng-class="{\'closed\': vm._subContentOpened === \'\'}">\r\n            <div class="sources-apparatus-entry_other-content_panel"\r\n                 ng-repeat="tab in ::vm.tabs._indexes"\r\n                 ng-class="{\'active\' : vm._subContentOpened == tab}"\r\n                 ng-switch="::tab">\r\n                 <div ng-switch-when="text">\r\n                      <span\r\n                        ng-if="::vm.srcList[vm._activeSource].text != \'\'"\r\n                        compile="vm.srcList[vm._activeSource].text"></span>\r\n                      <span\r\n                        ng-if="::vm.srcList[vm._activeSource].url != \'\'"\r\n                        compile="vm.srcList[vm._activeSource].url"></span>\r\n                 </div>\r\n                 <div ng-switch-when="biblRef"\r\n                      ng-if="::vm.srcList[vm._activeSource].bibl !== \'\'"\r\n                      compile="vm.srcList[vm._activeSource].bibl">\r\n                </div>\r\n                <div ng-switch-when="moreInfo">\r\n\r\n                </div>\r\n                <div ng-switch-when="xmlSource">\r\n                    {{ \'SOURCES.XML_SOURCE_QUOTE\' | translate }}\r\n                    <pre>{{ ::vm.xml | newLinesToSpaces | normalizeMultispaces | prettyXml }}</pre>\r\n                    {{ \'SOURCES.XML_SOURCE_FOR\' | translate }} <span compile="vm.getActiveSourceAbbr(vm._activeSource)"></span>\r\n                     <pre>{{ ::vm.srcList[vm._activeSource]._xmlSource | newLinesToSpaces | normalizeMultispaces | prettyXml }}</pre>\r\n                </div>\r\n                <div\r\n                    ng-switch-default\r\n                    ng-if="::vm.srcList[vm._activeSource].bibl !== \'\'"\r\n                    compile="vm.srcList[vm._activeSource].bibl"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").directive("evtSourceRef",["evtBox","evtInterface","parsedData","evtSourceSeg","evtApparatuses",function(e,t,i,o,r){return{restrict:"E",scope:{sourceId:"@",sourceAbbr:"@"},transclude:!0,template:n(300),link:function(n,o,a){n.openSource=function(){var o=n.sourceId;t.getState("currentSourceText")!==o&&(t.updateCurrentSourceText(o),t.updateState("currentSource",o)),"srcTxt"!==t.getState("currentViewMode")&&t.updateState("currentViewMode","srcTxt");var a="",s="",l=t.getState("currentQuote")||"",c=i.getSources()._indexes.correspId[n.sourceId]||[];for(var u in Object.keys(c))for(var d=0;d<c[Object.keys(c)[u]].length;d++)c[Object.keys(c)[u]][d]===l&&(a=c[Object.keys(c)[u]][d],s=Object.keys(c)[u]);""!==a&&""!==s&&(e.alignScrollToQuote(a,s),r.alignScrollToQuote(a,s))}}}}])},function(e,t){e.exports='<span class="source-ref"\r\n      ng-click="openSource()">\r\n      <span class="source-ref_text"\r\n            ng-transclude></span>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").provider("evtSourceSeg",(function(){var e="";this.$get=["parsedData","evtSourcesApparatus","evtInterface",function(t,n,i){var o={},r={},a=[],s=0;return o.build=function(e){var o,l=s++,c=e.segId||void 0,u=e.sourceId||void 0;if(void 0===r[l]){for(var d,p=i.getState("currentQuote")||"",h=[],f=t.getSources()._indexes.correspId[u][c],g=0;g<f.length;g++)d=n.getContent(t.getQuote(f[g]),"").quote,h.push({id:f[g],text:d});f.indexOf(p)>=0&&(o=p);var m={uid:l,segId:c,quoteId:o,sourceId:u,over:!1,selected:!1,panel:{quotes:h,_quoteOver:"",_quoteSelected:o||""}};return r[l]=angular.extend(e.vm,m),a.push({id:l}),r[l]}},o.getById=function(e){if(void 0!==r[e])return r[e]},o.getList=function(){return a},o.mouseOutAll=function(){angular.forEach(r,(function(e){e.mouseOut()}))},o.mouseOverBySegId=function(e){angular.forEach(r,(function(t){t.segId===e?t.mouseOver():t.mouseOut()}))},o.selectBySegId=function(e){angular.forEach(r,(function(t){t.segId===e?t.setSelected():(t.unselect(),t.unselectQuote())}))},o.unselectAll=function(){angular.forEach(r,(function(e){e.unselect(),e.unselectQuote()}))},o.updateCurrentQuote=function(t){e!==t&&angular.forEach(r,(function(n){for(var i=n.panel.quotes,o=0;o<i.length;o++)i[o].id===t&&n.getQuoteId()!==t&&(n.setQuoteId(t),e=t)}))},o.getCurrentQuote=function(){return e},o.destroy=function(e){delete r[e]},o}]}))},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").controller("sourceSegCtrl",["evtSourceSeg","evtBox","evtQuote","evtApparatuses",function(e,t,n,i){var o=this;this.mouseOver=function(){o.over=!0},this.mouseOut=function(){o.over=!1},this.setSelected=function(){o.selected=!0},this.unselect=function(){o.selected=!1},this.getQuoteId=function(){return o.quoteId},this.setQuoteId=function(e){o.quoteId!==e&&(o.quoteId=e)},this.unselectQuote=function(){o.panel._quoteOver="",o.panel._quoteSelected=""},this.toggleOverSeg=function(t,n){t.stopPropagation(),!1===o.over?e.mouseOverBySegId(n):e.mouseOutAll()},this.callbackClick=function(t,n){t.stopPropagation(),o.selected?e.unselectAll():e.selectBySegId(n)},this.toggleQuoteOver=function(t,n){t.stopPropagation(),o.panel._quoteOver!==n?(e.mouseOutAll(),o.panel._quoteOver=n):o.panel._quoteOver=""},this.selectQuote=function(r,a){r.stopPropagation(),o.quoteId=a,o.panel._quoteSelected=a,e.updateCurrentQuote(a),n.selectById(a),t.alignScrollToQuote(a,o.segId),i.alignScrollToQuote(a,o.segId)},this.destroy=function(){e.destroy(this.uid)}}])},function(e,t,n){"use strict";angular.module("evtviewer.sourcesApparatusEntry").directive("evtSourceSeg",["evtSourceSeg",function(e){return{restrict:"E",scope:{segId:"@",sourceId:"@"},transclude:!0,template:n(304),controllerAs:"vm",controller:"sourceSegCtrl",link:function(t,n,i){var o=e.build(t);t.$on("$destroy",(function(){o&&o.destroy()}))}}}])},function(e,t){e.exports='<span class="source-seg">\r\n    <sup\r\n        class="iconbis-evt_quote-left"\r\n        title="Quoted in the main text">\r\n    </sup>\r\n    <span\r\n        class="source-seg_text"\r\n        data-quote-id="{{vm.quoteId}}"\r\n        ng-mouseover="vm.toggleOverSeg($event, vm.segId)"\r\n        ng-mouseout="vm.toggleOverSeg($event, vm.segId)"\r\n        ng-click="vm.callbackClick($event, vm.segId)"\r\n        ng-class="{ \'over\': vm.over,\r\n                    \'selected\': vm.selected }"\r\n        ng-transclude></span>\r\n    <sup\r\n        class="iconbis-evt_quote-right"\r\n        title="Quoted in the main text">\r\n    </sup>\r\n    <div\r\n        class="source-seg_panel"\r\n        ng-if="vm.selected">\r\n        <span\r\n            class="source-seg_panel_label">\r\n            Related quotes:\r\n        </span>\r\n        <ul>\r\n            <li\r\n                ng-repeat="quote in ::vm.panel.quotes"\r\n                class="quoteText inSourceSeg"\r\n                ng-class="{ \'over\' : vm.panel._quoteOver == quote.id,\r\n                            \'selected\' : vm.panel._quoteSelected == quote.id}"\r\n                ng-mouseover="vm.toggleQuoteOver($event, quote.id)"\r\n                ng-mouseout="vm.toggleQuoteOver($event, quote.id)"\r\n                ng-click="vm.selectQuote($event, quote.id)"\r\n                title="Compare texts"\r\n                compile="quote.text">\r\n                \x3c!--button-switch\r\n                    title="Expand text"\r\n                    data-label="..."\r\n                    data-type="cropText"\r\n                    class="cropText_btn"></button-switch--\x3e\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.analogue",[])},function(e,t,n){"use strict";angular.module("evtviewer.analogue").constant("ANALOGUEDEFAULTS",{}).config(["evtAnalogueProvider","configProvider","ANALOGUEDEFAULTS",function(e,t,n){var i=t.makeDefaults("analogue",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.analogue").provider("evtAnalogue",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};var t="";this.$get=["evtInterface",function(n){var i={},o={},r=[],a=0;return i.build=function(t){var s=a++,l=t.analogueId||void 0;if(void 0===o[s]){var c={uid:s,scopeWit:t.scopeWit||"",analogueId:l,scopeViewMode:n.getState("currentViewMode"),over:!1,selected:l===i.getCurrentAnaloguesEntry(),apparatus:{opened:!1,content:{},_loaded:!1,inline:t.inlineApparatus},openTriggerEvent:angular.copy(e.openTriggerEvent),defaults:angular.copy(e)};return o[s]=angular.extend(t.vm,c),r.push({id:s}),o[s]}},i.getById=function(e){if(void 0!==o[e])return o[e]},i.getList=function(){return r},i.setCurrentAnaloguesEntry=function(e){n.getState("currentAnalogue")!==e&&n.updateState("currentAnalogue",e),t=e},i.getCurrentAnaloguesEntry=function(){return t},i.mouseOutAll=function(){angular.forEach(o,(function(e){e.mouseOut()}))},i.mouseOverByAnalogueId=function(e){angular.forEach(o,(function(t){t.analogueId===e?t.mouseOver():t.mouseOut()}))},i.unselectAll=function(){angular.forEach(o,(function(e){e.unselect()})),n.updateState("currentAnalogue","")},i.closeAllApparatus=function(e){angular.forEach(o,(function(t){(void 0===e||t.uid!==e)&&t.closeApparatus()}))},i.selectById=function(e){angular.forEach(o,(function(t){t.analogueId===e?t.setSelected():t.unselect()})),n.updateState("currentAnalogue",e),i.setCurrentAnaloguesEntry(e)},i.destroy=function(e){delete o[e]},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.analogue").controller("AnalogueCtrl",["$log","$scope","evtAnalogue","evtPopover","evtInterface","evtApparatuses","evtAnaloguesApparatusEntry",function(e,t,n,i,o,r,a){var s=this;e.getInstance("analogue");this.mouseOver=function(){s.over=!0},this.mouseOut=function(){s.over=!1},this.setSelected=function(){s.selected=!0},this.unselect=function(){s.selected=!1},this.isSelect=function(){return s.selected},this.isApparatusOpened=function(){return s.apparatus.opened&&!t.$parent.vm.state.topBoxOpened},this.closeApparatus=function(){s.apparatus.opened=!1},this.openApparatus=function(){s.apparatus.opened=!0},this.toggleOverAnalogues=function(e){e.stopPropagation(),!1===s.over?(n.mouseOverByAnalogueId(s.analogueId),a.mouseOverByAnalogueId(s.analogueId)):(n.mouseOutAll(),a.mouseOutAll())},this.toggleSelectAnalogues=function(e){!1===s.selected?s.apparatus.opened||n.selectById(s.analogueId):s.apparatus.opened&&(n.unselectAll(),n.closeAllApparatus()),o.updateUrl()},this.toggleApparatus=function(e){i.closeAll(),s.over&&(s.apparatus.inline?s.apparatus._loaded||(s.apparatus._loaded=!0):("analogues"!==r.getCurrentApparatus()&&r.setCurrentApparatus("analogues"),a.selectById(s.analogueId),r.alignScrollToAnalogue(s.analogueId)),n.closeAllApparatus(s.uid),s.apparatus.opened=!s.apparatus.opened)},this.callbackClick=function(e){e.stopPropagation(),s.over&&(s.toggleSelectAnalogues(e),s.isSelect()&&!s.apparatus.opened?s.toggleApparatus(e):a.unselectAll())},this.destroy=function(){n.destroy(this.uid)}}])},function(e,t,n){"use strict";angular.module("evtviewer.analogue").directive("evtAnalogue",["evtAnalogue","evtInterface",function(e,t){return{restrict:"E",scope:{analogueId:"@",scopeWit:"@"},transclude:!0,template:n(310),controllerAs:"vm",controller:"AnalogueCtrl",link:function(n,i,o){n.inlineApparatus=t.isAnaloguesInline();var r=e.build(n);n.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<span\r\n    class="analogue"\r\n    ng-mouseover="vm.toggleOverAnalogues($event)"\r\n    ng-mouseout="vm.toggleOverAnalogues($event)"\r\n    ng-class="{ \'selected\' : vm.isSelect() && !$parent.vm.state.topBoxOpened,\r\n                \'expansed\' : (!$parent.vm.state.topBoxOpened && vm.apparatus.opened && vm.apparatus.inline),\r\n                \'over\'     : vm.over,\r\n                \'blurred\'  : $parent.vm.state.topBoxOpened}">\r\n    <i\r\n        class="iconbis-evt_analogue"\r\n        title="{{ \'ANALOGUES.ANALOGUE\' | translate}}"\r\n        ng-click="vm.callbackClick($event)"\r\n        ng-if="(vm.type !== \'subquote\' && !$parent.vm.selected) || (vm.over && vm.type === \'subquote\' && !$parent.vm.selected)">\r\n    </i>\r\n    <span\r\n        class="analogue__text"\r\n        ng-click="vm.callbackClick($event)"\r\n        ng-transclude></span>\r\n        \r\n    <evt-analogues-apparatus-entry\r\n        ng-class="{\'blurred\': $parent.vm.state.topBoxOpened}"\r\n        ng-if="vm.apparatus._loaded && vm.apparatus.inline"\r\n        ng-show="vm.isApparatusOpened()"\r\n        data-analogue-id="{{::vm.analogueId}}"\r\n        data-scope-wit="{{::vm.scopeWit}}">\r\n    </evt-analogues-apparatus-entry>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.analoguesApparatusEntry",[])},function(e,t,n){"use strict";angular.module("evtviewer.analoguesApparatusEntry").constant("ANALOGUESAPPENTRY",{firstSubContentOpened:""}).config(["evtAnaloguesApparatusEntryProvider","configProvider","ANALOGUESAPPENTRY",function(e,t,n){var i=t.makeDefaults("analoguesApparatusEntry",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.analoguesApparatusEntry").provider("evtAnaloguesApparatusEntry",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};var t="";this.$get=["parsedData","evtAnaloguesApparatus","evtInterface",function(n,i,o){var r={},a={},s=[],l=0;return r.build=function(t){var r=l++,c=(t.analogueId,t.scopeWit||"");if(void 0===a[r]){var u,d,p,h,f,g="",m={_indexes:[]},v={_indexes:[]},b=n.getAnalogue(t.analogueId);if(void 0!==b){for(var y in d=(u=i.getContent(b,c)).header,(p=u.sources).length=u.sources.length,p)m._indexes.push(p[y].id),m[p[y].id]=p[y],m[p[y].id].tabs={_indexes:[]},""!==m[p[y].id].text&&(m[p[y].id].tabs._indexes.push("text"),m[p[y].id].tabs.text={label:"ANALOGUES.TEXT"}),""!==m[p[y].id].bibl&&(m[p[y].id].tabs._indexes.push("biblRef"),m[p[y].id].tabs.biblRef={label:"ANALOGUES.BIBLIOGRAPHIC_REFERENCE"}),""!==m[p[y].id]._xmlSource&&(m[p[y].id].tabs._indexes.push("xmlSource"),m[p[y].id].tabs.xmlSource={label:"ANALOGUES.XML"});for(var x=m[p[0].id].tabs,w=0;w<x._indexes.length;w++){var A=x._indexes[w];v._indexes.push(x._indexes[w]),v[A]=x[A]}""!==b._xmlSource&&(f=u._xmlSource),v._indexes.length>0&&""!==e.firstSubContentOpened&&(g=v._indexes.indexOf(e.firstSubContentOpened)<0?v._indexes[0]:e.firstSubContentOpened)}h=void 0!==p&&void 0!==p[0].id?p[0].id:void 0;var _={uid:r,analogueId:t.analogueId,header:d,xml:f,sources:p,srcList:m,_activeSource:h,_overSource:"",tabs:v,_subContentOpened:g,over:!1,selected:!1,currentViewMode:o.getState("currentViewMode")};return a[r]=angular.extend(t.vm,_),s.push({id:r}),a[r]}},r.getById=function(e){if(void 0!==a[e])return a[e]},r.getList=function(){return s},r.setCurrentAnaloguesEntry=function(e){o.getCurrentAnalogue!==e&&o.updateState("currentAnalogue",e),t=e},r.getCurrentAnaloguesEntry=function(){return t},r.mouseOutAll=function(){angular.forEach(a,(function(e){e.mouseOut()}))},r.mouseOverByAnalogueId=function(e){angular.forEach(a,(function(t){t.analogueId===e?t.mouseOver():t.mouseOut()}))},r.unselectAll=function(){angular.forEach(a,(function(e){e.unselect()}))},r.selectById=function(e){angular.forEach(a,(function(t){t.analogueId===e?t.setSelected():(t.unselect(),t.closeSubContent())})),r.setCurrentAnaloguesEntry(e)},r.destroy=function(e){delete a[e]},r}]}))},function(e,t,n){"use strict";angular.module("evtviewer.analoguesApparatusEntry").controller("analoguesApparatusEntryCtrl",["evtAnaloguesApparatusEntry","evtInterface","evtAnalogue","evtBox","evtApparatuses",function(e,t,n,i,o){var r=this;this.toggleSource=function(e){if(r._activeSource!==e){r._activeSource=e,r.tabs={_indexes:[]};for(var t=r.srcList[r._activeSource].tabs,n=0;n<t._indexes.length;n++){var i=t._indexes[n];r.tabs._indexes.push(t._indexes[n]),r.tabs[i]=t[i]}}},this.toggleOverSource=function(e,t){r._overSource!==t?r._overSource=t:r._overSource=""},this.getActiveSourceAbbr=function(e){for(var t=0;t<r.sources.length;t++)if(r.sources[t].id===e)return r.sources[t].abbr},this.toggleSubContent=function(e){r._subContentOpened!==e?r._subContentOpened=e:r._subContentOpened=""},this.mouseOver=function(){r.over=!0},this.mouseOut=function(){r.over=!1},this.setSelected=function(){r.selected=!0},this.unselect=function(){r.selected=!1,r.closeSubContent()},this.isSelect=function(){return t.getState("currentAnalogue")===r.analogueId||r.selected},this.closeSubContent=function(){r._subContentOpened=""},this.toggleOverAnaloguesEntries=function(t){t.stopPropagation(),r.over?(e.mouseOutAll(),"readingTxt"===r.currentViewMode&&n.mouseOutAll()):(e.mouseOverByAnalogueId(r.analogueId),"readingTxt"===r.currentViewMode&&n.mouseOverByAnalogueId(r.analogueId))},this.callbackClick=function(t){t.stopPropagation(),"readingTxt"===r.currentViewMode&&(e.selectById(r.analogueId),n.selectById(r.analogueId))},this.alignAnalogues=function(){i.alignScrollToAnalogue(r.analogueId),o.alignScrollToAnalogue(r.analogueId),n.selectById(r.analogueId)},this.destroy=function(){e.destroy(this.uid)}}])},function(e,t,n){"use strict";angular.module("evtviewer.analoguesApparatusEntry").directive("evtAnaloguesApparatusEntry",["evtAnaloguesApparatusEntry","evtInterface",function(e,t){return{restrict:"E",scope:{analogueId:"@",scopeWit:"@"},transclude:!0,template:n(316),controllerAs:"vm",controller:"analoguesApparatusEntryCtrl",link:function(n,i,o){n.scopeViewMode=t.getState("currentViewMode");var r=e.build(n);n.$on("$destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<div class="analogues-apparatus-entry"\r\n     ng-class="{ \'selected\' : vm.isSelect() && vm.currentViewMode == \'readingTxt\',\r\n                 \'over\' : vm.currentViewMode === \'readingTxt\' && vm.over}"\r\n     ng-mouseover="vm.toggleOverAnaloguesEntries($event)"\r\n     ng-mouseout="vm.toggleOverAnaloguesEntries($event)"\r\n     ng-click="vm.callbackClick($event)">\r\n    \r\n    <div class="analogues-apparatus-entry_main-content">\r\n        <div\r\n            class="analogues-apparatus-entry_tools">\r\n            <button-switch \r\n                title="{{ \'BUTTONS.ALIGN_ANALOGUES\' | translate }} "\r\n                ng-if="vm.currentViewMode !== \'imgTxt\' && vm.currentViewMode !== \'srcTxt\'"\r\n                data-label=""\r\n                data-icon="v-align"\r\n                data-type="alignReadings"\r\n                ng-click="vm.alignAnalogues()"></button-switch>\r\n        </div>\r\n        <sup\r\n            class="iconbis-evt_analogue">\r\n        </sup>\r\n        <span class="analogues-apparatus-entry_main-content_header" compile="vm.header"></span>\r\n        \r\n    </div>\r\n    \r\n    <div class="analogues-apparatus-entry_main-content_list">\r\n        <span class="analogues-apparatus-entry_main-content_list-label"> {{\'ANALOGUES.PARALLEL_PASSAGES_IN\' | translate}} </span>\r\n        <ul ng-class="{ \'pointer\' : (vm.over || vm.selected) && vm.sources.length > 1}">\r\n            <li\r\n                ng-repeat="source in ::vm.sources"\r\n                class="source-id"\r\n                ng-class="{ \'selected\' : vm.selected && vm.sources.length > 1 && source.id == vm._activeSource,\r\n                            \'over\'   : (vm.over || vm.selected) && vm.sources.length > 1 && source.id == vm._overSource}"\r\n                ng-mouseover="vm.toggleOverSource($event, source.id)"\r\n                ng-mouseout="vm.toggleOverSource($event, source.id)"\r\n                ng-click="vm.toggleSource(source.id)"\r\n                compile="source.abbr">\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="analogues-apparatus-entry_other-content"\r\n         ng-if="vm.tabs._indexes.length > 0">\r\n        <div class="analogues-apparatus-entry_other-content_headers">\r\n            <span class="analogues-apparatus-entry_tabLabel" ng-repeat="tab in ::vm.tabs._indexes"\r\n                  ng-click="vm.toggleSubContent(tab)"\r\n                  ng-class="{\'active\' : vm._subContentOpened == tab }">\r\n                {{ vm.tabs[tab].label | translate }}\r\n            </span>\r\n        </div>\r\n        <div class="analogues-apparatus-entry_other-content_panels"\r\n             ng-class="{\'closed\': vm._subContentOpened === \'\'}">\r\n            <div class="analogues-apparatus-entry_other-content_panel"\r\n                 ng-repeat="tab in ::vm.tabs._indexes"\r\n                 ng-class="{\'active\' : vm._subContentOpened == tab}"\r\n                 ng-switch="::tab">\r\n                 <div ng-switch-when="text"\r\n                      compile="vm.srcList[vm._activeSource].text">\r\n\r\n                 </div>\r\n                 <div ng-switch-when="biblRef"\r\n                      ng-if="::vm.srcList[vm._activeSource].bibl !== \'\'"\r\n                      compile="vm.srcList[vm._activeSource].bibl">\r\n                </div>\r\n                \x3c!--div ng-switch-when="moreInfo">\r\n                    TODO\r\n                </div--\x3e\r\n                <div ng-switch-when="xmlSource">\r\n                     <span class="xml-title"> {{ \'ANALOGUES.XML_SOURCE_FOR\' | translate}} {{ \'ANALOGUES.ANALOGUE\' | translate}} </span>\r\n                     <pre>{{ ::vm.xml | newLinesToSpaces | normalizeMultispaces | prettyXml}}</pre>\r\n                     <span class="xml-title">\r\n                         {{ \'ANALOGUES.XML_SOURCE_FOR\' | translate}} \r\n                         <span compile="vm.getActiveSourceAbbr(vm._activeSource)">\r\n                     </span>\r\n                     <pre>{{ ::vm.srcList[vm._activeSource]._xmlSource }}</pre>\r\n                </div>\r\n                <div\r\n                    ng-switch-default\r\n                    ng-if="::vm.srcList[vm._activeSource].bibl !== \'\'"\r\n                    compile="vm.srcList[vm._activeSource].bibl"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.apparatuses",[])},function(e,t,n){"use strict";angular.module("evtviewer.apparatuses").constant("APPARATUSESDEFAULTS",{currentApparatus:"Critical Apparatus",apparatusesOrder:["Sources","Critical Apparatus","Analogues"],appStructure:"tabs"}).config(["evtApparatusesProvider","configProvider","APPARATUSESDEFAULTS",function(e,t,n){var i=t.makeDefaults("apparatuses",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.apparatuses").provider("evtApparatuses",(function(){var e=this.defaults;this.setDefaults=function(t){e=t};this.$get=["parsedData","evtInterface",function(t,n){var i={},o={},r=[],a=0;return i.build=function(i){var s=a++;if(void 0===o[s]){i.currentApparatus;var l={_indexes:[]},c=e.appStructure,u=[],d=[],p=[],h=t.getCriticalEntries(),f=t.getQuotes(),g=t.getAnalogues();if(h._indexes.appEntries)for(var m=0;m<h._indexes.appEntries.length;m++){var v=h._indexes.appEntries[m];!h[v]||void 0!==h[v]._isInMainVersion&&!0!==h[v]._isInMainVersion||u.push(v)}if(f._indexes.encodingStructure)for(var b=0;b<f._indexes.encodingStructure.length;b++){var y=f._indexes.encodingStructure[b];!f[y]||void 0!==f[y]._isInMainVersion&&!0!==f[y]._isInMainVersion||d.push(y)}if(g._indexes.encodingStructure)for(var x=0;x<g._indexes.encodingStructure.length;x++){var w=g._indexes.encodingStructure[x];!g[w]||void 0!==g[w]._isInMainVersion&&!0!==g[w]._isInMainVersion||p.push(w)}!n.isCriticalApparatusInline()&&u.length>0&&(l.criticalApparatus={label:"APPARATUSES.CRITICAL_APPARATUS",visibleList:u.slice(0,10),list:u},l._indexes.push("criticalApparatus")),!n.isSourcesInline()&&d.length>0&&(l.sources={label:"APPARATUSES.SOURCES",visibleList:d.slice(0,10),list:d},l._indexes.push("sources")),!n.isAnaloguesInline()&&p.length>0&&(l.analogues={label:"APPARATUSES.ANALOGUES",visibleList:p.slice(0,10),list:p},l._indexes.push("analogues")),l._indexes.length>0&&n.updateState("currentApparatus",l._indexes[0]);var A={isLoading:!0,uid:s,currentApparatus:l._indexes.length>0?l._indexes[0]:"",apparatuses:l,appStructure:c};return o[s]=angular.extend(i.vm,A),r.push({id:s}),o[s]}},i.setCurrentApparatus=function(e){n.updateState("currentApparatus",e),angular.forEach(o,(function(t){t.setCurrentApparatus(e)}))},i.getCurrentApparatus=function(){return"".currentApparatus},i.alignScrollToApp=function(e){for(var t in o)void 0!==o[t].scrollToAppEntry&&o[t].scrollToAppEntry(e)},i.alignScrollToQuote=function(e,t){for(var n in o)void 0!==o[n].scrollToQuotesEntry&&("source"===o[n].type?o[n].scrollToQuotesEntry(t):o[n].scrollToQuotesEntry(e))},i.alignScrollToAnalogue=function(e){for(var t in o)void 0!==o[t].scrollToAnaloguesEntry&&o[t].scrollToAnaloguesEntry(e)},i.destroy=function(e){delete o[e]},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.apparatuses").controller("apparatusesCtrl",["$timeout","evtApparatuses",function(e,t){var n=this;this.setCurrentApparatus=function(t){t!==n.currentApparatus&&n.apparatuses[t]&&(n.loading=!0,n.currentApparatus=t,n.apparatuses[t].visibleList=n.apparatuses[t].list.slice(0,10),e((function(){n.loading=!1})))},this.getCurrentApparatus=function(){return n.currentApparatus},this.toggleAppStructure=function(e){n.appStructure!==e&&(n.appStructure=e)},this.toggleOpenApparatus=function(e){n.openApparatus!==e&&(n.openApparatus=e)},this.getVisibleList=function(e){return n.apparatuses[e]?n.apparatuses[e].visibleList:[]},this.getAppList=function(e){return n.apparatuses[e]?n.apparatuses[e].list:[]},this.loadMoreElements=function(){for(var e=n.currentApparatus,t=n.apparatuses[e].visibleList.length,i=0;i<5&&i<n.apparatuses[e].list.length;){var o=n.apparatuses[e].list[t+i];o&&n.apparatuses[e].visibleList.indexOf(o)<=0&&n.apparatuses[e].visibleList.push(o),i++}},this.destroy=function(){t.destroy(this.uid)}}])},function(e,t,n){"use strict";(function(e){angular.module("evtviewer.apparatuses").directive("evtApparatuses",["$timeout","evtApparatuses","evtInterface","evtCriticalApparatusEntry",function(t,i,o,r){return{restrict:"E",scope:{currentApparatus:"@"},transclude:!0,template:n(322),controllerAs:"vm",controller:"apparatusesCtrl",link:function(n,a,s){var l=i.build(n);if(n.$on("$destroy",(function(){l&&l.destroy()})),n.vm.scrollToAppEntry=function(n){var i="criticalApparatus";if(l.apparatuses[i]){var o=e("#apparatuses_"+l.uid).find("[data-app-id='"+n+"']");o.length<=0&&(l.isLoading=!0),t((function(){var e=angular.element(a).find(".apparatuses_content_body")[0],t=1*window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");o.length<=0?(l.isLoading=!0,l.apparatuses[i].list.indexOf(n)>=0&&(i===l.currentApparatus?(l.loadMoreElements("criticalApparatus"),l.scrollToAppEntry(n)):l.isLoading=!1)):void 0!==o[0]&&(e.scrollTop=o[0].offsetTop-3*t,l.isLoading=!1)}))}},n.vm.scrollToQuotesEntry=function(n){if(l.apparatuses.sources){var i=e("#apparatuses_"+l.uid).find("[data-quote-id='"+n+"']");i.length<=0&&(l.isLoading=!0),t((function(){var e=angular.element(a).find(".apparatuses_content_body")[0],t=1*window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");i.length<=0?(l.isLoading=!0,l.apparatuses.sources.list.indexOf(n)>=0&&("sources"===l.currentApparatus?(l.loadMoreElements("sources"),l.scrollToQuotesEntry(n)):l.isLoading=!1)):void 0!==i[0]&&(e.scrollTop=i[0].offsetTop-3*t,l.isLoading=!1)}))}},n.vm.scrollToAnaloguesEntry=function(i){if(n.vm.apparatuses.analogues){var o=e("#apparatuses_"+l.uid).find("[data-analogue-id='"+i+"']");o.length<=0&&(l.isLoading=!0),t((function(){var e=angular.element(a).find(".apparatuses_content_body")[0],t=1*window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");o.length<=0?(l.isLoading=!0,l.apparatuses.analogues.list.indexOf(i)>=0&&("analogues"===l.currentApparatus?(l.loadMoreElements("analogues"),l.scrollToAnaloguesEntry(i)):l.isLoading=!1)):void 0!==o[0]&&(e.scrollTop=o[0].offsetTop-3*t,l.isLoading=!1)}))}},"criticalApparatus"===l.currentApparatus){var c=o.getState("currentAppEntry");c?(n.vm.scrollToAppEntry(c),t((function(){r.selectById(c)}),200)):l.isLoading=!1}else t((function(){l.isLoading=!1}),200)}}}])}).call(this,n(0))},function(e,t){e.exports='\x3c!--BUTTONS TO SWITCH THE VIEW MODE OF THE APPARATUSES--\x3e\r\n\x3c!--div\r\n    class="apparatuses_switch-mode-buttons">\r\n    <button\r\n        type="button"\r\n        ng-click="vm.toggleAppStructure(\'tabs\')"\r\n        class="tabs-button">\r\n        Switch to tab mode\r\n    </button>\r\n    <button\r\n        type="button"\r\n        ng-click="vm.toggleAppStructure(\'subBoxes\')"\r\n        class="subBoxes-button">\r\n        Switch to boxes mode\r\n    </button>\r\n</div--\x3e\r\n\r\n<div\r\n    class="apparatuses_main"\r\n    id="apparatuses_{{::vm.uid}}"\r\n    ng-switch="vm.appStructure">\r\n\r\n    <div\r\n        class="apparatuses_tabs"\r\n        ng-switch-when="tabs">\r\n        <div class="apparatuses_tabs_header">\r\n            <span class="appLabel" \r\n                ng-repeat="apparatusId in vm.apparatuses._indexes" \r\n                ng-click="vm.setCurrentApparatus(apparatusId)" \r\n                ng-class="{\'selected\': apparatusId === vm.getCurrentApparatus()}" \r\n                >{{ vm.apparatuses[apparatusId].label | translate }}</span> \r\n        </div>\r\n        <div class="loading" ng-if="vm.isLoading"><i class="fa fa-spinner fa-pulse loader"></i></div>\r\n        <div class="apparatuses_tabs_fakeTopSpace"></div>\r\n        <div class="apparatuses_tabs_body apparatuses_content_body">\r\n            <div infinite-scroll="vm.loadMoreElements()" infinite-scroll-distance="2" infinite-scroll-parent=\'true\' infinite-scroll-immediate-check="false" ng-switch="vm.currentApparatus">\r\n                <div\r\n                    class="active-apparatus"\r\n                    ng-switch-when="criticalApparatus">\r\n                    <evt-critical-apparatus-entry\r\n                        ng-repeat="app in vm.getVisibleList(vm.currentApparatus)"\r\n                        data-app-id="{{::app}}">\r\n                    </evt-critical-apparatus-entry>\r\n                </div>\r\n                <div\r\n                    class="active-apparatus"\r\n                    ng-switch-when="sources">\r\n                    <evt-sources-apparatus-entry\r\n                        ng-repeat="quote in vm.getVisibleList(vm.currentApparatus)"\r\n                        data-quote-id="{{::quote}}">\r\n                    </evt-sources-apparatus-entry>\r\n                </div>\r\n                <div\r\n                    class="active-apparatus"\r\n                    ng-switch-when="analogues">\r\n                    <evt-analogues-apparatus-entry\r\n                        ng-repeat="analogue in vm.getVisibleList(vm.currentApparatus)"\r\n                        data-analogue-id="{{::analogue}}">\r\n                    </evt-analogues-apparatus-entry>\r\n                </div>\r\n                <div\r\n                    ng-show="!vm.currentApparatus || vm.currentApparatus === \'\'"\r\n                    ng-switch-default>\r\n                    <span> {{ \'MESSAGES.SELECT_AN_APPARATUS\' | translate }} </span>\r\n                </div>\r\n                \x3c!--div\r\n                    ng-switch-when="Commentary Notes">\r\n                </div--\x3e\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div\r\n        class="apparatuses_sub-boxes"\r\n        ng-switch-when="subBoxes">\r\n        <div class="apparatuses_sub-boxes_body">\r\n            <span>BOXES :)</span>\r\n        </div>\r\n    </div>\r\n    \r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.versionReading",[])},function(e,t,n){"use strict";angular.module("evtviewer.versionReading").provider("evtVersionReading",(function(){var e="";this.$get=function(){var t={},n={},i=[],o=0;return t.build=function(e){var r=o++,a=e.appId||void 0;if(void 0===n[r]){var s={uid:r,appId:a,readingId:e.readingId,type:e.type,scopeWit:e.scopeWit,scopeVersion:e.scopeVersion,over:!1,selected:a===t.getCurrentVersionEntry(),apparatus:{opened:!1,_subContentOpened:""},highlightedText:!1};return n[r]=angular.extend(e.vm,s),i.push({id:r}),n[r]}},t.getCurrentVersionEntry=function(){return e},t.setCurrentVersionEntry=function(t){void 0!==t&&t!==e&&(e=t)},t.mouseOutAll=function(){angular.forEach(n,(function(e){e.mouseOut()}))},t.mouseOverByAppId=function(e){angular.forEach(n,(function(t){t.appId===e?t.mouseOver():t.mouseOut()}))},t.selectById=function(e){angular.forEach(n,(function(t){t.appId===e?t.setSelected():t.unselect()})),t.setCurrentVersionEntry(e)},t.unselectAll=function(){angular.forEach(n,(function(e){e.unselect()}))},t.closeAllApparatus=function(e){angular.forEach(n,(function(t){(void 0===e||t.uid!==e)&&t.closeApparatus()}))},t.destroy=function(e){delete n[e]},t}}))},function(e,t,n){"use strict";angular.module("evtviewer.versionReading").controller("versionReadingCtrl",["$scope","parsedData","config","evtPopover","evtVersionReading","evtInterface",function(e,t,n,i,o,r){var a=this;this.mouseOver=function(){a.over=!0},this.mouseOut=function(){a.over=!1},this.highlightOn=function(){a.highlightedText=!0},this.highlightOff=function(){a.highlightedText=!1},this.setSelected=function(){a.selected=!0},this.unselect=function(){a.selected=!1},this.closeApparatus=function(){a.apparatus.opened=!1},this.isSelect=function(){return a.selected},this.toggleOverAppEntries=function(e){e.stopPropagation(),!1===a.over?o.mouseOverByAppId(a.appId):o.mouseOutAll()},this.toggleSelectAppEntries=function(e){!1===a.selected?a.apparatus.opened||(o.selectById(a.appId),r.updateCurrentVersionEntry(a.appId)):a.apparatus.opened&&(o.unselectAll(),r.updateCurrentVersionEntry("")),r.updateUrl()},this.toggleApparatus=function(t){i.closeAll(),a.over&&(o.closeAllApparatus(a.uid),a.apparatus.opened=!a.apparatus.opened,a.apparatus.opened&&e.$parent.vm.scrollToVersionApparatus(a.appId))},this.callbackClick=function(e){e.stopPropagation(),a.over&&(a.toggleSelectAppEntries(e),a.isSelect()&&a.apparatus.opened||a.toggleApparatus(e))},this.isScopeRecensioAvailable=function(){var i=e.$parent.vm.version||"",o=t.getVersionEntries()[a.appId].content,r=n.versions[0],s=!0;if(""!==i&&i!==r)void 0===o[i]&&(s=!1);else if(""===i&&"witness"===e.$parent.vm.type){var l=e.$parent.vm.witness,c=t.getVersionEntries()._indexes.versionWitMap,u="";for(var d in c)c[d].indexOf(l)>=0&&(u=d);""!==u&&void 0!==o[u]||(s=!1)}else void 0===o[r]&&(s=!1);return s},this.destroy=function(){var e=this.uid;o.destroy(e)}}])},function(e,t,n){"use strict";angular.module("evtviewer.versionReading").directive("evtVersionReading",["evtVersionReading","evtInterface",function(e,t){return{restrict:"E",scope:{type:"@",appId:"@",readingId:"@",scopeWit:"@",scopeVersion:"@"},transclude:!0,template:n(327),controllerAs:"vm",controller:"versionReadingCtrl",link:function(n,i,o){n.currentViewMode=t.getState("currentViewMode");var r=e.build(n);n.$on("destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<span\r\n    class="version-reading"\r\n    ng-mouseover="vm.toggleOverAppEntries($event)"\r\n    ng-mouseout="vm.toggleOverAppEntries($event)"\r\n    ng-class="{ \'blurred\'  : $parent.vm.state.topBoxOpened,\r\n                \'over\'     : vm.over,\r\n                \'selected\' : vm.isSelect() && !$parent.vm.state.topBoxOpened}">\r\n    <span\r\n        class="version-reading_text"\r\n        ng-click="vm.callbackClick($event);"\r\n        ng-mouseover="vm.highlightOn()"\r\n        ng-mouseout="vm.highlightOff()"\r\n        ng-class="{ \'over\'     : vm.over && !vm.isSelect(),\r\n                    \'selected\' : vm.isSelect() && !$parent.vm.state.topBoxOpened}"\r\n        ng-transclude>\r\n    </span>\r\n    <evt-version-apparatus-entry\r\n        ng-if="vm.isScopeRecensioAvailable() && vm.apparatus.opened"\r\n        ng-class="{\'blurred\': $parent.vm.state.topBoxOpened}"\r\n        data-app-id="{{::vm.appId}}"\r\n        data-reading-id="{{::vm.readingId}}"\r\n        data-scope-wit="{{::vm.scopeWit}}"\r\n        data-scope-ver="{{::vm.scopeVer}}"></evt-version-apparatus-entry>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.versionApparatusEntry",[])},function(e,t,n){"use strict";angular.module("evtviewer.versionApparatusEntry").provider("evtVersionApparatusEntry",(function(){this.$get=["parsedData","evtVersionApparatus","config",function(e,t,n){var i={},o={},r=[],a=0;return i.build=function(i){var s=a++,l=i.appId||void 0,c=i.scopeWit||"",u=i.scopeVer||"",d=i.$parent.$parent.$parent.vm.version||"";if(""===d&&"text"===i.$parent.$parent.$parent.type&&(d=n.versions[0]),void 0===o[s]){var p,h=e.getVersionEntries()[l],f={_indexes:[]};void 0!==h&&(""!==(p=t.getContent(h,c,u)).note&&(f._indexes.push("criticalNote"),f.criticalNote={label:"VERSIONS.CRITICAL_NOTE"}),p._readings&&(f._indexes.push("readings"),f.readings={label:"VERSIONS.VERSION_READING"}),p.attributes._keys.length>0&&(f._indexes.push("moreInfo"),f.moreInfo={label:"VERSIONS.MORE_INFO"}),""!==p._xmlSource&&(f._indexes.push("xmlSource"),f.xmlSource={label:"VERSIONS.XML"}));var g={uid:s,scopeWit:c,scopeVer:u,appId:l,readingId:i.readingId,content:p,_subContentOpened:"",tabs:f,currentViewMode:i.scopeViewMode,currentVer:d};return o[s]=angular.extend(i.vm,g),r.push({id:s}),o[s]}},i.destroy=function(e){delete o[e]},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.versionApparatusEntry").controller("versionApparatusEntryCtrl",["config","evtBox","evtApparatuses","evtVersionApparatusEntry","$scope",function(e,t,n,i,o){var r=this;this.toggleSubContent=function(e){r._subContentOpened!==e?r._subContentOpened=e:r._subContentOpened=""},this.isPinAvailable=function(){return e.toolPinAppEntries},this.alignReadings=function(){t.alignScrollToApp(r.appId),n.alignScrollToApp(r.appId)},this.destroy=function(){var e=this.uid;i.destroy(e)}}])},function(e,t,n){"use strict";angular.module("evtviewer.versionApparatusEntry").directive("evtVersionApparatusEntry",["evtVersionApparatusEntry","evtInterface",function(e,t){return{restrict:"E",scope:{appId:"@",readingId:"@",scopeWit:"@",scopeVer:"@"},transclude:!0,template:n(332),controllerAs:"vm",controller:"versionApparatusEntryCtrl",link:function(n,i,o){n.scopeViewMode=t.getState("currentViewMode");var r=e.build(n);n.$on("destroy",(function(){r&&r.destroy()}))}}}])},function(e,t){e.exports='<div\r\n    class="version-apparatus-entry"\r\n    ng-class="{ \'noTools\' : (scopeViewMode !== \'collation\' && scopeViewMode !== \'readingTxt\' && scopeViewMode !== \'versions\') && !vm.isPinAvailable()}">\r\n    <div\r\n        class="version-apparatus-entry_main-content">\r\n        \r\n        <div\r\n            class="version-apparatus-entry_tools"\r\n            ng-if="(scopeViewMode === \'collation\' || scopeViewMode === \'readingTxt\' || scopeViewMode === \'versions\')">\r\n            \x3c!--|| vm.isPinAvailable() ADD HERE--\x3e\r\n            \x3c!--button-switch \r\n                title="Remove Pin"\r\n                ng-if="vm.isPinAvailable() && vm.type === \'pinned\'"\r\n                data-label=""\r\n                data-icon="remove"\r\n                data-type="pinReading"\r\n                ng-click="vm.togglePin()"></button-switch>\r\n            <button-switch \r\n                title="Toggle Pin"\r\n                ng-if="vm.isPinAvailable() && vm.type === \'default\'"\r\n                data-label=""\r\n                data-icon="pin"\r\n                data-type="pinReading"\r\n                ng-class="{\'active\' : vm.isPinned()}"\r\n                ng-click="vm.togglePin()"></button-switch--\x3e\r\n            <button-switch \r\n                title="{{ \'BUTTONS.ALIGN_VERSION_READINGS\' | translate }}"\r\n                ng-if="scopeViewMode === \'collation\' || scopeViewMode === \'versions\'"\r\n                data-label=""\r\n                data-icon="v-align"\r\n                data-type="alignReadings"\r\n                ng-click="vm.alignReadings()"></button-switch>\r\n        </div>\r\n        <div\r\n            class="versions-lemmas">\r\n            <span\r\n                ng-repeat="version in ::vm.content.versions">\r\n                \x3c!--TODO: change to evt-ref--\x3e\r\n                <evt-version-ref\r\n                    data-target="{{::version.value}}"\r\n                    data-type="version"\r\n                    data-el-id="{{vm.currentVer}}"\r\n                    class="version-label"></evt-version-ref>\r\n                <span\r\n                    class="version-lem"\r\n                    compile="version.lem"></span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div\r\n        class="version-apparatus-entry_other-content"\r\n        ng-if="vm.tabs._indexes.length > 0">\r\n        <div\r\n            class="version-apparatus-entry_other-content_headers"\r\n            ng-class="{ \'closed\' : vm._subContentOpened === \'\'}">\r\n            <span ng-repeat="tab in ::vm.tabs._indexes"\r\n                ng-click="vm.toggleSubContent(tab)"\r\n                ng-class="{ \'active\' : vm._subContentOpened == tab }">\r\n                {{ vm.tabs[tab].label | translate }}\r\n            </span>\r\n        </div>\r\n        <div\r\n            class="version-apparatus-entry_other-content_panels"\r\n            ng-class="{ \'closed\' : vm._subContentOpened === \'\'}">\r\n            <div\r\n                class="version-apparatus-entry_other-content_panel"\r\n                ng-repeat="tab in ::vm.tabs._indexes"\r\n                ng-class="{ \'active\' : vm._subContentOpened == tab}"\r\n                ng-switch="::tab">\r\n                <div ng-switch-when="criticalNote"\r\n                    compile="vm.content.note">\r\n                </div>\r\n                <div ng-switch-when="readings">\r\n                    <div\r\n                        ng-repeat="version in ::vm.content.versions"\r\n                        ng-if="::vm.content._readings">\r\n                        <span compile="version.id"></span>\r\n                        <span\r\n                            ng-if="::version.significantReadings.length > 0"\r\n                            class="significant-readings_label"> {{ \'VERSIONS.SIGNIFICANT_VARIANTS\' | translate}} </span>\r\n                        <ul ng-if="::version.significantReadings.length > 0">\r\n                            <li ng-repeat="reading in ::version.significantReadings"\r\n                                compile="reading.content"></li>\r\n                        </ul>\r\n                        <span\r\n                            ng-if="::version.notSignificantReadings.length > 0"\r\n                            class="not-significant-readings_label"> {{ \'VERSIONS.ORTHOGRAPHIC_VARIANTS\' | translate}} </span>\r\n                        <ul ng-if="::version.notSignificantReadings.length > 0">\r\n                            <li ng-repeat="reading in ::version.notSignificantReadings"\r\n                                compile="reading.content"></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div ng-switch-when="moreInfo">\r\n                    \x3c!--BEGIN MORE INFO--\x3e\r\n                    <span\r\n                        class="app_generic-info"\r\n                        ng-if="(vm.content.attributes._keys.length > 1 || vm.content.attributes._keys.length === 1 && vm.content.attributes._keys.indexOf(\'xml:id\') < 0)">\r\n                        {{ \'VERSIONS.METADATA_FOR_APP_ENTRY\' | translate}}\r\n                    </span>\r\n                    <ul ng-if="(vm.content.attributes._keys.length > 1 || vm.content.attributes._keys.length === 1 && vm.content.attributes._keys.indexOf(\'xml:id\') < 0)">\r\n                        <li ng-repeat="attr in ::vm.content.attributes._keys"\r\n                            ng-if="::attr !== \'xml:id\'">\r\n                            <span class="moreInfo-label">{{::attr}}</span> {{::vm.content.attributes.values[attr]}}\r\n                        </li>\r\n                    </ul>\r\n                    <span class="moreInfo-metadataTitle">{{ \'VERSIONS.MORE_INFO_ABOUT_READING\' | translate}}</span>\r\n                    <ul>\r\n                        <li \r\n                            class="app_version"\r\n                            ng-repeat="version in ::vm.content.versions"\r\n                            ng-if="::version.attributes._keys.length > 0  && version.attributes._keys.indexOf(\'xml:id\') < 0">\r\n                            <span>\r\n                                {{ \'VERSIONS.METADATA_FOR\' | translate}} \r\n                                <em \r\n                                    compile="version.id"></em> \r\n                            </span>\r\n                            <ul>\r\n                                <li ng-repeat="attr in ::version.attributes._keys"\r\n                                    ng-if="::attr !== \'xml:id\'">\r\n                                    <span class="moreInfo-label">{{::attr}}</span> {{::version.attributes.values[attr]}}\r\n                                </li>\r\n                            </ul>\r\n                            <span\r\n                                ng-if="::version.significantReadings.length > 0"\r\n                                ng-repeat-start="reading in ::version.significantReadings">{{ \'VERSIONS.METADATA_FOR_SIGNIFICANT_READING\' | translate}}:\r\n                                <em compile="reading.content"></em>\r\n                            </span>\r\n                            <ul ng-repeat-end\r\n                                ng-if="::version.significantReadings.length > 0">\r\n                                <li ng-repeat="attr in ::reading.attributes._keys"\r\n                                    ng-if="::attr !== \'xml:id\'">\r\n                                    <span class="moreInfo-label">{{::attr}}</span> {{::reading.attributes.values[attr]}}\r\n                                </li>\r\n                            </ul>\r\n                            <span\r\n                                ng-if="::version.notSignificantReadings.length > 0"\r\n                                ng-repeat-start="reading in ::version.notSignificantReadings">{{ \'VERSIONS.METADATA_FOR_ORTHOGRAPHIC_READING\' | translate}}:\r\n                                <em compile="reading.content"></em>\r\n                            </span>\r\n                            <ul ng-repeat-end\r\n                                ng-if="::version.notSignificantReadings.length > 0">\r\n                                <li ng-repeat="attr in ::reading.attributes._keys"\r\n                                    ng-if="::attr !== \'xml:id\'">\r\n                                    <span class="moreInfo-label">{{::attr}}</span> {{::reading.attributes.values[attr]}}\r\n                                </li>\r\n                            </ul>\r\n                      </li>\r\n                  </ul>\r\n                  \x3c!--END MORE INFO--\x3e\r\n                </div>\r\n                <div ng-switch-when="xmlSource">\r\n                    <pre>{{ ::vm.content._xmlSource }}</pre>\r\n                </div>\r\n                <div ng-switch-default\r\n                    compile="vm.content[tab]">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.versionApparatusEntry").provider("evtVersionRef",(function(){this.$get=["evtInterface","evtBox","parsedData","config",function(e,t,n,i){var o={},r={},a=[],s=0;return o.build=function(o){var l=o.id||s++,c=o.elId||"",u=o.type||"default",d=o.target||"",p=o.title||"",h=function(){console.log("TODO "+u)},f=e.getState("currentViewMode"),g="";switch(u){case"version":c!==d&&d!==i.versions[0]&&(p="VERSIONS.OPEN_TEXT"),g=n.getVersionEntries()._indexes.versionId[d],h=function(){var o;if(c!==d&&d!==i.versions[0]){o=e.getState("currentVersions"),scopeVersionIndex=o.indexOf(c),o.indexOf(d)>=0&&o.length>1&&e.removeVersion(d),e.addVersion(d,scopeVersionIndex+1),"versions"!==f&&e.updateState("currentViewMode","versions"),e.updateUrl();var r=e.getState("currentVersionEntry")||"";if(""!==r){var a=t.getElementByValueOfParameter("version",d);void 0!==a&&a.scrollToAppEntry(r)}}else if(d===i.versions[0]){"versions"!==f&&e.updateState("currentViewMode","versions"),e.updateCurrentVersion(d);var s=n.getVersionEntries()[e.getCurrentVersionEntry()].content,l=Object.keys(s);o=e.getState("currentVersions");for(var u=0;u<l.length;u++)o.indexOf(l[u])<0&&l[u]!==i.versions[0]&&e.addVersion(l[u]);e.updateUrl()}}}var m={uid:l,id:g,elId:c,type:u,target:d,title:p,callback:h,currentViewMode:f,ver:e.getCurrentVersion()||""};return r[l]=angular.extend(o.vm,m),a.push({id:l,type:u}),r[l]},o.destroy=function(e){delete r[e]},o}]}))},function(e,t,n){"use strict";angular.module("evtviewer.versionApparatusEntry").directive("evtVersionRef",["evtVersionRef",function(e){return{restrict:"E",scope:{type:"@",target:"@",elId:"@"},transclude:!0,template:n(335),link:function(t,n,i){t.vm={};var o=e.build(t);t.$on("$destroy",(function(){o&&e.destroy(o.uid)}))}}}])},function(e,t){e.exports='<span\r\n    class="evt-version-ref"\r\n    title="{{vm.title | translate}}"\r\n    ng-click="vm.callback()"\r\n    ng-class="{ \'selected\' : vm.elId === vm.target, \'not-select\': vm.elId === vm.ver }">\r\n    <span\r\n        class="evt-version-ref_text"\r\n        compile="vm.id"\r\n        ng-class="{ \'selected\' : vm.elId === vm.target, \'not-select\': vm.target === vm.ver }">\r\n    </span>\r\n</span>'},function(e,t,n){"use strict";angular.module("evtviewer.imageViewer",["evtviewer.openseadragon","evtviewer.imageViewerService"]),angular.module("evtviewer.imageViewer",["evtviewer.openseadragon","evtviewer.imageViewerService"]).controller("imageViewerCtrl",["$scope","imageViewerModel",function(e,t){e.options=t.getOptions()}])},function(e,t,n){"use strict";var i=n(35);angular.module("evtviewer.openseadragon",["evtviewer.imageViewer","evtviewer.openseadragonService","evtviewer.interface"]).directive("osd",["$timeout","imageViewerHandler","evtInterface","osd",function(e,t,n,o){return{restrict:"E",scope:{options:"=",name:"=",tilesource:"=",prefixUrl:"="},controller:"imageViewerCtrl",template:"<div id='osd-img' class='box-image Edition'></div>",transclude:!0,link:function(r,a,s){e((function(){var e=o.build(s.name),a=null;try{a=new i.Viewer(e)}catch(e){console.error("viewer in timeout osd directive errore",e)}r.osd=a,r.$parent[s.name]=a;var l=o.imgCoeff();null!=l&&null!=l&&t.setImgCoeff(l),t.setViewer(a),t.setScope(r),r.osd.addHandler("home",t.home),r.osd.addOnceHandler("open",t.openPage,n.getState("currentPage")),r.$watch((function(){return n.getState("currentPage")}),(function(e,n){if(n!==e){t.updateViewerPage(e)}}),!1)}),10),a.on("$destroy",(function(){s.name&&(r.$parent[s.name]=null),r.osd.removeHandler("open",t.open),r.osd.removeHandler("home",t.home),r.osd.removeHandler("navigator-scroll",t.navigatorScroll),r.osd.removeHandler("pan",t.pan),r.osd.destroy()}))}}}])},function(e,t,n){"use strict";angular.module("evtviewer.imageViewer")},function(e,t,n){"use strict";angular.module("evtviewer.imageViewer").controller("imageViewerCtrl",["$scope",function(e){}])},function(e,t,n){"use strict";angular.module("evtviewer.imageViewerService",["evtviewer.dataHandler"]).service("imageViewerModel",["parsedData",function(e){var t={id:"osd-img",prefixUrl:"/openseadragon/images/",tileSources:[],showRotationControl:!0,showNavigator:!0,visibilityRatio:1,defaultZoomLevel:1,panHorizontal:!0,constrainDuringPan:!0,minZoomLevel:.8,maxZoomLevel:2,wrapVertical:!1,navigatorLeft:"94%",navigatorHeight:"100%",navigatorWidth:"50%",navigatorTop:"1%"};this.getOptions=function(){for(var n,i=e.getPages(),o=i.length,r="",a=0;a<o;a++){var s={type:"image",url:""};n=i[a],void 0!==(r=e.getPage(n).source)&&""!==r&&" "!==r&&null!==r&&(s.url=r,t.tileSources.push(s))}return t}}])},function(e,t,n){"use strict";angular.module("evtviewer.openseadragon").provider("osd",(function(){this.$get=["parsedData","config",function(e,t){var n={test:function(e){return!0},imgCoeff:function(){return t.imageNormalizationCoefficient},build:function(n){var i,o=t.imageViewerOptions,r=e.getPages(),a=r.length,s="";o.tileSources=[];for(var l=0;l<a;l++){var c={type:"image",url:""};i=r[l],void 0!==(s=e.getPage(i).source)&&""!==s&&" "!==s&&null!==s&&(c.url=s,o.tileSources.push(c))}return o.id="osd-img",o}};return n}]}))},function(e,t,n){"use strict";(function(e){!function(){var t=n(35);angular.module("evtviewer.openseadragonService",["evtviewer.interface"]).service("imageViewerHandler",["evtInterface","imageScrollMap","parsedData",function(n,i,o){var r=void 0,a=!1,s=this;function l(e){var n={};return n.x=e.ulx,n.y=e.uly,n.width=e.lrx-e.ulx,n.hight=e.lry-e.uly,new t.Rect(n.x/r,n.y/r,n.width/r,n.hight/r)}s.viewer=void 0,s.scope=void 0,s.setImgCoeff=function(e){r=e},s.setViewer=function(e){s.viewer=e},s.setScope=function(e){s.scope=e},s.open=function(){viewer.viewport.getBounds();var e=s.viewer.viewport.getBounds(),n=e.height/e.width,i=new t.Rect(0,0,0,n);s.viewer.viewport.fitBounds(i,!1)},s.openPage=function(e){for(var t=e.userData,i=0;o.getPages()[i]!==t;)if((i+=1)>o.getPages().length){console.error("error in open page");break}var r=i;s.viewer.goToPage(r);var a=n.getState("currentPage");t!==a&&s.scope.$apply((function(){n.updateState("currentPage",""!==t?t:a)}))},s.home=function(){var e=s.viewer.viewport.getBounds(),n=e.height/e.width,i=new t.Rect(0,.1,1,n);s.viewer.viewport.fitBounds(i,!0)},s.navigatorScroll=function(e){e.scroll},s.pan=function(e){try{if(void 0===e.immediately){var t=e.center.y,o=e.eventSource.viewport._oldCenterY;if(1===s.viewer.viewport.getZoom()){var r,a;s.viewer.viewport.getBounds();t>o?(r=i.mapDown(e.eventSource.viewport.getBounds()),a=n.getState("currentPage"),r!==a&&s.scope.$apply((function(){n.updateState("currentPage",r)}))):t<o&&(r=i.mapUP(e.eventSource.viewport.getBounds()),a=n.getState("currentPage"),r!==a&&s.scope.$apply((function(){n.updateState("currentPage",""!==r?r:a)})))}}}catch(e){console.error("error in pan",e)}},s.updateViewerBounds=function(e){var t=s.viewer.viewport.getBounds();i.isInBounds(t.y,e)||i.updateBounds(s.viewer,e)},s.updateViewerPage=function(e){for(var t=e,i=0;o.getPages()[i]!==t&&!((i+=1)>o.getPages().length););var r=i;s.viewer.goToPage(r);var a=n.getState("currentPage");t!==a&&s.scope.$apply((function(){n.updateState("currentPage",""!==t?t:a)}))},s.highlightOverlay=function(e){if(!e)throw"problem in zone data extraction";try{s.viewer.removeOverlay("line-overlay")}catch(e){}var t=l(e),n=document.createElement("div");n.id="line-overlay",n.className="highlight",s.viewer.addOverlay({element:n,location:t})},s.highlightSelectedOverlay=function(e,t){if(!e)throw"problem in zone data extraction";try{s.viewer.removeOverlay("line-overlay")}catch(e){console.error("no line overlay",e)}var n=l(e),i=document.createElement("div");i.id="line-overlay_selected",i.className="selectedHighlight",s.viewer.addOverlay({element:i,location:n})},s.turnOffOverlay=function(){try{s.viewer.removeOverlay("line-overlay")}catch(e){console.error("no line overlay",e)}},s.turnOffOverlaySelected=function(){try{s.viewer.removeOverlay("line-overlay_selected")}catch(e){console.error("no line overlay",e)}},s.moveToZone=function(e){var n=s.viewer.viewport.getCenter(),i=(s.viewer.viewport.getBounds(!0),e.uly,e.uly/r<n.y?n.y:e.uly/r),o=new t.Point(n.x,i);s.viewer.viewport.panTo(o)},s.showHotSpot=function(e){for(var n=[],i=0;i<e.length;i++){var o=new t.Rect(e[i].ulx/r,e[i].uly/r,(e[i].lrx-e[i].ulx)/r,(e[i].lry-e[i].uly)/r);n.push(o)}for(var a=[],l=0;l<e.length;l++){var u=e[l].content,d=e[l].id,p=(e[l],document.createElement("div"));p.id="hotspot-overlay_selected-"+d,p.className="hotspot",p.dataset.id=d,p.dataset.content=u,p.onmouseover=function(){s.viewer.zoomPerClick=1},p.onmouseout=function(){s.viewer.zoomPerClick=1.5},p.onclick=function(){c(this)},a.push(p)}s.viewer.zoomPerClick=1;for(var h=0;h<e.length;h++)s.viewer.addOverlay({element:a[h],location:n[h]})};var c=function(n){if(!a){var i=e(n),o=i.position().left,r=i.position().top,l=i.width(),c=i.height(),d=new t.Point(o,r),p=new t.Point(o+l,r+c),h=s.viewer.viewport.pointFromPixel(d),f=s.viewer.viewport.pointFromPixel(p),g=0;g=h.x<=.4?h.x+(f.x-h.x)+.05:h.x-(f.x-h.x+.1);var m=new t.Rect(g,h.y,.3,.35),v=document.createElement("div");v.id="div-hotspot-overlay_selected-"+n.dataset.id,v.className="hotspot-dida";var b=document.createElement("div");b.id="div-title-hotspot-overlay_selected-"+n.dataset.id,b.className="hotspot-dida-title",b.innerHTML="";var y=document.createElement("div");y.className="PopupCloser",y.dataset.id=n.dataset.id,y.onclick=function(){s.viewer.zoomPerClick=1.5,u(this)};var x=document.createElement("i");x.className="fa fa-times",x.onmouseover=function(){s.viewer.zoomPerClick=1},x.onmouseout=function(){s.viewer.zoomPerClick=1.5},y.appendChild(x),b.appendChild(y);var w=document.createElement("div");w.id="div-body-hotspot-overlay_selected-"+n.dataset.id,w.className="hotspot-dida-body",w.innerHTML=n.dataset.content,v.appendChild(b),v.appendChild(w);var A={element:v,location:m,rotationMode:t.OverlayRotationMode.NO_ROTATION};a=!a,s.viewer.addOverlay(A),e(A.element).draggable()}return a},u=function(e){try{var t=e.dataset.id;s.viewer.removeOverlay("div-hotspot-overlay_selected-"+t)}catch(e){console.error("no hotspot overlay",e)}return a=!1};s.hiddenHotSpot=function(e){try{for(var t=0;t<e.length;t++)s.viewer.removeOverlay("hotspot-overlay_selected-"+e[t].id)}catch(e){console.error("no hotspot overlay",e)}},s.lineZone=function(e){var t=l(e),i=document.createElement("div");return i.id="line-div-overlay_"+e.id,i.dataset.lb=e.id.replace("line","lb"),i.className="line-overlay",i.onmouseover=function(){var e="active"===n.getToolState("ITL"),t=n.getState("currentViewMode");if(e&&"imgTxt"===t){this.className+=" selectedHighlight";var i=document.querySelectorAll("[data-line='"+this.dataset.lb+"']");if(0==i.length){var o=this.dataset.lb.replace("reg","orig");i=document.querySelectorAll("[data-line='"+o+"']")}for(var r=0;r<i.length;r++)i[r].className+=" lineHover"}},i.onmouseout=function(){var e="active"===n.getToolState("ITL"),t=n.getState("currentViewMode");if(e&&"imgTxt"===t){this.className=this.className.replace(" selectedHighlight","")||"";var i=document.querySelectorAll("[data-line='"+this.dataset.lb+"']");if(0==i.length){var o=this.dataset.lb.replace("reg","orig");i=document.querySelectorAll("[data-line='"+o+"']")}for(var r=0;r<i.length;r++)i[r].className=i[r].className.replace(" lineHover","")||""}},i.onclick=function(){},s.viewer.addOverlay({element:i,location:t}),i},s.testFun=function(){return"ok"}}])}()}).call(this,n(0))},function(e,t,n){"use strict";angular.module("evtviewer.openseadragonService").service("imageScrollMap",(function(){var e="yPage";this.mapDown=function(e){return t(e,"down")},this.mapUP=function(e){return t(e,"up")};var t=function(e,t){var n,i,o=e.getBoundingBox();switch(t){case"down":if(o.y<n[i+"1"].to)return(i+"1").substr(1).toLowerCase();for(var r=1;r<=n.size;r++)if(o.y<n[i+r].to&&o.y>n[i+r].from)return(i+r).substr(1).toLowerCase();break;case"up":for(r=1;r<=n.size;r++)if(o.y<(n[i+r].from+n[i+r].to)/2&&o.y>n[i+r].from)return(i+r).substr(1).toLowerCase();return"";default:return""}};this.isInBounds=function(t,n){var i=void 0;return t>=(void 0)[i=10==n.length?e+n.substr(n.length-1):e+n.substr(n.length-2)].from&&t<(void 0)[i].to},this.updateBounds=function(t,n){var i=t.viewport.getBounds(),o=void 0;o=10==n.length?e+n.substr(n.length-1):e+n.substr(n.length-2);var r=i.height/i.width,a=new OpenSeadragon.Rect(0,(void 0)[o].from,1,r);t.viewport.fitBounds(a,!1)}}))},function(e,t,n){"use strict";angular.module("evtviewer.openseadragonService").service("overlayHandler",(function(){this.test=function(e){console.log(e)}}))},function(e,t,n){"use strict";angular.module("evtviewer.search",[])},function(e,t,n){"use strict";angular.module("evtviewer.search").constant("SEARCHBOXDEFAULTS",{diplomaticSearchBoxBtn:{showResults:{title:"Show results",label:"",icon:"search-results-show",type:"searchResultsShow"},hideResults:{title:"Hide results",label:"",icon:"search-results-hide",type:"searchResultsHide",hide:!0},virtualKeyboard:{title:"Virtual keyboard",label:"",icon:"keyboard",type:"searchVirtualKeyboard"},caseSensitive:{title:"Case sensitive",label:"",icon:"case-sensitive",type:"searchCaseSensitive"},exactWord:{title:"Exact word",label:"",icon:"exact-word",type:"searchExactWord"},searchClear:{title:"Clear search",label:"",icon:"close",type:"searchClear"},previous:{title:"Previous",label:"",icon:"previous",type:"searchPrevResult"},next:{title:"Next",label:"",icon:"next",type:"searchNextResult"},search:{title:"Search",label:"",icon:"search",type:"search"}},interpretativeSearchBoxBtn:{showResults:{title:"Show results",label:"",icon:"search-results-show",type:"searchResultsShow"},hideResults:{title:"Hide results",label:"",icon:"search-results-hide",type:"searchResultsHide",hide:!0},virtualKeyboard:{title:"Virtual keyboard",label:"",icon:"keyboard",type:"searchVirtualKeyboard"},caseSensitive:{title:"Case sensitive",label:"",icon:"case-sensitive",type:"searchCaseSensitive"},exactWord:{title:"Exact word",label:"",icon:"exact-word",type:"searchExactWord"},searchClear:{title:"Clear search",label:"",icon:"close",type:"searchClear"},previous:{title:"Previous",label:"",icon:"previous",type:"searchPrevResult"},next:{title:"Next",label:"",icon:"next",type:"searchNextResult"},search:{title:"Search",label:"",icon:"search",type:"search"}}}).config(["evtSearchBoxProvider","configProvider","SEARCHBOXDEFAULTS",function(e,t,n){var i=t.makeDefaults("search",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.search").directive("evtSearchBox",["evtSearchBox","evtInterface",function(e,t){return{restrict:"E",template:n(348),replace:!0,controllerAs:"vm",controller:"SearchBoxCtrl",link:function(n){e.build(n,n.vm),n.$watch((function(){return t.getState("currentEdition")}),(function(t,i){i!==t&&e.build(n,n.vm)}),!0)}}}])},function(e,t){e.exports='<div class="search-box internal"\r\n     ng-class="{\'open\' : $parent.vm.getState(\'searchBox\'), \'results-open\' : vm.getState(\'searchResultBox\')} ">\r\n\r\n   \x3c!-- search form --\x3e\r\n   <form ng-submit="vm.doSearchCallback()">\r\n      <div class="searchBtnGroup">\r\n         <div class="btn-left">\r\n\r\n            <button-switch\r\n               ng-repeat="button in vm.searchBoxBtn|limitTo: vm.getBtnLimit()"\r\n               class="no-background"\r\n               title="{{::button.title}}"\r\n               data-label="{{::button.label}}"\r\n               data-icon="{{::button.icon}}"\r\n               data-type="{{::button.type}}"\r\n               ng-hide="button.hide">\r\n            </button-switch>\r\n         </div>\r\n         <div class="btn-right">\r\n            <button-switch\r\n               ng-repeat="button in vm.searchBoxBtn|limitTo: -4"\r\n               class="no-background"\r\n               title="{{::button.title}}"\r\n               data-label="{{::button.label}}"\r\n               data-icon="{{::button.icon}}"\r\n               data-type="{{::button.type}}">\r\n            </button-switch>\r\n         </div>\r\n      </div>\r\n\r\n      <input type="text" id="{{::vm.keyboardId}}" ng-model="vm.searchInput" ng-change="vm.highlightSearchResults(vm.parentBoxId, vm.searchInput)" autocomplete="off" autofocus>\r\n   </form>\r\n   <evt-virtual-keyboard></evt-virtual-keyboard>\r\n   <evt-search-results ng-controller="SearchResultsCtrl as searchResults"></evt-search-results>\r\n</div>\r\n'},function(e,t,n){"use strict";angular.module("evtviewer.search").controller("SearchBoxCtrl",["$rootScope","config","evtInterface","evtSearchBox","evtSearchResults","evtBox",function(e,t,n,i,o,r){var a=this,s=[];a.searchInput="",a.searchedTerm="",a.resList=[],a.visibleRes=[],a.getState=function(e){if(a.status)return a.status[e]},a.updateState=function(e){return a.status[e]=!a.status[e],a.status[e]},a.getBoxEdition=function(e){return r.getEditionById(e)},a.getInputValue=function(){return a.searchInput},a.getSearchedTerm=function(){return a.searchedTerm},a.closeBox=function(e){return a.status[e]=!1,a.status[e]},a.loadMoreElements=function(){for(var e=0;e<10&&e<a.resList.length;){var t=a.visibleRes.length-1,n=a.resList[t+1];n&&(a.visibleRes.push(n),a.searchResults+=n),e++}},a.highlightSearchResults=function(e,t){return o.highlightSearchResults(e,t)},a.doSearchCallback=function(){for(var e in s)s[e].parentId===a.parentBoxId&&s[e].btn.doCallback()},a.getBtnLimit=function(){for(var e in this.searchBoxBtn)if("searchVirtualKeyboard"===this.searchBoxBtn[e].type)return 5;return 4},e.$on("searchBtn",(function(e,t){s.push(t)}))}])},function(e,t,n){"use strict";angular.module("evtviewer.search").provider("evtSearchBox",(function(){var e=this.defaults;this.setDefaults=function(t){e=t},this.$get=["SEARCHBOXDEFAULTS","parsedData",function(t,n){var i,o=[],r={},a=n.getGlyphs();return o.build=function(e,n){var o,s=[],l=e.$parent.edition;for(var c in o="diplomatic"===l?t.diplomaticSearchBoxBtn:t.interpretativeSearchBoxBtn)0===a._indexes.length?"virtualKeyboard"!==c.toString()&&s.push(o[c]):s.push(o[c]);var u={status:{searchResultBox:!1,searchCaseSensitive:!1,searchExactWord:!1,virtualKeyboard:!1,progressBar:!1},searchBoxBtn:s,parentBoxId:i=e.$parent.id,searchBoxId:i+"SearchBox"};return r[i]=angular.extend(n,u),r[i]},o.getDefaults=function(t){return e[t]},o.getCurrentBoxEdition=function(e){return r[e].getBoxEdition(e)},o.getSearchResults=function(e){return r[e].searchResults},o.getInputValue=function(e){return r[e].searchInput},o.clearInputValue=function(e){r[e].searchInput=""},o.getStatus=function(e,t){if(r[e].status)return r[e].status[t]},o.setStatus=function(e,t,n){r[e].status[t]=n},o.updateStatus=function(e,t){r[e].status[t]=!r[e].status[t]},o.setSearchedTerm=function(e,t){r[e].searchedTerm=t},o.closeBox=function(e,t){var n;for(var i in r)if((n=r[i]).parentBoxId===e)return n.status[t]=!1,n.status[t]},o.showBtn=function(e,t){var n=r[e].searchBoxBtn;for(var i in n)n[i].type===t&&(n[i].hide=!1)},o.hideBtn=function(e,t){var n=r[e].searchBoxBtn;for(var i in n)n[i].type===t&&(n[i].hide=!0)},o}]}))},function(e,t,n){"use strict";angular.module("evtviewer.search").directive("evtSearchResults",["$timeout","evtSearchResult","evtSearchBox","evtInterface",function(e,t,i,o){return{restrict:"E",template:n(352),replace:!0,controllerAs:"vm",controller:"SearchResultsCtrl",link:function(n){t.build(n,n.vm),n.$watch((function(){return o.getState("currentEdition")}),(function(){n.vm.currentEdition=o.getState("currentEdition"),""!==n.$parent.vm.searchInput&&void 0!==n.$parent.vm.searchInput&&(n.$parent.vm.doSearchCallback(),e((function(){i.setStatus(n.vm.parentBoxId,"searchResultBox",!1),i.hideBtn(n.vm.parentBoxId,"searchResultsHide"),i.showBtn(n.vm.parentBoxId,"searchResultsShow")})))}),!0)}}}])},function(e,t){e.exports='<div class="search-results" ng-show="$parent.vm.getState(\'searchResultBox\')">\r\n\r\n   <div ng-show="$parent.vm.getSearchedTerm() !== \'\'" infinite-scroll="vm.loadMoreElements()" infinite-scroll-parent="true">\r\n\r\n      <div class="search-info">\r\n         <p>Search for <strong>{{$parent.vm.getSearchedTerm()}}</strong></p>\r\n         <p>We have found <span>{{vm.getResultsNumber()}}</span> results in the selected edition</p>\r\n      </div>\r\n\r\n      <div class="token-results">\r\n         <div class="token" ng-repeat="result in vm.visibleRes track by $index">\r\n            <div ng-click="vm.toggle($event)" class="icon">\r\n               Results for <span class="result-token">{{result.token}}</span>\r\n               in <span class="result-doc">{{result.metadata.xmlDocTitle[0]}}</span>\r\n               <span class="results-number">({{result.resultsNumber}})</span>\r\n            </div>\r\n\r\n            <ul class="search-result">\r\n               <li ng-repeat="i in vm.range(result.resultsNumber) track by $index">\r\n                  <span class="original-text" id="{{result.metadata.docId[$index]}}"\r\n                        ng-bind-html="vm.getHighlightedOriginalText(result.metadata.docId[$index], vm.getCurrentBoxEdition($parent.vm.parentBoxId), result.token, result.metadata.position[$index])">\r\n                  </span>\r\n                  <a class="resultInfo" href="#" ng-click="vm.scrollToCurrentResult($event)">\r\n                     Found in <span class="resultDoc" id="{{result.metadata.xmlDocId[$index]}}">{{result.metadata.xmlDocTitle[$index]}}</span>\r\n                     <span class="resultSection" ng-if="result.metadata.sectionTitle">({{result.metadata.sectionTitle[$index]}})</span>\r\n                     <span class="resultPage" id="{{result.metadata.pageId[$index]}}" ng-if="result.metadata.page">page {{result.metadata.page[$index]}}</span>\r\n                     <span class="resultPar" ng-if="result.metadata.paragraph">paragraph {{result.metadata.paragraph[$index]}}</span>\r\n                     <span class="resultLine" id="{{result.metadata.lbId[$index]}}" ng-if="result.metadata.line">(line {{result.metadata.line[$index]}})</span>\r\n                  </a>\r\n               </li>\r\n            </ul>\r\n\r\n         </div>\r\n      </div>\r\n\r\n   </div>\r\n\r\n   <div class="search-info" ng-show="$parent.vm.getInputValue() === \'\'">{{vm.placeholder}}</div>\r\n\r\n</div>\r\n'},function(e,t,n){"use strict";(function(e){angular.module("evtviewer.search").controller("SearchResultsCtrl",["$q","$scope","$location","$anchorScroll","evtSearchResults","evtSearchBox","evtInterface","Utils",function(t,n,i,o,r,a,s,l){var c=this;c.currentEdition=s.getState("currentEdition"),c.currentEditionResults=[],c.visibleRes=[],c.placeholder="",c.currentLineId="",c.getResultsNumber=function(){var e=c.currentEditionResults,t=0;return e&&e.forEach((function(e){t+=e.resultsNumber})),t},c.getCurrentEditionResults=function(){return c.currentEditionResults},c.getCurrentBoxEdition=function(e){return a.getCurrentBoxEdition(e)},c.getHighlightedOriginalText=function(e,t,n,i){var o=r.getOriginalText(e,t),a="<strong>"+n+"</strong>",s=i[0],c=i[0]+i[1],u=l.replaceStringAt(o,n,a,s,c);return r.getTextPreview(u,a)},c.loadMoreElements=function(){for(var e,t,n=0;n<5&&n<c.currentEditionResults.length;)e=c.visibleRes.length-1,(t=c.currentEditionResults[e+1])&&c.visibleRes.push(t),n++},c.range=function(e){return new Array(e)},c.toggle=function(t){var n=e(t.currentTarget);n.toggleClass("active"),n.siblings(".search-result").toggleClass("open")},c.scrollToCurrentResult=function(i){(function(i){var o=t.defer(),r=n.$parent.vm.parentBoxId;return a.closeBox(r,"searchResultBox"),a.showBtn(r,"searchResultsShow"),a.hideBtn(r,"searchResultsHide"),i.preventDefault(),e(i.currentTarget).addClass("selected"),c.currentLineId=document.getElementsByClassName("resultInfo selected")[0].getElementsByClassName("resultLine")[0].getAttribute("id"),function(){var e=document.getElementsByClassName("resultInfo selected")[0].getElementsByClassName("resultPage")[0].getAttribute("id"),t=document.getElementsByClassName("resultInfo selected")[0].getElementsByClassName("resultDoc")[0].getAttribute("id");s.updateState("currentPage",e),s.updateState("currentDoc",t),s.updateUrl()}(),e(i.currentTarget).removeClass("selected"),setTimeout((function(){o.resolve()}),100),o.promise})(i).then((function(){c.scrollTo(c.currentLineId)}))},c.scrollTo=function(e){i.hash(e),o()}}])}).call(this,n(0))},function(e,t,n){"use strict";angular.module("evtviewer.search").provider("evtSearchResult",(function(){this.$get=function(){var e=[],t={};return e.build=function(e,n){var i=e.$parent.id,o={parentBoxId:i};return t[i]=angular.extend(n,o),t[i]},e.setPlaceholder=function(e,n){t[e].placeholder=n},e.setVisibleRes=function(e,n){t[e].visibleRes=n},e.setCurrentEditionResults=function(e,n){t[e].currentEditionResults=n},e}}))},function(e,t,n){"use strict";var i=n(36);angular.module("evtviewer.dataHandler").service("evtSearchIndex",["evtSearchDocument",function e(t){function n(e){return{xmlDocId:e.xmlDocId,diplomaticText:e.content.diplomatic,interpretativeText:e.content.interpretative,content:e.content}}function o(e,t){var n=function(n){var i=e.documentCount-1,o=t[Object.keys(t)[i]];return n.metadata.xmlDocTitle=o?o.xmlDocTitle:void 0,n};i.Pipeline.registerFunction(n,"xmlDocTitle"),e.pipeline.add(n),e.metadataWhitelist.push("xmlDocTitle")}function r(e,t){var n=function(n){var i=e.documentCount-1,o=t[Object.keys(t)[i]];return n.metadata.xmlDocId=o?o.xmlDocId:void 0,n};i.Pipeline.registerFunction(n,"xmlDocId"),e.pipeline.add(n),e.metadataWhitelist.push("xmlDocId")}function a(e,t){var n=0,o=t[Object.keys(t)[n]],r=function(i){return n=e.documentCount-1,o=t[Object.keys(t)[n]],i.metadata.sectionTitle=o?o.sectionTitle:void 0,i};o&&void 0!==o.sectionTitle&&(i.Pipeline.registerFunction(r,"sectionTitle"),e.pipeline.add(r),e.metadataWhitelist.push("sectionTitle"))}function s(e,t){var n=0,o=t[Object.keys(t)[n]],r=function(i){return n=e.documentCount-1,o=t[Object.keys(t)[n]],i.metadata.paragraph=o?o.paragraph:void 0,i};o&&void 0!==o.paragraph&&(i.Pipeline.registerFunction(r,"paragraph"),e.pipeline.add(r),e.metadataWhitelist.push("paragraph"))}function l(e,t){var n=0,o=t[Object.keys(t)[n]],r=function(i){return n=e.documentCount-1,o=t[Object.keys(t)[n]],i.metadata.page=o?o.page:void 0,i};o&&void 0!==o.page&&(i.Pipeline.registerFunction(r,"page"),e.pipeline.add(r),e.metadataWhitelist.push("page"))}function c(e,t){var n=0,o=t[Object.keys(t)[n]],r=function(i){return n=e.documentCount-1,o=t[Object.keys(t)[n]],i.metadata.pageId=o?o.pageId:void 0,i};o&&void 0!==o.page&&(i.Pipeline.registerFunction(r,"pageId"),e.pipeline.add(r),e.metadataWhitelist.push("pageId"))}function u(e,t){var n=0,o=t[Object.keys(t)[n]],r=function(i){return n=e.documentCount-1,o=t[Object.keys(t)[n]],i.metadata.line=o?o.line:void 0,i};o&&void 0!==o.line&&(i.Pipeline.registerFunction(r,"line"),e.pipeline.add(r),e.metadataWhitelist.push("line"))}function d(e,t){var n=0,o=t[Object.keys(t)[n]],r=function(i){return n=e.documentCount-1,o=t[Object.keys(t)[n]],i.metadata.lbId=o?o.lbId:void 0,i};o&&void 0!==o.lbId&&(i.Pipeline.registerFunction(r,"lbId"),e.pipeline.add(r),e.metadataWhitelist.push("lbId"))}function p(e,t){var n=function(n){var i=e.documentCount-1,o=t[Object.keys(t)[i]];return n.metadata.docId=o?o.docId:void 0,n};i.Pipeline.registerFunction(n,"docId"),e.pipeline.add(n),e.metadataWhitelist.push("docId")}function h(e){e.metadataWhitelist.push("position")}function f(e){e.metadataWhitelist.push("originalToken")}this.index={},e.prototype.createIndex=function(e){var m;return console.time("INDEX TIME"),this.index=i((function(){for(var v in this.pipeline.remove(i.trimmer),this.pipeline.remove(i.stemmer),this.pipeline.remove(i.stopWordFilter),this.tokenizer=g,this.tokenizer.separator=/[\s,.;:/?!()\'\"]+/,this.ref("xmlDocId"),t.isDiplEdition()&&void 0!==e[Object.keys(e)[0]].content.diplomatic?(this.field("diplomaticText"),t.isInterpEdition()&&this.field("interpretativeText")):t.isInterpEdition()?this.field("interpretativeText"):this.field("content"),this.use(o,e),this.use(r,e),this.use(a,e),this.use(s,e),this.use(l,e),this.use(c,e),this.use(u,e),this.use(d,e),this.use(p,e),this.use(h,e),this.use(f,e),e)"countAllLines"!==v&&(m=n(e[v])||void 0,this.add(m))})),console.timeEnd("INDEX TIME"),this.index},e.prototype.getIndex=function(){return this.index};var g=function(e){for(var t,n,o,r,a,s=e.toString().trim(),l=s.length,c=[],u=0,d=0;u<=l;u++)if(r=u-d,"-"===(t=s.charAt(u))&&(n=s.slice(d,u),a=u,c.push(new i.Token(n,{position:[d,r],index:c.length,originalToken:n}))),t.match(this.tokenizer.separator)||u===l){if(o=n=s.slice(d,u),-1!==(n=n.toLowerCase()).indexOf("-")){var p=s.slice(a+1,u);c.push(new i.Token(p,{position:[a+1,r],index:c.length,originalToken:p}))}r>0&&c.push(new i.Token(n,{position:[d,r],index:c.length,originalToken:o})),d=u+1}return c}}])},function(e,t,n){"use strict";var i=n(36);angular.module("evtviewer.dataHandler").service("evtSearchQuery",(function e(){var t;e.prototype.query=function(e,n){return t=i.tokenizer(n),e.query((function(e){e.term(t,{usePipeline:!1,wildcard:i.Query.wildcard.LEADING|i.Query.wildcard.TRAILING})}))},e.prototype.exactMatchQuery=function(e,n){return t=n.match("-")?n:i.tokenizer(n),e.query((function(e){e.term(t,{usePipeline:!1})}))}}))},function(e,t,n){"use strict";var i=n(358);angular.module("evtviewer.dataHandler").service("evtSearchResults",["evtSearchQuery","evtSearchIndex","evtSearch","evtSearchBox","Utils",function e(t,n,o,r,a){var s=/[.,\/#!$%\^&;:{}=_`~()]/;function l(e,t){var n=[],i=e.match(/[*]/);for(var o in t){if(i){e.toLowerCase();var r=c(e,o,t,i);r&&n.push(r)}(e===o.toString()||o.toString().includes(e)||e.includes(o.toString()))&&n.push({token:o.toString(),metadata:t[o],resultsNumber:t[o].xmlDocId.length})}return n}function c(e,t,n,i){var o,r=e.length,a=i.index,s=t.toString().slice(0,a),l=e.slice(0,a),c={token:t.toString(),metadata:n[t],resultsNumber:n[t].xmlDocId.length};return r===a+1&&s===l||0===a&&t.toString().slice(1-r)===(o=e.slice(1,r))||s===l&&(o=e.slice(a+1,e.length),t.toString().slice(-o.length)===o)?c:void 0}function u(e){var t=[];for(var n in e)t.push({token:n.toString(),metadata:e[n],resultsNumber:e[n].xmlDocId.length});return t}function d(e){var t,n;return e.content?(n={content:(t={content:e.content.originalToken}).content.map(p)},{content:h(e.content,n.content)}):(n={diplomatic:(t={diplomatic:e.diplomatic.originalToken||[],interpretative:e.interpretative.originalToken||[]}).diplomatic.map(p),interpretative:t.interpretative.map(p)},{diplomatic:h(e.diplomatic,n.diplomatic),interpretative:h(e.interpretative,n.interpretative)})}function p(e,t){return{token:e,position:t}}function h(e,t){for(var n,i,o={},r={},a=0;a<t.length;a++){for(var s in n=t[a].token,i=!o[t[a].token],e)r[s.toString()]=e[s].filter(f,t[a]);if(i)o[n]=r,r={};else for(var l in r)o[n][l].push(r[l][0])}return o}function f(e,t){return this.position===t}e.prototype.getSearchResults=function(e,i,o){var r,a={"":function(){r="Enter your query into the search box above"},default:function(){r=function(e,i,o){var r={};return function(e,i){var o=n.getIndex();return i?t.exactMatchQuery(o,e):t.query(o,e)}(e.toLowerCase(),o).forEach((function(t){var n,o,a=t.matchData.metadata,s={};for(var c in a)a[c].diplomaticText||a[c].interpretativeText?(s.diplomatic={},s.interpretative={},s.diplomatic=a[c].diplomaticText||{},s.interpretative=a[c].interpretativeText||{},o=d(s),(n=i?{diplomatic:l(e,o.diplomatic),interpretative:l(e,o.interpretative)}:{diplomatic:u(o.diplomatic),interpretative:u(o.interpretative)}).diplomatic&&(r.diplomatic||(r.diplomatic=[]),r.diplomatic=r.diplomatic.concat(n.diplomatic)),n.interpretative&&(r.interpretative||(r.interpretative=[]),r.interpretative=r.interpretative.concat(n.interpretative))):(o=d(a[c]),n=i?{content:l(e,o.content)}:{content:u(o.content)},r.diplomatic=[],r.diplomatic=r.diplomatic.concat(n.content))})),r}(e,i,o)}};return(a[e]||a.default)(),r},e.prototype.getVisibleResults=function(e){for(var t=[],n=0;n<20&&n<e.length;)t.push(e[n]),n++;return t},e.prototype.getCurrentEditionResults=function(e,t){var n=[],i={diplomatic:function(){e.diplomatic.forEach((function(e){n.push(e)}))},interpretative:function(){e.interpretative.forEach((function(e){n.push(e)}))}};return 0!==Object.keys(e).length&&(i[t]?i[t]():alert("Error: search not available for current edition level")),n},e.prototype.getOriginalText=function(e,t){var n=o.getParsedElementsForIndexing();return{diplomatic:function(){return n[e].content.diplomatic||n[e].content},interpretative:function(){return n[e].content.interpretative}}[t]()},e.prototype.getTextPreview=function(e,t){for(var n,i,o,r,s=e.split(/[\s]+/),l=0;a.cleanPunctuation(s[l])!==t&&l<s.length-1;)n=l,l++;return o=s.slice(n,n+10),r=(i=n<10?s.slice(0,n):s.slice(n-10,n)).length<10?i.join(" ")+" "+o.join(" ")+"...":"..."+i.join(" ")+" "+o.join(" ")+"...",s.length<15&&(r=i.join(" ")+" "+o.join(" ")),r},e.prototype.highlightSearchResults=function(e,t){var n=new i(document.querySelector("#"+e+" #mainContentToTranform")),o=r.getStatus(e,"searchCaseSensitive"),a=r.getStatus(e,"searchExactWord");n.unmark(t),a?function(e,t,n){e.mark(t,{wildcards:"enable",acrossElements:!0,caseSensitive:n,accuracy:{value:"exactly",limiters:[".",",",";",":","\\","/","!","?","#","$","%","^","&","*","{","}","=","-","_","`","~","(",")"]},filter:function(){return!t.match(s)},exclude:[".lineN"]})}(n,t,o):function(e,t,n){e.mark(t,{wildcards:"enable",acrossElements:!0,caseSensitive:n,accuracy:{value:"partially",limiters:[".",",",";",":","\\","/","!","?","#","$","%","^","&","*","{","}","=","-","_","`","~","(",")"]},filter:function(e){return!t.match(s)},exclude:[".lineN"]})}(n,t,o)}}])},function(e,t,n){
/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014â2018, Julian KÃ¼hnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=n,this.iframes=i,this.exclude=o,this.iframesTimeout=r}return n(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var n=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||n||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=void 0;try{var o=e.contentWindow;if(i=o.document,!o||!i)throw new Error("iframe inaccessible")}catch(e){n()}i&&t(i)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var i=this,o=!1,r=null,a=function a(){if(!o){o=!0,clearTimeout(r);try{i.isIframeBlank(e)||(e.removeEventListener("load",a),i.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",a),r=setTimeout(a,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,i=0;this.forEachIframe(e,(function(){return!0}),(function(e){i++,n.waitForIframes(e.querySelector("html"),(function(){--i||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,n,i){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=t.querySelectorAll("iframe"),s=a.length,l=0;a=Array.prototype.slice.call(a);var c=function(){--s<=0&&r(l)};s||c(),a.forEach((function(t){e.matches(t,o.exclude)?c():o.onIframeReady(t,(function(e){n(t)&&(l++,i(e)),c()}),c)}))}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,i){var o=!1,r=!1;return i.forEach((function(e,t){e.val===n&&(o=t,r=e.handled)})),this.compareNodeIframe(e,t,n)?(!1!==o||r?!1===o||r||(i[o].handled=!0):i.push({val:n,handled:!0}),!0):(!1===o&&i.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,i){var o=this;e.forEach((function(e){e.handled||o.getIframeContents(e.val,(function(e){o.createInstanceOnIframe(e).forEachNode(t,n,i)}))}))}},{key:"iterateThroughNodes",value:function(e,t,n,i,o){for(var r,a=this,s=this.createIterator(t,e,i),l=[],c=[],u=void 0,d=void 0;r=void 0,r=a.getIteratorNode(s),d=r.prevNode,u=r.node;)this.iframes&&this.forEachIframe(t,(function(e){return a.checkIframeFilter(u,d,e,l)}),(function(t){a.createInstanceOnIframe(t).forEachNode(e,(function(e){return c.push(e)}),i)})),c.push(u);c.forEach((function(e){n(e)})),this.iframes&&this.handleOpenIframes(l,e,n,i),o()}},{key:"forEachNode",value:function(e,t,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=this.getContexts(),a=r.length;a||o(),r.forEach((function(r){var s=function(){i.iterateThroughNodes(e,r,t,n,(function(){--a<=0&&o()}))};i.iframes?i.waitForIframes(r,s):s()}))}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(i){var o=!1;return n.every((function(t){return!i.call(e,t)||(o=!0,!1)})),o}return!1}}]),e}(),r=function(){function r(e){t(this,r),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return n(r,[{key:"log",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",i=this.opt.log;this.opt.debug&&"object"===(void 0===i?"undefined":e(i))&&"function"==typeof i[n]&&i[n]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",i=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var o in t)if(t.hasOwnProperty(o)){var r=t[o],a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(o):this.escapeStr(o),s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r);""!==a&&""!==s&&(e=e.replace(new RegExp("("+this.escapeStr(a)+"|"+this.escapeStr(s)+")","gm"+n),i+"("+this.processSynomyms(a)+"|"+this.processSynomyms(s)+")"+i))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,n){var i=n.charAt(t+1);return/[(|)\\]/.test(i)||""===i?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aÃ Ã¡áº£Ã£áº¡Äáº±áº¯áº³áºµáº·Ã¢áº§áº¥áº©áº«áº­Ã¤Ã¥ÄÄ","AÃÃáº¢Ãáº Äáº°áº®áº²áº´áº¶Ãáº¦áº¤áº¨áºªáº¬ÃÃÄÄ","cÃ§ÄÄ","CÃÄÄ","dÄÄ","DÄÄ","eÃ¨Ã©áº»áº½áº¹Ãªá»áº¿á»á»á»Ã«ÄÄÄ","EÃÃáººáº¼áº¸Ãá»áº¾á»á»á»ÃÄÄÄ","iÃ¬Ã­á»Ä©á»Ã®Ã¯Ä«","IÃÃá»Ä¨á»ÃÃÄª","lÅ","LÅ","nÃ±ÅÅ","NÃÅÅ","oÃ²Ã³á»Ãµá»Ã´á»á»á»á»á»Æ¡á»á»¡á»á»á»£Ã¶Ã¸Å","OÃÃá»Ãá»Ãá»á»á»á»á»Æ á»á» á»á»á»¢ÃÃÅ","rÅ","RÅ","sÅ¡ÅÈÅ","SÅ ÅÈÅ","tÅ¥ÈÅ£","TÅ¤ÈÅ¢","uÃ¹Ãºá»§Å©á»¥Æ°á»«á»©á»­á»¯á»±Ã»Ã¼Å¯Å«","UÃÃá»¦Å¨á»¤Æ¯á»ªá»¨á»¬á»®á»°ÃÃÅ®Åª","yÃ½á»³á»·á»¹á»µÃ¿","YÃá»²á»¶á»¸á»´Å¸","zÅ¾Å¼Åº","ZÅ½Å»Å¹"]:["aÃ Ã¡áº£Ã£áº¡Äáº±áº¯áº³áºµáº·Ã¢áº§áº¥áº©áº«áº­Ã¤Ã¥ÄÄAÃÃáº¢Ãáº Äáº°áº®áº²áº´áº¶Ãáº¦áº¤áº¨áºªáº¬ÃÃÄÄ","cÃ§ÄÄCÃÄÄ","dÄÄDÄÄ","eÃ¨Ã©áº»áº½áº¹Ãªá»áº¿á»á»á»Ã«ÄÄÄEÃÃáººáº¼áº¸Ãá»áº¾á»á»á»ÃÄÄÄ","iÃ¬Ã­á»Ä©á»Ã®Ã¯Ä«IÃÃá»Ä¨á»ÃÃÄª","lÅLÅ","nÃ±ÅÅNÃÅÅ","oÃ²Ã³á»Ãµá»Ã´á»á»á»á»á»Æ¡á»á»¡á»á»á»£Ã¶Ã¸ÅOÃÃá»Ãá»Ãá»á»á»á»á»Æ á»á» á»á»á»¢ÃÃÅ","rÅRÅ","sÅ¡ÅÈÅSÅ ÅÈÅ","tÅ¥ÈÅ£TÅ¤ÈÅ¢","uÃ¹Ãºá»§Å©á»¥Æ°á»«á»©á»­á»¯á»±Ã»Ã¼Å¯Å«UÃÃá»¦Å¨á»¤Æ¯á»ªá»¨á»¬á»®á»°ÃÃÅ®Åª","yÃ½á»³á»·á»¹á»µÃ¿YÃá»²á»¶á»¸á»´Å¸","zÅ¾Å¼ÅºZÅ½Å»Å¹"],i=[];return e.split("").forEach((function(o){n.every((function(n){if(-1!==n.indexOf(o)){if(i.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),i.push(n)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n=this.opt.accuracy,i="string"==typeof n?n:n.value,o="string"==typeof n?[]:n.limiters,r="";switch(o.forEach((function(e){r+="|"+t.escapeStr(e)})),i){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(r="\\s"+(r||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~Â¡Â¿")))+"]*"+e+"[^"+r+"]*)";case"exactly":return"(^|\\s"+r+")("+e+")(?=$|\\s"+r+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)})):e.trim()&&-1===n.indexOf(e)&&n.push(e)})),{keywords:n.sort((function(e,t){return t.length-e.length})),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],i=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var o=t.callNoMatchOnInvalidRanges(e,i),r=o.start,a=o.end;o.valid&&(e.start=r,e.length=a-r,n.push(e),i=a)})),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,i=void 0,o=!1;return e&&void 0!==e.start?(i=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&i-t>0&&i-n>0?o=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:i,valid:o}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var i=void 0,o=!0,r=n.length,a=t-r,s=parseInt(e.start,10)-a;return(i=(s=s>r?r:s)+parseInt(e.length,10))>r&&(i=r,this.log("End range automatically set to the max value of "+r)),s<0||i-s<0||s>r||i>r?(o=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(s,i).replace(/\s+/g,"")&&(o=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:i,valid:o}}},{key:"getTextNodes",value:function(e){var t=this,n="",i=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){i.push({start:n.length,end:(n+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:n,nodes:i})}))}},{key:"matchesExclude",value:function(e){return o.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var i=this.opt.element?this.opt.element:"mark",o=e.splitText(t),r=o.splitText(n-t),a=document.createElement(i);return a.setAttribute("data-markjs","true"),this.opt.className&&a.setAttribute("class",this.opt.className),a.textContent=o.textContent,o.parentNode.replaceChild(a,o),r}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,i,o){var r=this;e.nodes.every((function(a,s){var l=e.nodes[s+1];if(void 0===l||l.start>t){if(!i(a.node))return!1;var c=t-a.start,u=(n>a.end?a.end:n)-a.start,d=e.value.substr(0,a.start),p=e.value.substr(u+a.start);if(a.node=r.wrapRangeInTextNode(a.node,c,u),e.value=d+p,e.nodes.forEach((function(t,n){n>=s&&(e.nodes[n].start>0&&n!==s&&(e.nodes[n].start-=u),e.nodes[n].end-=u)})),n-=u,o(a.node.previousSibling,a.start),!(n>a.end))return!1;t=a.end}return!0}))}},{key:"wrapMatches",value:function(e,t,n,i,o){var r=this,a=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var o=void 0;null!==(o=e.exec(t.textContent))&&""!==o[a];)if(n(o[a],t)){var s=o.index;if(0!==a)for(var l=1;l<a;l++)s+=o[l].length;t=r.wrapRangeInTextNode(t,s,s+o[a].length),i(t.previousSibling),e.lastIndex=0}})),o()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,i,o){var r=this,a=0===t?0:t+1;this.getTextNodes((function(t){for(var s=void 0;null!==(s=e.exec(t.value))&&""!==s[a];){var l=s.index;if(0!==a)for(var c=1;c<a;c++)l+=s[c].length;var u=l+s[a].length;r.wrapRangeInMappedTextNode(t,l,u,(function(e){return n(s[a],e)}),(function(t,n){e.lastIndex=n,i(t)}))}o()}))}},{key:"wrapRangeFromIndex",value:function(e,t,n,i){var o=this;this.getTextNodes((function(r){var a=r.value.length;e.forEach((function(e,i){var s=o.checkWhitespaceRanges(e,a,r.value),l=s.start,c=s.end;s.valid&&o.wrapRangeInMappedTextNode(r,l,c,(function(n){return t(n,e,r.value.substring(l,c),i)}),(function(t){n(t,e)}))})),i()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var i=0,o="wrapMatches";this.opt.acrossElements&&(o="wrapMatchesAcrossElements"),this[o](e,this.opt.ignoreGroups,(function(e,t){return n.opt.filter(t,e,i)}),(function(e){i++,n.opt.each(e)}),(function(){0===i&&n.opt.noMatch(e),n.opt.done(i)}))}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var i=0,o="wrapMatches",r=this.getSeparatedKeywords("string"==typeof e?[e]:e),a=r.keywords,s=r.length,l=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(o="wrapMatchesAcrossElements"),0===s?this.opt.done(i):function e(t){var r=new RegExp(n.createRegExp(t),"gm"+l),c=0;n.log('Searching with expression "'+r+'"'),n[o](r,1,(function(e,o){return n.opt.filter(o,t,i,c)}),(function(e){c++,i++,n.opt.each(e)}),(function(){0===c&&n.opt.noMatch(t),a[s-1]===t?n.opt.done(i):e(a[a.indexOf(t)+1])}))}(a[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var i=0,o=this.checkRanges(e);o&&o.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(o)),this.wrapRangeFromIndex(o,(function(e,t,i,o){return n.opt.filter(e,t,i,o)}),(function(e,t){i++,n.opt.each(e,t)}),(function(){n.opt.done(i)}))):this.opt.done(i)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var i=o.matches(e,n),r=t.matchesExclude(e);return!i||r?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=i({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),r}();return function(e){var t=this,n=new r(e);return this.mark=function(e,i){return n.mark(e,i),t},this.markRegExp=function(e,i){return n.markRegExp(e,i),t},this.markRanges=function(e,i){return n.markRanges(e,i),t},this.unmark=function(e){return n.unmark(e),t},this}}()},function(e,t,n){"use strict";angular.module("evtviewer.search").directive("evtVirtualKeyboard",["evtVirtualKeyboard","parsedData",function(e,t){return{restrict:"E",tempalte:n(360),replace:!0,link:function(n){0!==t.getGlyphs()._indexes.length&&e.build(n,n.vm)}}}])},function(e,t){e.exports='<div class="keyboard-container" id="{{::vm.keyboardId}}"></div>\r\n'},function(e,t,n){"use strict";(function(e){n(362),angular.module("evtviewer.search").provider("evtVirtualKeyboard",(function(){this.$get=["evtKeyboard","config","$rootScope",function(t,n,i){var o,r,a,s,l,c,u,d=[],p={},h=[];return d.build=function(i,d){if(o=i.$parent.id,r=o+"Keyboard",l="",s=n.virtualKeyboardKeys,u=t.getGlyphInXmlDoc(),0!==s.length)for(var f in c=function(e){return t.getConfigKeyboardKeys(e)}(s))u.includes(f)&&(l+=c[f]+":"+f+" ");else for(var g in a=t.getDefaultKeyboardKeys())l+=a[g]+":"+g+" ";e("#"+o+" .search-box input").keyboard({layout:"custom",customLayout:{normal:[l]},usePreview:!1,openOn:null,stayOpen:!0,autoAccept:!0,appendTo:"#"+o+" .search-box .keyboard-container",change:function(e,t){o=i.$parent.id,t.originalContent=t.$preview.val(),i.vm.searchInput=t.originalContent,i.vm.highlightSearchResults(o,i.vm.searchInput)}});var m={keyboardId:r,keyboardBtns:h};return p[o]=angular.extend(d,m),p[o]},d.getKeyboardId=function(e){return p[e].keyboardId},d.unselectCurrentKeyboard=function(t,n){var i,o=e("#"+n+"Keyboard").getkeyboard();if(void 0!==o){for(var r in h)h[r].parentId===n&&(i=h[r].btn);o.close(),i.setActive(!1)}},i.$on("keyboardBtn",(function(e,t){h.push(t)})),d}]}))}).call(this,n(0))},function(e,t,n){var i,o,r;/*! jQuery UI Virtual Keyboard v1.30.1 */o=[n(0)],void 0===(r="function"==typeof(i=function(e){"use strict";var t=e.keyboard=function(n,i){var o,r=this;r.version="1.30.1",r.$el=e(n),r.el=n,r.$el.data("keyboard",r),r.init=function(){r.initialized=!1;var n,a,s,l=t.css,c=t.events;r.settings=i||{},i&&i.position&&(a=e.extend({},i.position),i.position=null),r.options=o=e.extend(!0,{},t.defaultOptions,i),a&&(o.position=a,i.position=a),r.el.active=!0,r.namespace=".keyboard"+Math.random().toString(16).slice(2),r.extensionNamespace=[],r.shiftActive=r.altActive=r.metaActive=r.sets=r.capsLock=!1,r.rows=["","-shift","-alt","-alt-shift"],r.inPlaceholder=r.$el.attr("placeholder")||"",r.watermark=t.watermark&&""!==r.inPlaceholder,r.repeatTime=1e3/(o.repeatRate||20),o.preventDoubleEventTime=o.preventDoubleEventTime||100,r.isOpen=!1,r.wheel="function"==typeof e.fn.mousewheel,r.escapeRegex=/[-\/\\^$*+?.()|[\]{}]/g,r.isTextArea="textarea"===r.el.nodeName.toLowerCase(),r.isInput="input"===r.el.nodeName.toLowerCase(),r.isContentEditable=!r.isTextArea&&!r.isInput&&r.el.isContentEditable,n=t.keyCodes,r.alwaysAllowed=[n.capsLock,n.pageUp,n.pageDown,n.end,n.home,n.left,n.up,n.right,n.down,n.insert,n.delete],r.$keyboard=[],r.enabled=!0,r.checkCaret=o.lockInput||t.checkCaretSupport(),r.isContentEditable&&(o.usePreview=!1),r.last={start:0,end:0,key:"",val:"",preVal:"",layout:"",virtual:!0,keyset:[!1,!1,!1],wheel_$Keys:[],wheelIndex:0,wheelLayers:[]},r.temp=["",0,0],e.each([c.kbInit,c.kbBeforeVisible,c.kbVisible,c.kbHidden,c.inputCanceled,c.inputAccepted,c.kbBeforeClose,c.inputRestricted],(function(e,t){"function"==typeof o[t]&&r.$el.bind(t+r.namespace+"callbacks",o[t])})),o.alwaysOpen&&(o.stayOpen=!0),s=e(document),r.el.ownerDocument!==document&&(s=s.add(r.el.ownerDocument));var u="keyup checkkeyboard mousedown touchstart ";o.closeByClickEvent&&(u+="click "),s.bind(u.split(" ").join(r.namespace+" "),(function(e){clearTimeout(r.timer3),r.timer3=setTimeout((function(){r.checkClose(e)}),1)})),r.$el.addClass(l.input+" "+o.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(o.lockInput||r.el.readOnly)&&(o.lockInput=!0,r.$el.addClass(l.locked).attr({readonly:"readonly"})),r.isUnavailable()&&r.$el.addClass(l.noKeyboard),o.openOn&&r.bindFocus(),r.watermark||""!==r.getValue(r.$el)||""===r.inPlaceholder||""===r.$el.attr("placeholder")||(r.$el.addClass(l.placeholder),r.setValue(r.inPlaceholder,r.$el)),r.$el.trigger(c.kbInit,[r,r.el]),o.alwaysOpen&&r.reveal(),r.initialized=!0},r.toggle=function(){if(r.hasKeyboard()){var e=r.$keyboard.find("."+t.css.keyToggle),n=!r.enabled;return r.preview.readonly=n||r.options.lockInput,r.$keyboard.toggleClass(t.css.keyDisabled,n).find("."+t.css.keyButton).not(e).attr("aria-disabled",n).each((function(){this.disabled=n})),e.toggleClass(t.css.keyDisabled,n),n&&r.typing_options&&(r.typing_options.text=""),r}},r.setCurrent=function(){var n=t.css,i=e("."+n.isCurrent),o=i.data("keyboard");e.isEmptyObject(o)||o.el===r.el||o.close(!!o.options.autoAccept&&"true"),i.removeClass(n.isCurrent),e("."+n.hasFocus).removeClass(n.hasFocus),r.$el.addClass(n.isCurrent),r.$preview.focus(),r.$keyboard.addClass(n.hasFocus),r.isCurrent(!0),r.isOpen=!0},r.isUnavailable=function(){return r.$el.is(":disabled")||!r.options.activeOnReadonly&&r.$el.attr("readonly")&&!r.$el.hasClass(t.css.locked)},r.isCurrent=function(e){var n=t.currentKeyboard||!1;return e?n=t.currentKeyboard=r.el:!1===e&&n===r.el&&(n=t.currentKeyboard=""),n===r.el},r.hasKeyboard=function(){return r.$keyboard&&r.$keyboard.length>0},r.isVisible=function(){return!!r.hasKeyboard()&&r.$keyboard.is(":visible")},r.setFocus=function(){var e=r.$preview||r.$el;o.noFocus||e.focus(),r.isContentEditable?t.setEditableCaret(e,r.last.start,r.last.end):t.caret(e,r.last)},r.focusOn=function(){!r&&r.el.active||(r.isVisible()?r.setCurrent():(clearTimeout(r.timer),r.reveal()))},r.redraw=function(e){return e&&(r.options.layout=e),r.$keyboard.length&&(r.last.preVal=""+r.last.val,r.saveLastChange(),r.setValue(r.last.val,r.$el),r.removeKeyboard(),r.shiftActive=r.altActive=r.metaActive=!1),r.isOpen=o.alwaysOpen,r.reveal(!0),r},r.reveal=function(n){var i,a=r.isOpen,s=t.css;if(r.opening=!a,e("."+s.keyboard).not("."+s.alwaysOpen).each((function(){var t=e(this).data("keyboard");e.isEmptyObject(t)||t.close(!!t.options.autoAccept&&"true")})),!r.isUnavailable())return r.$el.removeClass(s.noKeyboard),o.openOn&&r.$el.unbind(e.trim((o.openOn+" ").split(/\s+/).join(r.namespace+" "))),r.$keyboard&&(!r.$keyboard||r.$keyboard.length&&!e.contains(r.el.ownerDocument.body,r.$keyboard[0]))||r.startup(),r.watermark||r.getValue()!==r.inPlaceholder||(r.$el.removeClass(s.placeholder),r.setValue("",r.$el)),r.originalContent=r.isContentEditable?r.$el.html():r.getValue(r.$el),r.el===r.preview||r.isContentEditable||r.setValue(r.originalContent),o.acceptValid&&o.checkValidOnInit&&r.checkValid(),o.resetDefault&&(r.shiftActive=r.altActive=r.metaActive=!1),r.showSet(),r.isVisible()||r.$el.trigger(t.events.kbBeforeVisible,[r,r.el]),(r.initialized||o.initialFocus||!o.initialFocus&&r.$el.hasClass(t.css.initialFocus))&&r.setCurrent(),r.toggle(),r.$keyboard.show(),o.usePreview&&t.msie&&(void 0===r.width&&(r.$preview.hide(),r.width=Math.ceil(r.$keyboard.width()),r.$preview.show()),r.$preview.width(r.width)),r.reposition(),r.checkDecimal(),r.lineHeight=parseInt(r.$preview.css("lineHeight"),10)||parseInt(r.$preview.css("font-size"),10)+4,o.caretToEnd&&(i=r.isContentEditable?t.getEditableLength(r.el):r.originalContent.length,r.saveCaret(i,i)),t.allie&&(0===r.last.end&&r.last.start>0&&(r.last.end=r.last.start),r.last.start<0&&(r.last.start=r.last.end=r.originalContent.length)),a||n?(t.caret(r.$preview,r.last),r.opening=!1,r):(r.timer2=setTimeout((function(){r.opening=!1,/(number|email)/i.test(r.el.type)||o.caretToEnd||r.saveCaret(void 0,void 0,r.$el),(o.initialFocus||r.$el.hasClass(t.css.initialFocus))&&t.caret(r.$preview,r.last),r.last.eventTime=(new Date).getTime(),r.$el.trigger(t.events.kbVisible,[r,r.el]),r.timer=setTimeout((function(){r&&r.saveCaret()}),200)}),10),r)},r.updateLanguage=function(){var n=t.layouts,i=o.language||n[o.layout]&&n[o.layout].lang&&n[o.layout].lang||[o.language||"en"],a=t.language;i="[object Array]"===Object.prototype.toString.call(i)?i[0]:i,r.language=i,i=i.split("-")[0],o.display=e.extend(!0,{},a.en.display,a[i]&&a[i].display||{},r.settings.display),o.combos=e.extend(!0,{},a.en.combos,a[i]&&a[i].combos||{},r.settings.combos),o.wheelMessage=a[i]&&a[i].wheelMessage||a.en.wheelMessage,o.rtl=n[o.layout]&&n[o.layout].rtl||a[i]&&a[i].rtl||!1,a[i]&&a[i].comboRegex&&(r.regex=a[i].comboRegex),r.decimal=/^\./.test(o.display.dec),r.$el.toggleClass("rtl",o.rtl).css("direction",o.rtl?"rtl":"")},r.startup=function(){var n=t.css;(o.alwaysOpen||o.userClosed)&&r.$preview||r.makePreview(),r.hasKeyboard()||("custom"===o.layout&&(o.layoutHash="custom"+r.customHash()),r.layout="custom"===o.layout?o.layoutHash:o.layout,r.last.layout=r.layout,r.updateLanguage(),void 0===t.builtLayouts[r.layout]&&("function"==typeof o.create?r.$keyboard=o.create(r):r.$keyboard.length||r.buildKeyboard(r.layout,!0)),r.$keyboard=t.builtLayouts[r.layout].$keyboard.clone(),r.$keyboard.data("keyboard",r),""!==(r.el.id||"")&&r.$keyboard.attr("id",r.el.id+t.css.idSuffix),r.makePreview()),r.$keyboard.attr("data-"+n.keyboard+"-layout",o.layout).attr("data-"+n.keyboard+"-language",r.language),r.$decBtn=r.$keyboard.find("."+n.keyPrefix+"dec"),(o.enterNavigation||r.isTextArea)&&r.alwaysAllowed.push(t.keyCodes.enter),r.bindKeyboard(),r.$keyboard.appendTo(o.appendLocally?r.$el.parent():o.appendTo||"body"),r.bindKeys(),o.reposition&&e.ui&&e.ui.position&&"body"===o.appendTo&&e(window).bind("resize"+r.namespace,(function(){r.reposition()}))},r.reposition=function(){return r.position=!e.isEmptyObject(o.position)&&o.position,e.ui&&e.ui.position&&r.position&&(r.position.of=r.position.of||r.$el.data("keyboardPosition")||r.$el,r.position.collision=r.position.collision||"flipfit flipfit",r.position.at=o.usePreview?o.position.at:o.position.at2,r.isVisible()&&r.$keyboard.position(r.position)),r},r.makePreview=function(){if(o.usePreview){var n,i,a,s,l=t.css;for(r.$preview=r.$el.clone(!1).data("keyboard",r).removeClass(l.placeholder+" "+l.input).addClass(l.preview+" "+o.css.input).attr("tabindex","-1").show(),r.preview=r.$preview[0],"number"===r.preview.type&&(r.preview.type="text"),s=/^(data-|id|aria-haspopup)/i,n=(i=r.$preview.get(0).attributes).length-1;n>=0;n--)a=i[n]&&i[n].name,s.test(a)&&r.preview.removeAttribute(a);e("<div />").addClass(l.wrapper).append(r.$preview).prependTo(r.$keyboard)}else r.$preview=r.$el,r.preview=r.el},r.caret=function(n,i){var o=t.caret(r.$preview,n,i);return o instanceof e?(r.saveCaret(o.start,o.end),r):o},r.saveCaret=function(e,n,i){var o;r.isCurrent()&&(o=void 0===e?t.caret(i||r.$preview):t.caret(i||r.$preview,e,n),r.last.start=void 0===e?o.start:e,r.last.end=void 0===n?o.end:n)},r.saveLastChange=function(e){r.last.val=e||r.getValue(r.$preview||r.$el),r.isContentEditable&&(r.last.elms=r.el.cloneNode(!0))},r.setScroll=function(){if(!r.isContentEditable&&r.last.virtual){var e,n,i,a,s=r.last.val.substring(0,Math.max(r.last.start,r.last.end));r.$previewCopy||(r.$previewCopy=r.$preview.clone().removeAttr("id").css({position:"absolute",left:0,zIndex:-10,visibility:"hidden"}).addClass(t.css.inputClone),r.$previewCopy[0].disabled=!0,r.isTextArea||r.$previewCopy.css({"white-space":"pre",width:0}),o.usePreview?r.$preview.after(r.$previewCopy):r.$keyboard.prepend(r.$previewCopy)),r.isTextArea?(r.$previewCopy.height(r.lineHeight).val(s),r.preview.scrollTop=r.lineHeight*(Math.floor(r.$previewCopy[0].scrollHeight/r.lineHeight)-1)):(r.$previewCopy.val(s.replace(/\s/g,"Â ")),i=/c/i.test(o.scrollAdjustment)?r.preview.clientWidth/2:o.scrollAdjustment,e=r.$previewCopy[0].scrollWidth-1,void 0===r.last.scrollWidth&&(r.last.scrollWidth=e,r.last.direction=!0),a=r.last.scrollWidth===e?r.last.direction:r.last.scrollWidth<e,n=r.preview.clientWidth-i,a?r.preview.scrollLeft=e<n?0:e-n:e>=r.preview.scrollWidth-n?r.preview.scrollLeft=r.preview.scrollWidth-i:r.preview.scrollLeft=e-i>0?e-i:0,r.last.scrollWidth=e,r.last.direction=a)}},r.bindFocus=function(){o.openOn&&r&&r.el.active&&(r.$el.bind(o.openOn+r.namespace,(function(){r.focusOn()})),e(":focus")[0]===r.el&&r.$el.blur())},r.bindKeyboard=function(){var n,i=t.keyCodes,a=t.builtLayouts[r.layout],s=r.namespace+"keybindings";r.$preview.unbind(r.namespace).bind("click"+s+" touchstart"+s,(function(){o.alwaysOpen&&!r.isCurrent()&&r.reveal(),r.timer2=setTimeout((function(){r&&r.saveCaret()}),150)})).bind("keypress"+s,(function(s){if(o.lockInput)return!1;if(r.isCurrent()){var l=s.charCode||s.which,c=l>=i.A&&l<=i.Z,u=l>=i.a&&l<=i.z,d=r.last.key=String.fromCharCode(l);if(!(l<i.space)){if(r.last.virtual=!1,r.last.event=s,r.last.$key=[],r.checkCaret&&r.saveCaret(),l!==i.capsLock&&(c||u)&&(r.capsLock=c&&!s.shiftKey||u&&s.shiftKey,r.capsLock&&!r.shiftActive&&(r.shiftActive=!0,r.showSet())),o.restrictInput){if((s.which===i.backSpace||0===s.which)&&e.inArray(s.keyCode,r.alwaysAllowed))return;-1===e.inArray(d,a.acceptedKeys)&&(s.preventDefault(),(n=e.extend({},s)).type=t.events.inputRestricted,r.$el.trigger(n,[r,r.el]))}else if((s.ctrlKey||s.metaKey)&&(s.which===i.A||s.which===i.C||s.which===i.V||s.which>=i.X&&s.which<=i.Z))return;a.hasMappedKeys&&a.mappedKeys.hasOwnProperty(d)&&(r.last.key=a.mappedKeys[d],r.insertText(r.last.key),s.preventDefault()),"function"==typeof o.beforeInsert&&(r.insertText(r.last.key),s.preventDefault()),r.checkMaxLength()}}})).bind("keyup"+s,(function(n){if(r.isCurrent()){switch(r.last.virtual=!1,n.which){case i.tab:if(r.tab&&!o.lockInput){r.shiftActive=n.shiftKey;var a=t.keyaction.tab(r);if(r.tab=!1,!a)return!1}else n.preventDefault();break;case i.escape:return o.ignoreEsc||r.close(!(!o.autoAccept||!o.autoAcceptOnEsc)&&"true"),!1}clearTimeout(r.throttled),r.throttled=setTimeout((function(){r&&r.isVisible()&&r.checkCombos()}),100),r.checkMaxLength(),r.last.preVal=""+r.last.val,r.saveLastChange();var s=e.Event(t.events.kbChange);if(s.action=r.last.key,r.$el.trigger(s,[r,r.el]),"function"==typeof o.change)return s.type=t.events.inputChange,o.change(s,r,r.el),!1;o.acceptValid&&o.autoAcceptOnValid&&"function"==typeof o.validate&&o.validate(r,r.getValue(r.$preview))&&(r.$preview.blur(),r.accept())}})).bind("keydown"+s,(function(e){if(r.last.keyPress=e.which,o.alwaysOpen&&!r.isCurrent()&&r.reveal(),e.which===i.tab)return r.tab=!0,!1;if(o.lockInput||e.timeStamp===r.last.timeStamp)return!o.lockInput;switch(r.last.timeStamp=e.timeStamp,r.last.virtual=!1,e.which){case i.backSpace:t.keyaction.bksp(r,null,e),e.preventDefault();break;case i.enter:t.keyaction.enter(r,null,e);break;case i.capsLock:r.shiftActive=r.capsLock=!r.capsLock,r.showSet();break;case i.V:if(e.ctrlKey||e.metaKey){if(o.preventPaste)return void e.preventDefault();r.checkCombos()}}})).bind("mouseup touchend ".split(" ").join(s+" "),(function(){r.last.virtual=!0,r.saveCaret()})),r.$keyboard.bind("mousedown click touchstart ".split(" ").join(r.namespace+" "),(function(t){t.stopPropagation(),r.isCurrent()||(r.reveal(),e(r.el.ownerDocument).trigger("checkkeyboard"+r.namespace)),r.setFocus()})),o.preventPaste&&(r.$preview.bind("contextmenu"+r.namespace,(function(e){e.preventDefault()})),r.$el.bind("contextmenu"+r.namespace,(function(e){e.preventDefault()})))},r.bindButton=function(n,i){var o="."+t.css.keyButton,a=function(n){n.stopPropagation(),n.$target=e(this).closest("."+t.css.keyboard+", ."+t.css.input),i.call(this,n)};return e.fn.on?r.$keyboard.on(n,o,a):e.fn.delegate&&r.$keyboard.delegate(o,n,a),r},r.unbindButton=function(n){return e.fn.off?r.$keyboard.off(n):e.fn.undelegate&&r.$keyboard.undelegate("."+t.css.keyButton,n),r},r.bindKeys=function(){var n=t.css;r.unbindButton(r.namespace+" "+r.namespace+"kb").bindButton("mouseenter mouseleave touchstart ".split(" ").join(r.namespace+" "),(function(t){if(!o.alwaysOpen&&!o.userClosed||"mouseleave"===t.type||r.isCurrent()||(r.reveal(),r.setFocus()),r.isCurrent()&&!this.disabled){var n,i,a=r.last,s=e(this),l=t.type;o.useWheel&&r.wheel&&(n=r.getLayers(s),i=(n.length?n.map((function(){return e(this).attr("data-value")||""})).get():"")||[s.text()],a.wheel_$Keys=n,a.wheelLayers=i,a.wheelIndex=e.inArray(s.attr("data-value"),i)),"mouseenter"!==l&&"touchstart"!==l||"password"===r.el.type||s.hasClass(o.css.buttonDisabled)||(s.addClass(o.css.buttonHover),o.useWheel&&r.wheel&&s.attr("title",(function(e,t){return r.wheel&&""===t&&r.sets&&i.length>1&&"touchstart"!==l?o.wheelMessage:t}))),"mouseleave"===l&&(s.removeClass("password"===r.el.type?"":o.css.buttonHover),o.useWheel&&r.wheel&&(a.wheelIndex=0,a.wheelLayers=[],a.wheel_$Keys=[],s.attr("title",(function(e,t){return t===o.wheelMessage?"":t})).html(s.attr("data-html"))))}})).bindButton(o.keyBinding.split(" ").join(r.namespace+" ")+r.namespace+" "+t.events.kbRepeater,(function(i){if(i.preventDefault(),!r.$keyboard.is(":visible")||this.disabled)return!1;var a,s=r.last,l=e(this),c=(new Date).getTime();if(o.useWheel&&r.wheel&&(l=s.wheel_$Keys.length&&s.wheelIndex>-1?s.wheel_$Keys.eq(s.wheelIndex):l),a=l.attr("data-action"),!(c-(s.eventTime||0)<o.preventDoubleEventTime)){if(s.eventTime=c,s.event=i,s.virtual=!0,s.$key=l,s.key=l.attr("data-value"),s.keyPress="",r.setFocus(),/^meta/.test(a)&&(a="meta"),a===s.key&&"string"==typeof t.keyaction[a])s.key=a=t.keyaction[a];else if(a in t.keyaction&&"function"==typeof t.keyaction[a]){if(!1===t.keyaction[a](r,this,i))return!1;a=null}return!!r.hasKeyboard()&&(null!=a&&(s.key=e(this).hasClass(n.keyAction)?a:s.key,r.insertText(s.key),r.capsLock||o.stickyShift||i.shiftKey||(r.shiftActive=!1,r.showSet(l.attr("data-name")))),t.caret(r.$preview,s),r.checkCombos(),(i=e.extend({},i,e.Event(t.events.kbChange))).target=r.el,i.action=s.key,r.$el.trigger(i,[r,r.el]),s.preVal=""+s.val,r.saveLastChange(),"function"==typeof o.change?(i.type=t.events.inputChange,o.change(i,r,r.el),!1):void 0)}})).bindButton("mouseup"+r.namespace+" "+"mouseleave touchend touchmove touchcancel ".split(" ").join(r.namespace+"kb "),(function(n){r.last.virtual=!0;var i,a=e(this);if("touchmove"===n.type){if((i=a.offset()).right=i.left+a.outerWidth(),i.bottom=i.top+a.outerHeight(),n.originalEvent.touches[0].pageX>=i.left&&n.originalEvent.touches[0].pageX<i.right&&n.originalEvent.touches[0].pageY>=i.top&&n.originalEvent.touches[0].pageY<i.bottom)return!0}else/(mouseleave|touchend|touchcancel)/i.test(n.type)?a.removeClass(o.css.buttonHover):(!o.noFocus&&r.isCurrent()&&r.isVisible()&&r.$preview.focus(),r.checkCaret&&t.caret(r.$preview,r.last));return r.mouseRepeat=[!1,""],clearTimeout(r.repeater),o.acceptValid&&o.autoAcceptOnValid&&"function"==typeof o.validate&&o.validate(r,r.getValue())&&(r.$preview.blur(),r.accept()),!1})).bindButton("click"+r.namespace,(function(){return!1})).bindButton("mousewheel"+r.namespace,r.throttleEvent((function(t,i){var a=e(this);if(a&&!a.hasClass(n.keyAction)&&r.last.wheel_$Keys[0]===this&&o.useWheel&&r.wheel){i=i||t.deltaY;var s,l=r.last.wheelLayers||[];return l.length>1?((s=r.last.wheelIndex+(i>0?-1:1))>l.length-1&&(s=0),s<0&&(s=l.length-1)):s=0,r.last.wheelIndex=s,a.html(l[s]),!1}}),30)).bindButton("mousedown touchstart ".split(" ").join(r.namespace+"kb "),(function(){var t=e(this);if(t&&(!t.hasClass(n.keyAction)||t.is("."+n.keyPrefix+"tab bksp space enter".split(" ").join(",."+n.keyPrefix))))return 0!==o.repeatRate&&(r.mouseRepeat=[!0,t],setTimeout((function(){r&&r.mouseRepeat[0]&&r.mouseRepeat[1]===t&&!t[0].disabled&&r.repeatKey(t)}),o.repeatDelay)),!1}))},r.throttleEvent=function(e,t){var n;return function(){n||(e.apply(this,arguments),n=!0,setTimeout((function(){n=!1}),t))}},r.execCommand=function(e,t){r.el.ownerDocument.execCommand(e,!1,t),r.el.normalize(),o.reposition&&r.reposition()},r.getValue=function(e){return(e=e||r.$preview)[r.isContentEditable?"text":"val"]()},r.setValue=function(e,n){return n=n||r.$preview,r.isContentEditable?e!==n.text()&&(t.replaceContent(n,e),r.saveCaret()):n.val(e),r},r.insertText=function(e){if(!r.$preview)return r;if("function"==typeof o.beforeInsert&&(e=o.beforeInsert(r.last.event,r,r.el,e)),void 0===e||!1===e)return r.last.key="",r;if(r.isContentEditable)return r.insertContentEditable(e);var n,i=!1,a="\b"===e,s=r.getValue(),l=t.caret(r.$preview),c=s.length;return l.end<l.start&&(l.end=l.start),l.start>c&&(l.end=l.start=c),r.isTextArea&&t.msie&&"\n"===s.substring(l.start,l.start+1)&&(l.start+=1,l.end+=1),n=l.start,"{d}"===e&&(e="",l.end+=1),a&&(e="",i=a&&n===l.end&&n>0),s=s.substring(0,n-(i?1:0))+e+s.substring(l.end),n+=i?-1:e.length,r.setValue(s),r.saveCaret(n,n),r.setScroll(),r},r.insertContentEditable=function(e){return r.$preview.focus(),r.execCommand("insertText",e),r.saveCaret(),r},r.checkMaxLength=function(){if(r.$preview){var e,n,i=r.getValue(),a=r.isContentEditable?t.getEditableLength(r.el):i.length;return!1!==o.maxLength&&a>o.maxLength&&(e=t.caret(r.$preview).start,n=Math.min(e,o.maxLength),o.maxInsert||(i=r.last.val,n=e-1),r.setValue(i.substring(0,o.maxLength)),r.saveCaret(n,n)),r.$decBtn.length&&r.checkDecimal(),r}},r.repeatKey=function(e){e.trigger(t.events.kbRepeater),r.mouseRepeat[0]&&(r.repeater=setTimeout((function(){r&&r.repeatKey(e)}),r.repeatTime))},r.getKeySet=function(){var e=[];return r.altActive&&e.push("alt"),r.shiftActive&&e.push("shift"),r.metaActive&&e.push(r.metaActive),e.length?e.join("+"):"normal"},r.showKeySet=function(e){return"string"==typeof e?(r.last.keyset=[r.shiftActive,r.altActive,r.metaActive],r.shiftActive=/shift/i.test(e),r.altActive=/alt/i.test(e),/\bmeta/.test(e)?(r.metaActive=!0,r.showSet(e.match(/\bmeta[\w-]+/i)[0])):(r.metaActive=!1,r.showSet())):r.showSet(e),r},r.showSet=function(e){if(r.hasKeyboard()){o=r.options;var n=t.css,i="."+n.keyPrefix,a=o.css.buttonActive,s="",l=(r.shiftActive?1:0)+(r.altActive?2:0);if(r.shiftActive||(r.capsLock=!1),r.metaActive?(r.shiftActive&&(e=(e||"").replace("-shift","")),r.altActive&&(e=(e||"").replace("-alt","")),""===(s=/^meta/i.test(e)?e:"")?s=!0===r.metaActive?"":r.metaActive:r.metaActive=s,(!o.stickyShift&&r.last.keyset[2]!==r.metaActive||(r.shiftActive||r.altActive)&&!r.$keyboard.find("."+n.keySet+"-"+s+r.rows[l]).length)&&(r.shiftActive=r.altActive=!1)):!o.stickyShift&&r.last.keyset[2]!==r.metaActive&&r.shiftActive&&(r.shiftActive=r.altActive=!1),s=0!=(l=(r.shiftActive?1:0)+(r.altActive?2:0))||r.metaActive?""===s?"":"-"+s:"-normal",!r.$keyboard.find("."+n.keySet+s+r.rows[l]).length)return r.shiftActive=r.last.keyset[0],r.altActive=r.last.keyset[1],void(r.metaActive=r.last.keyset[2]);r.$keyboard.find(i+"alt,"+i+"shift,."+n.keyAction+"[class*=meta]").removeClass(a).end().find(i+"alt").toggleClass(a,r.altActive).end().find(i+"shift").toggleClass(a,r.shiftActive).end().find(i+"lock").toggleClass(a,r.capsLock).end().find("."+n.keySet).hide().end().find("."+(n.keyAction+i+s).replace("--","-")).addClass(a),r.$keyboard.find("."+n.keySet+s+r.rows[l])[0].style.display="inline-block",r.metaActive&&r.$keyboard.find(i+r.metaActive).toggleClass(a,!1!==r.metaActive),r.last.keyset=[r.shiftActive,r.altActive,r.metaActive],r.$el.trigger(t.events.kbKeysetChange,[r,r.el]),o.reposition&&r.reposition()}},r.checkCombos=function(){if(!(r.isVisible()||r.hasKeyboard()&&r.$keyboard.hasClass(t.css.hasFocus)))return r.getValue(r.$preview||r.$el);var i,a,s,l,c=r.getValue(),u=t.caret(r.$preview),d=t.builtLayouts[r.layout],p=r.isContentEditable?t.getEditableLength(r.el):c.length,h=p;return""===c?(o.acceptValid&&r.checkValid(),c):(u.end<u.start&&(u.end=u.start),u.start>h&&(u.end=u.start=h),t.msie&&"\n"===c.substring(u.start,u.start+1)&&(u.start+=1,u.end+=1),o.useCombos&&(t.msie?c=c.replace(r.regex,(function(e,t,n){return o.combos.hasOwnProperty(t)&&o.combos[t][n]||e})):r.$preview.length&&(a=u.start-(u.start-2>=0?2:0),t.caret(r.$preview,a,u.end),s=(l=function(e){return(e||"").replace(r.regex,(function(e,t,n){return o.combos.hasOwnProperty(t)&&o.combos[t][n]||e}))})((a=t.caret(r.$preview)).text),a&&a.replaceStr&&s!==a.text&&(r.isContentEditable?t.replaceContent(n,l):r.setValue(a.replaceStr(s))),c=r.getValue())),o.restrictInput&&""!==c&&(a=d.acceptedKeys.length,(i=d.acceptedKeysRegex)||(s=e.map(d.acceptedKeys,(function(e){return e.replace(r.escapeRegex,"\\$&")})),r.alwaysAllowed.indexOf(t.keyCodes.enter)>-1&&s.push("\\n"),i=d.acceptedKeysRegex=new RegExp("("+s.join("|")+")","g")),(s=c.match(i))?c=s.join(""):(c="",h=0)),u.start+=p-h,u.end+=p-h,r.setValue(c),r.saveCaret(u.start,u.end),r.setScroll(),r.checkMaxLength(),o.acceptValid&&r.checkValid(),c)},r.checkValid=function(){var e=t.css,n=r.$keyboard.find("."+e.keyPrefix+"accept"),i=!0;"function"==typeof o.validate&&(i=o.validate(r,r.getValue(),!1)),n.toggleClass(e.inputInvalid,!i).toggleClass(e.inputValid,i).attr("title",n.attr("data-title")+" ("+o.display[i?"valid":"invalid"]+")")},r.checkDecimal=function(){r.decimal&&/\./g.test(r.preview.value)||!r.decimal&&/\,/g.test(r.preview.value)?r.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(o.css.buttonHover).addClass(o.css.buttonDisabled):r.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(o.css.buttonDefault).removeClass(o.css.buttonDisabled)},r.getLayers=function(n){var i=t.css,o=n.attr("data-pos");return n.closest("."+i.keyboard).find('button[data-pos="'+o+'"]').filter((function(){return""!==e(this).find("."+i.keyText).text()})).add(n)},r.switchInput=function(t,n){if("function"==typeof o.switchInput)o.switchInput(r,t,n);else{r.$keyboard.length&&r.$keyboard.hide();var i,a=!1,s=e("button, input, select, textarea, a, [contenteditable]").filter(":visible").not(":disabled"),l=s.index(r.$el)+(t?1:-1);if(r.$keyboard.length&&r.$keyboard.show(),l>s.length-1&&(a=o.stopAtEnd,l=0),l<0&&(a=o.stopAtEnd,l=s.length-1),!a){if(!(n=r.close(n)))return;(i=s.eq(l).data("keyboard"))&&i.options.openOn.length?i.focusOn():s.eq(l).focus()}}return!1},r.close=function(e){if(r.isOpen&&r.$keyboard.length){clearTimeout(r.throttled);var n=t.css,i=t.events,a=e?r.checkCombos():r.originalContent;if(e&&"function"==typeof o.validate&&!o.validate(r,a,!0)&&(a=r.originalContent,e=!1,o.cancelClose))return;r.isCurrent(!1),r.isOpen=o.alwaysOpen||o.userClosed,r.isContentEditable&&!e?r.$el.html(a):r.setValue(a,r.$el),r.$el.removeClass(n.isCurrent+" "+n.inputAutoAccepted).addClass(e?!0===e?"":n.inputAutoAccepted:"").trigger(i.inputChange),o.alwaysOpen||r.$el.trigger(i.kbBeforeClose,[r,r.el,e||!1]),t.caret(r.$preview,r.last),r.$el.trigger(e?i.inputAccepted:i.inputCanceled,[r,r.el]).trigger(o.alwaysOpen?i.kbInactive:i.kbHidden,[r,r.el]).blur(),r&&(r.last.eventTime=(new Date).getTime(),o.alwaysOpen||o.userClosed&&"true"===e||!r.$keyboard.length||(r.removeKeyboard(),r.timer=setTimeout((function(){r&&r.bindFocus()}),200)),r.watermark||""!==r.el.value||""===r.inPlaceholder||(r.$el.addClass(n.placeholder),r.setValue(r.inPlaceholder,r.$el)))}return!!e},r.accept=function(){return r.close(!0)},r.checkClose=function(n){if(!r.opening){var i=e.keyboard.css,a=n.$target||e(n.target).closest("."+t.css.keyboard+", ."+t.css.input);if(a.length||(a=e(n.target)),a.length&&a.hasClass(i.keyboard)){var s=a.data("keyboard");s!==r&&!s.$el.hasClass(i.isCurrent)&&s.options.openOn&&n.type===o.openOn&&s.focusOn()}else r.escClose(n,a)}},r.escCloseCallback={keepOpen:function(){return!r.isOpen}},r.escClose=function(n,i){if(r.isOpen){if(n&&"keyup"===n.type)return n.which!==t.keyCodes.escape||o.ignoreEsc?"":r.close(!(!o.autoAccept||!o.autoAcceptOnEsc)&&"true");var a=!1,s=i.length&&i||e(n.target);if(e.each(r.escCloseCallback,(function(e,t){"function"==typeof t&&(a=a||t(s))})),!a&&(!r.isCurrent()&&r.isOpen||r.isOpen&&s[0]!==r.el)){if((o.stayOpen||o.userClosed)&&!s.hasClass(t.css.input))return;if(t.allie&&n.preventDefault(),o.closeByClickEvent){var l=s[0]&&s[0].nodeName.toLowerCase();"input"!==l&&"textarea"!==l&&"click"!==n.type||r.close(!!o.autoAccept&&"true")}else r.close(!!o.autoAccept&&"true")}}},r.keyBtn=e("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass(t.css.keyButton),r.processName=function(e){var t,n,i=(e||"").replace(/[^a-z0-9-_]/gi,""),o=i.length,r=[];if(o>1&&e===i)return e;if(o=e.length){for(t=0;t<o;t++)n=e[t],r.push(/[a-z0-9-_]/i.test(n)?/[-_]/.test(n)&&0!==t?"":n:(0===t?"":"-")+n.charCodeAt(0));return r.join("")}return e},r.processKeys=function(t){var n,i,o=t.indexOf("</"),r={name:t,map:"",title:""};return o>-1||(i=t.split(/:(?!\/\/)/),/\(.+\)/.test(i[0])||/^:\(.+\)/.test(t)||/\([(:)]\)/.test(t)?/\([(:)]\)/.test(t)?(n=i[0].match(/([^(]+)\((.+)\)/))&&n.length?(r.name=n[1],r.map=n[2],r.title=i.length>1?i.slice(1).join(":"):""):(r.name=t.match(/([^(]+)/)[0],":"===r.name&&(i=i.slice(1)),null===n&&(r.map=":",i=i.slice(2)),r.title=i.length?i.join(":"):""):(r.map=t.match(/\(([^()]+?)\)/)[1],""===(n=(t=t.replace(/\(([^()]+)\)/,"")).split(":"))[0]?(r.name=":",i=i.slice(1)):r.name=n[0],r.title=i.length>1?i.slice(1).join(":"):""):(""!==t&&""===i[0]?(r.name=":",i=i.slice(1)):r.name=i[0],r.title=i.length>1?i.slice(1).join(":"):""),r.title=e.trim(r.title).replace(/_/g," ")),r},r.addKey=function(e,n,i){var a,s,l,c={},u=r.processKeys(i?e:n),d=t.css;return!i&&o.display[u.name]?(l=r.processKeys(o.display[u.name])).action=r.processKeys(e).name:(l=u).action=u.name,c.name=r.processName(u.name),""!==l.name&&(""!==l.map?(t.builtLayouts[r.layout].mappedKeys[l.map]=l.name,t.builtLayouts[r.layout].acceptedKeys.push(l.name)):i&&t.builtLayouts[r.layout].acceptedKeys.push(l.name)),a=i?""===c.name?"":d.keyPrefix+c.name:d.keyAction+" "+d.keyPrefix+l.action,a+=(l.name.length>2?" "+d.keyWide:"")+" "+o.css.buttonDefault,c.html='<span class="'+d.keyText+'">'+l.name+"</span>",c.$key=r.keyBtn.clone().attr({"data-value":i?l.name:l.action,"data-name":l.action,"data-pos":r.temp[1]+","+r.temp[2],"data-action":l.action,"data-html":c.html}).addClass(a).html(c.html).appendTo(r.temp[0]),l.map&&c.$key.attr("data-mapped",l.map),(l.title||u.title)&&c.$key.attr({"data-title":u.title||l.title,title:u.title||l.title}),"function"==typeof o.buildKey&&(s=(c=o.buildKey(r,c)).$key.html(),c.$key.attr("data-html",s)),c.$key},r.customHash=function(e){var t,n,i,r,a=[],s=[];for(n in e=void 0===e?o.customLayout:e)e.hasOwnProperty(n)&&a.push(e[n]);if(i=0,0===(r=(s=s.concat.apply(s,a).join(" ")).length))return i;for(t=0;t<r;t++)i=(i<<5)-i+s.charCodeAt(t),i&=i;return i},r.buildKeyboard=function(n,i){e.isEmptyObject(o.display)&&r.updateLanguage();var a,s,l,c,u=t.css,d=0,p=t.builtLayouts[n||r.layout||o.layout]={mappedKeys:{},acceptedKeys:[]},h=p.acceptedKeys=o.restrictInclude&&(""+o.restrictInclude).split(/\s+/)||[],f=u.keyboard+" "+o.css.popup+" "+o.css.container+(o.alwaysOpen||o.userClosed?" "+u.alwaysOpen:""),g=e("<div />").addClass(f).attr({role:"textbox"}).hide();return(a=e.inArray("{space}",h))>-1&&(h[a]=" "),i&&"custom"===o.layout||!t.layouts.hasOwnProperty(o.layout)?(o.layout="custom",f=t.layouts.custom=o.customLayout||{normal:["{cancel}"]}):f=t.layouts[i?o.layout:n||r.layout||o.layout],e.each(f,(function(t,n){if(""!==t&&!/^(name|lang|rtl)$/i.test(t))for("default"===t&&(t="normal"),d++,l=e("<div />").attr("name",t).addClass(u.keySet+" "+u.keySet+"-"+t).appendTo(g).toggle("normal"===t),s=0;s<n.length;s++)c=e.trim(n[s]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),r.buildRow(l,s,c.split(/\s+/),h),l.find("."+u.keyButton+",."+u.keySpacer).filter(":last").after('<br class="'+u.endRow+'"/>')})),d>1&&(r.sets=!0),p.hasMappedKeys=!e.isEmptyObject(p.mappedKeys),p.$keyboard=g,g},r.buildRow=function(n,i,a,s){var l,c,u,d,p,h,f=t.css;for(u=0;u<a.length;u++)if(r.temp=[n,i,u],d=!1,0!==a[u].length)if(/^\{\S+\}$/.test(a[u])){if(p=a[u].match(/^\{(\S+)\}$/)[1],/\!\!/.test(p)&&(p=p.replace("!!",""),d=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(p)&&(h=parseFloat(p.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0),e('<span class="'+f.keyText+'"></span>').width(p.match(/px/i)?h+"px":2*h+"em").addClass(f.keySpacer).appendTo(n)),/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(p)){h=/:/.test(p)?parseFloat(p.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",r.addKey(""," ",!0).addClass(o.css.buttonDisabled+" "+o.css.buttonEmpty).attr("aria-disabled",!0).width(h?p.match("px")?h+"px":2*h+"em":"");continue}if(/^meta[\w-]+\:?(\w+)?/i.test(p)){r.addKey(p.split(":")[0],p).addClass(f.keyHasActive);continue}switch((c=p.split(":"))[0].toLowerCase()){case"a":case"accept":r.addKey("accept",p).addClass(o.css.buttonAction+" "+f.keyAction);break;case"alt":case"altgr":r.addKey("alt",p).addClass(f.keyHasActive);break;case"b":case"bksp":r.addKey("bksp",p);break;case"c":case"cancel":r.addKey("cancel",p).addClass(o.css.buttonAction+" "+f.keyAction);break;case"combo":r.addKey("combo",p).addClass(f.keyHasActive).attr("title",(function(e,t){return t+" "+o.display[o.useCombos?"active":"disabled"]})).toggleClass(o.css.buttonActive,o.useCombos);break;case"dec":s.push(r.decimal?".":","),r.addKey("dec",p);break;case"e":case"enter":r.addKey("enter",p).addClass(o.css.buttonAction+" "+f.keyAction);break;case"lock":r.addKey("lock",p).addClass(f.keyHasActive);break;case"s":case"shift":r.addKey("shift",p).addClass(f.keyHasActive);break;case"sign":s.push("-"),r.addKey("sign",p);break;case"space":s.push(" "),r.addKey("space",p);break;case"t":case"tab":r.addKey("tab",p);break;default:t.keyaction.hasOwnProperty(c[0])&&r.addKey(c[0],p).toggleClass(o.css.buttonAction+" "+f.keyAction,d)}}else l=a[u],r.addKey(l,l,!0)},r.removeBindings=function(t){e(document).unbind(t),r.el.ownerDocument!==document&&e(r.el.ownerDocument).unbind(t),e(window).unbind(t),r.$el.unbind(t)},r.removeKeyboard=function(){r.$decBtn=[],o.usePreview&&r.$preview.removeData("keyboard"),r.$preview.unbind(r.namespace+"keybindings"),r.preview=null,r.$preview=null,r.$previewCopy=null,r.$keyboard.removeData("keyboard"),r.$keyboard.remove(),r.$keyboard=[],r.isOpen=!1,r.isCurrent(!1)},r.destroy=function(e){var n,i=t.css,a=r.extensionNamespace.length,s=[i.input,i.locked,i.placeholder,i.noKeyboard,i.alwaysOpen,o.css.input,i.isCurrent].join(" ");for(clearTimeout(r.timer),clearTimeout(r.timer2),clearTimeout(r.timer3),r.$keyboard.length&&r.removeKeyboard(),r.options.openOn&&r.removeBindings(r.options.openOn),r.removeBindings(r.namespace),r.removeBindings(r.namespace+"callbacks"),n=0;n<a;n++)r.removeBindings(r.extensionNamespace[n]);r.el.active=!1,r.$el.removeClass(s).removeAttr("aria-haspopup").removeAttr("role").removeData("keyboard"),r=null,"function"==typeof e&&e()},r.init()};return t.keyCodes={backSpace:8,tab:9,enter:13,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,A:65,Z:90,V:86,C:67,X:88,a:97,z:122},t.css={idSuffix:"_keyboard",initialFocus:"keyboard-init-focus",input:"ui-keyboard-input",inputClone:"ui-keyboard-preview-clone",wrapper:"ui-keyboard-preview-wrapper",preview:"ui-keyboard-preview",keyboard:"ui-keyboard",keySet:"ui-keyboard-keyset",keyButton:"ui-keyboard-button",keyWide:"ui-keyboard-widekey",keyPrefix:"ui-keyboard-",keyText:"ui-keyboard-text",keyHasActive:"ui-keyboard-hasactivestate",keyAction:"ui-keyboard-actionkey",keySpacer:"ui-keyboard-spacer",keyToggle:"ui-keyboard-toggle",keyDisabled:"ui-keyboard-disabled",divWrapperCE:"ui-keyboard-div-wrapper",locked:"ui-keyboard-lockedinput",alwaysOpen:"ui-keyboard-always-open",noKeyboard:"ui-keyboard-nokeyboard",placeholder:"ui-keyboard-placeholder",hasFocus:"ui-keyboard-has-focus",isCurrent:"ui-keyboard-input-current",inputValid:"ui-keyboard-valid-input",inputInvalid:"ui-keyboard-invalid-input",inputAutoAccepted:"ui-keyboard-autoaccepted",endRow:"ui-keyboard-button-endrow"},t.events={kbChange:"keyboardChange",kbBeforeClose:"beforeClose",kbBeforeVisible:"beforeVisible",kbVisible:"visible",kbInit:"initialized",kbInactive:"inactive",kbHidden:"hidden",kbRepeater:"repeater",kbKeysetChange:"keysetChange",inputAccepted:"accepted",inputCanceled:"canceled",inputChange:"change",inputRestricted:"restricted"},t.keyaction={accept:function(e){return e.close(!0),!1},alt:function(e){e.altActive=!e.altActive,e.showSet()},bksp:function(e){e.isContentEditable?(e.execCommand("delete"),e.saveCaret()):e.insertText("\b")},cancel:function(e){return e.close(),!1},clear:function(e){e.$preview[e.isContentEditable?"text":"val"](""),e.$decBtn.length&&e.checkDecimal()},combo:function(e){var n=e.options,i=!n.useCombos,o=e.$keyboard.find("."+t.css.keyPrefix+"combo");return n.useCombos=i,o.toggleClass(n.css.buttonActive,i).attr("title",o.attr("data-title")+" ("+n.display[i?"active":"disabled"]+")"),i&&e.checkCombos(),!1},dec:function(e){e.insertText(e.decimal?".":",")},del:function(e){e.isContentEditable?e.execCommand("forwardDelete"):e.insertText("{d}")},default:function(e){e.shiftActive=e.altActive=e.metaActive=!1,e.showSet()},enter:function(n,i,o){var r=n.options;return o.shiftKey?r.enterNavigation?n.switchInput(!o[r.enterMod],!0):n.close(!0):!r.enterNavigation||n.isTextArea&&!o[r.enterMod]?(n.isTextArea&&e(o.target).closest("button").length&&n.insertText((t.msie?" ":"")+"\n"),void(n.isContentEditable&&!r.enterNavigation&&(n.execCommand("insertHTML",'<div><br class="'+t.css.divWrapperCE+'"></div>'),setTimeout((function(){t.keyaction.right(n),n.saveCaret()}),0)))):n.switchInput(!o[r.enterMod],!!r.autoAccept&&"true")},lock:function(e){e.last.keyset[0]=e.shiftActive=e.capsLock=!e.capsLock,e.showSet()},left:function(e){var n=t.caret(e.$preview);n.start-1>=0&&(e.last.start=e.last.end=n.start-1,t.caret(e.$preview,e.last),e.setScroll())},meta:function(t,n){var i=e(n);t.metaActive=!i.hasClass(t.options.css.buttonActive),t.showSet(i.attr("data-name"))},next:function(e){return e.switchInput(!0,e.options.autoAccept),!1},normal:function(e){e.shiftActive=e.altActive=e.metaActive=!1,e.showSet()},prev:function(e){return e.switchInput(!1,e.options.autoAccept),!1},right:function(e){var n=t.caret(e.$preview),i=e.isContentEditable?t.getEditableLength(e.el):e.getValue().length;n.end+1<=i&&(e.last.start=e.last.end=n.end+1,t.caret(e.$preview,e.last),e.setScroll())},shift:function(e){e.last.keyset[0]=e.shiftActive=!e.shiftActive,e.showSet()},sign:function(e){if(/^[+-]?\d*\.?\d*$/.test(e.getValue())){var n,i=t.caret(e.$preview),o=e.getValue(),r=e.isContentEditable?t.getEditableLength(e.el):o.length;e.setValue(-1*o),n=r-o.length,e.last.start=i.start+n,e.last.end=i.end+n,t.caret(e.$preview,e.last),e.setScroll()}},space:function(e){e.insertText(" ")},tab:function(e){var t=e.options;if(!e.isTextArea){if(t.tabNavigation)return e.switchInput(!e.shiftActive,!0);if(e.isInput)return!1}e.insertText("\t")},toggle:function(e){e.enabled=!e.enabled,e.toggle()},NBSP:"Â ",ZWSP:"â",ZWNJ:"â",ZWJ:"â",LRM:"â",RLM:"â"},t.builtLayouts={},t.layouts={alpha:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ Â¡ Â² Â³ Â¤ â¬ Â¼ Â½ Â¾ â â Â¥ Ã {bksp}","{tab} Ã¤ Ã¥ Ã© Â® Ã¾ Ã¼ Ãº Ã­ Ã³ Ã¶ Â« Â» Â¬","Ã¡ Ã Ã° f g h j k Ã¸ Â¶ Â´ {enter}","{shift} Ã¦ x Â© v b Ã± Âµ Ã§ > Â¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ Â¹ Â² Â³ Â£ â¬ Â¼ Â½ Â¾ â â Â¥ Ã· {bksp}","{tab} Ã Ã Ã Â® Ã Ã Ã Ã Ã Ã Â« Â» Â¦","Ã Â§ Ã F G H J K Ã Â° Â¨ {enter}","{shift} Ã X Â¢ V B Ã Âµ Ã . Â¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}","{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{normal:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{normal:["= ( ) {b}","{clear} / * -","7 8 9 +","4 5 6 {sign}","1 2 3 %","0 {dec} {a} {c}"]}},t.language={en:{display:{a:"â:Accept (Shift+Enter)",accept:"Accept:Accept (Shift+Enter)",alt:"Alt:â¥ AltGr",b:"â«:Backspace",bksp:"Bksp:Backspace",c:"â:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"Ã¶:Toggle Combo Keys",dec:".:Decimal",e:"â:Enter",empty:"Â ",enter:"Enter:Enter â",left:"â",lock:"Lock:âª Caps Lock",next:"Next â¨",prev:"â¦ Prev",right:"â",s:"â§:Shift",shift:"Shift:Shift",sign:"Â±:Change Sign",space:"Â :Space",t:"â¥:Tab",tab:"â¥ Tab:Tab",toggle:" ",valid:"valid",invalid:"invalid",active:"active",disabled:"disabled"},wheelMessage:"Use mousewheel to see other keys",comboRegex:/([`\'~\^\"ao])([a-z])/gim,combos:{"`":{a:"Ã ",A:"Ã",e:"Ã¨",E:"Ã",i:"Ã¬",I:"Ã",o:"Ã²",O:"Ã",u:"Ã¹",U:"Ã",y:"á»³",Y:"á»²"},"'":{a:"Ã¡",A:"Ã",e:"Ã©",E:"Ã",i:"Ã­",I:"Ã",o:"Ã³",O:"Ã",u:"Ãº",U:"Ã",y:"Ã½",Y:"Ã"},'"':{a:"Ã¤",A:"Ã",e:"Ã«",E:"Ã",i:"Ã¯",I:"Ã",o:"Ã¶",O:"Ã",u:"Ã¼",U:"Ã",y:"Ã¿",Y:"Å¸"},"^":{a:"Ã¢",A:"Ã",e:"Ãª",E:"Ã",i:"Ã®",I:"Ã",o:"Ã´",O:"Ã",u:"Ã»",U:"Ã",y:"Å·",Y:"Å¶"},"~":{a:"Ã£",A:"Ã",e:"áº½",E:"áº¼",i:"Ä©",I:"Ä¨",o:"Ãµ",O:"Ã",u:"Å©",U:"Å¨",y:"á»¹",Y:"á»¸",n:"Ã±",N:"Ã"}}}},t.defaultOptions={language:null,rtl:!1,layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!0,alwaysOpen:!1,initialFocus:!0,noFocus:!1,stayOpen:!1,userClosed:!1,ignoreEsc:!1,closeByClickEvent:!1,css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",popup:"",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,autoAcceptOnEsc:!1,lockInput:!1,restrictInput:!1,restrictInclude:"",acceptValid:!1,autoAcceptOnValid:!1,checkValidOnInit:!0,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",wrapBRs:!0,stickyShift:!0,preventPaste:!1,caretToEnd:!1,scrollAdjustment:10,maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!0,openOn:"focus",activeOnReadonly:!1,keyBinding:"mousedown touchstart",useWheel:!0,useCombos:!0,validate:function(){return!0}},t.comboRegex=/([`\'~\^\"ao])([a-z])/gim,t.currentKeyboard="",e('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");<\/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");<\/script><![endif]--\x3e').appendTo("body").remove(),t.msie=e("body").hasClass("oldie"),t.allie=e("body").hasClass("ie"),t.watermark=void 0!==document.createElement("input").placeholder,t.checkCaretSupport=function(){if("boolean"!=typeof t.checkCaret){var n=e('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;"><input type="text" value="testing"/></div>').prependTo("body");t.caret(n.find("input"),3,3),t.checkCaret=3!==t.caret(n.find("input").hide().show()).start,n.remove()}return t.checkCaret},t.caret=function(e,n,i){if(!e||!e.length||e.is(":hidden")||"hidden"===e.css("visibility"))return{};var o,r,a,s,l=e.data("keyboard"),c=l&&l.options.noFocus,u=/(textarea|input)/i.test(e[0].nodeName);return c||e.focus(),void 0!==n?("object"==typeof n&&"start"in n&&"end"in n?(o=n.start,r=n.end):void 0===i&&(i=n),"number"==typeof n&&"number"==typeof i?(o=n,r=i):"start"===n?o=r=0:"string"==typeof n&&(o=r="end"),u?e.caret(o,r,c):t.setEditableCaret(e,o,r)):(s=u?e.caret():t.getEditableCaret(e[0]),o=s.start,r=s.end,a=u&&e[0].value||e.text()||"",{start:o,end:r,text:a.substring(o,r),replaceStr:function(e){return a.substring(0,o)+e+a.substring(r,a.length)}})},t.isTextNode=function(e){return e&&3===e.nodeType},t.isBlock=function(e,t){var n=e.ownerDocument.defaultView;return t&&1===t.nodeType&&t!==e&&"block"===n.getComputedStyle(t).display?1:0},t.wrapBRs=function(n){var i=e(n).find("br:not(."+t.css.divWrapperCE+")");i.length&&e.each(i,(function(i,o){var r=o.parentNode.childNodes.length;(1!==r||1===r&&!t.isBlock(n,o.parentNode))&&e(o).addClass(t.css.divWrapperCE).wrap("<div>")}))},t.getEditableCaret=function(n){if(!(n=e(n)[0]).isContentEditable)return{};var i,o,r=(e(n).data("keyboard")||{}).options,a=n.ownerDocument.getSelection().getRangeAt(0),s=c(a.startContainer,a.startOffset),l=s.position;function c(i,o){var a,s="",l=!1,c=0,u=e.makeArray(n.childNodes);function d(e){e&&(c+=e,s+=r&&r.replaceCR||"\n")}for(;!l&&u.length;){if((a=u.shift())===i&&(l=!0),d(t.isBlock(n,a.previousSibling)),t.isTextNode(a)){if(c+=l?o:a.length,s+=a.textContent,l)return{position:c,text:s}}else!l&&a.childNodes&&(u=e.makeArray(a.childNodes).concat(u));d(t.isTextNode(a.previousSibling)&&t.isBlock(n,a))}return{position:c,text:s}}return!1!==r.wrapBRs&&t.wrapBRs(n),a.endContainer===a.startContainer&&a.endOffset===a.startOffset?(i=l,o=""):(i=(s=c(a.endContainer,a.endOffset)).position,o=s.text.substring(l,i)),{start:l,end:i,text:o}},t.getEditableLength=function(e){var n=t.setEditableCaret(e,"getMax");return"number"==typeof n?n:null},t.setEditableCaret=function(n,i,o){if(!(n=e(n)[0]).isContentEditable)return{};var r=n.ownerDocument,a=r.createRange(),s=r.getSelection(),l=(e(n).data("keyboard")||{}).options,c=i,u=o,d="",p=h("getMax"===i?"end":i);function h(i){"end"===i?i=n.innerHTML.length:i<0&&(i=0);var o,r,a="",s=!1,c=0,u=0,d=0,p=e.makeArray(n.childNodes);function h(e){return a+=e?l&&l.replaceCR||"\n":"",e>0}function f(e){var t=c+e;return u=d,d+=e,i-t>=0?i-(c=t)<=0:i-t<=0}for(;!s&&p.length;)if(o=p.shift(),h(r=t.isBlock(n,o.previousSibling))&&f(r)&&(s=!0),h(r=t.isTextNode(o.previousSibling)&&t.isBlock(n,o))&&f(r)&&(s=!0),t.isTextNode(o)){if(a+=o.textContent,f(o.length))return{node:o,offset:r=i-c==0&&c-u>=1?o.length:i-c,position:i,text:a}}else!s&&o.childNodes&&(p=e.makeArray(o.childNodes).concat(p));return p.length?{node:o,offset:i-c,position:i,text:a}:{node:o,offset:o&&o.length||0,position:d,text:a}}if(p.node){if(c=p.position,"getMax"===i)return c;a.setStart(p.node,p.offset),void 0!==o&&o!==i&&(p=h(o)),p.node&&(u=p.position,a.setEnd(p.node,p.offset),d=c===u?"":p.text.substring(c,u)),s.removeAllRanges(),s.addRange(a)}return{start:c,end:u,text:d}},t.replaceContent=function(n,i){n=e(n)[0];for(var o,r,a,s=typeof i,l=t.getEditableCaret(n).start,c=0,u=[n];o=u.pop();)if(t.isTextNode(o))"function"===s?l>=c&&l<=c+o.length&&(o.textContent=i(o.textContent)):"string"===s&&(a=i.substring(c,c+o.length))!==o.textContent&&(o.textContent=a),c+=o.length;else if(o&&o.childNodes)for(r=o.childNodes.length;r--;)u.push(o.childNodes[r]);r=t.getEditableCaret(n),t.setEditableCaret(n,r.start,r.start)},e.fn.keyboard=function(t){return this.each((function(){e(this).data("keyboard")||new e.keyboard(this,t)}))},e.fn.getkeyboard=function(){return this.data("keyboard")},e.fn.caret=function(e,t,n){if(void 0===this[0]||this.is(":hidden")||"hidden"===this.css("visibility")||!/(INPUT|TEXTAREA)/i.test(this[0].nodeName))return this;var i,o,r,a,s,l=this[0],c=l.ownerDocument.selection,u=l.scrollTop,d=!1,p=!0;try{d="selectionStart"in l}catch(e){p=!1}return p&&void 0!==e?(/(email|number)/i.test(l.type)||(d?(l.selectionStart=e,l.selectionEnd=t):((i=l.createTextRange()).collapse(!0),i.moveStart("character",e),i.moveEnd("character",t-e),i.select())),n||!this.is(":visible")&&"hidden"===this.css("visibility")||l.focus(),l.scrollTop=u,this):(/(email|number)/i.test(l.type)?e=t=this.val().length:d?(e=l.selectionStart,t=l.selectionEnd):c?"TEXTAREA"===l.nodeName.toUpperCase()?(s=this.val(),(r=(o=c.createRange()).duplicate()).moveToElementText(l),r.setEndPoint("EndToEnd",o),e=r.text.replace(/\r/g,"\n").length,t=e+o.text.replace(/\r/g,"\n").length):(s=this.val().replace(/\r/g,"\n"),(o=c.createRange().duplicate()).moveEnd("character",s.length),e=""===o.text?s.length:s.lastIndexOf(o.text),(o=c.createRange().duplicate()).moveStart("character",-s.length),t=o.text.length):e=t=(l.value||"").length,a=l.value||"",{start:e,end:t,text:a.substring(e,t),replace:function(n){return a.substring(0,e)+n+a.substring(t,a.length)}})},t})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){"use strict";angular.module("evtviewer.tdhop",[])},function(e,t,n){"use strict";angular.module("evtviewer.tdhop",[]).service("tdhopViewerModel","$log",(function(){var e={id:"tdhop",name:"Mesh_1_mesh",url:"data/models/singleres/cross.ply",mesh:"Mesh_1_mesh",toolHome:!0,toolZoomin:!0,toolZoomout:!0,toolLighting:!0,toolLightControl:!0,toolMeasure:!0,toolPickPoint:!0,toolPlaneSections:!0,toolSolidColor:!0,toolCamera:!0,toolFullScreen:!0};this.getOptions=function(){return e}}))},function(e,t,n){"use strict";angular.module("evtviewer.tdhop").provider("evtTredhop",(function(){this.$get=["config","$ocLazyLoad","$log",function(e,t,n){var i={},o=n.getInstance("evtTredhop");return i.build=function(n){var i=e.tdhopViewerOptions.Model_1?e.tdhopViewerOptions.Model_1.path:"",r=e.tdhopViewerOptions.Model_2?e.tdhopViewerOptions.Model_2.path:"",a=e.tdhopViewerOptions.Hotspots?e.tdhopViewerOptions.Hotspots.path:"",s=e.tdhopViewerOptions.Hotspots?e.tdhopViewerOptions.Hotspots.type:void 0,l=e.tdhopViewerOptions.Hotspots?JSON.stringify(e.tdhopViewerOptions.Hotspots.hotspotsdata):[];o.log("Check hotspotsdata "+l),o.log("Check model path "+i),e.tdhopViewerOptions.id="tdhop";var c=["jquery.js","spidergl.js","presenter.js","nexus.js","ply.js","helpers.js","trackball_sphere.js","trackball_turntable.js","trackball_turntable_pan.js","trackball_pantilt.js","trackball_rail.js","nexus.js","corto.js","meco.js","init.js","meshcoder_worker.js","setup.js"],u=function(){init3dhop(),setup3dhop(i,r,a,l,s)};e.tdhopViewerOptions.toolHome;!function e(n){t.load("js-plugins/tdhop/"+c[n]).then((function(){c[n+1]?e(n+1):(u(),o.log("3dhop viewer setup and initialized"))}))}(0)},i}]}))},function(e,t,n){"use strict";angular.module("evtviewer.tdhop").directive("evtTredhop",["evtTredhop","evtInterface","$timeout",function(e,t,i){return{restrict:"AE",scope:{canvas:"@",measurebox:"@",options:"=",name:"="},controllerAs:"vm",controller:"TreDHOPCtrl",template:n(367),transclude:!0,link:function(t,n,o){i((function(){var n=e.build(t);t.$on("$destroy",(function(){n&&tdhop.destroy(n.currentId)}))}),10)}}}])},function(e,t){e.exports='<div id="tdhop" class="3dhop" onmousedown="if (event.preventDefault) event.preventDefault()">\r\n   <div style="position:absolute; right:10px; top:10px; z-index:2;">\r\n      \x3c!--COMPASS--\x3e\r\n      <div\r\n         style="background-color:rgba(150, 150, 150, 0.8); border-radius: 5px; font-family:verdana; font-size:15px; padding:3px;">\r\n         <div style="margin: 0 auto;">\r\n            <canvas id="compassCanvas"\r\n               style="margin: 4px auto; display: block; background:#555555; width:100; height:100; border:1px solid #000000;"\r\n               onclick=\'var currpos = presenter.getTrackballPosition(); currpos[0] = 0.0; presenter.animateToTrackballPosition(currpos);\'\r\n               width="100" height="100"></canvas>\r\n         </div>\r\n         <table style="border: \'1\'">\r\n            <tbody>\r\n               <tr>\r\n                  <td></td>\r\n                  <td>\r\n                     <button style="margin: 0 auto; cursor:hand;"\r\n                        onclick="presenter.animateToTrackballPosition([180.0, 0.0, 0.0, 0.12, 0.0, 3.0]);">{{ \'3DHOP.NORTH\' | translate }}</button>\r\n                  </td>\r\n                  <td></td>\r\n               </tr>\r\n               <tr>\r\n                  <td>\r\n                     <button style="margin: 0 auto; cursor:hand;"\r\n                        onclick="presenter.animateToTrackballPosition([-90.0, 0.0, 0.0, 0.12, 0.0, 3.0]);">{{ \'3DHOP.EAST\' | translate }}</button>\r\n                  </td>\r\n                  <td>\r\n                     <button style="margin: 0 auto; display: block; cursor:hand;"\r\n                        onclick="presenter.animateToTrackballPosition([0.0, 90.0, -0.1, 0.0, -0.066, 2.0]);">{{ \'3DHOP.TOP\' | translate }}</button>\r\n                  </td>\r\n                  <td>\r\n                     <button style="margin: 0 auto; cursor:hand;"\r\n                        onclick="presenter.animateToTrackballPosition([90.0, 0.0, 0.0, 0.12, 0.0, 3.0]);">{{ \'3DHOP.WEST\' | translate }}</button>\r\n                  </td>\r\n               </tr>\r\n               <tr>\r\n                  <td></td>\r\n                  <td>\r\n                     <button style="margin: 0 auto; cursor:hand;"\r\n                        onclick="presenter.animateToTrackballPosition([0.0, 0.0, 0.0, 0.12, 0.0, 3.0]);">{{ \'3DHOP.SOUTH\' | translate }}</button>\r\n                  </td>\r\n                  <td></td>\r\n               </tr>\r\n            </tbody>\r\n         </table>\r\n         \x3c!--input type="checkbox" style="cursor:hand;" onclick="presenter.toggleCameraType();">\r\n      Orthographic View--\x3e\r\n      </div>\r\n      \x3c!--COMPASS--\x3e\r\n      \x3c!--PREDEFINED VIEWS-- >\r\n      </br>\r\n      <div style="background-color:rgba(150, 150, 150, 0.8); border-radius: 5px; font-family:verdana; font-size:15px; padding:3px;">\r\n      <B>VIEWS</B></br></br>\r\n\r\n      <button style="cursor:hand; width:100%;" onclick="\r\n         presenter.animateToTrackballPosition([-134.06457816074385, -12.887777440509286, -0.0759087076749807, 0.3412565266806582, -0.27139426466935546, 0.2]);"><span>Occhio</span></button></br>\r\n\r\n      <button style="cursor:hand; width:100%;" onclick="\r\n         presenter.animateToTrackballPosition([-30.932175037195172, 21.48969026734013, -0.10514808884296216, 0.24072568682235757, 0.4103747554925059, 0.47158953820000027]);"><span>Base</span></button></br>\r\n\r\n      <button style="cursor:hand; width:100%;" onclick="\r\n         presenter.animateToTrackballPosition([-78.9460382691582, 23.208563652732604, -0.12881082145875608, -0.14276897621084111, -0.20041195051130686, 0.5021485402753604]);"><span>Ala</span></button></br>\r\n      </div>--\x3e\r\n   </div>\r\n   <div id="toolbar">\r\n\r\n      <img ng-if="::vm.isToolHomeAvailable()" id="home" class="viewer3dhopBtn" title="{{ \'3DHOP.HOME\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/home.png" />\r\n      \x3c!--FULLSCREEN--\x3e\r\n      <img ng-if="::vm.isToolFullScreenAvailable()" id="full_on" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'full_on\')" title="{{ \'3DHOP.EXIT_FULL_SCREEN\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/full_on.png"\r\n         style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolFullScreenAvailable()" id="full" class="viewer3dhopBtn" ng-click="actionsToolbar(\'full\')"\r\n         title="{{ \'3DHOP.FULL_SCREEN\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/full.png" /><br />\r\n      \x3c!--FULLSCREEN--\x3e\r\n      <div ng-if="::vm.isToolArrowsAvailable()" id="arrows">\r\n         <div id="movement_control">\r\n            <img class="move_ left" id="move_left" title="{{ \'3DHOP.MOVE_LEFT\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/arrows.png" />\r\n            <img class="move_ right" id="move_right" title="{{ \'3DHOP.MOVE_RIGHT\' | translate }}"\r\n               ng-src="js-plugins/tdhop/skins/dark/arrows.png" /><br />\r\n            <img class="move_ up" id="move_up" title="{{ \'3DHOP.MOVE_UP\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/arrows.png" />\r\n            <img class="move_ dawn" id="move_dawn" title="{{ \'3DHOP.MOVE_DOWN\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/arrows.png" />\r\n         </div>\r\n      </div>\r\n      \x3c!--ZOOM--\x3e\r\n      <img ng-if="::vm.isToolZoominAvailable()" id="zoomin" class="viewer3dhopBtn" title="{{ \'3DHOP.ZOOM_IN\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/zoomin.png" />\r\n      <img ng-if="::vm.isToolZoomoutAvailable()" id="zoomout" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'zoomout\')" title="{{ \'3DHOP.ZOOM_OUT\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/zoomout.png" /><br />\r\n      \x3c!--ZOOM--\x3e\r\n      \x3c!--LIGHT--\x3e\r\n      <img ng-if="::vm.isToolLightingAvailable()" id="lighting_off" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'lighting_off\')" title="{{ \'3DHOP.ENABLE_LIGHTING\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/lighting_off.png" style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolLightingAvailable()" id="lighting" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'lighting\')" title="{{ \'3DHOP.DISABLE_LIGHTING\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/lighting.png" />\r\n      <img ng-if="::vm.isToolLightControlAvailable()" id="light_off" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'light_off\')" title="{{ \'3DHOP.DISABLE_LIGHT_CONTROL\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/lightcontrol_on.png" style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolLightControlAvailable()" id="light" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'light\')" title="{{ \'3DHOP.ENABLE_LIGHT_CONTROL\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/lightcontrol.png" /><br />\r\n      \x3c!--LIGHT--\x3e\r\n      <img ng-if="::vm.isToolCameraAvailable()" id="perspective" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'perspective\')" title="{{ \'3DHOP.PERSPECTIVE_CAMERA\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/perspective.png" style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolCameraAvailable()" id="orthographic" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'orthographic\')" title="{{ \'3DHOP.ORTHOGRAPHIC_CAMERA\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/orthographic.png" /><br />\r\n      \x3c!--COLOR--\x3e\r\n      <img ng-if="::vm.isToolSolidColorAvailable()" id="color_on" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'color_on\')" title="{{ \'3DHOP.MODEL_COLOR\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/color_on.png"\r\n         style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolSolidColorAvailable()" id="color" class="viewer3dhopBtn" ng-click="actionsToolbar(\'color\')"\r\n         title="{{ \'3DHOP.SOLID_COLOR\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/color.png" /><br />\r\n      \x3c!--COLOR--\x3e\r\n      \x3c!--HOTSPOT--\x3e\r\n      <img ng-if="::vm.isToolHotspotAvailable()" id="hotspot_on" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'hotspot_on\')" title="{{ \'3DHOP.HIDE_HOTSPOTS\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/pin_on.png"\r\n         style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolHotspotAvailable()" id="hotspot" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'hotspot\')" title="{{ \'3DHOP.SHOW_HOTSPOTS\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/pin.png" /><br />\r\n      \x3c!--HOTSPOT--\x3e\r\n      \x3c!--MEASURE--\x3e\r\n      <img ng-if="::vm.isToolMeasureAvailable()" id="measure_on" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'measure_on\')" title="{{ \'3DHOP.DISABLE_MEASURE_TOOL\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/measure_on.png" style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolMeasureAvailable()" id="measure" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'measure\')" title="{{ \'3DHOP.ENABLE_MEASURE_TOOL\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/measure.png" /><br />\r\n      \x3c!--MEASURE--\x3e\r\n      \x3c!--POINT PICKING--\x3e\r\n      <img ng-if="::vm.isToolPickPointAvailable()" id="pick_on" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'pick_on\')" title="{{ \'3DHOP.DISABLE_PICKPOINT_MODE\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/pick_on.png" style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolPickPointAvailable()" id="pick" class="viewer3dhopBtn" ng-click="actionsToolbar(\'pick\')"\r\n         title="{{ \'3DHOP.ENABLE_PICKPOINT_MODE\' | translate }}" ng-src="js-plugins/tdhop/skins/dark/pick.png" /><br />\r\n      \x3c!--POINT PICKING--\x3e\r\n      \x3c!--SECTIONS--\x3e\r\n      <img ng-if="::vm.isToolPlaneSectionsAvailable()" id="sections_on" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'sections_on\')" title="{{ \'3DHOP.DISABLE_PLANE_SECTIONS\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/sections_on.png" style="position:absolute; visibility:hidden;" />\r\n      <img ng-if="::vm.isToolPlaneSectionsAvailable()" id="sections" class="viewer3dhopBtn"\r\n         ng-click="actionsToolbar(\'sections\')" title="{{ \'3DHOP.ENABLE_PLANE_SECTIONS\' | translate }}"\r\n         ng-src="js-plugins/tdhop/skins/dark/sections.png" /><br />\r\n      \x3c!--SECTIONS--\x3e\r\n      <div ng-if="::vm.isToolLightControllerAvailable()" ng-click="actionsToolbar" id="lightcontroller">\r\n         <canvas id="lightcontroller_canvas" width="125" height="125" />\r\n      </div>\r\n   </div>\r\n   <div id="tdhlg"></div>\r\n   \x3c!--MEASURE--\x3e\r\n   <div id="measure-box" ng-click="onEndMeasure(\'measure-box\')" class="output-box">{{ \'3DHOP.MEASURED_LENGTH\' | translate }}\r\n      <hr /><span id="measure-output" ng-click="onEndMeasure(\'measure-output\')" class="output-text"\r\n         onmousedown="event.stopPropagation()">0.0</span></div>\r\n   \x3c!--MEASURE--\x3e\r\n   \x3c!--POINT PICKING--\x3e\r\n   <div id="pickpoint-box" ng-click="onEndPick(\'pickpoint-box\')" class="output-box">{{ \'3DHOP.XYZ_PICKED_POINT\' | translate }}\r\n      <hr /><span id="pickpoint-output" ng-click="onEndMeasure(\'pickpoint-output\')" class="output-text"\r\n         onmousedown="event.stopPropagation()">[ 0 , 0 , 0 ]</span></div>\r\n   \x3c!--POINT PICKING--\x3e\r\n   \x3c!--SECTIONS--\x3e\r\n   <div id="sections-box" ng-click="sectiontoolInit" class="output-box">\r\n      <table class="output-table" onmousedown="event.stopPropagation()">\r\n         <tr>\r\n            <td>{{ \'3DHOP.PLANE\' | translate }}</td>\r\n            <td>{{ \'3DHOP.POSITION\' | translate }}</td>\r\n            <td>{{ \'3DHOP.FLIP\' | translate }}</td>\r\n         </tr>\r\n         <tr>\r\n            <td><img id="xplane_on" title="{{ \'3DHOP.DISABLE_X_AXIS_SECTION\' | translate }}" ng-src="js-plugins/tdhop/skins/icons/sectionX_on.png"\r\n                  onclick="sectionxSwitch()" style="position:absolute; visibility:hidden; border:1px inset;" />\r\n               <img id="xplane" title="{{ \'3DHOP.ENABLE_X_AXIS_SECTION\' | translate }}" ng-src="js-plugins/tdhop/skins/icons/sectionX.png"\r\n                  onclick="sectionxSwitch()" /><br /></td>\r\n            <td><input id="xplaneSlider" class="output-input" type="range" title="{{ \'3DHOP.MOVE_X_AXIS_SECTION_POSITION\' | translate }}" /></td>\r\n            <td><input id="xplaneFlip" class="output-input" type="checkbox" title="{{ \'3DHOP.FLIP_X_AXIS_SECTION_DIRECTION\' | translate }}" />\r\n            </td>\r\n         </tr>\r\n         <tr>\r\n            <td><img id="yplane_on" title="{{ \'3DHOP.DISABLE_Y_AXIS_SECTION\' | translate }}" ng-src="js-plugins/tdhop/skins/icons/sectionY_on.png"\r\n                  onclick="sectionySwitch()" style="position:absolute; visibility:hidden; border:1px inset;" />\r\n               <img id="yplane" title="{{ \'3DHOP.ENABLE_Y_AXIS_SECTION\' | translate }}" ng-src="js-plugins/tdhop/skins/icons/sectionY.png"\r\n                  onclick="sectionySwitch()" /><br /></td>\r\n            <td><input id="yplaneSlider" class="output-input" type="range" title="{{ \'3DHOP.MOVE_Y_AXIS_SECTION_POSITION\' | translate }}" /></td>\r\n            <td><input id="yplaneFlip" class="output-input" type="checkbox" title="{{ \'3DHOP.FLIP_Y_AXIS_SECTION_DIRECTION\' | translate }}" />\r\n            </td>\r\n         </tr>\r\n         <tr>\r\n            <td><img id="zplane_on" title="{{ \'3DHOP.DISABLE_Z_AXIS_SECTION\' | translate }}" ng-src="js-plugins/tdhop/skins/icons/sectionZ_on.png"\r\n                  onclick="sectionzSwitch()" style="position:absolute; visibility:hidden; border:1px inset;" />\r\n               <img id="zplane" title="{{ \'3DHOP.ENABLE_Z_AXIS_SECTION\' | translate }}" ng-src="js-plugins/tdhop/skins/icons/sectionZ.png"\r\n                  onclick="sectionzSwitch()" /><br /></td>\r\n            <td><input id="zplaneSlider" class="output-input" type="range" title="{{ \'3DHOP.MOVE_Z_AXIS_SECTION_POSITION\' | translate }}" /></td>\r\n            <td><input id="zplaneFlip" class="output-input" type="checkbox" title="{{ \'3DHOP.FLIP_Z_AXIS_SECTION_DIRECTION\' | translate }}" />\r\n            </td>\r\n         </tr>\r\n      </table>\r\n      <table class="output-table" onmousedown="event.stopPropagation()" style="text-align:right;">\r\n         <tr>\r\n            <td>{{ \'3DHOP.SHOW_PLANES\' | translate }}<input id="showPlane" class="output-input" type="checkbox" title="{{ \'3DHOP.SHOW_SECTION_PLANES\' | translate }}"\r\n                  style="bottom:-3px;" /></td>\r\n            <td>{{ \'3DHOP.SHOW_EDGES\' | translate }}<input id="showBorder" class="output-input" type="checkbox" title="{{ \'3DHOP.SHOW_SECTION_EDGES\' | translate }}"\r\n                  style="bottom:-3px;" /></td>\r\n         </tr>\r\n      </table>\r\n   </div>\r\n   <canvas id="draw-canvas" style="background-image: url(js-plugins/tdhop/skins/backgrounds/light.jpg);"></canvas>\r\n</div>'},function(e,t,n){"use strict";angular.module("evtviewer.tdhop").controller("TreDHOPCtrl",["$scope","$route","evtInterface","$log","config",function(e,t,n,i,o){var r=o.tdhopViewerOptions.Model_1?o.tdhopViewerOptions.Model_1.name:void 0,a=o.tdhopViewerOptions.Model_2?o.tdhopViewerOptions.Model_2.name:void 0;e.change=function(){presenter.setInstanceVisibility(HOP_ALL,!1,!1),presenter.setInstanceVisibility("Mesh_2_mesh",!0,!0)},e.data={model:null,availableOptions:[{id:"Mesh_1_mesh",name:r+" Cross"},{id:"Mesh_2_mesh",name:a+" Cross"}]},e.button={buttonValue:e.data},this.isToolHomeAvailable=function(){return o.tdhopViewerOptions.toolHome},this.isToolZoominAvailable=function(){return o.tdhopViewerOptions.toolZoomin},this.isToolZoomoutAvailable=function(){return o.tdhopViewerOptions.toolZoomout},this.isToolLightingAvailable=function(){return o.tdhopViewerOptions.toolLighting},this.isToolLightControlAvailable=function(){return o.tdhopViewerOptions.toolLightControl},this.isToolPlaneSectionsAvailable=function(){return o.tdhopViewerOptions.toolPlaneSections},this.isToolSolidColorAvailable=function(){return o.tdhopViewerOptions.toolSolidColor},this.isToolCameraAvailable=function(){return o.tdhopViewerOptions.toolCamera},this.isToolMeasureAvailable=function(){return o.tdhopViewerOptions.toolMeasure},this.isToolPickPointAvailable=function(){return o.tdhopViewerOptions.toolPickPoint},this.isToolHotspotAvailable=function(){return o.tdhopViewerOptions.toolHotspot},this.isToolFullScreenAvailable=function(){return o.tdhopViewerOptions.toolFullScreen},this.isToolSwitchModelAvailable=function(){return o.tdhopViewerOptions.toolSwitchModel},this.isToolArrowsAvailable=function(){return o.tdhopViewerOptions.toolArrows},this.isToolLightControllerAvailable=function(){return o.tdhopViewerOptions.toolLightController}}])},function(e,t,n){"use strict";angular.module("evtviewer.navBar",[])},function(e,t,n){"use strict";angular.module("evtviewer.navBar").constant("NAVBARDEFAULTS",{}).config(["evtNavbarProvider","configProvider","NAVBARDEFAULTS",function(e,t,n){var i=t.makeDefaults("navBar",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.navBar").provider("evtNavbar",(function(){this.defaults;this.setDefaults=function(e){e};this.$get=["parsedData","evtInterface",function(e,t){var n={},i={},o=[],r=0,a=function(){var e=this.uid;n.destroy(e)};return n.build=function(n){var s,l=r++;if(void 0===i[l]){var c=e.getPages(),u=e.getDocuments(),d=t.getState("currentDoc"),p=t.getState("currentPage");return s={uid:l,pageSlider:{value:0,options:{floor:0,ceil:c?c.length:0,translate:function(e,t,n){var i=c[e];return c[i]?c[i].label:e},showSelectionBar:!0,hideLimitLabels:!0}},pagesCollection:c,documentsCollection:u,page:p,doc:d,updateOptions:function(e){this.pageSlider.options=e},updateSlider:function(e){var t=this;if(t.pagesCollection){var n=t.pagesCollection._indexes.indexOf(e);t.pageSlider.value!==n&&(t.pageSlider.value=n),t.folio!==e&&(t.folio=e),t.page=e}},updatePage:function(e){if(e){var n=this.pagesCollection[e];t.updateState("currentPage",n);var i=t.getState("currentDoc"),o=this.pagesCollection[n];o&&(o.docs.length>0&&o.docs.indexOf(i)<0&&t.updateState("currentDoc",o.docs[0]),o.docs.length>1&&t.updateState("currentDoc",o.docs[0])),t.updateUrl()}},updateOptionsValue:function(e,t){this.pageSlider.options=this.pageSlider.options?this.pageSlider.options:{},this.pageSlider.options[e]=t},destroy:a},i[l]=angular.extend(n.vm,s),o.push({id:l}),i[l]}},n.destroy=function(e){delete i[e]},n}]}))},function(e,t,n){"use strict";angular.module("evtviewer.navBar").controller("NavbarCtrl",["$log","evtInterface","config",function(e,t,n){var i=e.getInstance("navBar");this.showNavigator=function(){return!t.getState("isThumbNailsOpened")&&!t.getState("isVisCollOpened")},this.config=n,i.log(n,this.config)}])},function(e,t,n){"use strict";angular.module("evtviewer.navBar").directive("evtNavbar",["$timeout","evtNavbar","parsedData","evtInterface",function(e,t,i,o){return{restrict:"E",scope:{},transclude:!0,template:n(374),controllerAs:"vm",controller:"NavbarCtrl",link:function(n,r,a){var s=t.build(n);n.$watch((function(){return i.getPages()}),(function(t,i){i!==t&&(s.updateOptionsValue("floor",0),s.updateOptionsValue("ceil",t?t.length-1:0),s.updateOptionsValue("translate",(function(e,n,i){var o=t[e];return t[o]?t[o].label:e})),e((function(){n.$broadcast("rzSliderForceRender")})))}),!0),n.$watch((function(){return s.pageSlider.value}),(function(e,t){t!==e&&s.updatePage(e)}),!0),n.$watch((function(){return o.getState("currentPage")}),(function(e,t){t!==e&&s.updateSlider(e)}),!0),n.$watch((function(){return s.showNavigator()}),(function(e,t){t!==e&&s.updateOptionsValue("disabled",!e)}),!0),n.$on("$destroy",(function(){s&&s.destroy()}))}}}])},function(e,t){e.exports='<section class="navBarSliderWrapper">\r\n\t<button-switch ng-if="vm.config.thumbnailsButton"\r\n\t\ttitle="{{ \'BUTTONS.THUMBNAILS\' | translate }}"\r\n\t\tdata-icon="thumb-nails"\r\n\t\tdata-type="thumbNails"\r\n\t\tclass="sliders"></button-switch>\r\n\t<button-switch ng-if="vm.config.viscollButton"\r\n\t\ttitle="{{ \'BUTTONS.VISCOLL\' | translate }}"\t\t\r\n\t\tdata-icon="viscoll"\r\n\t\tdata-type="visColl"\r\n\t\tclass="sliders"></button-switch>\r\n\t<div class="navBarSlider">\r\n\t\t<rzslider rz-slider-model="vm.pageSlider.value" rz-slider-options="vm.pageSlider.options" id="slider" data-folio="{{vm.folio}}"></rzslider>\r\n\t</div>\r\n\t\r\n\t<button-switch data-disabled="{{!vm.showNavigator()}}"\r\n\t\ttitle="{{ \'BUTTONS.PAGE_FIRST\' | translate }}"\r\n\t\tdata-icon="first-page" \r\n\t\tdata-type="firstPage"\r\n\t\tclass="sliders"></button-switch>\r\n\t<button-switch data-disabled="{{!vm.showNavigator()}}"\r\n\t\ttitle="{{ \'BUTTONS.PAGE_PREVIOUS\' | translate }}"\r\n\t\tdata-icon="prev-page"\r\n\t\tdata-type="prevPage"\r\n\t\tclass="sliders"></button-switch>\r\n\t<button-switch data-disabled="{{!vm.showNavigator()}}"\r\n\t\ttitle="{{ \'BUTTONS.PAGE_NEXT\' | translate }}"\r\n\t\tdata-icon="next-page" \r\n\t\tdata-type="nextPage"\r\n\t\tclass="sliders"></button-switch>\r\n\t<button-switch data-disabled="{{!vm.showNavigator()}}"\r\n\t\ttitle="{{ \'BUTTONS.PAGE_LAST\' | translate }}"\r\n\t\tdata-icon="last-page" \r\n\t\tdata-type="lastPage"\r\n\t\tclass="sliders"></button-switch>\r\n</section>\r\n\x3c!-- avanti e fine a sx, dietro e inizio a dx--\x3e'},function(e,t,n){"use strict";angular.module("evtviewer.visColl",[])},function(e,t,n){"use strict";angular.module("evtviewer.visColl").constant("VISCOLLDEFAULTS",{}).config(["evtViscollProvider","configProvider","VISCOLLDEFAULTS",function(e,t,n){var i=t.makeDefaults("visColl",n);e.setDefaults(i)}])},function(e,t,n){"use strict";angular.module("evtviewer.visColl").provider("evtViscoll",(function(){this.defaults;this.setDefaults=function(e){e};this.$get=["$timeout","parsedData",function(e,t){var n={},i={},o=[],r=0,a=function(){var e=this.uid;n.destroy(e)};return n.build=function(n){var s,l=r++;if(void 0===i[l]){return s={uid:l,svgCollection:t.getViscollSvgs(),selectedQuire:void 0,quireOptions:[],selectedFolios:void 0,getSvgByQuire:function(e){return this.svgCollection.svgs[e]&&this.svgCollection.svgs[e].textSvg?this.svgCollection.svgs[e].textSvg.outerHTML:"<span>No data</span>"},getSvgQuireN:function(e){return this.svgCollection.svgs[e].quireN},getQuire:function(e){return this.svgCollection.quires[e]||{}},getQuireBySvgId:function(e){var t=this.getSvgQuireN(e);return this.getQuireByNumber(t)},getQuireByNumber:function(e){for(var t,n=0;!t&&n<this.svgCollection.quires._indexes.length;){var i=this.svgCollection.quires._indexes[n];this.svgCollection.quires[i].n===e&&(t=this.svgCollection.quires[i]),n++}return t},getQuireIdBySvgId:function(e){return this.getQuireBySvgId(e).value},getFilteredQuireLeaves:function(e){for(var t=this.svgCollection.quires[e].leaves,n=[],i=[],o=0;o<t._indexes.length;o++){var r=t._indexes[o],a=t[r];if(a){var s=a.conjoin?t[a.conjoin]:void 0,l=!1;s&&(a.label=a.leafno+" - "+s.leafno,l=i.indexOf(s.value)>-1),l||(n.push(a),i.push(r))}}return{leaves:n,leavesInsertedInSelector:i}},getAllQuireLeaves:function(e){for(var t=this.svgCollection.quires[e].leaves,n=[],i=0;i<t._indexes.length;i++)n.push(t[t._indexes[i]]);return n},isSelectedQuire:function(e){return!this.selectedQuire||e===this.selectedQuire.value},displayResult:function(){var n=this;n.svgCollection=t.getViscollSvgs();var i=[];if(n.svgCollection.quires._indexes)for(var o=0;o<n.svgCollection.quires._indexes.length;o++){var r=n.svgCollection.quires._indexes[o],a=n.svgCollection.quires[r];i.push({value:a.value,label:a.n,title:a.n});var s=n.getFilteredQuireLeaves(r);a.leavesList=s.leaves,a.leavesInsertedInSelector=s.leavesInsertedInSelector}n.quireOptions=i,e((function(){var e=angular.element(".viscollContainer svg > g");e&&(e.click((function(e){try{var t=angular.element(e.delegateTarget).parents(".viscollContainer")[0].id,i=e.delegateTarget.id,o=n.svgCollection.quires[t].leaves[i];if(n.svgCollection.quires[t].leavesInsertedInSelector&&n.svgCollection.quires[t].leavesInsertedInSelector.indexOf(i)>-1)n.setSelectedFolioForQuire(t,o);else{var r=n.svgCollection.quires[t].leaves[o.conjoin];n.setSelectedFolioForQuire(t,r)}}catch(e){console.log(e)}})),e.hover((function(e){try{var t=angular.element(e.delegateTarget).parents(".viscollContainer")[0].id,i=e.delegateTarget.id,o=n.svgCollection.quires[t].leaves[i];if(o){var r=angular.element("#"+o.value),a=angular.element(".over_unit");a&&a.removeClass("over_unit"),r.addClass("over_unit")}if(!n.svgCollection.quires[t].leavesInsertedInSelector||n.svgCollection.quires[t].leavesInsertedInSelector.indexOf(i)<0)angular.element("#"+o.conjoin).addClass("over_unit")}catch(e){console.log(e)}})),e.mouseout((function(e){var t=angular.element(".over_unit");t&&t.removeClass("over_unit")})))}))},setSelectedQuire:function(e){e&&e.value?this.selectedQuire={value:e.value,n:e.label}:this.selectedQuire=void 0},setSelectedFolioForQuire:function(e,t){var n=this;n.selectedFolios=n.selectedFolios?n.selectedFolios:{};var i=n.svgCollection.quires[e].leaves[t.value];if(i){if(!(i.imageId&&i.imageId2&&i.conjoinId&&i.conjoinId2)){var o=n.svgCollection.quires[e].leaves[t.conjoin];o&&(i.imageId||(i.img=o.imgConjoin,i.imageId=o.conjoinId),i.imageId2||(i.img2=o.imgConjoin2,i.imageId2=o.conjoinId2),i.conjoinId||(i.imgConjoin=o.img,i.conjoinId=o.imageId),i.conjoinId2||(i.imgConjoin2=o.img2,i.conjoinId2=o.imageId2))}i.unitN=t.label}n.selectedFolios[e]=i;var r=angular.element("#"+e+" .active_unit");r&&(r.removeClass("active_unit"),r.removeClass("first_unit"),r.removeClass("second_unit"));var a=angular.element("#"+t.value);a&&(a.addClass("active_unit"),a.addClass("first_unit"));try{for(var s,l=n.svgCollection.quires[e],c=0;!s&&c<l.leaves._indexes.length;){var u=l.leaves._indexes[c];l.leaves[u].value===t.value&&(s=l.leaves[u]),c++}if(s&&s.conjoin){var d=angular.element("#"+s.conjoin);d.addClass("active_unit"),d.addClass("second_unit")}}catch(e){console.log(e)}},destroy:a},i[l]=angular.extend(n.vm,s),o.push({id:l}),i[l]}},n.destroy=function(e){delete i[e]},n}]}))},function(e,t,n){"use strict";angular.module("evtviewer.visColl").controller("ViscollCtrl",["config","$log","$scope","$filter","evtNavbar","parsedData","evtInterface","evtSelect","evtButtonSwitch",function(e,t,n,i,o,r,a,s,l){t.getInstance("visColl");this.updateCurrentPage=function(e){if(e){var t=r.getPages();for(var n in t)void 0!==t[n].n&&t[n].n===e&&(a.updateState("currentPage",n),a.updateState("isVisCollOpened",!1));var i=l.getByType("visColl");i&&i.forEach((function(e){e.setActive(!1)})),a.updateUrl()}}}])},function(e,t,n){"use strict";angular.module("evtviewer.visColl").directive("evtViscoll",["evtViscoll","parsedData","evtInterface",function(e,t,i){return{restrict:"E",scope:{},transclude:!0,template:n(380),controllerAs:"vm",controller:"ViscollCtrl",link:function(n,o,r){var a=e.build(n);n.$watch((function(){return t.areViscollSvgsLoaded()}),(function(e,t){t!==e&&!0===e&&a.displayResult()}),!0),n.$watch((function(){return i.getState("currentViewMode")}),(function(e,t){t!==e&&(i.updateState("isThumbNailsOpened",!1),i.updateState("isVisCollOpened",!1))}),!0),n.$on("$destroy",(function(){a&&a.destroy()}))}}}])},function(e,t){e.exports='\x3c!-- <script type="text/javascript" src="./src/visColl/SaxonJS.min.js"><\/script> --\x3e\r\n<div class="selectorDiv">\r\n    <form name="quireForm" class="quireSelector">\r\n        <label for="quireSelect">{{ \'VISCOLL.SELECT_QUIRE\' | translate }}:</label>\r\n        <evt-select ng-if="vm.quireOptions && vm.quireOptions.length > 0"\r\n            data-id="viscoll_quire" data-smaller="true"\r\n            data-type="generic" data-empty-option="true"\r\n\t\t\tdata-options="vm.quireOptions" \r\n\t\t\tdata-init="{{vm.selectedQuire.value}}"\r\n\t\t\ton-option-selected="vm.setSelectedQuire(option)">\r\n        </evt-select>\r\n\t</form>\r\n</div>\r\n<div class="viscollItemsContainer">\r\n    <div class="viscollContainer" id="{{quireId}}"\r\n\t\tng-repeat="quireId in vm.svgCollection.quires._indexes track by $index"\r\n    \tng-show="vm.isSelectedQuire(quireId)"\r\n    \tng-class="{\'selected\' : vm.isSelectedQuire(quireId) }">\r\n        <div class="viscollItem-leftContainer">\r\n\t\t\t<span class="quireNumber">{{ \'VISCOLL.QUIRE_NUM\' | translate }} {{vm.svgCollection.quires[quireId].n}}</span>\r\n\t        <div class="visCollValue" type="image/svg+xml" \r\n\t            compile="::vm.getSvgByQuire(quireId)">\r\n\t        </div>\r\n\t    </div>\r\n        <div class="viscollItem-rightContainer">\r\n\t        <div class="selectorViscoll">\r\n\t\t\t\t<span class="viscollNumber">\r\n\t\t\t\t\t{{ \'VISCOLL.UNIT\' | translate }}:\r\n\t\t\t\t</span>\r\n\t\t\t\t<evt-select ng-if="vm.svgCollection.quires[quireId].leavesList && vm.svgCollection.quires[quireId].leavesList.length > 0"\r\n\t\t\t\t\tdata-id="folioSelect_{{$index}}" data-smaller="true"\r\n\t\t\t\t\tdata-type="generic" data-empty-option="true" \r\n\t\t\t\t\tdata-init="{{vm.selectedFolios[quireId].value}}"\r\n\t\t\t\t\tdata-selected-option="{{vm.selectedFolios[quireId].value}}"\r\n\t\t\t\t\tdata-options="::vm.svgCollection.quires[quireId].leavesList" \r\n\t\t\t\t\ton-option-selected="vm.setSelectedFolioForQuire(quireId, option)">\r\n\t\t\t\t</evt-select>\r\n\t        </div>\r\n\t        <div class="imgSelectorViscoll" \r\n\t        \tng-if="vm.selectedFolios[quireId]">\r\n\t\t\t\t<figure class="thumbnail thumb_single second_unit {{vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode}}" \r\n\t\t\t\t\tng-click="vm.updateCurrentPage(vm.selectedFolios[quireId].conjoinId)">\r\n\t\t\t\t\t<img class="thumb_single_img"\r\n\t\t\t\t\t\tonerror="this.setAttribute(\'src\', \'images/empty-image.jpg\')"\r\n\t\t\t\t\t\tng-src="{{vm.selectedFolios[quireId].imgConjoin || \'images/empty-image.jpg\'}}"\r\n\t\t\t\t\t\ttitle="{{ vm.selectedFolios[quireId].conjoinId ? \'BUTTONS.GO_TO_PAGE\' : \'\' | translate }}"\r\n\t\t\t\t\t\t></img>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode !== \'notLeaf\'">\r\n\t\t\t\t\t\t{{ vm.selectedFolios[quireId].conjoinId || \r\n\t\t\t\t\t\t(vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode === \'original\' ? \'NO_INFO\' : vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode) || \r\n\t\t\t\t\t\t\'NO_INFO\' | translate}}</figcaption>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode === \'notLeaf\'">\r\n\t\t\t\t\t\t<i class="icon fa fa-remove"></i></figcaption>\r\n\t\t\t\t</figure>\r\n\t\t\t\t<figure class="thumbnail thumb_single first_unit {{vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode}}" \r\n\t\t\t\t\tng-click="vm.updateCurrentPage(vm.selectedFolios[quireId].imageId)">\r\n\t\t\t\t\t<img class="thumb_single_img" \r\n\t\t\t\t\t\tonerror="this.setAttribute(\'src\', \'images/empty-image.jpg\')"\r\n\t\t\t\t\t\tng-src="{{vm.selectedFolios[quireId].img || \'images/empty-image.jpg\'}}"\r\n\t\t\t\t\t\ttitle="{{ vm.selectedFolios[quireId].imageId ? \'BUTTONS.GO_TO_PAGE\' : \'\' | translate }}"></img>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode !== \'notLeaf\'">{{vm.selectedFolios[quireId].imageId || \r\n\t\t\t\t\t\t(vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode === \'original\' ? \'NO_INFO\' : vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode) || \r\n\t\t\t\t\t\t\'NO_INFO\' | translate}}</figcaption>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode === \'notLeaf\'">\r\n\t\t\t\t\t\t<i class="icon fa fa-remove"></i></figcaption>\r\n\t\t\t\t</figure>\r\n\t\t\t\t<figure class="thumbnail thumb_single first_unit {{vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode}}" \r\n\t\t\t\t\tng-click="vm.updateCurrentPage(vm.selectedFolios[quireId].imageId2)">\r\n\t\t\t\t\t<img class="thumb_single_img" \r\n\t\t\t\t\t\tonerror="this.setAttribute(\'src\', \'images/empty-image.jpg\')"\r\n\t\t\t\t\t\tng-src="{{vm.selectedFolios[quireId].img2 || \'images/empty-image.jpg\'}}"\r\n\t\t\t\t\t\ttitle="{{ vm.selectedFolios[quireId].imageId2 ? \'BUTTONS.GO_TO_PAGE\' : \'\' | translate }}"></img>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode !== \'notLeaf\'">\r\n\t\t\t\t\t\t{{vm.selectedFolios[quireId].imageId2 || \r\n\t\t\t\t\t\t(vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode === \'original\' ? \'NO_INFO\' : vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode) || \r\n\t\t\t\t\t\t\'NO_INFO\' | translate}}</figcaption>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].value].mode === \'notLeaf\'">\r\n\t\t\t\t\t\t<i class="icon fa fa-remove"></i></figcaption>\r\n\t\t\t\t</figure>\r\n\t\t\t\t<figure class="thumbnail thumb_single second_unit {{vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode}}" \r\n\t\t\t\t\tng-click="vm.updateCurrentPage(vm.selectedFolios[quireId].conjoinId2)">\r\n\t\t\t\t\t<img class="thumb_single_img" \r\n\t\t\t\t\t\tonerror="this.setAttribute(\'src\', \'images/empty-image.jpg\')"\r\n\t\t\t\t\t\tng-src="{{vm.selectedFolios[quireId].imgConjoin2 || \'images/empty-image.jpg\'}}"\r\n\t\t\t\t\t\ttitle="{{ vm.selectedFolios[quireId].conjoinId2 ? \'BUTTONS.GO_TO_PAGE\' : \'\' | translate }}"></img>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode !== \'notLeaf\'">\r\n\t\t\t\t\t\t{{vm.selectedFolios[quireId].conjoinId2 || \r\n\t\t\t\t\t\t(vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode === \'original\' ? \'NO_INFO\' : vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode) || \r\n\t\t\t\t\t\t\'NO_INFO\' | translate}}</figcaption>\r\n\t\t\t\t\t<figcaption ng-if="vm.svgCollection.quires[quireId].leaves[vm.selectedFolios[quireId].conjoin].mode === \'notLeaf\'">\r\n\t\t\t\t\t\t<i class="icon fa fa-remove"></i></figcaption>\r\n\t\t\t\t</figure>\r\n\t        </div>\r\n\t        <div  class="imgSelectorViscoll_empty" \r\n\t        \tng-if="!vm.selectedFolios[quireId]">\r\n\t        \t<span>{{ \'VISCOLL.SELECT_UNIT_MSG\' | translate }}</span>\r\n\t        </div>\r\n\t    </div>\r\n    </div>\r\n</div>'}]);
//# sourceMappingURL=evtviewer.bundle.js.map